/*
* @license
* (c) 2011-2015 Corporate Web Solutions Ltd. This software may be used to support and facilitate your
* development utilizing JSCharting if you hold a valid license for JSCharting.  This software may not
* be used or integrated for any task independent of its JSCharting support role.
* Please see https://jscharting.com/store/ for JSCharting licensing options.
*
* */
jQuery(function(){initClearFields();initLayoutResize()});function initLayoutResize(){"undefined"==typeof JSCTools&&(JSCTools={});JSCTools.g=JSCTools.g||{};JSCTools.g.splitter=new LayoutResize}function timerMe(){$.proxy(function(){this.fixLayout();this.fixMainHeight()},this)}
(function(a){function e(b){if("sidebar"===b[0].id){var a=document.getElementById("switchUI"),d=a.getAttribute("class");-1==d.indexOf("off")&&0<=b[0].className.indexOf("collapsed")?(GLOBAL.is_UI_hidden=!0,a.setAttribute("class","switch-area black off ")):(GLOBAL.is_UI_hidden=!1,a.setAttribute("class","switch-area black "))}else a=document.getElementById("switchDocs"),d=a.getAttribute("class"),-1==d.indexOf("off")&&0<=b[0].className.indexOf("collapsed")?a.setAttribute("class","switch-area black off "):
a.setAttribute("class","switch-area black ")}LayoutResize=function(){this.init.apply(this,arguments)};LayoutResize.prototype={init:function(b){this.o=a.extend({header:"#header",footer:"#footer",main:"#main",sidebar:"#sidebar",sidebarScroll:"#sidebar div.sidebar-holder",tabsetClass:".tabset",content:"#content",visual:"#content div.visual",visualInnerContent:"img",aside:"div.aside",contentScrollBlocks:"div.block-in-holder, div.aside-holder",bottomContent:"div.box-area",vertResizer:"#content .splitter",
rightResizer:"div.aside .splitter-v",leftResizer:"#sidebar .sidebar-splitter",collapsedClass:"collapsed",animatedClass:"animated",vResizeClass:"v-resize",hResizeClass:"h-resize",opener:"a.open",slideSpeed:400,openCloseMinWidth:5},b);this.findElements();this.addEvents();this.visualResize();this.asideResize();this.sidebarResize();this.openClose(this.aside,this.content);this.openClose(this.sidebar,this.main);this.scrollHeight=scrollSize.getHeight();document.getElementById("switchUI").onclick=function(){var b=
document.getElementById("sideUIButton");if(b.click)b.click();else if(document.createEvent){var a=document.createEvent("MouseEvents");a.initEvent("click",!0,!0);b.dispatchEvent(a)}};document.getElementById("switchDocs").onclick=function(){var b=document.getElementById("sideDocButton");if(b.click)b.click();else if(document.createEvent){var a=document.createEvent("MouseEvents");a.initEvent("click",!0,!0);b.dispatchEvent(a)}};document.getElementById("buttonLeft").onclick=function(b){};document.getElementById("buttonRight").onclick=
function(b){}},findElements:function(){this.win=a(window);this.body=a("body");this.header=a(this.o.header);this.footer=a(this.o.footer);this.main=a(this.o.main);this.sidebar=a(this.o.sidebar);this.sidebarScroll=a(this.o.sidebarScroll);this.sidebarTabset=this.sidebar.find(this.o.tabsetClass);this.content=a(this.o.content);this.bottomContent=a(this.o.bottomContent);this.visual=a(this.o.visual);this.aside=a(this.o.aside);this.asideHolderBox=this.aside.find(this.o.contentScrollBlocks);this.asideTabset=
this.aside.find(this.o.tabsetClass);this.contentScrollBlocks=this.content.find(this.o.contentScrollBlocks);this.vertResizer=a(this.o.vertResizer);this.rightResizer=a(this.o.rightResizer);this.leftResizer=a(this.o.leftResizer);this.resizers=this.rightResizer.add(this.leftResizer)},addEvents:function(){this.lastWindowHeight=this.win.height();this.lastWindowWidth=this.win.width();this.win.bind("load",a.proxy(function(){this.fixLayout();this.fixMainHeight()},this)).bind("resize",a.proxy(function(){clearTimeout(this.timer);
this.timer=setTimeout(timerMe,50);if(this.win.height()!=this.lastWindowHeight||this.win.width()!=this.lastWindowWidth)this.lastWindowHeight=this.win.height(),this.lastWindowWidth=this.win.width(),this.fixLayout(),this.fixMainHeight()},this))},fixLayout:function(){this.resetHeight();this.fixSidebarHeight();this.fixContentHeight();this.fixResizersHeight();this.fixBottomContentHeight()},fixMainHeight:function(){this.main.css({height:0}).css({height:this.win.height()-this.main.offset().top-this.footer.height()})},
resetHeight:function(){this.sidebarScroll.add(this.contentScrollBlocks).add(this.resizers).css({height:0})},fixSidebarHeight:function(){this.sidebarScroll.css({height:0}).css({height:Math.max(this.win.height(),this.body.height())-this.sidebarScroll.offset().top-this.footer.outerHeight(!0)})},fixContentHeight:function(){this.contentScrollBlocks.css({height:0}).each(a.proxy(function(b,c){var d=a(c);d.css({height:this.win.height()-d.offset().top-parseInt(d.css("paddingTop"))-parseInt(d.css("paddingBottom"))-
this.footer.outerHeight(!0)})},this))},fixResizersHeight:function(){this.resizers.css({height:0}).each(a.proxy(function(b,c){a(c).css({height:a(c).parent().outerHeight()})},this))},fixBottomContentHeight:function(){this.bottomContent.css({height:0}).css({height:this.win.height()-this.bottomContent.offset().top-this.footer.height()});this.visual.height()>this.win.height()-this.footer.height()-this.visual.offset().top-this.vertResizer.outerHeight(!0)&&this.visual.css({height:this.win.height()-this.footer.height()-
this.visual.offset().top-this.vertResizer.outerHeight(!0)})},visualResize:function(){this.visualResizeDrag=!1;this.vertResizer.bind("mousedown",a.proxy(function(b){this.visualResizeDrag=!0;this.startOffset=b.pageY;this.startHeight=this.visual.height();this.setDragClass("vertical");b.preventDefault()},this));this.body.bind("mousemove",a.proxy(function(b){if(this.visualResizeDrag){var a=this.startHeight+(b.pageY-this.startOffset),d=this.startHeight+(b.pageY-this.startOffset),e=this.win.height()-this.footer.height()-
this.visual.offset().top-this.vertResizer.outerHeight(!0);this.visual.css({height:Math.min(a,d,e)});this.fixLayout();b.preventDefault()}},this)).bind("mouseup",a.proxy(function(){this.visualResizeDrag&&(this.visualResizeDrag=!1,this.removeDragClass(),GLOBAL.aceEditor.resize())},this))},asideResize:function(){this.asideResizeDrag=!1;this.aside.data("width",this.getPercentWidth(this.aside.width(),this.content));this.asideHolderBox.bind("scroll",a.proxy(function(){this.asideTabset.css({marginLeft:-this.asideHolderBox.scrollLeft()})},
this));this.rightResizer.bind("mousedown",a.proxy(function(b){this.asideResizeDrag=!0;this.startOffset=b.pageX;this.startWidth=this.aside.width();this.setDragClass("horizontal");b.preventDefault()},this));this.body.bind("mousemove",a.proxy(function(b){this.asideResizeDrag&&(this.asideWidth=Math.min(this.startWidth+(this.startOffset-b.pageX),this.content.width()/2),20>this.asideWidth?(this.asideWidth=0,this.aside.addClass(this.o.collapsedClass)):this.aside.removeClass(this.o.collapsedClass),this.asideWidth=
this.getPercentWidth(this.asideWidth,this.content),this.aside.css({width:this.asideWidth+"%"}).data("width",this.asideWidth),this.fixContentHeight(),b.preventDefault())},this)).bind("mouseup",a.proxy(function(){this.asideResizeDrag&&(this.asideResizeDrag=!1,this.removeDragClass(),GLOBAL.aceEditor.resize())},this))},sidebarResize:function(){this.sidebarResizeDrag=!1;this.sidebar.data("width",this.getPercentWidth(this.sidebar.width(),this.main));this.sidebarScroll.bind("scroll",a.proxy(function(){this.sidebarTabset.css({marginLeft:-this.sidebarScroll.scrollLeft()})},
this));this.leftResizer.bind("mousedown",a.proxy(function(b){this.sidebarResizeDrag=!0;this.startOffset=b.pageX;this.startWidth=this.sidebar.width();this.setDragClass("horizontal");b.preventDefault()},this));this.body.bind("mousemove",a.proxy(function(b){this.sidebarResizeDrag&&(this.sidebarWidth=Math.min(this.startWidth+(b.pageX-this.startOffset),this.main.width()/2),20>this.sidebarWidth?(this.sidebarWidth=0,this.sidebar.addClass(this.o.collapsedClass)):this.sidebar.removeClass(this.o.collapsedClass),
this.sidebarWidth=this.getPercentWidth(this.sidebarWidth,this.main),this.sidebar.css({width:this.sidebarWidth+"%"}).data("width",this.sidebarWidth),this.fixLayout(),b.preventDefault())},this)).bind("mouseup",a.proxy(function(){this.sidebarResizeDrag&&(this.sidebarResizeDrag=!1,this.removeDragClass())},this))},openClose:function(b,c){b.find(this.o.opener).bind("click",a.proxy(function(d){GLOBAL.reportAction(d.originalEvent.target,"click");b.addClass(this.o.animatedClass);b.hasClass(this.o.collapsedClass)?
b.stop().animate({width:Math.max(this.getPixelWidth(b.data("width"),c),this.getPixelWidth(this.o.openCloseMinWidth,c))},{duration:this.o.slideSpeed,complete:a.proxy(function(){b.removeClass(this.o.animatedClass);b.css({width:Math.max(b.data("width"),this.o.openCloseMinWidth)+"%"});this.fixLayout();e(b)},this)}).removeClass(this.o.collapsedClass):b.stop().animate({width:0},{duration:this.o.slideSpeed,complete:a.proxy(function(){b.addClass(this.o.collapsedClass);b.removeClass(this.o.animatedClass);
this.fixLayout();e(b)},this)});d.preventDefault()},this))},getPercentWidth:function(b,a){return b/(a.width()/100)},getPixelWidth:function(b,a){return b*(a.width()/100)},getVisualScrollHeight:function(){return this.visual.width()>=this.visual.find(this.o.visualInnerContent).width()?0:this.scrollHeight},setDragClass:function(b){this.body.addClass("vertical"==b?this.o.vResizeClass:this.o.hResizeClass)},removeDragClass:function(){this.body.removeClass(this.o.vResizeClass+" "+this.o.hResizeClass)}}})(jQuery);
var scrollSize=function(){function a(a){b&&(document.body.removeChild(b),b=null);e=document.createElement("div");b=document.createElement("div");b.style.cssText="position:absolute;overflow:hidden;width:100px;height:100px";b.appendChild(e);document.body.appendChild(b);e.style.cssText="height:"+(a?"100%":"200px");c=a?e.offsetHeight:e.offsetWidth;b.style.overflow="scroll";e.innerHTML=1;d=a?e.offsetHeight:e.offsetWidth;a&&b.clientHeight&&(d=b.clientHeight);document.body.removeChild(b);b=null;return c-
d}var e,b,c,d;return{getWidth:function(){return a(!1)},getHeight:function(){return a(!0)}}}();function initClearFields(){clearFormFields({clearInputs:!0,clearTextareas:!0,passwordFieldText:!0,filterClass:"default"})}
function clearFormFields(a){function e(a,b){a&&(a.style.display="none");b&&(b.style.display="inline")}null==a.clearInputs&&(a.clearInputs=!0);null==a.clearTextareas&&(a.clearTextareas=!0);null==a.passwordFieldText&&(a.passwordFieldText=!1);null==a.addClassFocus&&(a.addClassFocus=!1);a.filter||(a.filter="default");if(a.clearInputs)for(var b=document.getElementsByTagName("input"),c=0;c<b.length;c++)if(("text"==b[c].type||"password"==b[c].type)&&b[c].className.indexOf(a.filterClass))if(b[c].valueHtml=
b[c].value,b[c].onfocus=function(){this.valueHtml==this.value&&(this.value="");this.fake&&(e(this,this.previousSibling),this.previousSibling.focus());a.addClassFocus&&!this.fake&&(this.className+=" "+a.addClassFocus,this.parentNode.className+=" parent-"+a.addClassFocus)},b[c].onblur=function(){""==this.value&&(this.value=this.valueHtml,a.passwordFieldText&&"password"==this.type&&e(this,this.nextSibling));a.addClassFocus&&(this.className=this.className.replace(a.addClassFocus,""),this.parentNode.className=
this.parentNode.className.replace("parent-"+a.addClassFocus,""))},a.passwordFieldText&&"password"==b[c].type){var d=document.createElement("input");d.type="text";d.value=b[c].value;d.className=b[c].className;d.fake=!0;b[c].parentNode.insertBefore(d,b[c].nextSibling);e(b[c],null)}if(a.clearTextareas){b=document.getElementsByTagName("textarea");for(c=0;c<b.length;c++)b[c].className.indexOf(a.filterClass)&&(b[c].valueHtml=b[c].value,b[c].onfocus=function(){this.value==this.valueHtml&&(this.value="");
a.addClassFocus&&(this.className+=" "+a.addClassFocus,this.parentNode.className+=" parent-"+a.addClassFocus)},b[c].onblur=function(){""==this.value&&(this.value=this.valueHtml);a.addClassFocus&&(this.className=this.className.replace(a.addClassFocus,""),this.parentNode.className=this.parentNode.className.replace("parent-"+a.addClassFocus,""))})}};
 (function(){var e={},f={},d=function(){return{map:{objects:"configs",enums:"enums"},objectsDescription:"JSON configuration objects used to specify settings for the chart.",objects:{chart:{type:"object",description:"The top level chart configuration API.<br> var chart = new JSC.Chart({/*Chart Configuration*/});",seealso:"Tutorials.firstChart",object:{renderMode:{type:"enum_renderMode",description:"Specifies whether the chart is rendered using JavaScript or Silverlight.",def:"'JavaScript'"},animation:{type:"obj_animation",
description:"Specifies the animation settings for all animation scenarios such as real-time data updates."},type:{type:"enum_chartType",description:'The fundamental Chart Type such as horizontal or vertical. See <a href="Enums.seriesType">seriesType enum</a> for line, bar, area varieties. This can be set through <a href="Types.series.type">chart.defaultSeries.type</a>',seealso:"Tutorials.chartTypes:Describes how to define specific chart types."},targetElement:{type:"string",description:"Specifies the ID of the HTML element to which this chart is added.",
def:"'container_Chart'"},template:{type:"obj_chart",description:"Configuration object of a chart template to apply to this chart.",remarks:"A single template with common settings can be made and used by all charts on a website to make developing charts faster while maintaining the same look and behavior."},defaultSeries:{type:"obj_series",description:"Options applied to all series on this chart. It's recommended to use this property to reduce the amount of coding necessary when applying settings to multiple series."},
defaultPoint:{type:"obj_point",description:"Options applied to all points on this chart."},defaultAnnotation:{type:"obj_annotation",description:"Default annotation settings.",support:{test:["(usingSL)","The defaultAnnotation setting is not supported with Silverlight."]}},defaultCultureName:{type:"enum_cultures",description:"Default culture name used when formatting values on this chart.",def:"'en-US'",seealso:"Tutorials.labelFormatting"},palette:{type:"enum_palette,array,obj_smartPalette",description:"Palette used for series on this chart. Can be a palette name or array of colors.",
array:{arrayType:"specific",description:"An array of colors used by each series.",types:[{type:"obj_color"}]},enum_palette:{description:"A predefined color palette.",ui:"PalettePicker"}},width:{type:"number,string",def:640,number:{description:"in pixels.",min:0,max:32E3},string:{description:"as percentage of parent element.",format:"^[0-9]+%$",example:"'100%'"},description:"Width of the chart in pixels or percentage of container."},height:{type:"number,string",number:{description:"chart height in pixels.",
min:0,max:32E3,def:350},string:{description:"chart height percentage of parent element.",format:"^[0-9]+%$"},description:"Height of the chart in pixels or percentage of container."},annotations:{type:"array",description:"An array of annotations placed on the chart at arbitrary positions.",sample:"Samples.arbitraryAnnotations",array:{arrayType:"specific",types:[{description:"An annotation added to the chart.",type:"obj_annotation"}]}},fill:{type:"obj_color",description:"Color of the chart image background.",
remarks:"Same as setting chart.box.fill.<br> NOTE: This property must be set with a color value. The fill object is not supported.",def:'"rgb(250,250,250)"',hide:!0},box:{type:"object",description:"Visual properties of a box surrounding the chart image.",object:{outline:{type:"obj_outline",description:"Outline surrounding the chart image."},radius:{type:"number",description:"Corner radius of the box surrounding the chart."},fill:{type:"obj_color",description:"Color of the box surrounding the chart image. Effectively the chart background color. NOTE: This property must be set with a color value. The fill object is not supported."}}},
debug:{type:"bool",description:"Enables or disables warning messages in the browser console."},xAxis:{type:"obj_axis,array",description:"The main x axis or array of x axes used on the charts.",array:{description:"An array of axes bound to either a series or another x Axis.",arrayType:"specific",types:[{type:"obj_axis"}],support:{sl:[!1,"The Silverlight chart module doesn't currently support multiple axes."],test:["(usingSL && myProp.type=='array' && myProp.value.length>1)","The Silverlight chart module doesn't currently support multiple axes."]}}},
yAxis:{type:"array,obj_axis",description:"The main y axis or array of y axes used on the charts.",array:{description:"An array of axes bound to either a series or another y Axis.",arrayType:"specific",types:[{type:"obj_axis"}],support:{sl:[!1,"The Silverlight chart module doesn't currently support multiple axes."],test:["(usingSL && myProp.type=='array' && myProp.value.length>1)","The Silverlight chart module doesn't currently support multiple axes."]}}},zAxisFormatString:{type:"string",version:"1.1",
description:"Format string used for values on the z axis. Values associated with this axis including point labels, tooltips, among others will inherit this format by default.",seealso:"Tutorials.labelFormatting|Samples.AxisFormatting"},zAxisCultureName:{type:"enum_cultures",version:"1.1",description:"Culture name used for formatting values on the axis.",seealso:"Tutorials.labelFormatting"},zAxisLabelText:{type:"string",version:"1.1",description:"Defines a label description for z data.",remarks:"Currently this is used with automatic tooltip descriptions."},
legend:{type:"obj_legend",description:"Chart legend box options.",seealso:"Tutorials.legend"},title:{type:"obj_titleBox",description:"Chart title box options."},chartArea:{type:"obj_chartArea,array",description:"Chart area related settings.",remarks:"With navigator charts, multiple chart areas are supported.",array:{validator:function(a,b,c,d){JSCL.jL.evalPath(c,"renderMode");b=!1;-1<JSCL.jL.evalPath(c,"type").toLowerCase().indexOf("navigator")&&(b=!0);if(!b&&d&&1<a.length)return{message:"Only Silverlight and JavaScript navigator support multiple chart areas at this time."}},
arrayType:"specific",description:"An array of chart area objects supported when used with Navigator.",types:[{type:"obj_chartArea"}],support:{hc:[!1,"Only Silverlight and JavaScript navigator support multiple chart areas at this time."],test:["(usingHC && myProp.type=='array' && myProp.value.length>1)","Only Silverlight and JavaScript navigator support multiple chart areas at this time."]}}},series:{type:"array",description:"An array of series drawn on the chart.",array:{arrayType:"specific",types:[{description:"A series added to the chart",
type:"obj_series"}]},seealso:"Tutorials.populateData"},languageStrings:{type:"obj_languageStrings",description:"A number of strings used on the chart.",support:{test:["(usingSL)","Silverlight does not support the languageStrings property features."]}},events:{type:"object",description:"Chart and chart area specific events.",object:{click:{type:"obj_eventHandler",inline:!0,description:"Fires when the chartArea is clicked.",remarks:'In the function, the "this" keyword refers to the chart object. An event parameter is passed to the specified function. It contains  e.xAxis & e.yValue properties which are arrays of objects with axis and value properties. The value property refers to the axis value at the clicked position. e.yAxis[0].axis and e.xAxis[0].axis refer to the primary axes.'},
addSeries:{type:"obj_eventHandler",inline:!0,description:"Fires when a series is added to the chart.",remarks:'In the function, the "this" keyword refers to the chart object. An event parameter is passed to the specified function. The e.options property contains info about the series that was added to the chart. Returning flase prevents the series from being added.'},load:{type:"obj_eventHandler",inline:!0,description:"Fires when the chart is finished loading.",remarks:'In the function, the "this" keyword refers to the chart object. An event parameter is passed to the specified function.'},
redraw:{type:"obj_eventHandler",inline:!0,description:"Fires when the chart redraws.",remarks:'In the function, the "this" keyword refers to the chart object. An event parameter is passed to the specified function.'},selection:{type:"obj_eventHandler",inline:!0,description:"Fires when an area of the chart is selected for zooming.",remarks:'In the function, the "this" keyword refers to the chart object. An event parameter is passed to the specified function. It contains  e.xAxis & e.yValue properties which are arrays of objects with axis, min and max properties. The min and max properties refers to the axis values of the selected area. e.yAxis[0].axis and e.xAxis[0].axis refer to the primary axes.'}}},
defaultTooltip:{type:"obj_tooltip",description:"Point tooltip options."},toolbar:{type:"obj_toolbar",description:"Export and Print button toolbar settings.",support:{test:["(usingSL)","Silverlight does not support the chart toolbar."]}},axisToZoom:{type:"enum_zoomAxis",description:"Specifies axis zooming type.",support:{test:["(usingSL)","Silverlight does not support the axisToZoom property features."]}},navigator:{type:"obj_navigator",description:"Navigator provides more advanced data zooming mainly for time based data."},
windowlessMode:{type:"bool",description:"Controls the windowless mode feature when using with Silverlight charts.",support:{hs:[!1,"Only Silverlight navigator supports windowsles mode."],hc:[!1,"Only Silverlight navigator supports windowsles mode."],test:["(!usingSL)","Only Silverlight navigator supports windowsles mode."]}},margin:{type:"number,array,object",description:"Specifies the margin around the chart.",remarks:"JS chart margin settings specify the distances between the chart area and image edges.",
number:{description:"Applies this margin amount to all four sides."},array:{0:{description:"An array of top, right, bottom, and left margin settings ",arrayType:"specific",types:[{name:"Top",type:"number",description:"Top margin"},{name:"Right",type:"number",description:"Right margin"},{name:"Bottom",type:"number",description:"Bottom margin"},{name:"Left",type:"number",description:"Left margin"}],example:"[5,8,9,3]"}},object:{top:{type:"number",description:"Top margin in pixels."},right:{type:"number",
description:"Right margin in pixels."},bottom:{type:"number",description:"Bottom margin in pixels."},left:{type:"number",description:"Left margin in pixels."}}},spacingChartArea:{type:"number",description:"With multiple chart areas, this indicates pixel spacing between them."},mapping:{type:"object",version:"1.4",description:"Map chart type related settings.",object:{base:{type:"object",version:"1.4",description:"The base object defines map layers that are used in the background. ",object:{layers:{type:"string",
version:"1.4",description:"A list of comma delimited map codes or geoJSON/topoJSON files. Map property filters can also be used if a reference layer is defined.",seealso:"Tutorials.mapList"},series:{type:"obj_series",description:"The series styling for base map layers."}}},referenceLayers:{type:"string",description:"A list of comma delimited map codes or geoJSON/topoJSON files that are loaded into memory but not shown on the chart by default. This is useful when a series is built based on map features in memory.",
seealso:"Tutorials.mapList"},projection:{type:"bool",version:"1.4",description:"When true (default), the standard mercator projection is applied to the map."}},seealso:"Tutorials.mapping"}}},annotation:{type:"object",description:"Encapsulates a box with a label that can be placed arbitrarily on the chart.",object:{label:{type:"obj_label",description:"Label displayed inside the annotation."},fill:{type:"obj_fill",description:"Background fill of this annotation."},outline:{type:"obj_outline",description:"Annotation box outline settings."},
transparency:{type:"number",description:"Transparency from 0 to 1, where 0 is solid and 1 is transparent.",min:0,max:1,support:{sl:[!1,"Silverlight does not currently support transparency"],test:["(usingSL)","Silverlight does not currently support transparency"]}},boxVisible:{type:"bool",description:"Whether the annotation box is visible. Setting this property to false leaves only the annotation label visible. This property offers a shortcut to hide the annotation background box with one setting.",
def:!0},radius:{type:"number",description:"Annotation box corner radius.",min:0,max:50,def:5},padding:{type:"number",description:"Space between box edges and the annotation label in pixels.",min:0,max:50,def:5},position:{type:"string",description:'Pixel position of the annotation where 0,0 is the top left corner of the chart image. Prefixing this setting with "CA:" like: "CA:10,10" will make the 0,0 position refer to the top left corner of the chartArea.',support:{sl:[!1,"Silverlight does not currently support positioning relative to the chart area. Prefixing the coordinates with 'CA'"],
test:["(usingSL && /^CA:/.test(myProp.value))","Silverlight does not currently support positioning relative to the chart area. Prefixing the coordinates with 'CA'."]},string:{description:"annotation's position relative to the chart or chartArea",format:["^[0-9]+,[0-9]+$","^CA:[0-9]+,[0-9]+$"]}},width:{type:"number",description:"Annotation width (automatic if not defined)",number:{description:"in pixels.",min:0,max:32E3},example:"120"},height:{type:"number",description:"Annotation height (automatic if not defined)",
number:{description:"in pixels.",min:0,max:32E3},example:"60"}}},axis:{type:"object",description:"Represents a chart axis.",object:{id:{type:"string",description:"The id of this axis. Used to reference the axis programmatically at run-time."},label:{type:"obj_label",description:"Main axis label configuration.",remarks:'This label\'s text is also used to describe data associated with this axis. For example, if the y axis label reads "cost", the tooltip for a data point may show "cost: 123" based on this label.',
obj_label:{object:{margin:{type:"number",description:"Space between the axis label and axis ticks."}}}},alternateGridFill:{type:"obj_fill",description:"Fill used on the area between every other two grid lines."},orientation:{type:"enum_orientation",description:"Axis orientation."},defaultTick:{type:"obj_axisTick",description:"The default settings used by all major axis ticks on the axis."},defaultMinorTick:{type:"obj_axisTick",description:"The default settings used by all minor axis ticks on the axis."},
line:{type:"obj_outline",description:"Styling options for the axis line."},markers:{type:"array",description:"Axis markers drawn on this axis.",array:{arrayType:"specific",description:"An array of axis markers.",types:[{type:"obj_axisMarker",description:"Axis marker added to this axis."}]}},centerTickMarks:{type:"bool",description:"Specifies whether axis ticks are centered with the data points.",remarks:"At this time, this feature only works with category data."},formatString:{type:"string",description:"Format string used for values on this axis. Values associated with this axis including axis ticks, point labels, among others will inherit this format by default.",
seealso:"Tutorials.labelFormatting|Samples.AxisFormatting"},cultureName:{type:"enum_cultures",description:"Culture name used for formatting values on the axis.",seealso:"Tutorials.labelFormatting"},spacingPercentage:{type:"number",description:"Spacing percentage between column or bar groups. This setting applies when used with the x axis.",max:0.5,min:0},staticColumnWidth:{type:"number",description:"Pixel width of columns stemming from this axis. This setting applies when used with the x axis."},
chartAreaOffset:{type:"number",description:"Pixel distance offset from the chart area"},scale:{type:"object",description:"Scale related settings such as intervals, range and the like.",version:"1.1",object:{zoomLimit:{type:"number,obj_timeInterval",description:"Specifies the minimum axis range that can be zoomed.",number:{description:"Maximum numeric zoom range.",example:"5"},obj_timeInterval:{description:"Maximum time zoom range.",example:"{unit:'day',multiplier:2}",inline:!0},seealso:""},interval:{type:"number,obj_timeInterval",
description:"Specifies the major axis tick intervals.",number:{description:"Numeric interval."},seealso:"Samples.AxisIntervals"},minorInterval:{type:"number,obj_timeInterval,string",description:"Specifies the minor axis tick intervals.",string:{description:'If minorInterval is set to a string value of "auto", Silverlight smartMinorTicks are used.',support:{hs:[!1,"Only the Silverlight chart supports this feature."],hc:[!1,"Only the Silverlight chart supports this feature."],test:["(!usingSL && myProp.value=='auto')",
"Only the Silverlight chart supports this feature. Otherwise, the minorInterval property must be set."]}},number:{description:"Numeric interval."},seealso:"Samples.AxisIntervals"},invert:{type:"bool",description:"Indicates whether the axis scale is inverted."},range:{type:"object,array",description:"Scale range including min, max, and padding.",version:"1.1",object:{min:{type:"number,date",number:{description:"Numeric minimum axis value."},date:{description:"Time based minimum axis value."},description:"Specifies the minimum value of this axis."},
max:{type:"number,date",number:{description:"Numeric maximum axis value."},date:{description:"Time based maximum axis value."},description:"Specifies the maximum value of this axis."},padding:{type:"number",description:"Axis scale padding amount. Pads the data range by this amount to leave space between data and axis edges.",number:{description:"A value between 0 and 1 where 1 means the scale is padded by 100% in effect doubling the range.",min:0,max:1}}},array:{0:{arrayType:"specific",description:" as a [min,max] array.",
types:[{type:"number,date",name:"min",number:{description:"Numeric minimum axis value."},date:{description:"Time based minimum axis value."},description:"Specifies the minimum value of this axis."},{type:"number,date",name:"max",number:{description:"Numeric maximum axis value."},date:{description:"Time based maximum axis value."},description:"Specifies the maximum value of this axis."}]}}},breaks:{type:"object,array",description:"Scale breaks as an array of break ranges, or automatic settigns.",version:"1.1",
array:{arrayType:"specific",description:"An array of scale breaks.",types:[{type:"array",description:"An array of [min,max] scale breaks.",array:{0:{arrayType:"specific",description:" as a [min,max] array.",types:[{type:"number,date",name:"min",number:{description:"Numeric minimum scale break value."},date:{description:"Time based minimum scale break value."},description:"Specifies the minimum value of this scale break."},{type:"number,date",name:"max",number:{description:"Numeric maximum scale break value."},
date:{description:"Time based maximum scale break value."},description:"Specifies the maximum value of this scale break."}]}}}]},object:{limit:{type:"number",description:"The maximum number of automatic scale breaks generated for this axis."}}},syncWith:{type:"string",description:"ID of another axis that this axis will sync its range with.",remarks:"This is useful with unit conversion where two axes show the same scale but in different units. An axis not associated with data can be synced with another axis. Or two axes both with data can be set to show the same range.",
seealso:"Samples.AxisShadowingTime"},type:{type:"enum_scale",description:'Specifies the axis <a href="Enums.scale">scale</a> enum.',remarks:"If a time scale is specified for the x axis, the chart will attempt to interpret the data x values as dates."}}}}},axisTick:{type:"object",description:"Represents an axis tick that incapsulates the tick label, gridLine, line styling settings.",object:{gridLine:{type:"obj_line",description:"Line drawn on the chart area at the axis tick position."},line:{type:"obj_line",
description:"The tick line of this AxisTick. The property Line.Length will control the length of this tick."},label:{type:"obj_label",description:"Axis tick label.",obj_label:{object:{text:{type:"string,method",description:"Label text for axis ticks. The %value token is replaced with the tick value.",method:{description:"A callback function that processes the given legend entry text before it is displayed. The value of the axis tick is passed to the label callback function as a parameter.",seealso:"Samples.LabelCallbacks",
support:{sl:[!1,"Silverlight does not currently support label callbacks."],test:["(usingSL && myProp.type=='method')","Silverlight does not currently support label callbacks."]}},string:{tokenSet:"value"}}}},seealso:"Tutorials.tokenReference:Label Token Reference|Samples.labelTokens"}}},axisMarker:{type:"object",description:"Defines styles and positions used to mark a specified section or position on an axis. .",object:{id:{type:"string",description:"The axis marker id"},value:{type:"number,date,object,array",
description:"Axis marker value.",object:{low:{type:"number,date",description:"Axis marker range lower value.",number:{description:"Numeric marker minimum value."},date:{description:"Time marker minimum value."}},high:{type:"number,date",description:"Axis marker range upper value.",number:{description:"Numeric marker maximum value."},date:{description:"Time marker maximum value."}}},array:{0:{description:"A pair of high, low values as an array.",arrayType:"specific",example:"[5, 10]",types:[{name:"low",
type:"number,date",description:"Minimum axis value.",number:{description:"Numeric marker minimum value."},date:{description:"Time marker minimum value."}},{name:"high",type:"number,date",description:"Maximum axis value.",number:{description:"Numeric marker maximum value."},date:{description:"Time marker maximum value."}}]}},number:{description:"Numeric axis value of this marker."},date:{description:"Time based axis value of this marker."}},color:{type:"obj_fill",description:"Axis marker color."},
line:{type:"obj_line",description:"Single value axis marker line options."},bringToFront:{type:"bool",description:"When true, the axis marker will appear in front of the data."},transparency:{type:"number",description:"Transparency from 0 to 1, where 0 is solid and 1 is transparent.",min:0,max:1,def:0},label:{type:"obj_label",description:"Label object drawn next to the axis marker.",obj_label:{object:{text:{type:"string",description:"Label text for axis marker. "}}}},zIndex:{type:"number",description:"Z index setting of the axis marker visual."}},
seealso:"Samples.axisMarkersInFront"},color:{type:"enum_colors,string,array",description:'Represents a color that can be set in a number of ways. Possible options are: \nThe color name: "red"\nHex color value: "#FF0000"\nRGB values syntax: rgb(20,20,20)\nRGBA values syntax: rgba(20,20,20,.5)\nArray of [color,transparency]: ["blue",.5]',string:{description:"A format such as rgb(120,120,120), rgba(120,120,120,.5) or #FF0000 can be specified as a string",format:["."],ui:"ColorPicker"},enum_colors:{description:"A color name can be used to specify colors",
ui:"ColorPicker"},array:{0:{description:" a color with transparency",type:"array",example:"['red',0.5]",arrayType:"specific",types:[{name:"color",type:"obj_color",description:"The color value."},{name:"transparency",type:"number",description:"Transparency from 0 to 1, where 0 is solid and 1 is transparent.",min:0,max:1}]}},ui:"ColorPicker"},fill:{type:"obj_color,array,object",description:"Represents a color with default shading effect disabled, a simple array based linear gradient fill, or complex linear gradient fill with stops.",
array:{0:{description:"A color that includes the option to disable default shading applied to the parent object.",type:"array",example:"['blue',false]",arrayType:"specific",types:[{name:"color",type:"obj_color",description:"The color value."},{name:"shaded",type:"bool",description:"if false, the default shading is disabled."}]},1:{description:"Simple gradient (color1,colorN,angle)",type:"array",arrayType:"specific",example:"['red','blue','gree','white',45]",types:[{name:"color1",type:"obj_color",
description:"first color in the linear gradient."},{name:"colorN",type:"obj_color",multi:!0,description:"Subsequent colors in the linear gradient."},{name:"angle",type:"number",description:"angle of the gradient"}]}},object:{description:"Represents a complex gradient fill with stops.",angle:{type:"number",description:"Gradient angle.",number:{description:"in degrees.",min:-360,max:360,def:0,tag:"\u00b0"}},stops:{type:"array",description:"Defines gradient color stops for this fill object.",array:{arrayType:"anyType",
description:"An array of gradient stops.",types:[{type:"array",array:{0:{arrayType:"specific",example:"[0.1,'red']",description:"A gradient stop with position and color.",types:[{name:"position",type:"number",description:"Percentage position of this gradient stop.",min:0,max:1},{name:"color",type:"obj_color",description:"The color used with this gradient stop."}]}}}]}}}},smartPalette:{type:"object",version:"1.2",description:"A smartPalette defines a gradient range of colors and how point values are mapped to it.",
object:{pointValue:{type:"string",description:"Specifies a token expression evaluated for each point that maps to the colors.",string:{description:"The point's custom attribute value to base the resultig color on.",tokenSet:"point"}},stops:{type:"array",description:"An array of values and colors similar to linear gradient stops.",array:{arrayType:"anyType",description:"An array of gradient stops.",types:[{type:"array",array:{0:{arrayType:"specific",example:"[0,'green',.2]",description:"A value and color pair similar to a linear gradient stop.",
types:[{name:"value",type:"number",description:"The value of this gradient stop."},{name:"color",type:"obj_color",description:"The color associated with this value."},{name:"snapStart",type:"number",required:!1,description:"A value between 0-1. The color of this stop will extend for this amount of the range between it and the next stop. A value of 0 will have no effect."},{name:"snapEnd",type:"number",required:!1,description:"A value between 0-1. The color of the next stop will extend down to this amount of the range between this stop and the next. A value of 1 will have no effect."}]},
1:{arrayType:"specific",example:"[0,'green',.2]",hide:!0,description:"A value and color pair similar to a linear gradient stop but including a start color snap value.",types:[{name:"value",type:"number",description:"The value of this gradient stop."},{name:"color",type:"obj_color",description:"The color associated with this value."},{name:"snapStart",type:"number",required:!1,description:"A value between 0-1. The color of this stop will extend for this amount of the range between it and the next stop. A value of 0 will have no effect."}]},
2:{arrayType:"specific",example:"[0,'green',.2]",hide:!0,description:"A value and color pair similar to a linear gradient stop but including a start and end color snap value.",types:[{name:"value",type:"number",description:"The value of this gradient stop."},{name:"color",type:"obj_color",description:"The color associated with this value."}]}}}]}},colors:{type:"array",description:".",array:{arrayType:"anyType",description:"An array of colors that will stretch evenly to cover the range of point values.",
types:[{type:"obj_color",description:"A color that is part of this array of colors."}]}},invert:{type:"bool",description:"Indicates whether the color stops are reversed. If so, the values will also invert."}}},label:{type:"object",description:"Represents a label containing text, font styling, color, and other options. ",object:{text:{type:"string,method",description:"The label text.",string:{description:"A string value of this label."},method:{description:"A callback function that processes this label's parent object and returns the resulting string. Supported with the following objects:  legendEntry, point tooltip, and axis tick labels.",
support:{sl:[!1,"Silverlight does not currently support label callbacks."],test:["(usingSL && myProp.type == 'method')","Silverlight does not currently support label callbacks."]}},seealso:"Tutorials.tokenReference:Label Token Reference|Samples.labelTokens"},color:{type:"obj_color",description:"label color"},visible:{type:"bool",description:"Whether the label is visible.",def:!0,support:{sl:[!1,"Silverlight does not currently support label visibility, but a transparent color can be used."],test:["(usingSL)",
"Silverlight does not currently support label visibility, but a transparent color can be used."]}},align:{type:"enum_alignHorizontal",description:"Horizontal alignment of this label."},verticalAlign:{type:"enum_alignVertical",description:"Vertical alignment of this label."},offset:{type:"string,number",description:"Label offset from the initial position in pixels.",string:{description:"Comma delimited x,y offset amount in pixels."},number:{description:"Used with pie labels to indicate offset distance from the pie slice."}},
style:{type:"obj_labelStyle",description:"Label style options."},cssClass:{type:"string",description:"Name of a CSS class defined on the page and inherited by this label.",remarks:"With some browsers such as IE, the CSS definitions must be specified before the chart JS code."},url:{type:"string",description:"When specified, it makes this label a clickable link."},urlTarget:{type:"enum_urlTarget",description:"Specifies the URL target."},rotation:{type:"number",description:"Label rotation in degrees."}}},
outline:{type:"object",isInlined:!0,description:"Represents outline settings",object:{color:{type:"obj_color",description:"Outline color."},dashStyle:{type:"enum_dashStyle",description:"Line dash style",version:"1.4"},width:{type:"number",description:"Outline width"}}},line:{type:"object",description:"Defines styling used to draw a line or curve.",object:{color:{type:"obj_color",description:"Outline color."},width:{type:"number",description:"Outline width"},dashStyle:{type:"enum_dashStyle",description:"Line dash style"},
length:{type:"number",description:"Length of the line when applicable."}}},chartArea:{type:"object",description:"Represents an area on which series and elements are plotted. ",object:{fill:{type:"obj_fill",description:"Fill settings used to fill the interior of this chart area.",obj_fill:{object:{image:{type:"string",description:"URL of an image that fills the background of this chartArea."}}}},transparency:{type:"number",description:"Transparency from 0 to 1, where 0 is solid and 1 is transparent.",
min:0,max:1,def:0},outline:{type:"obj_outline",description:"Chart area box outline settings."},shadow:{type:"bool",description:"Enables or disables the chart area shadow."},height:{type:"number",description:"Value from 0 to 1. Used with multiple chart areas, it represents the height of this chart area in relation to the rest of the chart areas in this chart. A value of .5 indicates the chart area uses 50% of the available space.<br><br>A value of 2 or more indicates a pixel height for the chart area."},
series:{type:"array",array:{description:"An array of series drawn on this chart area.",arrayType:"specific",types:[{description:"A series added to the chart area.",type:"obj_series"}]}},yAxis:{type:"obj_axis,array",description:"The chart area's y axis or array of y axes.",array:{arrayType:"specific",description:"An array of y axes.",types:[{type:"obj_axis"}],support:{sl:[!1,"The Silverlight chart module doesn't currently support multiple axes."],test:["(usingSL && myProp.type=='array'&&myProp.value.length>1)",
"The Silverlight chart module doesn't currently support multiple axes."]}}},interactivity:{type:"flag_chartAreaInteractivity",description:"Specifies which chart area interactivity features are enabled.",support:{test:["(!usingSL && (myProp.value.indexOf('arbitrarySelection') > -1 || myProp.value.indexOf('scrollWheel') > -1))","ChartArea interactivity only supports dragScrolling when not using Silverlight."]}},view:{type:"obj_view",version:"1.2",description:"Defines the view for this chart area."}}},
series:{type:"object",description:"Represents a series of data points and series related options.",object:{id:{type:"string",description:"Series object id."},name:{type:"string",description:"Name of this series."},defaultPoint:{type:"obj_point",description:"Point options applied to all points in this series."},points:{type:"array",description:"An array of points associated with this series.",array:{arrayType:"specific",types:[{type:"obj_point",description:"A point added to this series."}]}},color:{type:"obj_color",
description:"The default series color. Same as the defaultPoint.Color setting."},line:{type:"obj_line",description:"Line options used when the series type property is a line or spline.",obj_line:{object:{transparency:{type:"number",description:"Transparency from 0 to 1, where 0 is solid and 1 is transparent.",min:0,max:1,def:0}}}},emptyPointMode:{type:"enum_emptyPointMode",description:"Specifies the behavior of the series if empty points are included. Empty points have y values set to null."},pointSelection:{type:"bool",
description:"Specifies whether point selection is enabled for this series.",support:{test:["(usingSL)","Point selection is not supported in Silverlight."]}},animation:{type:"obj_animation",description:"Specifies the initial animation of the series.",support:{test:["(usingSL)","Series animation is not configurable in Silverlight."]}},cursor:{type:"enum_cursor",description:"The cursor type when mouse hovers points in this series",support:{test:["(usingSL)","The cursor setting is not configurable in Silverlight"]}},
mouseTracking:{type:"object",description:"Specifies mouse tracking options for this series.",object:{enabled:{type:"bool",description:"Whether mouse tracking is enabled for this series."},sticky:{type:"bool",description:"Whether sticky mouse tracking is used"}},support:{test:["(usingSL)","Mouse tracking is not configurable in Silverlight."]},remarks:"Disabling mouse tracking can improve client-side performance."},legendEntry:{type:"obj_legendEntry",description:"Legend entry settings associated with this series."},
palette:{type:"enum_palette,array,obj_smartPalette",description:"Palette used for elements in this series.",array:{arrayType:"specific",types:[{type:"obj_color"}],description:"Array of color strings."},enum_palette:{description:"A predefined palette used by elements.",ui:"PalettePicker"}},type:{version:"1.1",type:"enum_seriesType,enum_chartType",description:"Specifies the series type or a chart type such as pie, radar, or gauge.",seealso:"Tutorials.chartTypes:Describes how to define specific chart types."},
xAxis:{type:"number,string",description:"Specifies the x axis associated with this series.",number:{description:"The index of the x axis associated with this series."},string:{description:"The id of a x axis associated with this series."}},yAxis:{type:"number,string",description:"Specifies the y axis associated with this series.",number:{description:"The index of the y axis associated with this series."},string:{description:"The id of a y axis associated with this series."}},explodeOffset:{type:"number",
description:"Specifies the number of pixels by which pie slices are exploded.",support:{test:["(usingSL)","ExplodeOffset does not apply to Silverlight charts since pies are not supported."]}},transparency:{type:"number",description:"Specifies the amount of transparency of this series from 0 to 1, where 0 is solid and 1 is transparent.",min:0,max:1},states:{type:"object",description:"Specifies the series states",object:{hover:{type:"obj_seriesState",description:"State options when mouse hovers the series."},
select:{type:"obj_seriesState",description:"State options when series is selected."}},support:{test:["(usingSL)","Series states are not configurable in Silverlight."]},seealso:"Tutorials.states"},events:{type:"object",description:"Event functions fired when for specific mouse interactions with this series.",object:{mouseOver:{type:"obj_eventHandler",inline:!0,description:"Fires when mouse enters the series."},mouseOut:{type:"obj_eventHandler",inline:!0,description:"Fires when mouse leaves the series."},
click:{type:"obj_eventHandler",inline:!0,description:"Fires when series is clicked."},checkBoxClick:{type:"obj_eventHandler",inline:!0,description:"Fires when checkbox in the legendEntry for this series is clicked."},legendEntryClick:{type:"obj_eventHandler",inline:!0,description:"Fires when the series legend entry is clicked. The default event action is to toggle the visibility of the series. This can be prevented by returning false or calling event.preventDefault()."},show:{type:"obj_eventHandler",
inline:!0,description:"Fires when series becomes visible."},hide:{type:"obj_eventHandler",inline:!0,description:"Fires when series is hidden."}},support:{test:["(usingSL)","Series events are not configurable in Silverlight."]}},onSeries:{type:"string",description:"ID of series this series follows. Used with seriesType empty to place annotations on a different series.",remarks:"If an existing series with data is charted. A new series of type empty with some annotations can be used. When setting the onSeries property, this new series doesn't require a yValue setting, it will match the other series y value given only the x value.",
support:{test:["(usingSL)","The onSeries setting is not configurable in Silverlight. Instead apply the annotations directly to points on the series."]}},angle:{type:"obj_angleArc",description:"The starting angle or arc of pie, gauge or radar series type.",version:"1.1"},shape:{type:"obj_shape",version:"1.1",description:"Styling and position info for the series when it is a pie, gauge or radar series type",obj_shape:{type:"object",object:{center:{type:"string",description:"Center of the series in pixels or percentages"},
size:{type:"string,number,array",description:"Size of the series in pixels or percentages.",number:{description:"Size of the series in pixels."},string:{description:"Size of the series as a percentage of either the chart's width or height, whichever is smaller."},array:{0:{arrayType:"specific",description:" as a [width,height] array.",version:"1.2",types:[{type:"number,string",name:"width",description:"Width in pixels, or as percentage of chart size.",version:"1.1",number:{type:"number",description:"in pixels.",
min:0},string:{description:"as percentage of chart height or width.",format:"^[0-9]+%$",example:"'100%'"}},{type:"number,string",name:"height",description:"Height in pixels or as percentage of chart size.",version:"1.1",number:{type:"number",description:"in pixels.",min:0},string:{description:"as percentage of chart height or width.",format:"^[0-9]+%$",example:"'100%'"}}]}}},innerSize:{type:"string,number",description:"Inner size of the series in pixels or percentages. Refers to the donut hole size",
number:{description:"Inner size in pixels."}},offset:{type:"string",description:"Offset of the series in pixels from the automatically determined position."},padding:{type:"string,number",version:"1.1",description:"Padding between objects drawn on the chart area such as pies, radars, and gauges. The value represents a string percentage or a number from 0 to 1, where 0 is no padding and 1 is 100% padded.",remarks:"The default for Gauges is 0.15. For Radars, it is 0.3. And for Pies, it is 0.3. Funnel, pyramid, and cone types use 0.25.  This setting should be applied to defaultSeries rather than individual series.",
number:{min:0,max:1}},innerPadding:{type:"number",version:"1.2",description:"Padding between elements of this shape. For example space between funnel sections. If the value is less than 1, it represents a percentage of the whole. If the value is equal or greater than 1, it represents pixels.",remarks:"When using a percentage like .1, this devotes 10% of the height to padding for all points. When pixel values are used, they specify the pixel spacing between each element.",number:{min:0}}}},support:{test:["(usingSL && (a=prop(fullPath+'../type))==='pie' || (!a && prop('type')==='pie')",
"Pie position is not configurable in Silverlight because pies are not supported."]}},size:{type:"object,array",version:"1.1",description:"Specifies the minimum and maximum sizes of points. The minimum size can be set to limit bar height, and both can be used to specify bubble size limits.",object:{min:{type:"number,string",description:"Minimum bar size in pixels, or bubble size in pixels or as percentage of chart size.",version:"1.1",number:{type:"number",description:"in pixels.",min:0},string:{description:"as percentage of chart height or width.",
format:"^[0-9]+%$",example:"'100%'"}},max:{type:"number,string",description:"Maximum bubble size in pixels or as percentage of chart size.",version:"1.1",number:{type:"number",description:"in pixels.",min:0},string:{description:"as percentage of chart height or width.",format:"^[0-9]+%$",example:"'100%'"}}},array:{0:{arrayType:"specific",description:" as a [min,max] array.",types:[{type:"number,string",name:"min",description:"Minimum bar size in pixels, or bubble size in pixels or as percentage of chart size.",
version:"1.1",number:{type:"number",description:"in pixels.",min:0},string:{description:"as percentage of chart height or width.",format:"^[0-9]+%$",example:"'100%'"}},{type:"number,string",name:"max",description:"Maximum bubble size in pixels or as percentage of chart size.",version:"1.1",number:{type:"number",description:"in pixels.",min:0},string:{description:"as percentage of chart height or width.",format:"^[0-9]+%$",example:"'100%'"}}]}}},map:{type:"string,obj_mapFileData",version:"1.4",skip:!0,
description:"Specifies a map by code, a file name or a map features defined in a map file that is specified in baseLayers",seealso:"Tutorials.mapList|Tutorials.mapping"},mapDataId:{type:"string",version:"1.4",skip:!0,hide:!0,hidden:!0,description:" "},isBaseLayer:{type:"bool",version:"1.4",skip:!0,hide:!0,hidden:!0,description:" "}}},point:{type:"array,object",description:"Represents a data point and related options",object:{id:{type:"string",description:"Point object id."},parent:{type:"string",
version:"1.3",description:"Identifies a parent point by id.",remarks:"This property allows defining nested hierarchies of points currently used with treemap data."},color:{type:"obj_color",description:"This point's color."},transparency:{type:"number",description:"Transparency from 0 to 1, where 0 is solid and 1 is transparent.",min:0,max:1,def:0},marker:{type:"obj_pointMarker",description:"Point marker options used when the parent series type is set to marker"},label:{type:"obj_label",description:"Point label options",
obj_label:{object:{line:{type:"obj_line",description:"Line connecting label to datapoint. Used with pie series."},text:{type:"string,method",description:"label text",method:{description:"A callback function that processes the label text. The point is passed to the label callback function as a parameter.",seealso:"Samples.LabelCallbacks",support:{sl:[!1,"Silverlight does not currently support label callbacks."],test:["(usingSL && myProp.type == 'method')","Silverlight does not currently support label callbacks."]}},
string:{tokenSet:"point"}}}}},tooltip:{type:"string,method",description:"Tooltip string for this element. Point related tokens can be used.",seealso:"Tutorials.tokenReference:Label Token Reference|Samples.labelTokens",string:{description:"A string tooltip that uses tokens to display point related data.",tokenSet:"point"},method:{description:"A callback function that processes the given point tooltip text before it is displayed. The point is passed to the label callback function as a parameter.",support:{sl:[!1,
"Silverlight does not currently support label callbacks."],test:["(usingSL)","Silverlight does not currently support label callbacks."]}}},outline:{type:"obj_outline",description:"Point's outline options. Applies to marker, bar, or pie series types."},url:{type:"string",description:'When specified, clicking this element will redirect the browser to this URL. Or run the specified text as JavaScript when prefixed with "JavaScript:". Point tokens can be used with this string',tokenSet:"point"},states:{type:"object",
description:"Specifies point state options",object:{hover:{type:"obj_pointState",description:"State options when mouse hovers the point."},select:{type:"obj_pointState",description:"State options when point is selected."}},support:{test:["(usingSL)","Point states are not configurable in Silverlight."]},seealso:"Tutorials.States"},events:{type:"object",description:"Event functions fired when for specific mouse interactions with this point.",object:{mouseOver:{type:"obj_eventHandler",inline:!0,description:"Fires when mouse enters the point.",
remarks:'In the function, the "this" keyword refers to the clicked point object. An event parameter is passed to the specified function.'},mouseOut:{type:"obj_eventHandler",inline:!0,description:"Fires when mouse leaves the point.",remarks:'In the function, the "this" keyword refers to the clicked point object. An event parameter is passed to the specified function.'},click:{type:"obj_eventHandler",inline:!0,description:"Fires when point is clicked.",remarks:'In the function, the "this" keyword refers to the clicked point object. An event parameter is passed to the specified function. Returning false cancels the operation.'},
select:{type:"obj_eventHandler",inline:!0,description:"Fires when point is selected.",remarks:'In the function, the "this" keyword refers to the clicked point object. An event parameter is passed to the specified function. Returning false cancels the operation.'},unselect:{type:"obj_eventHandler",inline:!0,description:"Fires when point is unselected."},remove:{type:"obj_eventHandler",inline:!0,description:"Fires when point is removed with the remove() method.",remarks:'In the function, the "this" keyword refers to the point object. An event parameter is passed to the specified function. Returning false cancels the operation.'},
update:{type:"obj_eventHandler",inline:!0,description:"Fires when point is updated with the update() method.",remarks:'In the function, the "this" keyword refers to the point object. An event parameter is passed to the specified function. Returning false cancels the operation.'}},support:{test:["(usingSL)","Point events are not configurable in Silverlight."]}},name:{type:"string",description:"Name of this point"},x:{type:"number,date,string",description:"X value of this point.",number:{description:"Numeric x value of this data point."},
date:{description:"Time based x value of this data point."},string:{description:'A string date value that requires the x axis scale type "time" setting.'}},y:{type:"number,array",description:"Y value of this point.",number:{allowNull:!0},array:{0:{arrayType:"specific",version:"1.1",description:"Y value range",types:[{name:"yStart",type:"number",number:{allowNull:!0},description:"The starting y value."},{name:"y",type:"number",number:{allowNull:!0},description:"The y value."}]}}},z:{type:"number",
description:"Z value of this point. Used in bubble charts and as gauge needle length from 0 to 1, and as pie slide lengths.",number:{allowNull:!0},version:"1.1",seealso:"Tutorials.chartTypes"},annotation:{type:"obj_annotation",description:"Annotation of this point.",support:{hc:[!1,"The JS chart module doesn't currently support point annotations."],test:["usingHC","The JS chart module doesn't currently support point annotations."]}},attributes:{type:"array,object",description:"Point attributes which hold additional information about the point and can be referenced within label text with tokens such as %attributeKey",
object:{"*":{type:"string,number,date",description:"any attribute. The name of the property will be used as the key."}},array:{arrayType:"specific",description:"An array of point attributes.",types:[{type:"array",array:{0:{arrayType:"specific",description:"A key-value pair representing an attribute.",types:[{name:"key",type:"string",description:"An attribute key. The key is used as a token in label text like: %key."},{name:"value",type:"string,number,date",description:"Key tokens will be replaced with this value."}]}}}]}},
exploded:{type:"bool",description:"Indicates whether this pie slice is offset from the main pie.",support:{test:[["(usingSL)","This setting is not configurable in Silverlight."],["(!usesPie(prop(this).parentNode,prop))","Point exploded setting only works with pie series type."]]}},open:{type:"number",description:"Open price value used with finance charts.",number:{allowNull:!1}},high:{type:"number",description:"High price value used with finance charts.",number:{allowNull:!1}},low:{type:"number",
description:"Low price value used with finance charts.",number:{allowNull:!1}},close:{type:"number",description:"Close price value used with finance charts.",number:{allowNull:!1}},subvalue:{type:"obj_subvalue",version:"1.1",description:"Used to specify error bar data for this series."},map:{type:"string,obj_mapFileData",version:"1.4",skip:!0,description:"Specifies a map feature by code, a file name or a map feature defined in a map file that is specified in baseLayers",seealso:"Tutorials.mapList|Tutorials.mapping"},
mapDataId:{type:"string",version:"1.4",skip:!0,hide:!0,hidden:!0,description:" "}},array:{0:{arrayType:"specific",description:"A numeric X and Y value pair. The x value can also represent a date if the x axis has a time scale type.",types:[{type:"number",name:"X",description:"The x component of this point.",number:{description:"Numeric x value. ",remarks:"If the x axis type is set to time, the chart will attempt to convert the numeric value to a date."}},{name:"Y",type:"number",description:"The Y value of this point."}],
example:"[5,10]"},1:{arrayType:"specific",description:"A time X value and numeric Y value pair.",types:[{name:"X",type:"date",description:"The x component of this point.",date:{description:"A date value."}},{name:"Y",type:"number",description:"The Y value of this point."}],example:'[new Date(2015,0,1),10] or ["1/1/2015",10]'},2:{arrayType:"specific",description:"A point Name and Y value pair. The name can also represent a date if the x axis has a time scale type.",types:[{name:"X",type:"string",description:"The x component of this point.",
string:{description:"The name of this point. If the x axis scale type is set to time, date values can be passed as strings and the chart will try to interpret them as date data types.",remarks:"If the x axis type is set to time, the chart will attempt to convert the string value to a date."}},{name:"Y",type:"number",description:"The Y value of this point."}],example:'["Chris",120]'},3:{arrayType:"specific",description:"A finance data point with a date and OHLC (Open, High, Low, Close) values.",types:[{name:"X",
type:"date,string",description:"The x component of this point.",date:{description:"A date x value."},string:{description:"A string date value. If the x axis scale type is set to time, date values can be passed as strings and the chart will try to interpret them as date data types."}},{name:"Open",type:"number",description:"Open price value."},{name:"High",type:"number",description:"High price value."},{name:"Low",type:"number",description:"Low price value."},{name:"Close",type:"number",description:"Close price value."}],
support:{test:["(!usesHC)","OHLC data is only supported by Navigator or Silverlight."]},example:"[new Date(2015,0,1), 12.50, 13.15, 10.62, 11.75]"}}},legend:{type:"object",description:"Represents the legend box settings of this chart.",object:{fill:{type:"obj_fill",description:"Fills the background of the legend box."},outline:{type:"obj_outline",description:"Legend box outline."},radius:{type:"number",description:"Legend box corner radius.",min:0,max:50,def:5},visible:{type:"bool",description:"Specifies whether the legend is visible."},
defaultEntry:{type:"obj_legendEntry",description:"Specifies the default options used by all legend entries in this legend."},reversed:{type:"bool",description:"Specifies whether the order of the legend entries is reversed."},shadow:{type:"bool",description:"Specifies whether a shadow is visible for the legend box."},width:{type:"number",description:"When specified, this pixel width is used for the legend. Determined automatically when not specified."},height:{type:"number",version:"1.2,",description:"When specified, this pixel height is used for the legend. Determined automatically when not specified.",
remarks:"This applies to smartPalette scales when the legend is vertical."},margin:{type:"number",description:"Specifies the margin of the legend box."},transparency:{type:"number",description:"Transparency from 0 to 1, where 0 is solid and 1 is transparent.",min:0,max:1,def:0},boxVisible:{type:"bool",description:"Whether the legend box background and outline are visible",def:!0},layout:{type:"enum_legendLayout",description:"Layout of the legend entries."},offset:{type:"string",description:'Offsets the legend by this pixel amount given as "x,y" from the initial position',
support:{test:["(usingSL)","Legend offset is not configurable in Silverlight."]}},position:{type:"enum_orientation,string",description:"Legend box orientation or absolute position relative to the chart or chart area.",enum_orientation:{description:"Predefined position around the chart area."},string:{description:'Absolute pixel position of the legend where 0,0 is the top left corner of the chart image. Prefixing this setting with "CA:" like: "CA:10,10" will make the 0,0 position refer to the top left corner of the chartArea.',
format:["^[0-9]+,[0-9]+$","^CA:[0-9]+,[0-9]+$"]}},titleLabel:{type:"obj_label",description:"Title label of this legend.",version:"1.2",obj_label:{object:{text:{type:"string",description:"Label text for title. ",tokenSet:"seriesCollection"}}}}}},legendEntry:{type:"object",description:"Represents a legend entry.",object:{width:{type:"number",description:"When specified, this pixel width is used for the entry. Determined automatically when not specified."},iconWidth:{type:"number",description:"Specifies the entry icon width."},
text:{type:"string,method",description:"Specifies the legend entry label text. Tokens can be used.",string:{description:'Legend entry text. "%name" by default.',tokenSet:"series"},method:{description:"A callback function that processes the given legend entry text before it is displayed.  The series is passed to the label callback function as a parameter.",seealso:"Samples.LabelCallbacks",support:{sl:[!1,"Silverlight does not currently support label callbacks."],test:["(usingSL && myProp.type == 'function')",
"Silverlight does not currently support label callbacks."]}}},style:{type:"obj_labelStyle",description:"Legend entry text style."},color:{type:"obj_color",description:"Legend entry text color."},checkBox:{type:"bool",description:"Specifies whether a checkbox is shown with this legend entry.",support:{test:["(usingSL)","LegendEntry checkbox is not configurable in Silverlight."]}},visible:{type:"bool",description:"Specifies whether this legend entry is visible."},sortOrder:{type:"number",description:"Legend entries will be sorted by this number."},
cssClass:{type:"string",description:"Name of a css class defined on the page and inherited by this label.",remarks:"With some browsers such as IE, the css definitions must be specified before the chart JS code."},states:{type:"object",description:"State options for legend entry.",object:{hover:{type:"obj_legendEntryState",inline:!0,description:"State options on legend entry hover."},hidden:{type:"obj_legendEntryState",inline:!0,description:"State options when legend entry is disabled."}},support:{test:["(usingSL)",
"LegendEntry states are not supported in Silverlight."]},seealso:"Tutorials.states"},padding:{type:"number",description:"Distance between the entry text and icon"}}},pointMarker:{type:"object",description:"Represents point marker settings",object:{type:{type:"enum_markerTypes,string",description:"Specifies a predefined marker shape or image path.",string:{description:"A string URL of a raster image to use as the marker visual.",validator:function(a,b,c,d){if(!a||!/^url\(/.test(a))return{message:"The marker type specified is not valid."}}}},
visible:{type:"bool",description:"Specifies whether this marker is visible."},fill:{type:"obj_fill",description:"Marker shape fill."},outline:{type:"obj_outline",description:"Point marker outline styling."},size:{type:"number",description:"Point marker size in pixels."},states:{type:"object",description:"State options for point marker.",object:{hover:{type:"obj_pointMarkerState",inline:!0,description:"State options when the mouse hovers the marker."},select:{type:"obj_pointMarkerState",inline:!0,
description:"State options when point is selected."}},support:{test:["(usingSL)","PointMarker states are not supported in Silverlight."]},seealso:"Tutorials.states"}}},timeInterval:{type:"object",description:"Represents a time interval span.",isInlined:!0,example:"{unit:'day',multiplier:2}",object:{unit:{type:"enum_timeUnit",description:"The time unit used by this interval."},multiplier:{type:"number",description:"Time unit multiplication factor."}}},titleBox:{type:"object",description:"Represents chart title box options.",
object:{label:{type:"obj_label",description:"Title label.",obj_label:{object:{text:{type:"string",description:"Label text for title. ",tokenSet:"seriesCollection"}}}},fill:{type:"obj_fill",description:"Background fill of the title box."},transparency:{type:"number",description:"Transparency from 0 to 1, where 0 is solid and 1 is transparent.",min:0,max:1,def:0},boxVisible:{type:"bool",description:"Whether the title box background and outline is visible",def:!0},radius:{type:"number",description:"Boxes corner radius.",
min:0,max:50,def:5},padding:{type:"number",description:"Spacing between the title label and bounding box.",min:0,max:50,def:5},outline:{type:"obj_outline",description:"Title box outline settings."},position:{type:"enum_titlePosition",description:"Title box position."}}},tooltip:{type:"object",description:"Represents data tooltip settings.",object:{fill:{type:"obj_fill",description:"Background fill.",remarks:'When this property is set to "auto" (default), the background is automatically created to include the source point\'s color.',
def:"auto"},transparency:{type:"number",description:"Transparency from 0 to 1, where 0 is solid and 1 is transparent.",min:0,max:1,def:0.2},outline:{type:"obj_outline",description:"Tooltip box outline styling."},radius:{type:"number",description:"Box corner radius.",min:0,max:50,def:4},enabled:{type:"bool",description:"Specifies whether tooltips are enabled.",def:!0},shadow:{type:"bool",description:"Enables or disables the tooltip shadow.",def:!0},padding:{type:"number",description:"Padding between annotation content and tooltip box.",
min:0,max:50,def:5},label:{type:"obj_label",description:"Label displayed inside the annotation.",obj_label_def:{style:{fontSize:"9pt",fontFamily:"Tahoma",fontWeight:"normal",textDecoration:"none"}}},cssClass:{type:"string",description:"Name of a css class defined on the page and inherited by this label.",remarks:"With some browsers such as IE, the css definitions must be specified before the chart JS code."},snap:{type:"number",description:"Proximity snap given in pixels.",remarks:"The tooltip will appear when the mouse is within this many pixels from a point and will remain while within this range."},
sticky:{type:"bool",description:"When true, tooltips disappear and point mouseOut event occurs when the cursor hovers a different series or leaves the chart area. Otherwise, these events occur when the mouse leaves the point's snap proximity.",remarks:"This setting is a shortcut for series.mouseTracking.sticky"}}},toolbar:{type:"object",description:"Represents the chart toolbar that contains the export, print and zoom out buttons.",object:{visible:{type:"bool",description:"Whether the toolbar is visible."},
defaultButton:{type:"obj_button",description:"Button settings used by all buttons in this toolbar."},buttons:{type:"object",description:"Individual export, print, and zoom out button settings.",object:{"export":{type:"obj_button",description:"Export button settings."},print:{type:"obj_button",description:"Print button settings."},resetZoom:{type:"obj_txtButton",description:"Reset zoom button settings."}}},exportOptions:{type:"obj_exportOptions",description:"Options related to exporting and the resulting image"},
position:{type:"enum_orientation,string",description:"Toolbar position set with either an orientation enum or comma delimited x,y absolute position coordinates.",string:{description:'An absolute position string like: "5,4"'},enum_orientation:{description:"Toolbar position inside the chart area."}},offset:{type:"string",description:"A comma delimited x,y offset from the initial position in pixels ."},margin:{type:"number",description:"Distance between toolbar and chart area when orientation enum is used with the position property."}}},
languageStrings:{type:"object",description:"Represents language strings used on the chart.",object:{downloadJPG:{type:"string",description:"JPG download.",def:"'JPG Image'"},downloadPDF:{type:"string",description:"PDF download.",def:"'PDF Document'"},downloadPNG:{type:"string",description:"PNG download.",def:"'PNG Image'"},downloadSVG:{type:"string",description:"SVG download.",def:"'SVG Vector'"},exportButtonTooltip:{type:"string",description:"Export button tooltip.",def:"'Export to raster or vector image'"},
printButtonTooltip:{type:"string",description:"Print button tooltip.",def:"'Print the chart'"},resetZoomText:{type:"string",description:"Reset zoom label text.",def:"'Zoom Out'"},resetZoomTooltip:{type:"string",description:"Reset zoom label tooltip.",def:"'Reset Zoom'"},loading:{type:"string",description:"Loading string",def:"'Loading...'"}}},exportOptions:{type:"object",description:"Represents image exporting options.",object:{server:{type:"string",description:"Export server URL."},imageType:{type:"enum_mimeType,string",
description:"Output image format.",string:{description:"A custom mime type used when a different server supporting other types is used."}}}},button:{type:"object",description:"Represents a button used with the chart toolbar.",object:{fill:{type:"obj_fill",description:"Background fill."},visible:{type:"bool",description:"Whether the button is visible."},iconFill:{type:"obj_fill",description:"Button icon fill."},iconOutline:{type:"obj_outline",description:"Icon outline styling settings."},outline:{type:"obj_outline",
description:"Button outline styling settings."},states:{type:"object",description:"Button States",object:{hover:{type:"obj_buttonState",inline:!0,description:"button hover state styling."}},seealso:"Tutorials.states"}}},txtButton:{type:"object",description:"Text button settings.",object:{fill:{type:"obj_fill",description:"Background fill."},outline:{type:"obj_outline",description:"Button outline styling settings."},radius:{type:"number",description:"Boxes corner radius.",min:0,max:50,def:5},label:{type:"obj_label",
description:"Label displayed inside the button."},width:{type:"number",description:"Button width (automatic if not defined)",number:{description:"in pixels.",min:0,max:32E3}},height:{type:"number",description:"Button height (automatic if not defined)",number:{description:"in pixels.",min:0,max:32E3}},states:{type:"object",description:"Button States",object:{hover:{type:"obj_txtButtonState",inline:!0,description:"button hover state styling."}},seealso:"Tutorials.states"}}},labelStyle:{type:"object",
description:"Label Style",object:{fontSize:{type:"number,string",description:"Label's font size.",number:{description:"A numeric pixel size of the font. A setting such as 10 is equivalent to 10px"},string:{description:"A string size setting including a pt or px specifier.",tag:"pt,px"}},fontFamily:{type:"enum_fontFamily,string",description:"Label's font family"},fontWeight:{type:"enum_fontWeight",description:"Label's font weight"},fontStyle:{type:"enum_fontStyle",description:"Label's font style"},
cursor:{type:"enum_cursor",description:"Mouse cursor on label hover."},color:{type:"obj_color",description:"Label color."}}},navigator:{type:"object",description:"Represents navigator options.",seealso:"Tutorials.navigator",object:{xScrollbarEnabled:{type:"bool",description:"Whether the horizontal scrollbar is enabled."},toolbar:{type:"obj_navigatorToolbar",description:"Navigator toolbar settings."},previewArea:{type:"object",description:"Represents the full view mini-char tof data located between the x scrollbar and lower chart area.",
object:{interactivity:{type:"flag_previewInteractivity",description:"Specifies the interactivity features enabled for the previewArea.",support:{test:["(!usingSL)","Silverlight must be used to configure previewArea interactivity features."]}},seriesSettings:{type:"obj_series",description:"Series settings applied to the series shown in the previewArea."},margin:{type:"number",description:"Distance between the preview area and axis in pixels"},height:{type:"number",description:"Height of preview area"},
visible:{type:"bool",description:"Indicates whether the preview area is visible."}}},silverlight:{type:"object",description:"Encompases Silverlight specific features.",object:{loadingAnimation:{type:"enum_silverlightLoadingAnimation",description:"Specifies which Silverlight loading animation visual is used when the chart is loading.",support:{test:["(!usingSL)","Only Silverlight supports the loading animation option."]}}}}}},navigatorToolbar:{type:"object",description:"Navigator toolbar at the top of the chart area which facilitates specifying a range to show through specifying dates or time ranges.",
object:{fill:{type:"obj_fill",description:"Fills the navigator background"},outline:{type:"obj_outline",description:"Navigator toolbar outline settings."},visible:{type:"bool",description:"Whether the button is visible."},historyEnabled:{type:"bool",type:"bool",description:"Whether the button is visible.",support:{hs:[!1,"Only Silverlight navigator supports history."],hc:[!1,"Only Silverlight navigator supports history."],test:["(!usingSL)","Only Silverlight navigator supports history."]}},quickZoom:{type:"object",
description:"Represents settings of the quick zoom buttons located in the navigator toolbar.",object:{intervals:{type:"string",description:'A comma delimited list of intervals to use. If not set, the chart will make the chart determine them automatically. Each interval consists of a number and interval abbreviation. <br>The following lists the available interval abbreviations:<br> ms = millisecond, s = second, min = minute, h = hour, d = day, m = month, y = year, YTD = year to date, Max = maximum<br><br> Custom labels can be used on the buttons when the interval is followed by an equal sign, then the text for the button. Example: "1d=One Day',
remarks:'The Quick Zoom intervals are controled by a single string which can disable the buttons, make them determined automatically, specify what intervals to use, and optionally the label text of the buttons. The buttons support localization so users in different cultures will see the appropriate day/month abbreviations. <br>The string takes a comma delimited list of intervals and supports custom label specification with an equal sign. Setting it to "Auto" will let the chart determine what the best buttons are. <br>Syntax "[Multiplier][TimeInterval]=[Label],..." <br>Intervals that are larger than the axis range or smaller than the zoomLimit will be omitted.',
example:"'1d,5d=Five Days,1m,3m'",seealso:"Samples.navigatorToolbar"},spacing:{type:"number",description:"Spacing between buttons in pixels."},initial:{type:"string,number",description:"Specifies the initial zoom interval.",string:{description:"Zoom interval like 1m or 2d."},number:{description:"The index of the button that is selected when the chart loads."}},defaultButton:{type:"obj_txtButton",description:"Styling settings for all quick zoom buttons.",obj_txtButton:{object:{states:{type:"object",
description:"State options for point marker.",object:{select:{type:"obj_txtButtonState",inline:!0,description:"Button state options when point is selected."}},seealso:"Tutorials.states"}}}}}},rangeInput:{type:"object",description:"Specify settings for the range input boxes",object:{visible:{type:"bool",description:"Whether the range inputs are visible."},formatString:{type:"string",description:"FormatString used on dates in range input boxes."},formatStringEdit:{type:"string",description:"FormatString used on dates in range input boxes when editing."},
boxStyle:{type:"obj_labelStyle",description:"Style of dates text in input boxes."}}}}},seriesState:{type:"object",isInlined:!0,description:"Represents series state options.",object:{line:{type:"obj_line",description:"Line options used when this series type is a line."},transparency:{type:"number",description:"Transparency from 0 to 1, where 0 is solid and 1 is transparent.",min:0,max:1},cursor:{type:"enum_cursor",description:"The cursor type when mouse hovers this series"}}},buttonState:{type:"object",
isInlined:!0,description:"Represents button state options.",object:{iconFill:{type:"obj_fill",description:"Button icon fill."},iconOutline:{type:"obj_outline",description:"Icon outline styling settings."},outline:{type:"obj_outline",description:"Button outline styling settings."}}},txtButtonState:{type:"object",isInlined:!0,description:"Represents button state options.",object:{fill:{type:"obj_fill",description:"Button fill."},outline:{type:"obj_outline",description:"Button outline styling settings."},
style:{type:"obj_labelStyle",description:"Button label styling settings."}}},legendEntryState:{type:"object",isInlined:!0,description:"Represents legend entry state options.",object:{style:{type:"obj_labelStyle",description:"Legend entry label style."},cssClass:{type:"string",description:"Name of a css class defined on the page and inherited by this label.",remarks:"With some browsers such as IE, the css definitions must be specified before the chart JS code."}}},pointState:{type:"object",isInlined:!0,
description:"Represents data point state options.",object:{outline:{type:"obj_outline",description:"Point's outline options. Applies to marker, bar, or pie series types."},marker:{type:"obj_pointMarker",description:"Point marker options"},fill:{type:"obj_fill",description:"Point marker, bar or pie fill."},size:{type:"number",description:"Point marker size."}}},pointMarkerState:{type:"object",description:"Point marker state options.",isInlined:!0,object:{fill:{type:"obj_fill",description:"Fills the marker."},
outline:{type:"obj_outline",description:"Point marker outline properties."},size:{type:"number",description:"Point marker size in pixels."}}},animation:{type:"bool,object",isInlined:!0,description:"Specifies animation settings such as enabled, duration, and easing.",bool:{description:"Enables or disables animation using a true or false boolean value."},example:'false OR {duration:250, easing:"easeInQuad"}',object:{duration:{type:"number",description:"The duration in milliseconds."},easing:{type:"enum_animationEasing,string",
description:"Animation easing function name.",string:{description:"Any additional or custom easing methods available through jQuery UI."}}}},eventHandler:{type:"string,method",inline:!0,isInlined:!0,description:"An event handler.",method:{description:"Function executed when the event is fired."},string:{description:"String that is compiled into a function that executes when the event fires. This setting allows the use of tokens that are replaced with values related to the object firing the event."}},
angleArc:{type:"number,array,object",version:"1.1",description:"Defines an angle or arc.",remarks:"All angles are based on 0 degrees pointing up.",number:{type:"number",description:"An angle in degrees."},array:{0:{description:"An arc based on starting and ending angles.",type:"array",example:"[-45,45]",arrayType:"specific",types:[{name:"start",type:"number",description:"The Starting Angle."},{name:"end",type:"number",description:"The Ending Angle."}]}},object:{start:{type:"number",description:"Start angle in degrees."},
end:{type:"number",description:"End angle in degrees."},orientation:{type:"number",description:"Orientation of the arc used in conjunction with the sweep property.",remarks:"If only orientation is defined, a sweep of 360 is assumed."},sweep:{type:"number,string",description:"The sweep in degrees given as number, or as a string percentage of 360.",remarks:"If only the sweep is defined, it is evaluated with an assumed orientation angle of 0.",example:'"50%" OR 5',number:{description:"Sweep angle given in degrees."},
string:{description:"Sweep angle given as percentage of 360 degrees where 50% is equivalent to 180 degrees. Series tokens can also be used with this property to define sweep angles. ",tokenSet:"series"}}}},shape:{type:"object",version:"1.1",description:"Encapsulates the styling settings of a shape.",object:{fill:{type:"obj_fill",description:"Background fill of this shape."},outline:{type:"obj_outline",description:"Shape outline styling.",obj_outline:{type:"object",object:{dashStyle:{version:"1.3",
type:"enum_dashStyle",description:"Line dash style"}}}},transparency:{type:"number",description:"Transparency from 0 to 1, where 0 is solid and 1 is transparent.",min:0,max:1,support:{sl:[!1,"Silverlight does not currently support transparency"],test:["(usingSL)","Silverlight does not currently support transparency"]}},visible:{type:"bool",description:"Whether the shape visual is visible.",def:!0},label:{type:"obj_label",version:"1.3",tokenSet:"series",description:"Series shape label. Used to specify label text and settings when the series is represented as a shape",
remarks:"Currently utilized with treemap charts to define a label and border of each series shape."}}},subvalue:{type:"object",version:"1.1",description:"Represents additional point data values that can be specified as relative to or independent of the parent point's value. Subvalues are used to store point error bar values.",object:{range:{type:"array",description:"Represents an error range [low,high]",example:"[-45,45]",array:{0:{arrayType:"specific",types:[{name:"low",type:"number",description:"Low error value."},
{name:"high",type:"number",description:"High error value."}]}}},line:{type:"obj_line",description:"Error line styling.",obj_line:{object:{length:{type:"number,string",version:"1.1",description:"Length of the error line caps given in pixels or as a percentage in a string. ",example:"100 OR '50%'"}}}},offset:{type:"number",description:"Represents a range, +/- the value of the offset with respect to the elements YValue value or range. "},percent:{type:"number",description:"Represents a range, +/- the percentage of the elements YValue value or range."}}},
view:{type:"object",version:"1.2",description:"Encapsulates view settings such as tilt and rotation.",object:{type:{type:"string",description:"Enables or disabled 3D view.",example:"3d"},depth:{type:"number",description:"Depth of 3D data points or chartArea.",number:{}},tilt:{type:"number",description:"3D Tilt amount in degrees."},rotation:{type:"number",description:"3D Rotation in degrees."}}},mapFileData:{type:"object",version:"1.4",skip:!0,description:"GeoJSON or topoJSON file contents."},mapZoom:{type:"string,number,array,obj_pointFilter",
version:"1.4",description:"Defines a map view or view update.",number:{description:"Zoom level where 1 is 100%. Setting the zoom level to 1 zooms out completely."},string:{description:"A zoom value can be used as well as zoom offset by specifying + or - before the value. Map codes are also supported.",example:"'100%', '+20%' == '+20', '-20%', 'US', 'US.CA'"},array:{0:{description:"An x and y offset representing a pan.  ",arrayType:"specific",types:[{name:"X",type:"number",description:"xOffset"},{name:"Y",
type:"number",description:"yOffset"}],example:"[2,3]"},1:{description:"X and y center coordinates given in axis values and a zoom level.  ",arrayType:"specific",types:[{name:"X",type:"number",description:"X axis value."},{name:"Y",type:"number",description:"Y axis value."},{name:"Zoom Level",type:"number",description:"Zoom level where 1 is 100%."}],example:"[5,8,2]"},2:{description:"A bbox to zoom into view.",arrayType:"specific",types:[{name:"X",type:"number",description:"X coordinate"},{name:"Y",
type:"number",description:"Y coordinate"},{name:"Width",type:"number",description:"Width of the bbox."},{name:"Height",type:"number",description:"Height of the bbox."}],example:"[5,8,9,3]"}}},pointFilter:{type:"object,method",version:"1.4",description:"Specifies property value criteria for points. If multiple properties are used, all must match to qualify. The property names are used with the token system so properties such as name, y, x can be used. If multiple properties are specified, all must match to qualify.",
objectDescription:"Any point property and value that must match to qualify the point within this filter.",object:{"*":{description:"Any point property and value that must match to qualify the point within this filter.",type:"string,number,bool,array",string:{description:"A string property value."},number:{description:"A numeric property value."},bool:{description:"A boolean property value."},array:{description:"An array of values that qualify.",arrayType:"specific",types:[{type:"string,number,bool",
description:"Property values to match."}]}}},method:{description:"Given a point as the first parameter, return true or false indicating whether the point is included in this filter."}}},enumsDescription:"Predefined string values used with settings for the chart.",enums:{chartType:{type:"enum",version:"1.3",description:'Specifies a base chart type like vertical or horizontal. For types such as line, bar, etc. See <a href="Enums.seriesType">seriesType</a> enum.',members:{vertical:{isDefault:!0,description:"Combo Chart Type.",
chain:"enum_seriesType"},horizontal:{description:"Horizontal Chart Type",chain:"enum_seriesType"},pie:{description:"Pie Chart Type",chain:"enum_pieType",enumAttributes:{seriesLayout:"visualShape",behavior:"colorByPoint,labelConnector,noNameGrouping"}},gauge:{version:"1.1",description:"Gauge Chart Type.",chain:"enum_gaugeType",enumAttributes:{seriesLayout:"visualShape",behavior:"colorByPoint,noNameGrouping"}},radar:{version:"1.1",description:"Radar Chart Type.",chain:"enum_radarType",enumAttributes:{seriesLayout:"visualShape"}},
navigator:{description:"Navigator Chart Mode.",chain:"enum_seriesType",enumAttributes:{seriesLayout:"visualShape"}},funnel:{description:"Funnel Chart Type.",version:"1.2",chain:"enum_funnelShapeType",enumAttributes:{seriesLayout:"visualShape",funnelNozzleType:"nozzle",behavior:"colorByPoint,labelConnector,noNameGrouping"}},pyramid:{description:"Funnel Chart Type.",version:"1.2",chain:"enum_funnelOrientationType",enumAttributes:{funnelShapeType:"square",seriesLayout:"visualShape",behavior:"colorByPoint,labelConnector,noNameGrouping"}},
cone:{description:"Funnel Chart Type.",version:"1.2",chain:"enum_funnelOrientationType",enumAttributes:{funnelShapeType:"round",seriesLayout:"visualShape",behavior:"colorByPoint,labelConnector,noNameGrouping"}},heatmap:{description:"Heatmap Chart Type.",version:"1.2",chain:"enum_columnType",enumAttributes:{behavior:"colorByPoint"}},treemap:{description:"Treemap Chart Type.",version:"1.3",chain:"enum_columnType",enumAttributes:{behavior:"noNameGrouping,tree"}},map:{description:"Map Chart Type.",version:"1.4",
chain:"enum_columnType",enumAttributes:{behavior:"noNameGrouping"}}},terminateAt:"enum_seriesType",seealso:"Tutorials.chartTypes"},radarType:{inline:!0,isInlined:!0,type:"enum",version:"1.1",members:{auto:{isDefault:!0,chain:"enum_seriesType",description:"By default, the radar chart will be either a polar or spider type based on the data type of the point x values. If the x values are numeric or time based, a polar type is used. If they are names, a spider type is used."},polar:{chain:"enum_seriesType",
description:"A polar radar type is drawn as a circle."},spider:{chain:"enum_seriesType",description:"A spider radar chart is drawn using lines connecting the y axis end points."}}},gaugeType:{inline:!0,type:"enum",isInlined:!0,version:"1.1",members:{circular:{isDefault:!0,chain:"enum_circularGaugeType",description:"The default circular gauge type."}}},seriesType:{type:"enum",version:"1.1",description:"Specifies a series type such as line or column.",members:{column:{description:"Column series type.",
chain:"enum_columnType",enumAttributes:{behavior:""}},line:{isDefault:!0,description:"Line series type.",chain:"enum_lineSeriesType",enumAttributes:{behavior:"drawMarker,drawLine"}},area:{description:"Area series type.",chain:"enum_areaShadingType",enumAttributes:{behavior:"drawMarker,drawLine,drawArea"}},marker:{description:"Marker series type.",enumAttributes:{behavior:"drawMarker"}},bubble:{version:"1.1",description:"Bubble series type where the size of the bubbles is determined by the point z values.",
chain:"enum_bubbleSizingType",enumAttributes:{behavior:""}},ohlc:{description:"Open high low close finance type.",enumAttributes:{behavior:""}},candlestick:{description:"Finance candlestick series type.",chain:"enum_columnType",enumAttributes:{behavior:""}},map:{description:"Map series type.",chain:"enum_columnType",enumAttributes:{behavior:"varyPalette"}},empty:{description:"Empty series type used with series.onSeries and annotations to place annotations on existing series.",enumAttributes:{behavior:""}}},
seealso:"Tutorials.chartTypes"},bubbleSizingType:{inline:!0,type:"enum",isInlined:!0,version:"1.1",members:{area:{isDefault:!0,description:"The z value controls the bubble volume."},width:{description:"The z value controls the bubble width."}}},areaShadingType:{inline:!0,isInlined:!0,type:"enum",version:"1.1",description:"Specifies shading effects of area series.",members:{subtle:{isDefault:!0,description:"Standard subtle area shading.",chain:"enum_lineSeriesType"},none:{description:"No effect",chain:"enum_lineSeriesType"}}},
lineSeriesType:{inline:!0,isInlined:!0,type:"enum",version:"1.1",description:"Specifies a line series type modifier.",members:{normal:{isDefault:!0,description:"Standard line series type"},spline:{description:"Curved line series type."},step:{description:"Stepped line series type."}}},circularGaugeType:{type:"enum",version:"1.1",inline:!0,isInlined:!0,members:{clip:{isDefault:!0,description:"Gauge where the boundaries ar clipped based on the start and end angles."},circle:{description:"A circular gauge without clipping."}}},
columnType:{type:"enum",version:"1.1",description:"Column styling options such as shading effect.",inline:!0,isInlined:!0,members:{subtle:{isDefault:!0,description:"When not specified, a subtle effect is used."},solid:{description:"No effect"},aqua:{description:"Aqua shading effect."},rounded:{description:"Rounded shading effect."}}},pieType:{type:"enum",version:"1.1",inline:!0,isInlined:!0,members:{normal:{isDefault:!0,description:"Standard pie series type."},donut:{description:"Donut series type"},
nested:{hidden:!0,hide:!0,description:"Nested pie type."}}},funnelOrientationType:{type:"enum",version:"1.2",inline:!0,isInlined:!0,members:{normal:{isDefault:!0,description:"Standard funnel type."},inverted:{description:"Upsidedown funnel."}}},funnelShapeType:{type:"enum",version:"1.2",inline:!0,isInlined:!0,members:{round:{isDefault:!0,description:"Cone shaped funnel.",chain:"enum_funnelOrientationType"},square:{description:"Pyramid shaped funnel.",chain:"enum_funnelOrientationType"}}},markerTypes:{type:"enum",
description:"Point marker shape types.",members:{none:"No marker.",diamond:"Diamond shape.",circle:"Circle shape.","arrow-down":"Arrow Down shape.","arrow-up":"Arrow Up shape.","five-point-star":"Five point star.","four-point-star":"Four point star.",merger:"Finance merger indicator.","split-reverse":"Finance reverse split indicator.","seven-point-star":"Seven point star.","six-point-star":"Six point star.",spinoff:"Finance spinoff indicator.",split:"Finance split indicator.",square:"Square shape.",
triangle:"Triangle shape.","triangle-down":"Triangle pointing down shape."}},emptyPointMode:{type:"enum",description:"Specifies how points with null values behave.",members:{undefined:"When not specified, the chart displays an incontinuity in the data.",ignore:"Empty points are ignored"}},scale:{type:"enum",description:"Specifies an axis scale type.",members:{auto:{description:"Scale is automatically determined.",isDefault:!0},normal:{description:"Scale always includes 0 in the scale range.",version:"1.1"},
range:{description:"Scale range encompasses only data.",version:"1.1"},time:"Specifies a time scale",stacked:"Stacks points",stackedFull:"Points are stacked where each stack is equal to 100%",percent:"Used with navigator charts only. Charts the series as percent change starting at 0%"}},colors:{type:"enum",description:"Specifies a color by name.",regexValidation:"rgb(a)?",caseInsensitive:!0,ui:"ColorPicker",members:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",
beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",
darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",
"indigo ":"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",
maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",
paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",
thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}},palette:{type:"enum",description:"Specifies a predefined palette by name.",members:{"default":"default palette",spreadsheet:"Default spreadsheet palette",oceanMidtones:"oceanMidtones palette",mutedRainbow:"mutedRainbow palette",pastelContrast:"pastelContrast palette",rainforest:"rainForest palette",random:"random palette",autumn:"autumn palette",
bright:"bright palette",lavender:"lavender palette",midTones:"midTones palette",mixed:"mixed palette",pastel:"pastel palette",poppies:"poppies palette",spring:"spring palette",warmEarth:"warmEarth palette",waterMeadow:"waterMeadow palette",darkRainbow:"darkRainbow palette",midRange:"midRange palette",vividDark:"vividDark palette",fiveColor1:"fiveColor1 palette with 5 colors.",fiveColor2:"fiveColor2 palette",fiveColor3:"fiveColor3 palette",fiveColor4:"fiveColor4 palette",fiveColor5:"fiveColor5 palette",
fiveColor6:"fiveColor6 palette",fiveColor7:"fiveColor7 palette",fiveColor8:"fiveColor8 palette",fiveColor9:"fiveColor9 palette",fiveColor10:"fiveColor10 palette with 5 colors.",fiveColor11:"fiveColor11 palette with 5 colors.",fiveColor12:"fiveColor12 palette with 5 colors.",fiveColor13:"fiveColor13 palette with 5 colors.",fiveColor14:"fiveColor14 palette with 5 colors.",fiveColor15:"fiveColor15 palette with 5 colors.",fiveColor16:"fiveColor16 palette with 5 colors.",fiveColor17:"fiveColor17 palette with 5 colors.",
fiveColor18:"fiveColor18 palette with 5 colors.",fiveColor19:"fiveColor19 palette with 5 colors.",fiveColor20:"fiveColor20 palette with 5 colors.",fiveColor21:"fiveColor21 palette with 5 colors.",fiveColor22:"fiveColor22 palette with 5 colors.",fiveColor23:"fiveColor23 palette with 5 colors.",fiveColor24:"fiveColor24 palette with 5 colors.",fiveColor25:"fiveColor25 palette with 5 colors.",fiveColor26:"fiveColor26 palette with 5 colors.",fiveColor27:"fiveColor27 palette with 5 colors.",fiveColor28:"fiveColor28 palette with 5 colors.",
fiveColor29:"fiveColor29 palette with 5 colors.",fiveColor30:"fiveColor30 palette with 5 colors.",fiveColor31:"fiveColor31 palette with 5 colors.",fiveColor32:"fiveColor32 palette with 5 colors.",fiveColor33:"fiveColor33 palette with 5 colors.",fiveColor34:"fiveColor34 palette with 5 colors.",fiveColor35:"fiveColor35 palette with 5 colors.",fiveColor36:"fiveColor36 palette with 5 colors.",fiveColor37:"fiveColor37 palette with 5 colors.",fiveColor38:"fiveColor38 palette with 5 colors.",fiveColor39:"fiveColor39 palette with 5 colors.",
fiveColor40:"fiveColor40 palette with 5 colors.",fiveColor41:"fiveColor41 palette with 5 colors.",fiveColor42:"fiveColor42 palette with 5 colors.",fiveColor43:"fiveColor43 palette with 5 colors.",fiveColor44:"fiveColor44 palette with 5 colors.",fiveColor45:"fiveColor45 palette with 5 colors.",fiveColor46:"fiveColor46 palette with 5 colors."},ui:"PalettePicker"},cultures:{type:"enum",description:"Specifies a list of culture names available for formatting.",members:{af:"Afrikaans","af-ZA":"Afrikaans (South Africa)",
ar:"Arabic","ar-AE":"Arabic (U.A.E.)","ar-BH":"Arabic (Bahrain)","ar-DZ":"Arabic (Algeria)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-YE":"Arabic (Yemen)",az:"Azeri","az-Cyrl-AZ":"Azeri (Cyrillic, Azerbaijan)","az-Latn-AZ":"Azeri (Latin, Azerbaijan)",
be:"Belarusian","be-BY":"Belarusian (Belarus)",bg:"Bulgarian","bg-BG":"Bulgarian (Bulgaria)","bs-Latn-BA":"Bosnian (Bosnia and Herzegovina)",ca:"Catalan","ca-ES":"Catalan (Catalan)",cs:"Czech","cs-CZ":"Czech (Czech Republic)","cy-GB":"Welsh (United Kingdom)",da:"Danish","da-DK":"Danish (Denmark)",de:"German","de-AT":"German (Austria)","de-DE":"German (Germany)","de-CH":"German (Switzerland)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)",dv:"Divehi","dv-MV":"Divehi (Maldives)",el:"Greek",
"el-GR":"Greek (Greece)",en:"English","en-029":"English (Caribbean)","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-GB":"English (United Kingdom)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Republic of the Philippines)","en-TT":"English (Trinidad and Tobago)","en-US":"English (United States)","en-ZA":"English (South Africa)","en-ZW":"English (Zimbabwe)",es:"Spanish","es-AR":"Spanish (Argentina)",
"es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-ES":"Spanish (Spain)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-PY":"Spanish (Paraguay)","es-SV":"Spanish (El Salvador)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",
et:"Estonian","et-EE":"Estonian (Estonia)",eu:"Basque","eu-ES":"Basque (Basque)",fa:"Persian","fa-IR":"Persian (Iran)",fi:"Finnish","fi-FI":"Finnish (Finland)",fo:"Faroese","fo-FO":"Faroese (Faroe Islands)",fr:"French","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-CH":"French (Switzerland)","fr-LU":"French (Luxembourg)","fr-MC":"French (Principality of Monaco)",gl:"Galician","gl-ES":"Galician (Galician)",gu:"Gujarati","gu-IN":"Gujarati (India)",he:"Hebrew","he-IL":"Hebrew (Israel)",
hi:"Hindi","hi-IN":"Hindi (India)",hr:"Croatian","hr-BA":"Croatian (Bosnia and Herzegovina)","hr-HR":"Croatian (Croatia)",hu:"Hungarian","hu-HU":"Hungarian (Hungary)",hy:"Armenian","hy-AM":"Armenian (Armenia)",id:"Indonesian","id-ID":"Indonesian (Indonesia)",is:"Icelandic","is-IS":"Icelandic (Iceland)",it:"Italian","it-CH":"Italian (Switzerland)","it-IT":"Italian (Italy)",ja:"Japanese","ja-JP":"Japanese (Japan)",ka:"Georgian","ka-GE":"Georgian (Georgia)",kk:"Kazakh","kk-KZ":"Kazakh (Kazakhstan)",
kn:"Kannada","kn-IN":"Kannada (India)",ko:"Korean",kok:"Konkani","kok-IN":"Konkani (India)","ko-KR":"Korean (Korea)",ky:"Kyrgyz","ky-KG":"Kyrgyz (Kyrgyzstan)",lt:"Lithuanian","lt-LT":"Lithuanian (Lithuania)",lv:"Latvian","lv-LV":"Latvian (Latvia)","mi-NZ":"Maori (New Zealand)",mk:"Macedonian","mk-MK":"Macedonian (Former Yugoslav Republic of Macedonia)",mn:"Mongolian","mn-MN":"Mongolian (Cyrillic, Mongolia)",mr:"Marathi","mr-IN":"Marathi (India)",ms:"Malay","ms-BN":"Malay (Brunei Darussalam)","ms-MY":"Malay (Malaysia)",
"mt-MT":"Maltese (Malta)","nb-NO":"Norwegian, Bokmal (Norway)",nl:"Dutch","nl-BE":"Dutch (Belgium)","nl-NL":"Dutch (Netherlands)","nn-NO":"Norwegian, Nynorsk (Norway)",no:"Norwegian","ns-ZA":"Northern Sotho (South Africa)",pa:"Punjabi","pa-IN":"Punjabi (India)",pl:"Polish","pl-PL":"Polish (Poland)",pt:"Portuguese","pt-BR":"Portuguese (Brazil)","pt-PT":"Portuguese (Portugal)","quz-BO":"Quechua (Bolivia)","quz-EC":"Quechua (Ecuador)","quz-PE":"Quechua (Peru)",ro:"Romanian","ro-RO":"Romanian (Romania)",
ru:"Russian","ru-RU":"Russian (Russia)",sa:"Sanskrit","sa-IN":"Sanskrit (India)","se-FI":"Sami (Northern) (Finland)","se-NO":"Sami (Northern) (Norway)","se-SE":"Sami (Northern) (Sweden)",sk:"Slovak","sk-SK":"Slovak (Slovakia)",sl:"Slovenian","sl-SI":"Slovenian (Slovenia)","sma-NO":"Sami (Southern) (Norway)","sma-SE":"Sami (Southern) (Sweden)","smj-NO":"Sami (Lule) (Norway)","smj-SE":"Sami (Lule) (Sweden)","smn-FI":"Sami (Inari) (Finland)","sms-FI":"Sami (Skolt) (Finland)",sq:"Albanian","sq-AL":"Albanian (Albania)",
sr:"Serbian","sr-Cyrl-BA":"Serbian (Cyrillic) (Bosnia and Herzegovina)","sr-Cyrl-CS":"Serbian (Cyrillic, Serbia)","sr-Latn-BA":"Serbian (Latin) (Bosnia and Herzegovina)","sr-Latn-CS":"Serbian (Latin, Serbia)",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SE":"Swedish (Sweden)",sw:"Kiswahili","sw-KE":"Kiswahili (Kenya)",syr:"Syriac","syr-SY":"Syriac (Syria)",ta:"Tamil","ta-IN":"Tamil (India)",te:"Telugu","te-IN":"Telugu (India)",th:"Thai","th-TH":"Thai (Thailand)","tn-ZA":"Tswana (South Africa)",tr:"Turkish",
"tr-TR":"Turkish (Turkey)",tt:"Tatar","tt-RU":"Tatar (Russia)",uk:"Ukrainian","uk-UA":"Ukrainian (Ukraine)",ur:"Urdu","ur-PK":"Urdu (Islamic Republic of Pakistan)",uz:"Uzbek","uz-Cyrl-UZ":"Uzbek (Cyrillic, Uzbekistan)","uz-Latn-UZ":"Uzbek (Latin, Uzbekistan)",vi:"Vietnamese","vi-VN":"Vietnamese (Vietnam)","xh-ZA":"Xhosa (South Africa)","zh-CN":"Chinese (People's Republic of China)","zh-HK":"Chinese (Hong Kong S.A.R.)","zh-CHS":"Chinese (Simplified)","zh-CHT":"Chinese (Traditional)","zh-MO":"Chinese (Macao S.A.R.)",
"zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)","zu-ZA":"Zulu (South Africa)"},seealso:"Tutorials.labels"},timeUnit:{type:"enum",description:"Specifies a time unit.",members:{second:"A second.",minute:"A minute.",hour:"An hour.",day:"A day.",week:"A week.",month:"A month.",year:"A year."}},zoomAxis:{type:"enum",description:"Specifies which axis to zoom.",members:{x:"Zoom x axis.",y:"Zoom y axis.",xy:"Zoom x and y axis.",none:"No zooming."}},alignHorizontal:{type:"enum",description:"Specifies a horizontal alignment of text.",
members:{center:"Centered",left:"Left aligned",right:"Right aligned"}},alignVertical:{type:"enum",description:"Specifies a vertical alignment of text.",members:{top:"Top aligned",middle:"Vertically centered",bottom:"Bottom aligned"}},legendLayout:{type:"enum",description:"Specifies the layout of entries inside the legend box.",members:{auto:"Layout is determined automatically.",vertical:"Entries are laid out vertically.",horizontal:"Entries are laid out horizontally."},seealso:"Tutorials.legend"},
orientation:{type:"enum",description:"Specifies the orientation in relation to another visual object.",members:{none:"No orientation is specified.",left:"The object is on the left.",right:"The object is on the right.",top:"The object is on top.",bottom:"The object is on bottom.",topLeft:"The object on the upper left hand side.",topRight:"The object on the upper right hand side.",bottomRight:"The object on the bottom right hand side.",bottomLeft:"The object on the bottom left hand side."}},titlePosition:{type:"enum",
description:"Specifies the position of a title box.",members:{left:"title left position",center:"centered title",right:"title is right aligned",full:"title box spans chart area."}},fontWeight:{type:"enum",description:"Specifies font weight style options.",members:{normal:"Normal weight",bold:"Bold weight"}},fontStyle:{type:"enum",description:"Specifies a font style.",members:{normal:"Normal font style",italic:"Italic font style"}},fontFamily:{type:"enum",description:"Specifies a predefined font family.",
caseInsensitive:!0,members:{Tahoma:"",Arial:"",Verdana:"",Helvetica:"","Trebuchet MS":"","Arial Black":"","Comic Sans MS":"","Courier New":"",Georgia:"",Impact:"","Lucida Console":"","Lucida Sans Unicode":"","Lucida Grande":"",Geneva:"","Times New Roman":"","MS Sans Serif":"","MS Serif":"","Arial, Helvetica, sans-serif":"","Arial Black, Gadget, sans-serif":"","Comic Sans MS,  cursive":"","Courier New,  monospace":"","Georgia,  serif":"","Impact,  Charcoal, sans-serif":"","Lucida Console, Monaco, monospace":"",
"Lucida Sans Unicode, Lucida Grande, sans-serif":"","Palatino Linotype, Book Antiqua, Palatino, serif":"","Tahoma, Geneva, sans-serif":"","Times New Roman,  Times, serif":"","Trebuchet MS,  sans-serif":"","Verdana,  Geneva, sans-serif":"","MS Sans Serif, Geneva, sans-serif":"","MS Serif, New York, serif":""}},cursor:{type:"enum",description:"Specifies a cursor icon.",members:{none:"No cursor icon",pointer:"Hand poiter cursor icon indicative of a clickable object",help:"Indicates help is available.",
crosshair:"Renders as a crosshair.",wait:"Indicates the program is busy.",progress:"Indicates the program is in progress.",text:"Indicates text.","n-resize":"Indicates the edge can be moved up.","ne-resize":"Indicates the edge can be moved up right.","nw-resize":"Indicates the edge can be moved up left.","e-resize":"Indicates the edge can be moved right.","s-resize":"Indicates the edge can be moved down.","se-resize":"Indicates the edge can be moved down right.","sw-resize":"Indicates the edge can be moved down left.",
"w-resize":"Indicates the edge can be moved left."}},urlTarget:{type:"enum",description:"Specifies a URL target attribute.",members:{_blank:"Opens a link in a new window.",_parent:"Opens a link in a parent HTML frame.",_self:"(Default Behavior) Opens a link in the same frame as it was clicked.",_top:"Opens a link in the full body of the window."}},renderMode:{type:"enum",description:"Specifies whether to use JavaScript or Silverlight to render the chart.",members:{JavaScript:"Chart is rendered with JavaScript using SVG or VML engines.",
Silverlight:"Chart is rendered with the Silverlight engine.","Silverlight-JavaScript":"Chart is rendered with Silverlight if it is installed. Otherwise, JavaScript is used."}},dashStyle:{type:"enum",description:"Specifies the line style of a line.",caseInsensitive:!0,members:{Solid:"Specifies a solid line.",ShortDash:"Specifies a short dashed line.",ShortDot:"Specifies a short dotted line.",ShortDashDot:"Specifies an alternating short dash-dot line.",ShortDashDotDot:"Specifies an alternating short dash-dot-dot line. ",
Dot:"Specifies a dotted line",Dash:"Specifies a dashed line.",LongDash:"Specifies a long dashed line.",DashDot:"Specifies an alternating dash-dot line. ",DashDotDot:"Specifies an alternating dash-dot-dot line. ",LongDashDot:"Specifies an alternating long dash-dot line. ",LongDashDotDot:"Specifies an alternating long dash-dot-dot line. "}},mimeType:{type:"enum",description:"Image mime types used when exporting to image formats.",members:{"image/png":"PNG Image Format","image/jpeg":"JPEG Image Format",
"application/pdf":"PDF Image Format","image/svg+xml":"SVG Image Format"}},animationEasing:{type:"enum",description:"Specifies an animation easing algorithm.",members:{easeInQuad:"",easeOutQuad:"",easeInCubic:"",easeOutCubic:"",easeInOutCubic:"",easeInQuart:"",easeOutQuart:"",easeInOutQuart:"",easeInQuint:"",easeOutQuint:"",easeInOutQuint:"",easeInSine:"",easeOutSine:"",easeInOutSine:"",easeInExpo:"",easeOutExpo:"",easeInOutExpo:"",easeInCirc:"",easeOutCirc:"",easeInOutCirc:"",easeInElastic:"",easeOutElastic:"",
easeInOutElastic:"",easeInBack:"",easeOutBack:"",easeInOutBack:"",easeInBounce:"",easeOutBounce:"",easeInOutBounce:""},seealso:'<a href="http://jqueryui.com/effect/#easing">jQuery Easing Effects</a>:jQuery easing effects demonstration'},previewInteractivity:{type:"enum",description:"Specifies the interactivity options of the preview area in a navigator chart.",members:{cells:"Enables Cell selection.(SL Only)",arbitrarySelection:"Enables selection at any arbitrary position.(SL Only)",scrollWheel:"Enables scroll wheel zooming.(SL Only)"}},
chartAreaInteractivity:{type:"enum",description:"Specifies the interactivity options of the chart area in a navigator chart.",members:{dragScrolling:"Enables drag scrolling on chart area.",arbitrarySelection:"Enables zoom area selection at any arbitrary position.",scrollWheel:"Enables scroll wheel zooming. (SL Only)"}},silverlightLoadingAnimation:{type:"enum",description:"Specifies loading animation when used with Silverlight renderMode setting.",members:{none:"No animation. ",SnakeSegmented:"Segmented Snake animation. ",
SnakeDouble:"Double snakes animation. ",Snake:"Rotating snake animation. ",CircleSegmented:"Segmented circle animation. "},support:{hs:[!1,"Only Silverlight navigator supports loading animation graphic."],hc:[!1,"Only Silverlight navigator supports loading animation graphic."],test:["(!usingSL)","Only Silverlight navigator supports loading animation graphic."]}},funnelNozzleType:{type:"enum",version:"1.2",inline:!0,isInlined:!0,members:{nozzle:{isDefault:!0},noNozzle:{}}},seriesLayout:{type:"enum",
version:"1.2",inline:!0,hide:!0,hidden:!0,isInlined:!0,members:{XY:{isDefault:!0,description:"Cone shaped funnel.",chain:"enum_funnelOrientationType"},visualShape:{description:"Pyramid shaped funnel.",chain:"enum_funnelOrientationType"}}}},utils:{getType:function(a){if("undefined"!==typeof a){if("boolean"===typeof a)return"boolean";if("number"===typeof a)return"number";if("function"===typeof a)return"function";if(a.pop)return"array";if("string"===typeof a)return"string"}return"undefined"}}}},g={point:[["%name",
"Point's Name"],["%yValue","Point's Y value."],["%yStart","Point's yStart value."],["%xValue","Point's X value"],["%zValue","Point's Z value"],["%open","Open price value."],["%high","High price value."],["%low","Low price value."],["%close","Close price value."],["%parentName","(v1.3) The parent point's name or the series name. Used with tree data where points have parent points."],["%seriesName","Series name point belongs to."],["%color",'Point color as a hex value such as "#EB1AC2".'],["%id","Point's ID"],
["%yAxisLabel","Label text of the y axis this point is plotted on."],["%xAxisLabel","Label text of the x axis this point is plotted on."],["%seriesPointCount","Number of points in series."],["%__","Custom point attribute key values can be used to retrieve additional point data. This data can be defined through point.attributes ."],["%percentile","The y value percentile calculation of this point in relation to other points within the parent series."],["%percentOfTotal","The percentage of all the series on the chart this point represents."],
["%percentOfSeries","The percentage of the series this point represents."],["%percentOfGroup","The percentage of all the elements with the same name this point represents."],["%percentOfSeriesMax","The point's y value percentage of the maximum point value on the chart. point represents."],["%percentOfSeriesRange","The point's y value percentage of the range between the parent series minimum and maximum point."],["%xPercentile","The x value percentile calculation of this point in relation to other points within the parent series."],
["%xPercentOfTotal","The percentage of x values of all the series on the chart this point represents."],["%xPercentOfSeries","The percentage of x values of the series this point represents."],["%xPercentOfGroup","The percentage of x values of all the elements with the same name this point represents."],["%xPercentOfSeriesMax","The point's x value percentage of the maximum point value on the chart. point represents."],["%xPercentOfSeriesRange","The point's x value percentage of the range between the parent series minimum and maximum point."],
["%zPercentile","The z value percentile calculation of this point in relation to other points within the parent series."],["%zPercentOfTotal","The percentage of z values of all the series on the chart this point represents."],["%zPercentOfSeries","The percentage of z values of the series this point represents."],["%zPercentOfGroup","The percentage of z values of all the elements with the same name this point represents."],["%zPercentOfSeriesMax","The point's z value percentage of the maximum point value on the chart. point represents."],
["%zPercentOfSeriesRange","The point's z value percentage of the range between the parent series minimum and maximum point."],["%yPercentOfAxisRange","(v1.2) Percentage of y axis range."],["%xPercentOfAxisRange","(v1.2) Percentage of x axis range."],["%PercentOfDataMax","(v1.2) Percentage of the max y value of all series."],["%xPercentOfDataMax","(v1.2) Percentage of the max x value of all series."],["%zPercentOfDataMax","(v1.2) Percentage of the max z value of all series."],["%PercentOfDataRange",
"(v1.2) Percentage of the range of y values in all series."],["%xPercentOfDataRange","(v1.2) Percentage of the range of x values in all series."],["%zPercentOfDataRange","(v1.2) Percentage of the range of z values in all series."]],series:[["%name","Series name."],["%id","Series ID"],["%color","Series color."],["%yAxisLabel","Label text of the y axis this point is plotted on."],["%xAxisLabel","Label text of the x axis this point is plotted on."],["%pointCount","Number of points in series."],["%lastY",
"Y value of the last point in the series"],["%lastX","X value of the last point in the series"],["%lastZ","Z value of the last point in the series"],["%maxPointName","Name of the point with the largest y value."],["%minPointName","Name of the point with the smallest y value."],["%xMaxPointName","Name of the point with the largest x value."],["%xMinPointName","Name of the point with the smallest x value."],["%zMaxPointName","Name of the point with the largest z value."],["%zMinPointName","Name of the point with the smallest z value."],
["%sum","Sum of series point y values."],["%max","Largest point y value."],["%min","Smallest point y value"],["%average","Average of series point y values."],["%median","Mode of series point y values."],["%mode","Mode of series point y values."],["%rangeSum","Sums of differences between point y and yStart values."],["%percentOfTotal","Percentage of all series on the chart this series represents."],["%xSum","Sum of series point x values."],["%xMax","Largest point x value."],["%xMin","Smallest point x value"],
["%xAverage","Average of series point x values."],["%xMedian","Mode of series point x values."],["%xMode","Mode of series point x values."],["%xPercentOfTotal","The x value percentage of all series on the chart this series represents."],["%zSum","Sum of series point z values."],["%zMax","Largest point z value."],["%zMin","Smallest point z value"],["%zAverage","Average of series point z values."],["zMedian","Mode of series point z values."],["%zMode","Mode of series point z values."],["%xPercentOfTotal",
"The z value percentage of all series on the chart this series represents."]],seriesCollection:[["%pointCount","Number of points in all series.."],["%sum","Sum of all y values on the chart."],["%max","Maximum y value of the chart data."],["%min","Minimum y value of the chart data."],["%average","Average y value of chart data."],["%median","Median y value of chart data."],["%mode","Mode y value of chart data."],["%rangeSum","Sums of differences between point y and yStart values."],["%maxSeriesName",
"Name of the series with the largest y value point."],["%minSeriesName","Name of the series with the smallest y value point."],["%maxPointName","Name of the point with the largest y value."],["%minPointName","Name of the point with the smallest y value."],["%xMaxSeriesName","Name of the series with the largest x value point."],["%xMinSeriesName","Name of the series with the smallest x value point."],["%xMaxPointName","Name of the point with the largest x value."],["%xMinPointName","Name of the point with the smallest x value."],
["%zMaxSeriesName","Name of the series with the largest z value point."],["%zMinSeriesName","Name of the series with the smallest z value point."],["%zMaxPointName","Name of the point with the largest z value."],["%zMinPointName","Name of the point with the smallest z value."],["%xSum","Sum of all x values on the chart."],["%xMax","Maximum x value of the chart data."],["%xMin","Minimum x value of the chart data."],["%xAverage","Average x value of chart data."],["%xMedian","Median x value of chart data."],
["%xMode","Mode x value of chart data."],["%zSum","Sum of all z values on the chart."],["%zMax","Maximum z value of the chart data."],["%zMin","Minimum z value of the chart data."],["%zAverage","Average z value of chart data."],["%zMedian","Median z value of chart data."],["%zMode","Mode z value of chart data."]],value:[["%value","Represents the value."]]},h=d();window.JSCL=jQuery.extend(!0,null,window.JSCL,{mainIndex:{Tutorials:{type:"html",description:"Tutorials describing how to use the chart.",
listMode:"recurse",label:"Tutorials",html:{"Getting Started":{label:"Getting Started",type:"html",description:"Explains how to setup your first chart.",url:"gettingStarted.html"},"Exploring Samples":{type:"html",label:"Exploring Samples",description:"Describes how to find samples for features of interest.",url:"sampleExplorer.html"},Editor:{type:"html",label:"JSCharting Editor",description:"The editor provides an advanced design time environment for exploring and configuring chart settings to get the exact results for your specific needs and to further tune chart settings and visuals.  It is also a great tool for learning JSCharting by exploring and interacting with the various settings and immediately seeing the result of your updates. The editor is broken into different windows, or panes, with specific functionality.",
url:"editor.html"},"Chart Types":{type:"html",label:"Chart Types",description:"Describes how to construct different chart types.",url:"chartTypes.html"},"Code Expansion":{type:"html",label:"Code Expansion",description:"The code expansion feature makes writing chart settings much easier.",url:"codeExpansion.html"},"Colors And Fills":{type:"html",label:"Colors And Fills",description:"Describes how colors and gradient fills can be set.",url:"fills.html"},Interactivity:{type:"html",description:"Describes built in chart interactivity features and events.",
url:"interactivity.html",html:{States:{type:"html",description:"Describes chart element state settings and related features.",url:"states.html"}}},Legend:{type:"html",description:"This tutorial describes how the legend can be manipulated.",url:"legend.html"},"Finance Navigator":{type:"html",label:"Finance Navigator",description:"Describes Finance Navigator features.",url:"navigator.html"},Labels:{type:"html",description:"Describes label related topics including formatting, label tokens, and more.",
url:"labels.html",html:{"Token Reference":{type:"html",label:"Token Reference",description:"Label token reference.",url:"tokenReference.html"}}},"Data Population":{type:"html",description:"Demonstrates how to populate the chart with data.",url:"populateData.html",html:{"Custom Attributes":{label:"Custom Attributes",type:"html",description:"Using custom point attributes.",url:"customAttributes.html"},"Statistics And Calculations":{label:"Statistics And Calculations",type:"html",description:"Describes how to perform calculations on data in the chart.",
url:"calculations.html"}}}}},OtherMainLevel:{About:{type:"html",description:"JSCharting info.",listMode:"recurse",children:{Features:{description:"JSCharting Feature list"},Contact:{description:"Contact information.",children:{Support:{label:"Online Support",url:"OnlineSupport.html",description:"Online Support Details."}}},LicenseAgreement:{label:"Licensing Agreement",url:"LicensingAgreement.html",description:"The complete licensing agreement."}}}},"API Reference":{type:"category",label:"API Reference",
description:"Describes the API used to create and manipulate charts.",children:{"JSON objects":{label:"JSON Objects",type:"JSONObjectList",description:"Predefined JSON configuration objects used to specify settings for the chart.",children:{Types:{label:"Types",description:"Additional JSON configuration objects used with the main chart."}}},"JSON enums":{label:"Enums",type:"JSONEnumList",description:"Predefined string values used with settings for the chart."},Objects:{label:"JS Objects",type:"iObjectList",
description:"JS Objects related to the chart library."}}}},JSONapi:{},InteractiveAPI:{},getJSONapi:d,getApiObjCurrent:function(a){var b=e[a];if(b&&-1<b.indexOf("{"))return JSON.parse(b);var b=d().objects[a],c=JSON.stringify(b,function(a,b){return"function"===typeof b?b.toString():b});c&&(e[a]=c);return b},getApiObj:function(a){if(a="label"===a?d().objects.label:h.objects[a])return Object.create(a)},getApiEnum:function(a){var b=f[a];if(b&&-1<b.indexOf("{"))return JSON.parse(b);var b=d().enums[a],c=
JSON.stringify(b,function(a,b){return"function"===typeof b?b.toString():b});c&&(f[a]=c);return b},getTokens:function(a){return g[a]}});var k=d();window.JSCL.JSONapi=k;window.JSCL.InteractiveAPI={objects:{JSC:{type:"iObject",description:"A global object that provides methods not specific to any particular chart.",remarks:"",iObject:{formatString:{type:"method",description:"A static method providing number and date formatting by passing a value and using standard or custom format strings.",parameters:{val:{type:"number,date",
description:"The value to be formatted based on the given format string.",number:{description:"A numeric value to format."},date:{description:"A date value to format."},required:!0},format:{type:"string",description:"Format string.",required:!0}},returns:{type:"string",description:"Returns a string with the value formatted according to the specified format."},seealso:"Samples.callbackFormatting|Tutorials.Labels:Includes a information on formatStrings."},clearApiCache:{type:"method",description:"A static method that clears the API cache. This cache is used to improve JSON processing and expansion performance. It is most useful when there are more than one charts on a page. Clearing this cache can decrease memory usage in the browser if necessary."},
Chart:{type:"method",description:"Initializes and returns a new instance of the JS chart object.",parameters:{json:{type:"obj_chart",description:"Chart options"},callback:{type:"method",description:'A callback function called when the chart load is complete. This function is called in the context of the chart object, hence, the "this" keyword can be used in the function to refer to the <a href="iObject.chart">chart</a>.',required:!1}},returns:{type:"iobj_chart",description:"Returns a chart JS object."},
example:"var chart = new JSC.Chart(options,callback);"},pointsFromArray:{type:"method",version:"1.1",description:"A static method used to populate points from array data with the goal of reducing the amount of overhead (string data size) when data is passed to JSCharting.",example:"var arrayOfPoints = JSC.pointsFromArray('name,y', [ ['Jan', 196], ['Feb', 178], ['Mar', 169] ])",parameters:{properties:{type:"string",description:"A comma delimited list of properties the data parameter arrays map to.",
remarks:"Properties can be specified with as paths such as 'attribute.distance', which is similar to setting point.attribute.distance = x",example:"'name,y'",required:!0},data:{type:"array",description:"Data to map to the properies for each point.",required:!0,array:{arrayType:"specific",types:[{type:"array",array:{0:{arrayType:"specific",example:"['Greg',50]",description:"Each arrayGroup creates a new point where each value in the array is mapped to a property named in the properties parameter.",
types:[{name:"valueN",type:"string,number,date",multi:!0,description:"Value mapped to the properties defined in the first parameter."}]}}}]}}},returns:{type:"string",description:"Returns a string with the value formatted according to the specified format."},seealso:"Tutorials.staticData"},getPalette:{type:"method",version:"1.1",description:"A static method used to get the colors of a specified palette.",parameters:{id:{type:"enum_palette,number",description:"The name or index of the palette to get.",
required:!0}},returns:{type:"array",description:"An array of colors",array:{arrayType:"specific",types:[{type:"obj_color"}]}}},colorToPalette:{type:"method",version:"1.4",description:"Generates a specified number of colors based on the given base color and range of HSL variations.",seealso:"Samples.mapPaletteDesigner",parameters:{base:{type:"obj_color",description:"A base color to use as a starting point.",required:!0},variations:{type:"object",description:"A set of 0-1 values defining the range of variation of each HSL component in the resulting color palettte.",
object:{hue:{type:"number",description:"A value between 0-1 that indicates the amount of the hue spectrum that is used in resulting colors."},saturation:{type:"number",description:"A value between 0-1 that indicates the amount of the saturation range that is used in resulting colors."},lightness:{type:"number",description:"A value between 0-1 that indicates the amount of the lightness range that is used in resulting colors."}}},count:{type:"number",description:"Number of color to create."},sort:{type:"number",
description:"-1 = Random shuffling. 0 = Linear sort. 1 = Random seed."}},returns:{type:"array",description:"An array of colors",array:{arrayType:"specific",types:[{type:"obj_color"}]}}}}},point:{type:"iObject",description:"Represents a point on the chart providing properties and method that enable manipulating the point in real-time.",iObject:{chart:{type:"iobj_chart",description:"A reference to the parent chart object."},series:{type:"iobj_series",description:"The point's parent series JS object."},
color:{type:"obj_color",description:"The point's color."},name:{type:"string",description:"The point's name."},id:{type:"string",description:"The point's id that was specified or generated internally. All points will have an ID based on either of these two methods."},x:{type:"number,date,string",description:"The point's x value.",number:{description:"Numeric x value."},date:{description:"Time based x value."},string:{description:"Time based string value used with xAxis scale type set to time."}},
y:{type:"number",description:"The point's y value.",number:{description:"Numeric y value."}},z:{type:"number",description:"The point's z value.",version:"1.1"},position:{type:"object",description:"An object representing the position of this data point.",object:{size:{type:"object",description:" The point's size in pixels.",object:{width:{type:"number",description:"This point's pixel width."},height:{type:"number",description:"This point's pixel height."}}},page:{type:"object",description:" The point's location relative to the page in pixels.",
object:{x:{type:"number",description:"This point's x position relative to the page."},y:{type:"number",description:"This point's y position relative to the page."}}},chartArea:{type:"object",description:" The point's location relative to the chart area in pixels.",object:{x:{type:"number",description:"This point's x position relative to the chart area."},y:{type:"number",description:"This point's y position relative to the chart area."}}}}},calculations:{type:"object",description:"An object containing calculations and other details about this point.",
remarks:"A point group means points from all series that share the same x value of name.",object:{group:{type:"object",version:"1.1",description:"Calculations based on points of all series sharing the x value with this point. These points are referred to as a group.",object:{average:{type:"number",description:"The average of all points on the chart sharing the same name or x value."},list:{type:"array",description:"Array of y values based on points in this group.",array:{arrayType:"specific",types:[{type:"number",
description:"Point y value."}]}},sum:{type:"number",description:"The sum of point y values sharing the same name or x value."},zAverage:{type:"number",description:"The average of all points on the chart sharing the same name or x value."},zList:{type:"array",description:"Array of y values based on points in this group.",array:{arrayType:"specific",types:[{type:"number",description:"Point y value."}]}},zSum:{type:"number",description:"The sum of point y values sharing the same name or x value."}}},
percentOf:{type:"object",version:"1.1",description:"Calculations providing the percentage of this point's value in relation to points of all series given a specific shared attribute.",object:{group:{type:"number",description:"The percentage of all points that this point's group makes up."},series:{type:"number",description:"The percentage this point makes up of all points in its series."},total:{type:"number",description:"The percentage this point makes up of all points on the chart."},xgroup:{type:"number",
description:"The percentage of all points that this point's group makes up."},xseries:{type:"number",description:"The percentage this point makes up of all points in its series."},xtotal:{type:"number",description:"The percentage this point makes up of all points on the chart."},zgroup:{type:"number",description:"The percentage of all points that this point's group makes up."},zseries:{type:"number",description:"The percentage this point makes up of all points in its series."},ztotal:{type:"number",
description:"The percentage this point makes up of all points on the chart."}}},series:{type:"object",version:"1.1",description:" ",object:{average:{type:"number",description:"The average of all points in this series."},list:{type:"array",description:"Array of all point y values in this point's parent series.",array:{arrayType:"specific",types:[{type:"number",description:"Point y value."}]}},max:{type:"number",description:"Maximum point y value in this series."},min:{type:"number",description:"Minimum point y value in this series."},
sum:{type:"number",description:"Sum of all point y values in this series."},xAverage:{type:"number",description:"The average of all points in this series."},xList:{type:"array",description:"Array of all point y values in this point's parent series.",array:{arrayType:"specific",types:[{type:"number",description:"Point y value."}]}},xMax:{type:"number",description:"Maximum point y value in this series."},xMin:{type:"number",description:"Minimum point y value in this series."},xSum:{type:"number",description:"Sum of all point y values in this series."},
zAverage:{type:"number",description:"The average of all points in this series."},zList:{type:"array",description:"Array of all point y values in this point's parent series.",array:{arrayType:"specific",types:[{type:"number",description:"Point y value."}]}},zMax:{type:"number",description:"Maximum point y value in this series."},zMin:{type:"number",description:"Minimum point y value in this series."},zSum:{type:"number",description:"Sum of all point y values in this series."},pointCount:{type:"number",
description:"Number of points in this series."},yRangeSums:{type:"number",description:"Difference between minimum and maximum y values in this series."}}}}},remove:{type:"method",description:"Removes this point from the chart in real-time.",parameters:{updateOptions:{type:"object",version:"1.1",description:"Options used when this point is removed.",required:!1,object:{animation:{description:"The animation used when this data point is removed.",type:"obj_animation"}}}}},update:{type:"method",description:"Updates the point with the specified settings in real-time.",
parameters:{pointOptions:{type:"obj_point",description:"the setting this point will be updated with."},updateOptions:{type:"object",version:"1.1",description:"Options used when this point is updating.",required:!1,object:{animation:{description:"The animation used when this data point updates.",type:"obj_animation"}}}}},select:{type:"method",description:"Toggles or sets the select state for this point depending on the specified parameter options.",parameters:{isSelected:{type:"bool",description:"Specifies whether the point is selected. When not set, or if set with the value of undefined, the selected state toggles.",
required:!1},accumulate:{type:"bool",description:"When true, the point is selected without affecting other point selection state. When false, all other points are deselected.",required:!1}}},explode:{type:"method",description:"Toggles or sets the explode state for this point when used with pies or donut series.",parameters:{isExploded:{type:"bool",description:"Specifies whether the point exploded state is true or false. When not specified, or if set with the value of undefined, the state toggles.",
required:!1},updateOptions:{type:"object",version:"1.1",description:"Options used when this point is updating.",required:!1,object:{animation:{description:"Animation settings used when this point explode state changes.",type:"obj_animation"}}}}},zoomTo:{type:"method",version:"1.4",description:"Zooms this point into view. (Mapping)",parameters:{updateOptions:{type:"object",description:"Options used when this point zoom occurs.",required:!1,object:{animation:{description:"Animation settings used when this point zoom occurs.",
type:"obj_animation"}}}}},replaceTokens:{type:"method",description:'Evaluates the specified string containing point tokens and expressions such as "%name  %yValue" against this data point and returns the result. (See token reference below for a list of available tokens)',remarks:"This method can be used to populate a template string with tokens that describe this point. Label expressions also enable inline formatting.",parameters:{str:{type:"string",description:"A string containing tokens and expression to evaluate."}},
returns:{type:"string",description:"The resulting string after tokens are replaced with values and expressions are evaluated."},seealso:"Tutorials.labelExpressions|Tutorials.tokenReference:List of available label tokens|Samples.HoverSideInfo"},tokenValue:{type:"method",version:"1.1",description:"Returns the value of the specified token associated with this data point in it's native data type. For example, if the token represents a number, the result of this function will be a number. (See token reference below for a list of available tokens)",
remarks:"Only one token or expression should be used with this method.",example:"pointObj.tokenValue('%percentOfSeries')",parameters:{str:{type:"string",description:"A string containing a single token to evaluate."}},returns:{type:"number,date,string,bool",description:"The value of the specified token.",number:{description:"A numeric value represented by the specified token."},date:{description:"A date value represented by the specified token."},string:{description:"A string value represented by the specified token."},
bool:{description:"A bool value represented by the specified token."}},seealso:"Tutorials.tokenReference:List of available label tokens"}}},series:{type:"iObject",description:"Represents a series on the chart by providing properties and methods to manipulate and measure it in real-time.",iObject:{id:{type:"string",description:"The series id that was specified or generated internally. All series will have an ID based on either of these two methods."},color:{type:"obj_color",description:"The series's color."},
name:{type:"string",description:"The series's name."},points:{type:"array",description:"An array of point JS objects representing each point in this series.",array:{arrayType:"specific",types:[{type:"iobj_point",description:"A point JS object."}]}},chart:{type:"iobj_chart",description:"A reference to the parent chart JS object."},calculations:{type:"object",description:"An object containing calculations and other details about this series.",object:{average:{type:"number",description:"Average of point y values."},
list:{type:"array",description:"Array of point y values.",array:{arrayType:"specific",types:[{type:"number",description:"Point y value."}]}},max:{type:"number",description:"Maximum point y value in this series."},min:{type:"number",description:"Minimum point y value in this series."},percentOfTotal:{type:"number",description:"The percentage that the sum of y values in this series makes up of the sum of all point y values on this chart."},range:{type:"number",description:"Difference between minimum and maximum values in this series."},
sum:{type:"number",description:"Sum of all point y values in this series."},xMax:{type:"number",description:"Maximum point x value in this series."},xMin:{type:"number",description:"Minimum point x value in this series."}}},addPoint:{type:"method",description:"Adds a point to the current series in real-time.",parameters:{pOptions:{type:"obj_point",description:"JSON configuration of the point to be added."},updateOptions:{type:"object",version:"1.1",description:"Options used when this point is added.",
required:!1,object:{shift:{type:"bool",description:"Specifies whether the first point in the series is removed when this point is added.",def:!1,required:!1},animation:{type:"obj_animation",description:"Animation settings used when this point is added.",required:!1}}}}},updatePoints:{type:"method",version:"1.1",description:"Updates all the points of the current series in real-time.",remarks:"The existing points will be updated and new ones added if necessary, or existing ones will be removed to match the new point array.",
parameters:{pOptions:{type:"array",description:"An array of points to update the current points with.",array:{arrayType:"specific",types:[{description:"A point to be added as part of the group.",type:"obj_point"}]}},updateOptions:{type:"object",version:"1.1",description:"Options used when updating the points.",required:!1,object:{animation:{type:"obj_animation",description:"Animation settings used when these points are updated.",required:!1}}}}},show:{type:"method",description:"Sets or toggles the visibility of this series.",
parameters:{isShown:{type:"bool",description:"Specifies whether the series is visible. When not set, the visible state toggles.",required:!1}},returns:{type:"bool",description:"Value that indicates whether the series is visible or not."}},remove:{type:"method",description:"Removes this series from the chart.",parameters:{updateOptions:{type:"object",version:"1.1",description:"Update options used when this series is removed.",required:!1,object:{animation:{type:"obj_animation",description:"Animation settings used when this point is added.",
required:!1}}}}},select:{type:"method",description:'Sets or toggles the series "select" state.',parameters:{isSelected:{type:"bool",description:"Specifies whether the series is selected. When not set, the selected state toggles.",required:!1}}},setPalette:{type:"method",description:"Updates the series palette in real-time.",version:"1.2",parameters:{palette:{type:"enum_palette,array,obj_smartPalette",array:{arrayType:"specific",types:[{type:"obj_color"}],description:"Array of color strings."},description:"A new palette or smartPalette to apply to this series."},
updateOptions:{type:"object",version:"1.1",description:"Update options used when this title is updating.",required:!1,object:{animation:{description:"Animation settings used when this palette is updating.",type:"obj_animation"}}}}},zoomTo:{type:"method",version:"1.4",description:"Zooms this series into view. (Mapping)",parameters:{updateOptions:{type:"object",description:"Options used when this series zoom occurs.",required:!1,object:{animation:{description:"Animation settings used when this series zoom occurs.",
type:"obj_animation"}}}}},replaceTokens:{type:"method",description:'Evaluates the specified string containing series tokens and expressions such as "%name  %sum" against this data series and returns the result. (See token reference below for a list of available tokens)',remarks:"This method can be used to populate a template string with tokens that describe this point. Label expressions also enable inline formatting.",parameters:{str:{type:"string",description:"A string containing tokens and expression to evaluate."}},
returns:{type:"string",description:"The resulting string after tokens are replaced with values and expressions are evaluated."},seealso:"Tutorials.labelExpressions|Tutorials.tokenReference:List of available label tokens."},tokenValue:{type:"method",version:"1.1",description:"Returns the value of the specified token associated with this data series in it's native data type. For example, if the token represents a number, the result of this function will be a number. (See token reference below for a list of available tokens)",
remarks:"Only one token or expression should be used with this method.",example:"seriesObj.tokenValue('%sum')",parameters:{str:{type:"string",description:"A string containing a single token to evaluate."}},returns:{type:"number,date,string,bool",description:"The value of the specified token.",number:{description:"A numeric value represented by the specified token."},date:{description:"A date value represented by the specified token."},string:{description:"A string value represented by the specified token."},
bool:{description:"A bool value represented by the specified token."}},seealso:"Tutorials.tokenReference:List of available label tokens"}}},axis:{type:"iObject",description:"Represents an axis JS object providing methods to manipulate and measure the axis.",iObject:{addMarker:{type:"method",description:"Adds an axis marker to the axis in real-time.",parameters:{marker:{type:"obj_axisMarker",description:"JSON settings of the axis marker to add."}},seealso:"Samples.AxisInteractiveMarkers"},removeMarker:{type:"method",
description:"Removes an existing axis marker from the axis.",parameters:{id:{type:"string",description:"ID of the axis marker to remove."}},seealso:"Samples.AxisInteractiveMarkers"},setRange:{type:"method",description:"Sets a new scale range for this axis.",remarks:"A range can be set for a category scale, however, numbers are used to represent each axis tick starting with 0.",parameters:{min:{type:"number,date",description:"New axis minimum value.",number:{description:"Numeric minimum value."},date:{description:"Time based minimum value."}},
max:{type:"number,date",description:"New axis maximum value.",number:{description:"Numeric maximum value."},date:{description:"Time based maximum value."}},updateOptions:{type:"object",version:"1.1",description:"Options used when this label is updating.",required:!1,object:{animation:{description:"Animation settings used when this axis range updates.",type:"obj_animation"}}}},seealso:"Samples.AxisInteractiveExtremes"},getRange:{type:"method",description:"Gets range information of this axis.",returns:{type:"object",
isInlined:!0,description:"Axis range information.",object:{min:{type:"number,date",description:"Axis minimum",number:{description:"Numeric axis minimum value."},date:{description:"Time based axis minimum value."}},max:{type:"number,date",description:"Axis maximum",number:{description:"Numeric axis maximum value."},date:{description:"Time based axis maximum value."}},dataMin:{type:"number,date",description:"Minimum value of data on this axis.",number:{description:"Minimum numeric value of data on this axis."},
date:{description:"Minimum time based value of data on this axis."}},dataMax:{type:"number,date",description:"Maximum value of data on this axis.",number:{description:"Maximum numeric value of data on this axis."},date:{description:"Maximum time based value of data on this axis."}},userMin:{type:"number,date",description:"The minimum value applied programmatically if a range was set with the setRange method.",number:{description:"Minimum numeric value set with the setRange method."},date:{description:"Minimum time based value set with the setRange method."}},
userMax:{type:"number,date",description:"The maximum value applied programmatically if a range was set with the setRange method.",number:{description:"Maximum numeric value set with the setRange method."},date:{description:"Maximum time based value set with the setRange method."}}}},remarks:"A range can be set for a category scale, however, numbers are used to represent each axis tick starting with 0.",seealso:"Samples.AxisInteractiveExtremes"},setLabel:{type:"method",description:"Updates axis label settings.",
parameters:{label:{type:"obj_label",description:"JSON settings applied to this axis label."},updateOptions:{type:"object",version:"1.1",description:"Options used when this label is updating.",required:!1,object:{animation:{description:"Animation settings used when this label updates.",type:"obj_animation"}}}}}}},chart:{type:"iObject",description:"Represents a chart JS object providing methods to manipulate and analyze the chart in real-time.",iObject:{addSeries:{type:"method",description:"Adds a series to the chart in real-time.",
parameters:{series:{type:"obj_series",description:"Configuration of the series to add."},updateOptions:{type:"object",version:"1.1",description:"Update options used when this series is added.",required:!1,object:{animation:{description:"Animation settings used when this series is added.",type:"obj_animation"}}}}},get:{type:"method",description:"Returns a series, point, or axis object with the specified ID.",parameters:{id:{type:"string",description:"ID of the object to retrieve."}},returns:{type:"iobj_series,iobj_point,iobj_axis",
description:"Returns a series, point, or axis with a matching ID."}},getSeries:{type:"method",description:"Returns all JS series objects associated with this chart.",returns:{type:"array",description:"An array of series objects on the chart.",array:{arrayType:"specific",types:[{description:"A series in this chart.",type:"iobj_series"}]}}},getSelectedPoints:{type:"method",description:"Returns an array of JS point objects that are in the selected state.",returns:{type:"array",description:"An array of JS point objects selected by the user.",
array:{arrayType:"specific",types:[{type:"iobj_point",description:"A point JS object."}]}}},dispose:{type:"method",description:"Removes the chart and clears its memory. This method can be used when the chart is not required or is discarded to reduce memory usage."},redraw:{type:"method",description:"Causes the chart to redraw.",remarks:"This should typically not be necessary as any updates will automatically redraw the chart. This can be used to force  chart redraw sooner than waiting for any additional data updates. The normal delay may be between 4 and 10 milliseconds.",
parameters:{updateOptions:{type:"object",version:"1.1",description:"Update options used when the chart redraws.",required:!1,object:{animation:{description:"Animation settings used when the chart redraws.",type:"obj_animation"}}}}},getSVG:{type:"method",description:"Returns an SVG image string of the chart.",parameters:{options:{type:"obj_chart",description:"Chart settings applied before the SVG is rendered.",required:!1}},returns:{type:"string",description:"A string containing the SVG content of this chart image."}},
exportImage:{type:"method",description:"Initiates the conversion of the chart SVG to an image file.",parameters:{exportOptions:{type:"obj_exportOptions",description:"Export options."},chartOptions:{type:"obj_chart",description:"Chart settings to apply before the chart is exported.",required:!1}}},print:{type:"method",description:"Sends the chart image to the printer."},getCalculations:{type:"method",description:"Gets an object populated with calculations based on the current chart data.",returns:{type:"object",
description:"A number of calculations and analysis results based on the current chart data.",object:{list:{type:"array",description:"Array of all point y values from every series.",array:{arrayType:"specific",types:[{type:"number",description:"A point' y value."}]}},sumList:{type:"array",description:"Array of point y value sums. The sum of each series.",array:{arrayType:"specific",types:[{type:"number",description:"A series' y value sum."}]}},sumNames:{type:"array",description:"Array of series names associated respectively to values in sumList.",
array:{arrayType:"specific",types:[{type:"string",description:"A series name."}]}},sumIDs:{type:"array",description:"Array of series IDs associated respectively to series named in sumNames. This can be used to get a specific series JS object in this chart by using the chart.get() method.",array:{arrayType:"specific",types:[{type:"string",description:"A series ID."}]}},max:{type:"number",description:"Maximum point y value of all series."},min:{type:"number",description:"Minimum point y value of all series."},
sum:{type:"number",description:"Sum of all y values on the chart."},average:{type:"number",description:"Average of all point y values."},range:{type:"number",description:"The difference between the lowest and the highest point y value."}}}},setTitle:{type:"method",description:"Updates the chart title with the specified settings in real-time.",parameters:{palette:{type:"enum_palette,array,obj_smartPalette",array:{arrayType:"specific",types:[{type:"obj_color"}],description:"Array of color strings."},
description:"The new palette to apply to the chart data."},updateOptions:{type:"object",version:"1.1",description:"Update options used when data is updating.",required:!1,object:{animation:{description:"Animation settings used when this title is updating.",type:"obj_animation"}}}}},setPalette:{type:"method",description:"Updates the chart level palette in real-time.",version:"1.2",parameters:{palette:{type:"enum_palette,array,obj_smartPalette",array:{arrayType:"specific",types:[{type:"obj_color"}],
description:"Array of color strings."},description:"A new palette or smartPalette to apply to this chart.",remarks:"If this seris uses a palette, it can be removed by passing undefined in the palette parameter."},updateOptions:{type:"object",version:"1.1",description:"Update options used when this title is updating.",required:!1,object:{animation:{description:"Animation settings used when this title is updating.",type:"obj_animation"}}}}},replaceTokens:{type:"method",description:"Takes a string with tokens and expressions and returns a processed string where tokens are replaced with calculated values. Tokens are evaluated based on data of all series (series Collection) or if an ID parameter is specified, only the data of that object.",
remarks:"This method can be used to populate a template string with tokens that describe the data in this chart. Label expressions also enable inline formatting.",parameters:{str:{type:"string",description:"A string containing tokens and expression to evaluate."},id:{type:"string",description:"When specified, the object with a matching ID is found and tokens of that object alone can be specified. Otherwise, seriesCollection specific tokens are processed on all the data in this chart.",required:!1}},
returns:{type:"string",description:"The resulting string after tokens are replaced with values and expressions are evaluated."},seealso:"Tutorials.labelExpressions|Tutorials.tokenReference:List of available label tokens.",example:"chart.replaceTokens('%sum') // returns a string with sum of chart data such as: '543'."},tokenValue:{type:"method",version:"1.1",description:"Returns the value of the specified token in it's native data type. Tokens are evaluated based on data of all series (series Collection) or if an ID parameter is specified, only the data of that object.",
remarks:"Only one token or expression should be used with this method.",parameters:{str:{type:"string",description:"A string containing a single token to evaluate."},id:{type:"string",description:"When specified, the object with a matching ID is found and tokens of that object alone can be specified. Otherwise, seriesCollection specific tokens are processed on all the data in this chart.",required:!1}},returns:{type:"number,date,string,bool",description:"The value of the specified token.",number:{description:"A numeric value represented by the specified token."},
date:{description:"A date value represented by the specified token."},string:{description:"A string value represented by the specified token."},bool:{description:"A bool value represented by the specified token."}},seealso:"Tutorials.tokenReference:List of available label tokens.",example:"chart.tokenValue('%sum') // returns a number with sum of chart data such as: 543."},getWarnings:{type:"method",description:"Returns an array of warning messages based settings passed to the chart.",returns:{type:"array",
description:"An array of warning messages.",array:{arrayType:"specific",types:[{description:"A warning message.",type:"string"}]}}},setView:{type:"method",version:"1.2",description:"In a 3D chart, this method updates the 3D orientation in real-time.",parameters:{view:{type:"obj_view",description:"The new view settings to apply.",required:!0,object:{animation:{description:"Animation settings used when the chart redraws.",type:"obj_animation"}}}}},zoom:{type:"method",version:"1.4",description:"Specifies the chart zoom for maps. Passing no parameters returns the current zoom BBox.",
parameters:{zoomConfig:{type:"obj_mapZoom,obj_pointFilter",description:"Sets the zoom level given 0-1 here 1 is 100% or fully zoomed out."}},returns:{type:"bool,array",description:"Will return false if a provided point filter did not find any matches. If no parameters are specified, the current view bbox is given.",bool:{description:"Will return false if a provided point filter did not find any matches."},array:{0:{description:"A bbox of the current view returned if no parameters are specified.",
arrayType:"specific",types:[{name:"X",type:"number",description:"X coordinate"},{name:"Y",type:"number",description:"Y coordinate"},{name:"Width",type:"number",description:"Width of the bbox."},{name:"Height",type:"number",description:"Height of the bbox."}],example:"[5,8,9,3]"}}}}}}}}})();
 
/** START OF firebase **/
/*! @license Firebase v2.1.1 - License: https://www.firebase.com/terms/terms-of-service.html */
 (function () {
    var h, aa = this; function m(a) { return void 0 !== a } function ba() { } function ca(a) { a.Mb = function () { return a.hf ? a.hf : a.hf = new a } }
    function da(a) {
        var b = typeof a; if ("object" == b) if (a) { if (a instanceof Array) return "array"; if (a instanceof Object) return b; var c = Object.prototype.toString.call(a); if ("[object Window]" == c) return "object"; if ("[object Array]" == c || "number" == typeof a.length && "undefined" != typeof a.splice && "undefined" != typeof a.propertyIsEnumerable && !a.propertyIsEnumerable("splice")) return "array"; if ("[object Function]" == c || "undefined" != typeof a.call && "undefined" != typeof a.propertyIsEnumerable && !a.propertyIsEnumerable("call")) return "function" } else return "null";
        else if ("function" == b && "undefined" == typeof a.call) return "object"; return b
    } function ea(a) { return "array" == da(a) } function fa(a) { var b = da(a); return "array" == b || "object" == b && "number" == typeof a.length } function p(a) { return "string" == typeof a } function ga(a) { return "number" == typeof a } function ha(a) { return "function" == da(a) } function ia(a) { var b = typeof a; return "object" == b && null != a || "function" == b } function ja(a, b, c) { return a.call.apply(a.bind, arguments) }
    function ka(a, b, c) { if (!a) throw Error(); if (2 < arguments.length) { var d = Array.prototype.slice.call(arguments, 2); return function () { var c = Array.prototype.slice.call(arguments); Array.prototype.unshift.apply(c, d); return a.apply(b, c) } } return function () { return a.apply(b, arguments) } } function q(a, b, c) { q = Function.prototype.bind && -1 != Function.prototype.bind.toString().indexOf("native code") ? ja : ka; return q.apply(null, arguments) } var la = Date.now || function () { return +new Date };
    function ma(a, b) { function c() { } c.prototype = b.prototype; a.Jg = b.prototype; a.prototype = new c; a.Fg = function (a, c, f) { return b.prototype[c].apply(a, Array.prototype.slice.call(arguments, 2)) } }; function na(a) { a = String(a); if (/^\s*$/.test(a) ? 0 : /^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g, "@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, "]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g, ""))) try { return eval("(" + a + ")") } catch (b) { } throw Error("Invalid JSON string: " + a); } function oa() { this.Hd = void 0 }
    function pa(a, b, c) {
        switch (typeof b) {
            case "string": qa(b, c); break; case "number": c.push(isFinite(b) && !isNaN(b) ? b : "null"); break; case "boolean": c.push(b); break; case "undefined": c.push("null"); break; case "object": if (null == b) { c.push("null"); break } if (ea(b)) { var d = b.length; c.push("["); for (var e = "", f = 0; f < d; f++) c.push(e), e = b[f], pa(a, a.Hd ? a.Hd.call(b, String(f), e) : e, c), e = ","; c.push("]"); break } c.push("{"); d = ""; for (f in b) Object.prototype.hasOwnProperty.call(b, f) && (e = b[f], "function" != typeof e && (c.push(d), qa(f, c),
            c.push(":"), pa(a, a.Hd ? a.Hd.call(b, f, e) : e, c), d = ",")); c.push("}"); break; case "function": break; default: throw Error("Unknown type: " + typeof b);
        }
    } var ra = { '"': '\\"', "\\": "\\\\", "/": "\\/", "\b": "\\b", "\f": "\\f", "\n": "\\n", "\r": "\\r", "\t": "\\t", "\x0B": "\\u000b" }, sa = /\uffff/.test("\uffff") ? /[\\\"\x00-\x1f\x7f-\uffff]/g : /[\\\"\x00-\x1f\x7f-\xff]/g;
    function qa(a, b) { b.push('"', a.replace(sa, function (a) { if (a in ra) return ra[a]; var b = a.charCodeAt(0), e = "\\u"; 16 > b ? e += "000" : 256 > b ? e += "00" : 4096 > b && (e += "0"); return ra[a] = e + b.toString(16) }), '"') }; function ta(a) { return "undefined" !== typeof JSON && m(JSON.parse) ? JSON.parse(a) : na(a) } function r(a) { if ("undefined" !== typeof JSON && m(JSON.stringify)) a = JSON.stringify(a); else { var b = []; pa(new oa, a, b); a = b.join("") } return a }; function s(a, b) { return Object.prototype.hasOwnProperty.call(a, b) } function t(a, b) { if (Object.prototype.hasOwnProperty.call(a, b)) return a[b] } function ua(a, b) { for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && b(c, a[c]) } function va(a) { var b = {}; ua(a, function (a, d) { b[a] = d }); return b }; function wa(a) { this.tc = a; this.Ed = "firebase:" } h = wa.prototype; h.set = function (a, b) { null == b ? this.tc.removeItem(this.Ed + a) : this.tc.setItem(this.Ed + a, r(b)) }; h.get = function (a) { a = this.tc.getItem(this.Ed + a); return null == a ? null : ta(a) }; h.remove = function (a) { this.tc.removeItem(this.Ed + a) }; h.jf = !1; h.toString = function () { return this.tc.toString() }; function xa() { this.nc = {} } xa.prototype.set = function (a, b) { null == b ? delete this.nc[a] : this.nc[a] = b }; xa.prototype.get = function (a) { return s(this.nc, a) ? this.nc[a] : null }; xa.prototype.remove = function (a) { delete this.nc[a] }; xa.prototype.jf = !0; function ya(a) { try { if ("undefined" !== typeof window && "undefined" !== typeof window[a]) { var b = window[a]; b.setItem("firebase:sentinel", "cache"); b.removeItem("firebase:sentinel"); return new wa(b) } } catch (c) { } return new xa } var za = ya("localStorage"), Aa = ya("sessionStorage"); function Ba(a, b, c, d, e) { this.host = a.toLowerCase(); this.domain = this.host.substr(this.host.indexOf(".") + 1); this.zb = b; this.tb = c; this.Dg = d; this.Dd = e || ""; this.La = za.get("host:" + a) || this.host } function Ca(a, b) { b !== a.La && (a.La = b, "s-" === a.La.substr(0, 2) && za.set("host:" + a.host, a.La)) } Ba.prototype.toString = function () { var a = (this.zb ? "https://" : "http://") + this.host; this.Dd && (a += "<" + this.Dd + ">"); return a }; function Da() { this.Sa = -1 }; function Ea() { this.Sa = -1; this.Sa = 64; this.R = []; this.be = []; this.Ef = []; this.Ad = []; this.Ad[0] = 128; for (var a = 1; a < this.Sa; ++a) this.Ad[a] = 0; this.Td = this.Rb = 0; this.reset() } ma(Ea, Da); Ea.prototype.reset = function () { this.R[0] = 1732584193; this.R[1] = 4023233417; this.R[2] = 2562383102; this.R[3] = 271733878; this.R[4] = 3285377520; this.Td = this.Rb = 0 };
    function Fa(a, b, c) {
        c || (c = 0); var d = a.Ef; if (p(b)) for (var e = 0; 16 > e; e++) d[e] = b.charCodeAt(c) << 24 | b.charCodeAt(c + 1) << 16 | b.charCodeAt(c + 2) << 8 | b.charCodeAt(c + 3), c += 4; else for (e = 0; 16 > e; e++) d[e] = b[c] << 24 | b[c + 1] << 16 | b[c + 2] << 8 | b[c + 3], c += 4; for (e = 16; 80 > e; e++) { var f = d[e - 3] ^ d[e - 8] ^ d[e - 14] ^ d[e - 16]; d[e] = (f << 1 | f >>> 31) & 4294967295 } b = a.R[0]; c = a.R[1]; for (var g = a.R[2], k = a.R[3], l = a.R[4], n, e = 0; 80 > e; e++) 40 > e ? 20 > e ? (f = k ^ c & (g ^ k), n = 1518500249) : (f = c ^ g ^ k, n = 1859775393) : 60 > e ? (f = c & g | k & (c | g), n = 2400959708) : (f = c ^ g ^ k, n = 3395469782), f = (b <<
        5 | b >>> 27) + f + l + n + d[e] & 4294967295, l = k, k = g, g = (c << 30 | c >>> 2) & 4294967295, c = b, b = f; a.R[0] = a.R[0] + b & 4294967295; a.R[1] = a.R[1] + c & 4294967295; a.R[2] = a.R[2] + g & 4294967295; a.R[3] = a.R[3] + k & 4294967295; a.R[4] = a.R[4] + l & 4294967295
    }
    Ea.prototype.update = function (a, b) { m(b) || (b = a.length); for (var c = b - this.Sa, d = 0, e = this.be, f = this.Rb; d < b;) { if (0 == f) for (; d <= c;) Fa(this, a, d), d += this.Sa; if (p(a)) for (; d < b;) { if (e[f] = a.charCodeAt(d), ++f, ++d, f == this.Sa) { Fa(this, e); f = 0; break } } else for (; d < b;) if (e[f] = a[d], ++f, ++d, f == this.Sa) { Fa(this, e); f = 0; break } } this.Rb = f; this.Td += b }; function Ga() { return Math.floor(2147483648 * Math.random()).toString(36) + Math.abs(Math.floor(2147483648 * Math.random()) ^ la()).toString(36) }; var v = Array.prototype, Ha = v.indexOf ? function (a, b, c) { return v.indexOf.call(a, b, c) } : function (a, b, c) { c = null == c ? 0 : 0 > c ? Math.max(0, a.length + c) : c; if (p(a)) return p(b) && 1 == b.length ? a.indexOf(b, c) : -1; for (; c < a.length; c++) if (c in a && a[c] === b) return c; return -1 }, Ia = v.forEach ? function (a, b, c) { v.forEach.call(a, b, c) } : function (a, b, c) { for (var d = a.length, e = p(a) ? a.split("") : a, f = 0; f < d; f++) f in e && b.call(c, e[f], f, a) }, Ja = v.filter ? function (a, b, c) { return v.filter.call(a, b, c) } : function (a, b, c) {
        for (var d = a.length, e = [], f = 0, g = p(a) ?
        a.split("") : a, k = 0; k < d; k++) if (k in g) { var l = g[k]; b.call(c, l, k, a) && (e[f++] = l) } return e
    }, Ka = v.map ? function (a, b, c) { return v.map.call(a, b, c) } : function (a, b, c) { for (var d = a.length, e = Array(d), f = p(a) ? a.split("") : a, g = 0; g < d; g++) g in f && (e[g] = b.call(c, f[g], g, a)); return e }, La = v.reduce ? function (a, b, c, d) { d && (b = q(b, d)); return v.reduce.call(a, b, c) } : function (a, b, c, d) { var e = c; Ia(a, function (c, g) { e = b.call(d, e, c, g, a) }); return e }, Ma = v.every ? function (a, b, c) { return v.every.call(a, b, c) } : function (a, b, c) {
        for (var d = a.length, e =
        p(a) ? a.split("") : a, f = 0; f < d; f++) if (f in e && !b.call(c, e[f], f, a)) return !1; return !0
    }; function Na(a, b) { var c = Oa(a, b, void 0); return 0 > c ? null : p(a) ? a.charAt(c) : a[c] } function Oa(a, b, c) { for (var d = a.length, e = p(a) ? a.split("") : a, f = 0; f < d; f++) if (f in e && b.call(c, e[f], f, a)) return f; return -1 } function Pa(a, b) { var c = Ha(a, b); 0 <= c && v.splice.call(a, c, 1) } function Qa(a, b, c) { return 2 >= arguments.length ? v.slice.call(a, b) : v.slice.call(a, b, c) } function Ra(a, b) { a.sort(b || Sa) } function Sa(a, b) { return a > b ? 1 : a < b ? -1 : 0 }; var Ta; a: { var Ua = aa.navigator; if (Ua) { var Va = Ua.userAgent; if (Va) { Ta = Va; break a } } Ta = "" } function Wa(a) { return -1 != Ta.indexOf(a) }; var Xa = Wa("Opera") || Wa("OPR"), Ya = Wa("Trident") || Wa("MSIE"), Za = Wa("Gecko") && -1 == Ta.toLowerCase().indexOf("webkit") && !(Wa("Trident") || Wa("MSIE")), $a = -1 != Ta.toLowerCase().indexOf("webkit"); (function () { var a = "", b; if (Xa && aa.opera) return a = aa.opera.version, ha(a) ? a() : a; Za ? b = /rv\:([^\);]+)(\)|;)/ : Ya ? b = /\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/ : $a && (b = /WebKit\/(\S+)/); b && (a = (a = b.exec(Ta)) ? a[1] : ""); return Ya && (b = (b = aa.document) ? b.documentMode : void 0, b > parseFloat(a)) ? String(b) : a })(); var ab = null, bb = null, cb = null; function db(a, b) { if (!fa(a)) throw Error("encodeByteArray takes an array as a parameter"); eb(); for (var c = b ? bb : ab, d = [], e = 0; e < a.length; e += 3) { var f = a[e], g = e + 1 < a.length, k = g ? a[e + 1] : 0, l = e + 2 < a.length, n = l ? a[e + 2] : 0, u = f >> 2, f = (f & 3) << 4 | k >> 4, k = (k & 15) << 2 | n >> 6, n = n & 63; l || (n = 64, g || (k = 64)); d.push(c[u], c[f], c[k], c[n]) } return d.join("") }
    function eb() { if (!ab) { ab = {}; bb = {}; cb = {}; for (var a = 0; 65 > a; a++) ab[a] = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a), bb[a] = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(a), cb[bb[a]] = a } }; var fb = function () { var a = 1; return function () { return a++ } }(); function w(a, b) { if (!a) throw gb(b); } function gb(a) { return Error("Firebase INTERNAL ASSERT FAILED:" + a) }
    function hb(a) {
        try {
            var b; if ("undefined" !== typeof atob) b = atob(a); else {
                eb(); for (var c = cb, d = [], e = 0; e < a.length;) { var f = c[a.charAt(e++)], g = e < a.length ? c[a.charAt(e)] : 0; ++e; var k = e < a.length ? c[a.charAt(e)] : 64; ++e; var l = e < a.length ? c[a.charAt(e)] : 64; ++e; if (null == f || null == g || null == k || null == l) throw Error(); d.push(f << 2 | g >> 4); 64 != k && (d.push(g << 4 & 240 | k >> 2), 64 != l && d.push(k << 6 & 192 | l)) } if (8192 > d.length) b = String.fromCharCode.apply(null, d); else {
                    a = ""; for (c = 0; c < d.length; c += 8192) a += String.fromCharCode.apply(null, Qa(d, c,
                    c + 8192)); b = a
                }
            } return b
        } catch (n) { ib("base64Decode failed: ", n) } return null
    } function jb(a) { var b = kb(a); a = new Ea; a.update(b); var b = [], c = 8 * a.Td; 56 > a.Rb ? a.update(a.Ad, 56 - a.Rb) : a.update(a.Ad, a.Sa - (a.Rb - 56)); for (var d = a.Sa - 1; 56 <= d; d--) a.be[d] = c & 255, c /= 256; Fa(a, a.be); for (d = c = 0; 5 > d; d++) for (var e = 24; 0 <= e; e -= 8) b[c] = a.R[d] >> e & 255, ++c; return db(b) }
    function lb(a) { for (var b = "", c = 0; c < arguments.length; c++) b = fa(arguments[c]) ? b + lb.apply(null, arguments[c]) : "object" === typeof arguments[c] ? b + r(arguments[c]) : b + arguments[c], b += " "; return b } var mb = null, nb = !0; function ib(a) { !0 === nb && (nb = !1, null === mb && !0 === Aa.get("logging_enabled") && ob(!0)); if (mb) { var b = lb.apply(null, arguments); mb(b) } } function pb(a) { return function () { ib(a, arguments) } }
    function qb(a) { if ("undefined" !== typeof console) { var b = "FIREBASE INTERNAL ERROR: " + lb.apply(null, arguments); "undefined" !== typeof console.error ? console.error(b) : console.log(b) } } function rb(a) { var b = lb.apply(null, arguments); throw Error("FIREBASE FATAL ERROR: " + b); } function y(a) { if ("undefined" !== typeof console) { var b = "FIREBASE WARNING: " + lb.apply(null, arguments); "undefined" !== typeof console.warn ? console.warn(b) : console.log(b) } }
    function sb(a) {
        var b = "", c = "", d = "", e = "", f = !0, g = "https", k = 443; if (p(a)) {
            var l = a.indexOf("//"); 0 <= l && (g = a.substring(0, l - 1), a = a.substring(l + 2)); l = a.indexOf("/"); -1 === l && (l = a.length); b = a.substring(0, l); e = ""; a = a.substring(l).split("/"); for (l = 0; l < a.length; l++) if (0 < a[l].length) { var n = a[l]; try { n = decodeURIComponent(n.replace(/\+/g, " ")) } catch (u) { } e += "/" + n } a = b.split("."); 3 === a.length ? (c = a[1], d = a[0].toLowerCase()) : 2 === a.length && (c = a[0]); l = b.indexOf(":"); 0 <= l && (f = "https" === g || "wss" === g, k = b.substring(l + 1), isFinite(k) &&
            (k = String(k)), k = p(k) ? /^\s*-?0x/i.test(k) ? parseInt(k, 16) : parseInt(k, 10) : NaN)
        } return { host: b, port: k, domain: c, Ag: d, zb: f, scheme: g, Oc: e }
    } function tb(a) { return ga(a) && (a != a || a == Number.POSITIVE_INFINITY || a == Number.NEGATIVE_INFINITY) }
    function ub(a) { if ("complete" === document.readyState) a(); else { var b = !1, c = function () { document.body ? b || (b = !0, a()) : setTimeout(c, Math.floor(10)) }; document.addEventListener ? (document.addEventListener("DOMContentLoaded", c, !1), window.addEventListener("load", c, !1)) : document.attachEvent && (document.attachEvent("onreadystatechange", function () { "complete" === document.readyState && c() }), window.attachEvent("onload", c)) } }
    function vb(a, b) { if (a === b) return 0; if ("[MIN_NAME]" === a || "[MAX_NAME]" === b) return -1; if ("[MIN_NAME]" === b || "[MAX_NAME]" === a) return 1; var c = wb(a), d = wb(b); return null !== c ? null !== d ? 0 == c - d ? a.length - b.length : c - d : -1 : null !== d ? 1 : a < b ? -1 : 1 } function xb(a, b) { if (b && a in b) return b[a]; throw Error("Missing required key (" + a + ") in object: " + r(b)); }
    function yb(a) { if ("object" !== typeof a || null === a) return r(a); var b = [], c; for (c in a) b.push(c); b.sort(); c = "{"; for (var d = 0; d < b.length; d++) 0 !== d && (c += ","), c += r(b[d]), c += ":", c += yb(a[b[d]]); return c + "}" } function zb(a, b) { if (a.length <= b) return [a]; for (var c = [], d = 0; d < a.length; d += b) d + b > a ? c.push(a.substring(d, a.length)) : c.push(a.substring(d, d + b)); return c } function Ab(a, b) { if (ea(a)) for (var c = 0; c < a.length; ++c) b(c, a[c]); else z(a, b) }
    function Bb(a) {
        w(!tb(a), "Invalid JSON number"); var b, c, d, e; 0 === a ? (d = c = 0, b = -Infinity === 1 / a ? 1 : 0) : (b = 0 > a, a = Math.abs(a), a >= Math.pow(2, -1022) ? (d = Math.min(Math.floor(Math.log(a) / Math.LN2), 1023), c = d + 1023, d = Math.round(a * Math.pow(2, 52 - d) - Math.pow(2, 52))) : (c = 0, d = Math.round(a / Math.pow(2, -1074)))); e = []; for (a = 52; a; a -= 1) e.push(d % 2 ? 1 : 0), d = Math.floor(d / 2); for (a = 11; a; a -= 1) e.push(c % 2 ? 1 : 0), c = Math.floor(c / 2); e.push(b ? 1 : 0); e.reverse(); b = e.join(""); c = ""; for (a = 0; 64 > a; a += 8) d = parseInt(b.substr(a, 8), 2).toString(16), 1 === d.length &&
        (d = "0" + d), c += d; return c.toLowerCase()
    } var Cb = /^-?\d{1,10}$/; function wb(a) { return Cb.test(a) && (a = Number(a), -2147483648 <= a && 2147483647 >= a) ? a : null } function Db(a) { try { a() } catch (b) { setTimeout(function () { y("Exception was thrown by user callback.", b.stack || ""); throw b; }, Math.floor(0)) } } function A(a, b) { if (ha(a)) { var c = Array.prototype.slice.call(arguments, 1).slice(); Db(function () { a.apply(null, c) }) } }; function Eb(a, b, c, d) { this.le = b; this.Nd = c; this.Fd = d; this.jd = a } Eb.prototype.Pb = function () { var a = this.Nd.cc(); return "value" === this.jd ? a.path : a.parent().path }; Eb.prototype.oe = function () { return this.jd }; Eb.prototype.Kb = function () { return this.le.Kb(this) }; Eb.prototype.toString = function () { return this.Pb().toString() + ":" + this.jd + ":" + r(this.Nd.Ze()) }; function Fb(a, b, c) { this.le = a; this.error = b; this.path = c } Fb.prototype.Pb = function () { return this.path }; Fb.prototype.oe = function () { return "cancel" };
    Fb.prototype.Kb = function () { return this.le.Kb(this) }; Fb.prototype.toString = function () { return this.path.toString() + ":cancel" }; function B(a, b, c, d) { this.type = a; this.Ga = b; this.Ua = c; this.Ce = d; this.Fd = void 0 } function Gb(a) { return new B(Hb, a) } var Hb = "value"; function Ib(a, b, c) { this.Gb = a; this.kb = b; this.mb = c || null } h = Ib.prototype; h.tf = function (a) { return "value" === a }; h.createEvent = function (a, b) { var c = b.w.g; return new Eb("value", this, new C(a.Ga, b.cc(), c)) }; h.Kb = function (a) { var b = this.mb; if ("cancel" === a.oe()) { w(this.kb, "Raising a cancel event on a listener with no cancel callback"); var c = this.kb; return function () { c.call(b, a.error) } } var d = this.Gb; return function () { d.call(b, a.Nd) } }; h.Ve = function (a, b) { return this.kb ? new Fb(this, a, b) : null };
    h.matches = function (a) { return a instanceof Ib ? a.Gb && this.Gb ? a.Gb === this.Gb && a.mb === this.mb : !0 : !1 }; h.ff = function () { return null !== this.Gb }; function Jb(a, b, c) { this.da = a; this.kb = b; this.mb = c } h = Jb.prototype; h.tf = function (a) { a = "children_added" === a ? "child_added" : a; return ("children_removed" === a ? "child_removed" : a) in this.da }; h.Ve = function (a, b) { return this.kb ? new Fb(this, a, b) : null };
    h.createEvent = function (a, b) { w(null != a.Ua, "Child events should have a childName."); var c = b.cc().n(a.Ua); return new Eb(a.type, this, new C(a.Ga, c, b.w.g), a.Fd) }; h.Kb = function (a) { var b = this.mb; if ("cancel" === a.oe()) { w(this.kb, "Raising a cancel event on a listener with no cancel callback"); var c = this.kb; return function () { c.call(b, a.error) } } var d = this.da[a.jd]; return function () { d.call(b, a.Nd, a.Fd) } };
    h.matches = function (a) { if (a instanceof Jb) { if (!this.da || !a.da) return !0; if (this.mb === a.mb) { var b = Kb(a.da); if (b === Kb(this.da)) { if (1 === b) { var b = Lb(a.da), c = Lb(this.da); return c === b && (!a.da[b] || !this.da[c] || a.da[b] === this.da[c]) } return Mb(this.da, function (b, c) { return a.da[c] === b }) } } } return !1 }; h.ff = function () { return null !== this.da }; function kb(a) { for (var b = [], c = 0, d = 0; d < a.length; d++) { var e = a.charCodeAt(d); 55296 <= e && 56319 >= e && (e -= 55296, d++, w(d < a.length, "Surrogate pair missing trail surrogate."), e = 65536 + (e << 10) + (a.charCodeAt(d) - 56320)); 128 > e ? b[c++] = e : (2048 > e ? b[c++] = e >> 6 | 192 : (65536 > e ? b[c++] = e >> 12 | 224 : (b[c++] = e >> 18 | 240, b[c++] = e >> 12 & 63 | 128), b[c++] = e >> 6 & 63 | 128), b[c++] = e & 63 | 128) } return b }; function D(a, b, c, d) { var e; d < b ? e = "at least " + b : d > c && (e = 0 === c ? "none" : "no more than " + c); if (e) throw Error(a + " failed: Was called with " + d + (1 === d ? " argument." : " arguments.") + " Expects " + e + "."); } function F(a, b, c) { var d = ""; switch (b) { case 1: d = c ? "first" : "First"; break; case 2: d = c ? "second" : "Second"; break; case 3: d = c ? "third" : "Third"; break; case 4: d = c ? "fourth" : "Fourth"; break; default: throw Error("errorPrefix called with argumentNumber > 4.  Need to update it?"); } return a = a + " failed: " + (d + " argument ") }
    function G(a, b, c, d) { if ((!d || m(c)) && !ha(c)) throw Error(F(a, b, d) + "must be a valid function."); } function Nb(a, b, c) { if (m(c) && (!ia(c) || null === c)) throw Error(F(a, b, !0) + "must be a valid context object."); }; var Ob = /[\[\].#$\/\u0000-\u001F\u007F]/, Pb = /[\[\].#$\u0000-\u001F\u007F]/; function Qb(a) { return p(a) && 0 !== a.length && !Ob.test(a) } function Rb(a) { return null === a || p(a) || ga(a) && !tb(a) || ia(a) && s(a, ".sv") } function Sb(a, b, c) { c && !m(b) || Tb(F(a, 1, c), b) }
    function Tb(a, b, c, d) {
        c || (c = 0); var e = d || []; if (!m(b)) throw Error(a + "contains undefined" + Ub(e)); if (ha(b)) throw Error(a + "contains a function" + Ub(e) + " with contents: " + b.toString()); if (tb(b)) throw Error(a + "contains " + b.toString() + Ub(e)); if (1E3 < c) throw new TypeError(a + "contains a cyclic object value (" + e.slice(0, 100).join(".") + "...)"); if (p(b) && b.length > 10485760 / 3 && 10485760 < kb(b).length) throw Error(a + "contains a string greater than 10485760 utf8 bytes" + Ub(e) + " ('" + b.substring(0, 50) + "...')"); if (ia(b)) {
            var f =
            !1, g = !1; ua(b, function (b, d) { if (".value" === b) f = !0; else if (".priority" !== b && ".sv" !== b && (g = !0, !Qb(b))) throw Error(a + " contains an invalid key (" + b + ")" + Ub(e) + '.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"'); e.push(b); Tb(a, d, c + 1, e); e.pop() }); if (f && g) throw Error(a + ' contains ".value" child' + Ub(e) + " in addition to actual children.");
        }
    } function Ub(a) { return 0 == a.length ? "" : " in property '" + a.join(".") + "'" }
    function Vb(a, b) { if (!ia(b) || ea(b)) throw Error(F(a, 1, !1) + " must be an Object containing the children to replace."); if (s(b, ".value")) throw Error(F(a, 1, !1) + ' must not contain ".value".  To overwrite with a leaf value, just use .set() instead.'); Sb(a, b, !1) }
    function Wb(a, b, c) { if (tb(c)) throw Error(F(a, b, !1) + "is " + c.toString() + ", but must be a valid Firebase priority (a string, finite number, server value, or null)."); if (!Rb(c)) throw Error(F(a, b, !1) + "must be a valid Firebase priority (a string, finite number, server value, or null)."); }
    function Xb(a, b, c) { if (!c || m(b)) switch (b) { case "value": case "child_added": case "child_removed": case "child_changed": case "child_moved": break; default: throw Error(F(a, 1, c) + 'must be a valid event type: "value", "child_added", "child_removed", "child_changed", or "child_moved".'); } } function Yb(a, b, c, d) { if ((!d || m(c)) && !Qb(c)) throw Error(F(a, b, d) + 'was an invalid key: "' + c + '".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").'); }
    function Zb(a, b) { if (!p(b) || 0 === b.length || Pb.test(b)) throw Error(F(a, 1, !1) + 'was an invalid path: "' + b + '". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"'); } function $b(a, b) { if (".info" === H(b)) throw Error(a + " failed: Can't modify data under /.info/"); } function ac(a, b) { if (!p(b)) throw Error(F(a, 1, !1) + "must be a valid credential (a string)."); } function bc(a, b, c) { if (!p(c)) throw Error(F(a, b, !1) + "must be a valid string."); }
    function I(a, b, c, d) { if (!d || m(c)) if (!ia(c) || null === c) throw Error(F(a, b, d) + "must be a valid object."); } function J(a, b, c) { if (!ia(b) || null === b || !s(b, c)) throw Error(F(a, 1, !1) + 'must contain the key "' + c + '"'); if (!p(t(b, c))) throw Error(F(a, 1, !1) + 'must contain the key "' + c + '" with type "string"'); }; function cc(a) { this.g = a } h = cc.prototype; h.D = function (a, b, c, d, e) { w(a.Ac(this.g), "A node must be indexed if only a child is updated"); d = a.J(b); if (d.ea(c)) return a; null != e && (c.e() ? a.Da(b) ? dc(e, new B("child_removed", d, b)) : w(a.L(), "A child remove without an old child only makes sense on a leaf node") : d.e() ? dc(e, new B("child_added", c, b)) : dc(e, new B("child_changed", c, b, d))); return a.L() && c.e() ? a : a.P(b, c) };
    h.oa = function (a, b, c) { null != c && (a.L() || a.T(K, function (a, e) { b.Da(a) || dc(c, new B("child_removed", e, a)) }), b.L() || b.T(K, function (b, e) { if (a.Da(b)) { var f = a.J(b); f.ea(e) || dc(c, new B("child_changed", e, b, f)) } else dc(c, new B("child_added", e, b)) })); return b.Eb(this.g) }; h.Z = function (a, b) { return a.e() ? L : a.Z(b) }; h.ya = function () { return !1 }; h.Lb = function () { return this }; function ec(a) { this.qe = new cc(a.g); this.g = a.g; var b; a.ia ? (b = fc(a), b = a.g.ze(gc(a), b)) : b = a.g.Be(); this.Vc = b; a.qa ? (b = hc(a), a = a.g.ze(ic(a), b)) : a = a.g.Ae(); this.vc = a } h = ec.prototype; h.matches = function (a) { return 0 >= this.g.compare(this.Vc, a) && 0 >= this.g.compare(a, this.vc) }; h.D = function (a, b, c, d, e) { this.matches(new M(b, c)) || (c = L); return this.qe.D(a, b, c, d, e) }; h.oa = function (a, b, c) { b.L() && (b = L); var d = b.Eb(this.g), d = d.Z(L), e = this; b.T(K, function (a, b) { e.matches(new M(a, b)) || (d = d.P(a, L)) }); return this.qe.oa(a, d, c) };
    h.Z = function (a) { return a }; h.ya = function () { return !0 }; h.Lb = function () { return this.qe }; function jc(a, b) { return vb(a.name, b.name) } function kc(a, b) { return vb(a, b) }; function lc() { } var mc = {}; function nc(a) { return q(a.compare, a) } lc.prototype.gf = function (a, b) { return 0 !== this.compare(new M("[MIN_NAME]", a), new M("[MIN_NAME]", b)) }; lc.prototype.Be = function () { return oc }; function pc(a) { this.Tb = a } ma(pc, lc); h = pc.prototype; h.te = function (a) { return !a.J(this.Tb).e() }; h.compare = function (a, b) { var c = a.Y.J(this.Tb), d = b.Y.J(this.Tb), c = c.he(d); return 0 === c ? vb(a.name, b.name) : c }; h.ze = function (a, b) { var c = N(a), c = L.P(this.Tb, c); return new M(b, c) };
    h.Ae = function () { var a = L.P(this.Tb, qc); return new M("[MAX_NAME]", a) }; h.toString = function () { return this.Tb }; var K = new pc(".priority"); function rc() { } ma(rc, lc); h = rc.prototype; h.compare = function (a, b) { return vb(a.name, b.name) }; h.te = function () { throw gb("KeyIndex.isDefinedOn not expected to be called."); }; h.gf = function () { return !1 }; h.Be = function () { return oc }; h.Ae = function () { return new M("[MAX_NAME]", L) }; h.ze = function (a) { w(p(a), "KeyIndex indexValue must always be a string."); return new M(a, L) };
    h.toString = function () { return ".key" }; var sc = new rc; function tc() { } tc.prototype.cf = function () { return null }; tc.prototype.ne = function () { return null }; var uc = new tc; function vc(a, b, c) { this.Bf = a; this.Ha = b; this.zd = c } vc.prototype.cf = function (a) { var b = this.Ha.F; if (wc(b, a)) return b.j().J(a); b = null != this.zd ? new xc(this.zd, !0, !1) : this.Ha.o(); return this.Bf.Ta(a, b) }; vc.prototype.ne = function (a, b, c) { var d = null != this.zd ? this.zd : yc(this.Ha); a = this.Bf.ce(d, b, 1, c, a); return 0 === a.length ? null : a[0] }; function zc() { this.Za = {} }
    function dc(a, b) {
        var c = b.type, d = b.Ua; w("child_added" == c || "child_changed" == c || "child_removed" == c, "Only child changes supported for tracking"); w(".priority" !== d, "Only non-priority child changes can be tracked."); var e = t(a.Za, d); if (e) {
            var f = e.type; if ("child_added" == c && "child_removed" == f) a.Za[d] = new B("child_changed", b.Ga, d, e.Ga); else if ("child_removed" == c && "child_added" == f) delete a.Za[d]; else if ("child_removed" == c && "child_changed" == f) a.Za[d] = new B("child_removed", e.Ce, d); else if ("child_changed" == c &&
            "child_added" == f) a.Za[d] = new B("child_added", b.Ga, d); else if ("child_changed" == c && "child_changed" == f) a.Za[d] = new B("child_changed", b.Ga, d, e.Ce); else throw gb("Illegal combination of changes: " + b + " occurred after " + e);
        } else a.Za[d] = b
    }; function M(a, b) { this.name = a; this.Y = b } function Ac(a, b) { return new M(a, b) }; function Bc(a) { this.ma = new ec(a); this.g = a.g; w(a.ka, "Only valid if limit has been set"); this.sa = a.sa; this.yb = !("" === a.Db ? a.ia : "l" === a.Db) } h = Bc.prototype; h.D = function (a, b, c, d, e) { this.ma.matches(new M(b, c)) || (c = L); return a.J(b).ea(c) ? a : a.ub() < this.sa ? this.ma.Lb().D(a, b, c, d, e) : Cc(this, a, b, c, d, e) };
    h.oa = function (a, b, c) {
        var d; if (b.L() || b.e()) d = L.Eb(this.g); else if (2 * this.sa < b.ub() && b.Ac(this.g)) { d = L.Eb(this.g); b = this.yb ? b.Qb(this.ma.vc, this.g) : b.Ob(this.ma.Vc, this.g); for (var e = 0; 0 < b.Ma.length && e < this.sa;) { var f = O(b), g; if (g = this.yb ? 0 >= this.g.compare(this.ma.Vc, f) : 0 >= this.g.compare(f, this.ma.vc)) d = d.P(f.name, f.Y), e++; else break } } else {
            d = b.Eb(this.g); d = d.Z(L); var k, l, n; if (this.yb) { b = d.ef(this.g); k = this.ma.vc; l = this.ma.Vc; var u = nc(this.g); n = function (a, b) { return u(b, a) } } else b = d.Nb(this.g), k = this.ma.Vc,
            l = this.ma.vc, n = nc(this.g); for (var e = 0, x = !1; 0 < b.Ma.length;) f = O(b), !x && 0 >= n(k, f) && (x = !0), (g = x && e < this.sa && 0 >= n(f, l)) ? e++ : d = d.P(f.name, L)
        } return this.ma.Lb().oa(a, d, c)
    }; h.Z = function (a) { return a }; h.ya = function () { return !0 }; h.Lb = function () { return this.ma.Lb() };
    function Cc(a, b, c, d, e, f) {
        var g; if (a.yb) { var k = nc(a.g); g = function (a, b) { return k(b, a) } } else g = nc(a.g); w(b.ub() == a.sa, ""); var l = new M(c, d), n = a.yb ? Dc(b, a.g) : Ec(b, a.g), u = a.ma.matches(l); if (b.Da(c)) {
            var x = b.J(c), n = e.ne(a.g, n, a.yb); null != n && n.name == c && (n = e.ne(a.g, n, a.yb)); e = null == n ? 1 : g(n, l); if (u && !d.e() && 0 <= e) return null != f && dc(f, new B("child_changed", d, c, x)), b.P(c, d); null != f && dc(f, new B("child_removed", x, c)); b = b.P(c, L); return null != n && a.ma.matches(n) ? (null != f && dc(f, new B("child_added", n.Y, n.name)), b.P(n.name,
            n.Y)) : b
        } return d.e() ? b : u && 0 <= g(n, l) ? (null != f && (dc(f, new B("child_removed", n.Y, n.name)), dc(f, new B("child_added", d, c))), b.P(c, d).P(n.name, L)) : b
    }; function Fc() { this.uc = this.qa = this.jc = this.ia = this.ka = !1; this.sa = 0; this.Db = ""; this.zc = null; this.Vb = ""; this.yc = null; this.Sb = ""; this.g = K } var Gc = new Fc; function gc(a) { w(a.ia, "Only valid if start has been set"); return a.zc } function fc(a) { w(a.ia, "Only valid if start has been set"); return a.jc ? a.Vb : "[MIN_NAME]" } function ic(a) { w(a.qa, "Only valid if end has been set"); return a.yc } function hc(a) { w(a.qa, "Only valid if end has been set"); return a.uc ? a.Sb : "[MAX_NAME]" }
    function Hc(a) { var b = new Fc; b.ka = a.ka; b.sa = a.sa; b.ia = a.ia; b.zc = a.zc; b.jc = a.jc; b.Vb = a.Vb; b.qa = a.qa; b.yc = a.yc; b.uc = a.uc; b.Sb = a.Sb; b.g = a.g; return b } h = Fc.prototype; h.we = function (a) { var b = Hc(this); b.ka = !0; b.sa = a; b.Db = ""; return b }; h.xe = function (a) { var b = Hc(this); b.ka = !0; b.sa = a; b.Db = "l"; return b }; h.ye = function (a) { var b = Hc(this); b.ka = !0; b.sa = a; b.Db = "r"; return b }; h.Od = function (a, b) { var c = Hc(this); c.ia = !0; m(a) || (a = null); c.zc = a; null != b ? (c.jc = !0, c.Vb = b) : (c.jc = !1, c.Vb = ""); return c };
    h.hd = function (a, b) { var c = Hc(this); c.qa = !0; m(a) || (a = null); c.yc = a; m(b) ? (c.uc = !0, c.Sb = b) : (c.Ig = !1, c.Sb = ""); return c }; function Ic(a, b) { var c = Hc(a); c.g = b; return c } function Jc(a) { return !(a.ia || a.qa || a.ka) }; function P(a, b, c, d) { this.k = a; this.path = b; this.w = c; this.$b = d }
    function Kc(a) {
        var b = null, c = null; a.ia && (b = gc(a)); a.qa && (c = ic(a)); if (a.g === sc) {
            if (a.ia) { if ("[MIN_NAME]" != fc(a)) throw Error("Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo()."); if (null != b && "string" !== typeof b) throw Error("Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string."); } if (a.qa) {
                if ("[MAX_NAME]" != hc(a)) throw Error("Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo()."); if (null !=
                c && "string" !== typeof c) throw Error("Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.");
            }
        } else if (a.g === K) { if (null != b && !Rb(b) || null != c && !Rb(c)) throw Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string)."); } else if (w(a.g instanceof pc, "unknown index type."), null != b && "object" === typeof b || null != c && "object" === typeof c) throw Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.");
    } function Lc(a) { if (a.ia && a.qa && a.ka && (!a.ka || "" === a.Db)) throw Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead."); } function Mc(a, b) { if (!0 === a.$b) throw Error(b + ": You can't combine multiple orderBy calls."); } P.prototype.cc = function () { D("Query.ref", 0, 0, arguments.length); return new Q(this.k, this.path) }; P.prototype.ref = P.prototype.cc;
    P.prototype.vb = function (a, b, c, d) { D("Query.on", 2, 4, arguments.length); Xb("Query.on", a, !1); G("Query.on", 2, b, !1); var e = Nc("Query.on", c, d); if ("value" === a) Oc(this.k, this, new Ib(b, e.cancel || null, e.Ja || null)); else { var f = {}; f[a] = b; Oc(this.k, this, new Jb(f, e.cancel, e.Ja)) } return b }; P.prototype.on = P.prototype.vb;
    P.prototype.Yb = function (a, b, c) { D("Query.off", 0, 3, arguments.length); Xb("Query.off", a, !0); G("Query.off", 2, b, !0); Nb("Query.off", 3, c); var d = null, e = null; "value" === a ? d = new Ib(b || null, null, c || null) : a && (b && (e = {}, e[a] = b), d = new Jb(e, null, c || null)); e = this.k; d = ".info" === H(this.path) ? e.qd.gb(this, d) : e.M.gb(this, d); Pc(e.$, this.path, d) }; P.prototype.off = P.prototype.Yb;
    P.prototype.lg = function (a, b) { function c(g) { f && (f = !1, e.Yb(a, c), b.call(d.Ja, g)) } D("Query.once", 2, 4, arguments.length); Xb("Query.once", a, !1); G("Query.once", 2, b, !1); var d = Nc("Query.once", arguments[2], arguments[3]), e = this, f = !0; this.vb(a, c, function (b) { e.Yb(a, c); d.cancel && d.cancel.call(d.Ja, b) }) }; P.prototype.once = P.prototype.lg;
    P.prototype.we = function (a) { y("Query.limit() being deprecated. Please use Query.limitToFirst() or Query.limitToLast() instead."); D("Query.limit", 1, 1, arguments.length); if (!ga(a) || Math.floor(a) !== a || 0 >= a) throw Error("Query.limit: First argument must be a positive integer."); if (this.w.ka) throw Error("Query.limit: Limit was already set (by another call to limit, limitToFirst, orlimitToLast."); var b = this.w.we(a); Lc(b); return new P(this.k, this.path, b, this.$b) }; P.prototype.limit = P.prototype.we;
    P.prototype.xe = function (a) { D("Query.limitToFirst", 1, 1, arguments.length); if (!ga(a) || Math.floor(a) !== a || 0 >= a) throw Error("Query.limitToFirst: First argument must be a positive integer."); if (this.w.ka) throw Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast)."); return new P(this.k, this.path, this.w.xe(a), this.$b) }; P.prototype.limitToFirst = P.prototype.xe;
    P.prototype.ye = function (a) { D("Query.limitToLast", 1, 1, arguments.length); if (!ga(a) || Math.floor(a) !== a || 0 >= a) throw Error("Query.limitToLast: First argument must be a positive integer."); if (this.w.ka) throw Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast)."); return new P(this.k, this.path, this.w.ye(a), this.$b) }; P.prototype.limitToLast = P.prototype.ye;
    P.prototype.mg = function (a) { D("Query.orderByChild", 1, 1, arguments.length); if ("$key" === a) throw Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.'); if ("$priority" === a) throw Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.'); Yb("Query.orderByChild", 1, a, !1); Mc(this, "Query.orderByChild"); var b = Ic(this.w, new pc(a)); Kc(b); return new P(this.k, this.path, b, !0) }; P.prototype.orderByChild = P.prototype.mg;
    P.prototype.ng = function () { D("Query.orderByKey", 0, 0, arguments.length); Mc(this, "Query.orderByKey"); var a = Ic(this.w, sc); Kc(a); return new P(this.k, this.path, a, !0) }; P.prototype.orderByKey = P.prototype.ng; P.prototype.og = function () { D("Query.orderByPriority", 0, 0, arguments.length); Mc(this, "Query.orderByPriority"); var a = Ic(this.w, K); Kc(a); return new P(this.k, this.path, a, !0) }; P.prototype.orderByPriority = P.prototype.og;
    P.prototype.Od = function (a, b) { D("Query.startAt", 0, 2, arguments.length); Sb("Query.startAt", a, !0); Yb("Query.startAt", 2, b, !0); var c = this.w.Od(a, b); Lc(c); Kc(c); if (this.w.ia) throw Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo)."); m(a) || (b = a = null); return new P(this.k, this.path, c, this.$b) }; P.prototype.startAt = P.prototype.Od;
    P.prototype.hd = function (a, b) { D("Query.endAt", 0, 2, arguments.length); Sb("Query.endAt", a, !0); Yb("Query.endAt", 2, b, !0); var c = this.w.hd(a, b); Lc(c); Kc(c); if (this.w.qa) throw Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo)."); return new P(this.k, this.path, c, this.$b) }; P.prototype.endAt = P.prototype.hd;
    P.prototype.Tf = function (a, b) { D("Query.equalTo", 1, 2, arguments.length); Sb("Query.equalTo", a, !1); Yb("Query.equalTo", 2, b, !0); if (this.w.ia) throw Error("Query.equalTo: Starting point was already set (by another call to endAt or equalTo)."); if (this.w.qa) throw Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo)."); return this.Od(a, b).hd(a, b) }; P.prototype.equalTo = P.prototype.Tf;
    function Qc(a) { a = a.w; var b = {}; a.ia && (b.sp = a.zc, a.jc && (b.sn = a.Vb)); a.qa && (b.ep = a.yc, a.uc && (b.en = a.Sb)); if (a.ka) { b.l = a.sa; var c = a.Db; "" === c && (c = a.ia ? "l" : "r"); b.vf = c } a.g !== K && (b.i = a.g.toString()); return b } P.prototype.Fa = function () { var a = yb(Qc(this)); return "{}" === a ? "default" : a };
    function Nc(a, b, c) { var d = { cancel: null, Ja: null }; if (b && c) d.cancel = b, G(a, 3, d.cancel, !0), d.Ja = c, Nb(a, 4, d.Ja); else if (b) if ("object" === typeof b && null !== b) d.Ja = b; else if ("function" === typeof b) d.cancel = b; else throw Error(F(a, 3, !0) + " must either be a cancel callback or a context object."); return d }; function R(a, b) { if (1 == arguments.length) { this.u = a.split("/"); for (var c = 0, d = 0; d < this.u.length; d++) 0 < this.u[d].length && (this.u[c] = this.u[d], c++); this.u.length = c; this.ca = 0 } else this.u = a, this.ca = b } function H(a) { return a.ca >= a.u.length ? null : a.u[a.ca] } function Rc(a) { return a.u.length - a.ca } function S(a) { var b = a.ca; b < a.u.length && b++; return new R(a.u, b) } function Sc(a) { return a.ca < a.u.length ? a.u[a.u.length - 1] : null }
    R.prototype.toString = function () { for (var a = "", b = this.ca; b < this.u.length; b++) "" !== this.u[b] && (a += "/" + this.u[b]); return a || "/" }; R.prototype.parent = function () { if (this.ca >= this.u.length) return null; for (var a = [], b = this.ca; b < this.u.length - 1; b++) a.push(this.u[b]); return new R(a, 0) };
    R.prototype.n = function (a) { for (var b = [], c = this.ca; c < this.u.length; c++) b.push(this.u[c]); if (a instanceof R) for (c = a.ca; c < a.u.length; c++) b.push(a.u[c]); else for (a = a.split("/"), c = 0; c < a.length; c++) 0 < a[c].length && b.push(a[c]); return new R(b, 0) }; R.prototype.e = function () { return this.ca >= this.u.length }; var T = new R(""); function U(a, b) { var c = H(a); if (null === c) return b; if (c === H(b)) return U(S(a), S(b)); throw Error("INTERNAL ERROR: innerPath (" + b + ") is not within outerPath (" + a + ")"); }
    R.prototype.ea = function (a) { if (Rc(this) !== Rc(a)) return !1; for (var b = this.ca, c = a.ca; b <= this.u.length; b++, c++) if (this.u[b] !== a.u[c]) return !1; return !0 }; R.prototype.contains = function (a) { var b = this.ca, c = a.ca; if (Rc(this) > Rc(a)) return !1; for (; b < this.u.length;) { if (this.u[b] !== a.u[c]) return !1; ++b; ++c } return !0 }; function Tc() { this.children = {}; this.bd = 0; this.value = null } function Uc(a, b, c) { this.ud = a ? a : ""; this.Nc = b ? b : null; this.B = c ? c : new Tc } function Vc(a, b) { for (var c = b instanceof R ? b : new R(b), d = a, e; null !== (e = H(c)) ;) d = new Uc(e, d, t(d.B.children, e) || new Tc), c = S(c); return d } h = Uc.prototype; h.za = function () { return this.B.value }; function Wc(a, b) { w("undefined" !== typeof b, "Cannot set value to undefined"); a.B.value = b; Xc(a) } h.clear = function () { this.B.value = null; this.B.children = {}; this.B.bd = 0; Xc(this) };
    h.ld = function () { return 0 < this.B.bd }; h.e = function () { return null === this.za() && !this.ld() }; h.T = function (a) { var b = this; z(this.B.children, function (c, d) { a(new Uc(d, b, c)) }) }; function Yc(a, b, c, d) { c && !d && b(a); a.T(function (a) { Yc(a, b, !0, d) }); c && d && b(a) } function Zc(a, b) { for (var c = a.parent() ; null !== c && !b(c) ;) c = c.parent() } h.path = function () { return new R(null === this.Nc ? this.ud : this.Nc.path() + "/" + this.ud) }; h.name = function () { return this.ud }; h.parent = function () { return this.Nc };
    function Xc(a) { if (null !== a.Nc) { var b = a.Nc, c = a.ud, d = a.e(), e = s(b.B.children, c); d && e ? (delete b.B.children[c], b.B.bd--, Xc(b)) : d || e || (b.B.children[c] = a.B, b.B.bd++, Xc(b)) } }; function $c(a, b) { this.Ia = a; this.ua = b ? b : ad } h = $c.prototype; h.Ka = function (a, b) { return new $c(this.Ia, this.ua.Ka(a, b, this.Ia).X(null, null, !1, null, null)) }; h.remove = function (a) { return new $c(this.Ia, this.ua.remove(a, this.Ia).X(null, null, !1, null, null)) }; h.get = function (a) { for (var b, c = this.ua; !c.e() ;) { b = this.Ia(a, c.key); if (0 === b) return c.value; 0 > b ? c = c.left : 0 < b && (c = c.right) } return null };
    function bd(a, b) { for (var c, d = a.ua, e = null; !d.e() ;) { c = a.Ia(b, d.key); if (0 === c) { if (d.left.e()) return e ? e.key : null; for (d = d.left; !d.right.e() ;) d = d.right; return d.key } 0 > c ? d = d.left : 0 < c && (e = d, d = d.right) } throw Error("Attempted to find predecessor key for a nonexistent key.  What gives?"); } h.e = function () { return this.ua.e() }; h.count = function () { return this.ua.count() }; h.Hc = function () { return this.ua.Hc() }; h.Wb = function () { return this.ua.Wb() }; h.fa = function (a) { return this.ua.fa(a) };
    h.Nb = function (a) { return new cd(this.ua, null, this.Ia, !1, a) }; h.Ob = function (a, b) { return new cd(this.ua, a, this.Ia, !1, b) }; h.Qb = function (a, b) { return new cd(this.ua, a, this.Ia, !0, b) }; h.ef = function (a) { return new cd(this.ua, null, this.Ia, !0, a) }; function cd(a, b, c, d, e) { this.Id = e || null; this.ue = d; this.Ma = []; for (e = 1; !a.e() ;) if (e = b ? c(a.key, b) : 1, d && (e *= -1), 0 > e) a = this.ue ? a.left : a.right; else if (0 === e) { this.Ma.push(a); break } else this.Ma.push(a), a = this.ue ? a.right : a.left }
    function O(a) { if (0 === a.Ma.length) return null; var b = a.Ma.pop(), c; c = a.Id ? a.Id(b.key, b.value) : { key: b.key, value: b.value }; if (a.ue) for (b = b.left; !b.e() ;) a.Ma.push(b), b = b.right; else for (b = b.right; !b.e() ;) a.Ma.push(b), b = b.left; return c } function dd(a) { if (0 === a.Ma.length) return null; var b; b = a.Ma; b = b[b.length - 1]; return a.Id ? a.Id(b.key, b.value) : { key: b.key, value: b.value } } function ed(a, b, c, d, e) { this.key = a; this.value = b; this.color = null != c ? c : !0; this.left = null != d ? d : ad; this.right = null != e ? e : ad } h = ed.prototype;
    h.X = function (a, b, c, d, e) { return new ed(null != a ? a : this.key, null != b ? b : this.value, null != c ? c : this.color, null != d ? d : this.left, null != e ? e : this.right) }; h.count = function () { return this.left.count() + 1 + this.right.count() }; h.e = function () { return !1 }; h.fa = function (a) { return this.left.fa(a) || a(this.key, this.value) || this.right.fa(a) }; function gd(a) { return a.left.e() ? a : gd(a.left) } h.Hc = function () { return gd(this).key }; h.Wb = function () { return this.right.e() ? this.key : this.right.Wb() };
    h.Ka = function (a, b, c) { var d, e; e = this; d = c(a, e.key); e = 0 > d ? e.X(null, null, null, e.left.Ka(a, b, c), null) : 0 === d ? e.X(null, b, null, null, null) : e.X(null, null, null, null, e.right.Ka(a, b, c)); return hd(e) }; function id(a) { if (a.left.e()) return ad; a.left.ba() || a.left.left.ba() || (a = jd(a)); a = a.X(null, null, null, id(a.left), null); return hd(a) }
    h.remove = function (a, b) { var c, d; c = this; if (0 > b(a, c.key)) c.left.e() || c.left.ba() || c.left.left.ba() || (c = jd(c)), c = c.X(null, null, null, c.left.remove(a, b), null); else { c.left.ba() && (c = kd(c)); c.right.e() || c.right.ba() || c.right.left.ba() || (c = ld(c), c.left.left.ba() && (c = kd(c), c = ld(c))); if (0 === b(a, c.key)) { if (c.right.e()) return ad; d = gd(c.right); c = c.X(d.key, d.value, null, null, id(c.right)) } c = c.X(null, null, null, null, c.right.remove(a, b)) } return hd(c) }; h.ba = function () { return this.color };
    function hd(a) { a.right.ba() && !a.left.ba() && (a = md(a)); a.left.ba() && a.left.left.ba() && (a = kd(a)); a.left.ba() && a.right.ba() && (a = ld(a)); return a } function jd(a) { a = ld(a); a.right.left.ba() && (a = a.X(null, null, null, null, kd(a.right)), a = md(a), a = ld(a)); return a } function md(a) { return a.right.X(null, null, a.color, a.X(null, null, !0, null, a.right.left), null) } function kd(a) { return a.left.X(null, null, a.color, null, a.X(null, null, !0, a.left.right, null)) }
    function ld(a) { return a.X(null, null, !a.color, a.left.X(null, null, !a.left.color, null, null), a.right.X(null, null, !a.right.color, null, null)) } function nd() { } h = nd.prototype; h.X = function () { return this }; h.Ka = function (a, b) { return new ed(a, b, null) }; h.remove = function () { return this }; h.count = function () { return 0 }; h.e = function () { return !0 }; h.fa = function () { return !1 }; h.Hc = function () { return null }; h.Wb = function () { return null }; h.ba = function () { return !1 }; var ad = new nd; function od(a, b) { this.A = a; w(m(this.A) && null !== this.A, "LeafNode shouldn't be created with null/undefined value."); this.ha = b || L; pd(this.ha); this.sb = null } h = od.prototype; h.L = function () { return !0 }; h.K = function () { return this.ha }; h.Z = function (a) { return new od(this.A, a) }; h.J = function (a) { return ".priority" === a ? this.ha : L }; h.ra = function (a) { return a.e() ? this : ".priority" === H(a) ? this.ha : L }; h.Da = function () { return !1 }; h.df = function () { return null };
    h.P = function (a, b) { return ".priority" === a ? this.Z(b) : b.e() && ".priority" !== a ? this : L.P(a, b).Z(this.ha) }; h.D = function (a, b) { var c = H(a); if (null === c) return b; if (b.e() && ".priority" !== c) return this; w(".priority" !== c || 1 === Rc(a), ".priority must be the last token in a path"); return this.P(c, L.D(S(a), b)) }; h.e = function () { return !1 }; h.ub = function () { return 0 }; h.N = function (a) { return a && !this.K().e() ? { ".value": this.za(), ".priority": this.K().N() } : this.za() };
    h.hash = function () { if (null === this.sb) { var a = ""; this.ha.e() || (a += "priority:" + qd(this.ha.N()) + ":"); var b = typeof this.A, a = a + (b + ":"), a = "number" === b ? a + Bb(this.A) : a + this.A; this.sb = jb(a) } return this.sb }; h.za = function () { return this.A }; h.he = function (a) { if (a === L) return 1; if (a instanceof V) return -1; w(a.L(), "Unknown node type"); var b = typeof a.A, c = typeof this.A, d = Ha(rd, b), e = Ha(rd, c); w(0 <= d, "Unknown leaf type: " + b); w(0 <= e, "Unknown leaf type: " + c); return d === e ? "object" === c ? 0 : this.A < a.A ? -1 : this.A === a.A ? 0 : 1 : e - d };
    var rd = ["object", "boolean", "number", "string"]; od.prototype.Eb = function () { return this }; od.prototype.Ac = function () { return !0 }; od.prototype.ea = function (a) { return a === this ? !0 : a.L() ? this.A === a.A && this.ha.ea(a.ha) : !1 }; od.prototype.toString = function () { return "string" === typeof this.A ? this.A : '"' + this.A + '"' }; function sd(a, b) { this.pd = a; this.Ub = b } sd.prototype.get = function (a) { var b = t(this.pd, a); if (!b) throw Error("No index defined for " + a); return b === mc ? null : b }; function td(a, b, c) { var d = ud(a.pd, function (d, f) { var g = t(a.Ub, f); w(g, "Missing index implementation for " + f); if (d === mc) { if (g.te(b.Y)) { for (var k = [], l = c.Nb(Ac), n = O(l) ; n;) n.name != b.name && k.push(n), n = O(l); k.push(b); return vd(k, nc(g)) } return mc } g = c.get(b.name); k = d; g && (k = k.remove(new M(b.name, g))); return k.Ka(b, b.Y) }); return new sd(d, a.Ub) }
    function wd(a, b, c) { var d = ud(a.pd, function (a) { if (a === mc) return a; var d = c.get(b.name); return d ? a.remove(new M(b.name, d)) : a }); return new sd(d, a.Ub) } var xd = new sd({ ".priority": mc }, { ".priority": K }); function V(a, b, c) { this.m = a; (this.ha = b) && pd(this.ha); this.ob = c; this.sb = null } h = V.prototype; h.L = function () { return !1 }; h.K = function () { return this.ha || L }; h.Z = function (a) { return new V(this.m, a, this.ob) }; h.J = function (a) { if (".priority" === a) return this.K(); a = this.m.get(a); return null === a ? L : a }; h.ra = function (a) { var b = H(a); return null === b ? this : this.J(b).ra(S(a)) }; h.Da = function (a) { return null !== this.m.get(a) };
    h.P = function (a, b) { w(b, "We should always be passing snapshot nodes"); if (".priority" === a) return this.Z(b); var c = new M(a, b), d; b.e() ? (d = this.m.remove(a), c = wd(this.ob, c, this.m)) : (d = this.m.Ka(a, b), c = td(this.ob, c, this.m)); return new V(d, this.ha, c) }; h.D = function (a, b) { var c = H(a); if (null === c) return b; w(".priority" !== H(a) || 1 === Rc(a), ".priority must be the last token in a path"); var d = this.J(c).D(S(a), b); return this.P(c, d) }; h.e = function () { return this.m.e() }; h.ub = function () { return this.m.count() }; var yd = /^(0|[1-9]\d*)$/;
    h = V.prototype; h.N = function (a) { if (this.e()) return null; var b = {}, c = 0, d = 0, e = !0; this.T(K, function (f, g) { b[f] = g.N(a); c++; e && yd.test(f) ? d = Math.max(d, Number(f)) : e = !1 }); if (!a && e && d < 2 * c) { var f = [], g; for (g in b) f[g] = b[g]; return f } a && !this.K().e() && (b[".priority"] = this.K().N()); return b }; h.hash = function () { if (null === this.sb) { var a = ""; this.K().e() || (a += "priority:" + qd(this.K().N()) + ":"); this.T(K, function (b, c) { var d = c.hash(); "" !== d && (a += ":" + b + ":" + d) }); this.sb = "" === a ? "" : jb(a) } return this.sb };
    h.df = function (a, b, c) { return (c = zd(this, c)) ? (a = bd(c, new M(a, b))) ? a.name : null : bd(this.m, a) }; function Dc(a, b) { var c; c = (c = zd(a, b)) ? (c = c.Hc()) && c.name : a.m.Hc(); return c ? new M(c, a.m.get(c)) : null } function Ec(a, b) { var c; c = (c = zd(a, b)) ? (c = c.Wb()) && c.name : a.m.Wb(); return c ? new M(c, a.m.get(c)) : null } h.T = function (a, b) { var c = zd(this, a); return c ? c.fa(function (a) { return b(a.name, a.Y) }) : this.m.fa(b) }; h.Nb = function (a) { return this.Ob(a.Be(), a) };
    h.Ob = function (a, b) { var c = zd(this, b); if (c) return c.Ob(a, function (a) { return a }); for (var c = this.m.Ob(a.name, Ac), d = dd(c) ; null != d && 0 > b.compare(d, a) ;) O(c), d = dd(c); return c }; h.ef = function (a) { return this.Qb(a.Ae(), a) }; h.Qb = function (a, b) { var c = zd(this, b); if (c) return c.Qb(a, function (a) { return a }); for (var c = this.m.Qb(a.name, Ac), d = dd(c) ; null != d && 0 < b.compare(d, a) ;) O(c), d = dd(c); return c }; h.he = function (a) { return this.e() ? a.e() ? 0 : -1 : a.L() || a.e() ? 1 : a === qc ? -1 : 0 };
    h.Eb = function (a) { if (a === sc || Ad(this.ob.Ub, a.toString())) return this; var b = this.ob, c = this.m; w(a !== sc, "KeyIndex always exists and isn't meant to be added to the IndexMap."); for (var d = [], e = !1, c = c.Nb(Ac), f = O(c) ; f;) e = e || a.te(f.Y), d.push(f), f = O(c); d = e ? vd(d, nc(a)) : mc; e = a.toString(); c = Bd(b.Ub); c[e] = a; a = Bd(b.pd); a[e] = d; return new V(this.m, this.ha, new sd(a, c)) }; h.Ac = function (a) { return a === sc || Ad(this.ob.Ub, a.toString()) };
    h.ea = function (a) { if (a === this) return !0; if (a.L()) return !1; if (this.K().ea(a.K()) && this.m.count() === a.m.count()) { var b = this.Nb(K); a = a.Nb(K); for (var c = O(b), d = O(a) ; c && d;) { if (c.name !== d.name || !c.Y.ea(d.Y)) return !1; c = O(b); d = O(a) } return null === c && null === d } return !1 }; function zd(a, b) { return b === sc ? null : a.ob.get(b.toString()) } h.toString = function () { var a = "{", b = !0; this.T(K, function (c, d) { b ? b = !1 : a += ", "; a += '"' + c + '" : ' + d.toString() }); return a += "}" }; function N(a, b) {
        if (null === a) return L; var c = null; "object" === typeof a && ".priority" in a ? c = a[".priority"] : "undefined" !== typeof b && (c = b); w(null === c || "string" === typeof c || "number" === typeof c || "object" === typeof c && ".sv" in c, "Invalid priority type found: " + typeof c); "object" === typeof a && ".value" in a && null !== a[".value"] && (a = a[".value"]); if ("object" !== typeof a || ".sv" in a) return new od(a, N(c)); if (a instanceof Array) {
            var d = L, e = a; z(e, function (a, b) {
                if (s(e, b) && "." !== b.substring(0, 1)) {
                    var c = N(a); if (c.L() || !c.e()) d =
                    d.P(b, c)
                }
            }); return d.Z(N(c))
        } var f = [], g = !1, k = a; ua(k, function (a) { if ("string" !== typeof a || "." !== a.substring(0, 1)) { var b = N(k[a]); b.e() || (g = g || !b.K().e(), f.push(new M(a, b))) } }); var l = vd(f, jc, function (a) { return a.name }, kc); if (g) { var n = vd(f, nc(K)); return new V(l, N(c), new sd({ ".priority": n }, { ".priority": K })) } return new V(l, N(c), xd)
    } var Cd = Math.log(2); function Dd(a) { this.count = parseInt(Math.log(a + 1) / Cd, 10); this.Xe = this.count - 1; this.Nf = a + 1 & parseInt(Array(this.count + 1).join("1"), 2) }
    function Ed(a) { var b = !(a.Nf & 1 << a.Xe); a.Xe--; return b }
    function vd(a, b, c, d) {
        function e(b, d) { var f = d - b; if (0 == f) return null; if (1 == f) { var n = a[b], u = c ? c(n) : n; return new ed(u, n.Y, !1, null, null) } var n = parseInt(f / 2, 10) + b, f = e(b, n), x = e(n + 1, d), n = a[n], u = c ? c(n) : n; return new ed(u, n.Y, !1, f, x) } a.sort(b); var f = function (b) { function d(b, g) { var k = u - b, x = u; u -= b; var x = e(k + 1, x), k = a[k], E = c ? c(k) : k, x = new ed(E, k.Y, g, null, x); f ? f.left = x : n = x; f = x } for (var f = null, n = null, u = a.length, x = 0; x < b.count; ++x) { var E = Ed(b), fd = Math.pow(2, b.count - (x + 1)); E ? d(fd, !1) : (d(fd, !1), d(fd, !0)) } return n }(new Dd(a.length));
        return null !== f ? new $c(d || b, f) : new $c(d || b)
    } function qd(a) { return "number" === typeof a ? "number:" + Bb(a) : "string:" + a } function pd(a) { if (a.L()) { var b = a.N(); w("string" === typeof b || "number" === typeof b || "object" === typeof b && s(b, ".sv"), "Priority must be a string or number.") } else w(a === qc || a.e(), "priority of unexpected type."); w(a === qc || a.K().e(), "Priority nodes can't have a priority of their own.") } var L = new V(new $c(kc), null, xd); function Fd() { V.call(this, new $c(kc), L, xd) } ma(Fd, V); h = Fd.prototype;
    h.he = function (a) { return a === this ? 0 : 1 }; h.ea = function (a) { return a === this }; h.K = function () { throw gb("Why is this called?"); }; h.J = function () { return L }; h.e = function () { return !1 }; var qc = new Fd, oc = new M("[MIN_NAME]", L); function C(a, b, c) { this.B = a; this.V = b; this.g = c } C.prototype.N = function () { D("Firebase.DataSnapshot.val", 0, 0, arguments.length); return this.B.N() }; C.prototype.val = C.prototype.N; C.prototype.Ze = function () { D("Firebase.DataSnapshot.exportVal", 0, 0, arguments.length); return this.B.N(!0) }; C.prototype.exportVal = C.prototype.Ze; C.prototype.Wf = function () { D("Firebase.DataSnapshot.exists", 0, 0, arguments.length); return !this.B.e() }; C.prototype.exists = C.prototype.Wf;
    C.prototype.n = function (a) { D("Firebase.DataSnapshot.child", 0, 1, arguments.length); ga(a) && (a = String(a)); Zb("Firebase.DataSnapshot.child", a); var b = new R(a), c = this.V.n(b); return new C(this.B.ra(b), c, K) }; C.prototype.child = C.prototype.n; C.prototype.Da = function (a) { D("Firebase.DataSnapshot.hasChild", 1, 1, arguments.length); Zb("Firebase.DataSnapshot.hasChild", a); var b = new R(a); return !this.B.ra(b).e() }; C.prototype.hasChild = C.prototype.Da;
    C.prototype.K = function () { D("Firebase.DataSnapshot.getPriority", 0, 0, arguments.length); return this.B.K().N() }; C.prototype.getPriority = C.prototype.K; C.prototype.forEach = function (a) { D("Firebase.DataSnapshot.forEach", 1, 1, arguments.length); G("Firebase.DataSnapshot.forEach", 1, a, !1); if (this.B.L()) return !1; var b = this; return !!this.B.T(this.g, function (c, d) { return a(new C(d, b.V.n(c), K)) }) }; C.prototype.forEach = C.prototype.forEach;
    C.prototype.ld = function () { D("Firebase.DataSnapshot.hasChildren", 0, 0, arguments.length); return this.B.L() ? !1 : !this.B.e() }; C.prototype.hasChildren = C.prototype.ld; C.prototype.name = function () { y("Firebase.DataSnapshot.name() being deprecated. Please use Firebase.DataSnapshot.key() instead."); D("Firebase.DataSnapshot.name", 0, 0, arguments.length); return this.key() }; C.prototype.name = C.prototype.name; C.prototype.key = function () { D("Firebase.DataSnapshot.key", 0, 0, arguments.length); return this.V.key() };
    C.prototype.key = C.prototype.key; C.prototype.ub = function () { D("Firebase.DataSnapshot.numChildren", 0, 0, arguments.length); return this.B.ub() }; C.prototype.numChildren = C.prototype.ub; C.prototype.cc = function () { D("Firebase.DataSnapshot.ref", 0, 0, arguments.length); return this.V }; C.prototype.ref = C.prototype.cc; function Gd(a) { w(ea(a) && 0 < a.length, "Requires a non-empty array"); this.Ff = a; this.Fc = {} } Gd.prototype.Vd = function (a, b) { for (var c = this.Fc[a] || [], d = 0; d < c.length; d++) c[d].pc.apply(c[d].Ja, Array.prototype.slice.call(arguments, 1)) }; Gd.prototype.vb = function (a, b, c) { Hd(this, a); this.Fc[a] = this.Fc[a] || []; this.Fc[a].push({ pc: b, Ja: c }); (a = this.pe(a)) && b.apply(c, a) }; Gd.prototype.Yb = function (a, b, c) { Hd(this, a); a = this.Fc[a] || []; for (var d = 0; d < a.length; d++) if (a[d].pc === b && (!c || c === a[d].Ja)) { a.splice(d, 1); break } };
    function Hd(a, b) { w(Na(a.Ff, function (a) { return a === b }), "Unknown event: " + b) }; function Id() {
        Gd.call(this, ["visible"]); var a, b; "undefined" !== typeof document && "undefined" !== typeof document.addEventListener && ("undefined" !== typeof document.hidden ? (b = "visibilitychange", a = "hidden") : "undefined" !== typeof document.mozHidden ? (b = "mozvisibilitychange", a = "mozHidden") : "undefined" !== typeof document.msHidden ? (b = "msvisibilitychange", a = "msHidden") : "undefined" !== typeof document.webkitHidden && (b = "webkitvisibilitychange", a = "webkitHidden")); this.lc = !0; if (b) {
            var c = this; document.addEventListener(b,
            function () { var b = !document[a]; b !== c.lc && (c.lc = b, c.Vd("visible", b)) }, !1)
        }
    } ma(Id, Gd); ca(Id); Id.prototype.pe = function (a) { w("visible" === a, "Unknown event type: " + a); return [this.lc] }; function Jd() { Gd.call(this, ["online"]); this.Kc = !0; if ("undefined" !== typeof window && "undefined" !== typeof window.addEventListener) { var a = this; window.addEventListener("online", function () { a.Kc || a.Vd("online", !0); a.Kc = !0 }, !1); window.addEventListener("offline", function () { a.Kc && a.Vd("online", !1); a.Kc = !1 }, !1) } } ma(Jd, Gd); ca(Jd); Jd.prototype.pe = function (a) { w("online" === a, "Unknown event type: " + a); return [this.Kc] }; function z(a, b) { for (var c in a) b.call(void 0, a[c], c, a) } function ud(a, b) { var c = {}, d; for (d in a) c[d] = b.call(void 0, a[d], d, a); return c } function Mb(a, b) { for (var c in a) if (!b.call(void 0, a[c], c, a)) return !1; return !0 } function Kb(a) { var b = 0, c; for (c in a) b++; return b } function Lb(a) { for (var b in a) return b } function Kd(a) { var b = [], c = 0, d; for (d in a) b[c++] = a[d]; return b } function Ld(a) { var b = [], c = 0, d; for (d in a) b[c++] = d; return b } function Ad(a, b) { for (var c in a) if (a[c] == b) return !0; return !1 }
    function Md(a, b, c) { for (var d in a) if (b.call(c, a[d], d, a)) return d } function Nd(a, b) { var c = Md(a, b, void 0); return c && a[c] } function Od(a) { for (var b in a) return !1; return !0 } function Pd(a, b) { return b in a ? a[b] : void 0 } function Bd(a) { var b = {}, c; for (c in a) b[c] = a[c]; return b } var Qd = "constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
    function Rd(a, b) { for (var c, d, e = 1; e < arguments.length; e++) { d = arguments[e]; for (c in d) a[c] = d[c]; for (var f = 0; f < Qd.length; f++) c = Qd[f], Object.prototype.hasOwnProperty.call(d, c) && (a[c] = d[c]) } }; function Sd() { this.sc = {} } function Td(a, b, c) { m(c) || (c = 1); s(a.sc, b) || (a.sc[b] = 0); a.sc[b] += c } Sd.prototype.get = function () { return Bd(this.sc) }; function Ud(a) { this.Pf = a; this.rd = null } Ud.prototype.get = function () { var a = this.Pf.get(), b = Bd(a); if (this.rd) for (var c in this.rd) b[c] -= this.rd[c]; this.rd = a; return b }; function Vd(a, b) { this.yf = {}; this.Pd = new Ud(a); this.S = b; var c = 1E4 + 2E4 * Math.random(); setTimeout(q(this.rf, this), Math.floor(c)) } Vd.prototype.rf = function () { var a = this.Pd.get(), b = {}, c = !1, d; for (d in a) 0 < a[d] && s(this.yf, d) && (b[d] = a[d], c = !0); c && (a = this.S, a.ja && (b = { c: b }, a.f("reportStats", b), a.Ca("s", b))); setTimeout(q(this.rf, this), Math.floor(6E5 * Math.random())) }; var Wd = {}, Xd = {}; function Yd(a) { a = a.toString(); Wd[a] || (Wd[a] = new Sd); return Wd[a] } function Zd(a, b) { var c = a.toString(); Xd[c] || (Xd[c] = b()); return Xd[c] }; var $d = null; "undefined" !== typeof MozWebSocket ? $d = MozWebSocket : "undefined" !== typeof WebSocket && ($d = WebSocket); function ae(a, b, c) { this.ie = a; this.f = pb(this.ie); this.frames = this.Bc = null; this.ib = this.jb = this.Qe = 0; this.Ra = Yd(b); this.$a = (b.zb ? "wss://" : "ws://") + b.La + "/.ws?v=5"; "undefined" !== typeof location && location.href && -1 !== location.href.indexOf("firebaseio.com") && (this.$a += "&r=f"); b.host !== b.La && (this.$a = this.$a + "&ns=" + b.tb); c && (this.$a = this.$a + "&s=" + c) } var be;
    ae.prototype.open = function (a, b) {
        this.fb = b; this.hg = a; this.f("Websocket connecting to " + this.$a); this.wc = !1; za.set("previous_websocket_failure", !0); try { this.ta = new $d(this.$a) } catch (c) { this.f("Error instantiating WebSocket."); var d = c.message || c.data; d && this.f(d); this.eb(); return } var e = this; this.ta.onopen = function () { e.f("Websocket connected."); e.wc = !0 }; this.ta.onclose = function () { e.f("Websocket connection was disconnected."); e.ta = null; e.eb() }; this.ta.onmessage = function (a) {
            if (null !== e.ta) if (a = a.data, e.ib +=
            a.length, Td(e.Ra, "bytes_received", a.length), ce(e), null !== e.frames) de(e, a); else { a: { w(null === e.frames, "We already have a frame buffer"); if (6 >= a.length) { var b = Number(a); if (!isNaN(b)) { e.Qe = b; e.frames = []; a = null; break a } } e.Qe = 1; e.frames = [] } null !== a && de(e, a) }
        }; this.ta.onerror = function (a) { e.f("WebSocket error.  Closing connection."); (a = a.message || a.data) && e.f(a); e.eb() }
    }; ae.prototype.start = function () { };
    ae.isAvailable = function () { var a = !1; if ("undefined" !== typeof navigator && navigator.userAgent) { var b = navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/); b && 1 < b.length && 4.4 > parseFloat(b[1]) && (a = !0) } return !a && null !== $d && !be }; ae.responsesRequiredToBeHealthy = 2; ae.healthyTimeout = 3E4; h = ae.prototype; h.sd = function () { za.remove("previous_websocket_failure") }; function de(a, b) { a.frames.push(b); if (a.frames.length == a.Qe) { var c = a.frames.join(""); a.frames = null; c = ta(c); a.hg(c) } }
    h.send = function (a) { ce(this); a = r(a); this.jb += a.length; Td(this.Ra, "bytes_sent", a.length); a = zb(a, 16384); 1 < a.length && this.ta.send(String(a.length)); for (var b = 0; b < a.length; b++) this.ta.send(a[b]) }; h.Uc = function () { this.qb = !0; this.Bc && (clearInterval(this.Bc), this.Bc = null); this.ta && (this.ta.close(), this.ta = null) }; h.eb = function () { this.qb || (this.f("WebSocket is closing itself"), this.Uc(), this.fb && (this.fb(this.wc), this.fb = null)) }; h.close = function () { this.qb || (this.f("WebSocket is being closed"), this.Uc()) };
    function ce(a) { clearInterval(a.Bc); a.Bc = setInterval(function () { a.ta && a.ta.send("0"); ce(a) }, Math.floor(45E3)) }; function ee(a) { this.Zb = a; this.Cd = []; this.Ib = 0; this.ge = -1; this.wb = null } function fe(a, b, c) { a.ge = b; a.wb = c; a.ge < a.Ib && (a.wb(), a.wb = null) } function ge(a, b, c) { for (a.Cd[b] = c; a.Cd[a.Ib];) { var d = a.Cd[a.Ib]; delete a.Cd[a.Ib]; for (var e = 0; e < d.length; ++e) if (d[e]) { var f = a; Db(function () { f.Zb(d[e]) }) } if (a.Ib === a.ge) { a.wb && (clearTimeout(a.wb), a.wb(), a.wb = null); break } a.Ib++ } }; function he() { this.set = {} } h = he.prototype; h.add = function (a, b) { this.set[a] = null !== b ? b : !0 }; h.contains = function (a) { return s(this.set, a) }; h.get = function (a) { return this.contains(a) ? this.set[a] : void 0 }; h.remove = function (a) { delete this.set[a] }; h.clear = function () { this.set = {} }; h.e = function () { return Od(this.set) }; h.count = function () { return Kb(this.set) }; function ie(a, b) { z(a.set, function (a, d) { b(d, a) }) }; function je(a, b, c) { this.ie = a; this.f = pb(a); this.ib = this.jb = 0; this.Ra = Yd(b); this.Md = c; this.wc = !1; this.Zc = function (a) { b.host !== b.La && (a.ns = b.tb); var c = [], f; for (f in a) a.hasOwnProperty(f) && c.push(f + "=" + a[f]); return (b.zb ? "https://" : "http://") + b.La + "/.lp?" + c.join("&") } } var ke, le;
    je.prototype.open = function (a, b) {
        this.We = 0; this.ga = b; this.kf = new ee(a); this.qb = !1; var c = this; this.lb = setTimeout(function () { c.f("Timed out trying to connect."); c.eb(); c.lb = null }, Math.floor(3E4)); ub(function () {
            if (!c.qb) {
                c.Oa = new me(function (a, b, d, k, l) { ne(c, arguments); if (c.Oa) if (c.lb && (clearTimeout(c.lb), c.lb = null), c.wc = !0, "start" == a) c.id = b, c.pf = d; else if ("close" === a) b ? (c.Oa.Kd = !1, fe(c.kf, b, function () { c.eb() })) : c.eb(); else throw Error("Unrecognized command received: " + a); }, function (a, b) {
                    ne(c, arguments);
                    ge(c.kf, a, b)
                }, function () { c.eb() }, c.Zc); var a = { start: "t" }; a.ser = Math.floor(1E8 * Math.random()); c.Oa.Wd && (a.cb = c.Oa.Wd); a.v = "5"; c.Md && (a.s = c.Md); "undefined" !== typeof location && location.href && -1 !== location.href.indexOf("firebaseio.com") && (a.r = "f"); a = c.Zc(a); c.f("Connecting via long-poll to " + a); oe(c.Oa, a, function () { })
            }
        })
    };
    je.prototype.start = function () { var a = this.Oa, b = this.pf; a.cg = this.id; a.dg = b; for (a.ae = !0; pe(a) ;); a = this.id; b = this.pf; this.Xb = document.createElement("iframe"); var c = { dframe: "t" }; c.id = a; c.pw = b; this.Xb.src = this.Zc(c); this.Xb.style.display = "none"; document.body.appendChild(this.Xb) }; je.isAvailable = function () { return !le && !("object" === typeof window && window.chrome && window.chrome.extension && !/^chrome/.test(window.location.href)) && !("object" === typeof Windows && "object" === typeof Windows.Eg) && (ke || !0) }; h = je.prototype;
    h.sd = function () { }; h.Uc = function () { this.qb = !0; this.Oa && (this.Oa.close(), this.Oa = null); this.Xb && (document.body.removeChild(this.Xb), this.Xb = null); this.lb && (clearTimeout(this.lb), this.lb = null) }; h.eb = function () { this.qb || (this.f("Longpoll is closing itself"), this.Uc(), this.ga && (this.ga(this.wc), this.ga = null)) }; h.close = function () { this.qb || (this.f("Longpoll is being closed."), this.Uc()) };
    h.send = function (a) { a = r(a); this.jb += a.length; Td(this.Ra, "bytes_sent", a.length); a = kb(a); a = db(a, !0); a = zb(a, 1840); for (var b = 0; b < a.length; b++) { var c = this.Oa; c.Pc.push({ tg: this.We, Bg: a.length, Ye: a[b] }); c.ae && pe(c); this.We++ } }; function ne(a, b) { var c = r(b).length; a.ib += c; Td(a.Ra, "bytes_received", c) }
    function me(a, b, c, d) {
        this.Zc = d; this.fb = c; this.He = new he; this.Pc = []; this.ke = Math.floor(1E8 * Math.random()); this.Kd = !0; this.Wd = fb(); window["pLPCommand" + this.Wd] = a; window["pRTLPCB" + this.Wd] = b; a = document.createElement("iframe"); a.style.display = "none"; if (document.body) { document.body.appendChild(a); try { a.contentWindow.document || ib("No IE domain setting required") } catch (e) { a.src = "javascript:void((function(){document.open();document.domain='" + document.domain + "';document.close();})())" } } else throw "Document body has not initialized. Wait to initialize Firebase until after the document is ready.";
        a.contentDocument ? a.ab = a.contentDocument : a.contentWindow ? a.ab = a.contentWindow.document : a.document && (a.ab = a.document); this.Ba = a; a = ""; this.Ba.src && "javascript:" === this.Ba.src.substr(0, 11) && (a = '<script>document.domain="' + document.domain + '";\x3c/script>'); a = "<html><body>" + a + "</body></html>"; try { this.Ba.ab.open(), this.Ba.ab.write(a), this.Ba.ab.close() } catch (f) { ib("frame writing exception"), f.stack && ib(f.stack), ib(f) }
    }
    me.prototype.close = function () { this.ae = !1; if (this.Ba) { this.Ba.ab.body.innerHTML = ""; var a = this; setTimeout(function () { null !== a.Ba && (document.body.removeChild(a.Ba), a.Ba = null) }, Math.floor(0)) } var b = this.fb; b && (this.fb = null, b()) };
    function pe(a) { if (a.ae && a.Kd && a.He.count() < (0 < a.Pc.length ? 2 : 1)) { a.ke++; var b = {}; b.id = a.cg; b.pw = a.dg; b.ser = a.ke; for (var b = a.Zc(b), c = "", d = 0; 0 < a.Pc.length;) if (1870 >= a.Pc[0].Ye.length + 30 + c.length) { var e = a.Pc.shift(), c = c + "&seg" + d + "=" + e.tg + "&ts" + d + "=" + e.Bg + "&d" + d + "=" + e.Ye; d++ } else break; qe(a, b + c, a.ke); return !0 } return !1 } function qe(a, b, c) { function d() { a.He.remove(c); pe(a) } a.He.add(c); var e = setTimeout(d, Math.floor(25E3)); oe(a, b, function () { clearTimeout(e); d() }) }
    function oe(a, b, c) { setTimeout(function () { try { if (a.Kd) { var d = a.Ba.ab.createElement("script"); d.type = "text/javascript"; d.async = !0; d.src = b; d.onload = d.onreadystatechange = function () { var a = d.readyState; a && "loaded" !== a && "complete" !== a || (d.onload = d.onreadystatechange = null, d.parentNode && d.parentNode.removeChild(d), c()) }; d.onerror = function () { ib("Long-poll script failed to load: " + b); a.Kd = !1; a.close() }; a.Ba.ab.body.appendChild(d) } } catch (e) { } }, Math.floor(1)) }; function re(a) { se(this, a) } var te = [je, ae]; function se(a, b) { var c = ae && ae.isAvailable(), d = c && !(za.jf || !0 === za.get("previous_websocket_failure")); b.Dg && (c || y("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."), d = !0); if (d) a.Xc = [ae]; else { var e = a.Xc = []; Ab(te, function (a, b) { b && b.isAvailable() && e.push(b) }) } } function ue(a) { if (0 < a.Xc.length) return a.Xc[0]; throw Error("No transports available"); }; function ve(a, b, c, d, e, f) { this.id = a; this.f = pb("c:" + this.id + ":"); this.Zb = c; this.Jc = d; this.ga = e; this.Fe = f; this.O = b; this.Bd = []; this.Ue = 0; this.Af = new re(b); this.Qa = 0; this.f("Connection created"); we(this) }
    function we(a) {
        var b = ue(a.Af); a.I = new b("c:" + a.id + ":" + a.Ue++, a.O); a.Je = b.responsesRequiredToBeHealthy || 0; var c = xe(a, a.I), d = ye(a, a.I); a.Yc = a.I; a.Tc = a.I; a.C = null; a.rb = !1; setTimeout(function () { a.I && a.I.open(c, d) }, Math.floor(0)); b = b.healthyTimeout || 0; 0 < b && (a.nd = setTimeout(function () {
            a.nd = null; a.rb || (a.I && 102400 < a.I.ib ? (a.f("Connection exceeded healthy timeout but has received " + a.I.ib + " bytes.  Marking connection healthy."), a.rb = !0, a.I.sd()) : a.I && 10240 < a.I.jb ? a.f("Connection exceeded healthy timeout but has sent " +
            a.I.jb + " bytes.  Leaving connection alive.") : (a.f("Closing unhealthy connection after timeout."), a.close()))
        }, Math.floor(b)))
    } function ye(a, b) { return function (c) { b === a.I ? (a.I = null, c || 0 !== a.Qa ? 1 === a.Qa && a.f("Realtime connection lost.") : (a.f("Realtime connection failed."), "s-" === a.O.La.substr(0, 2) && (za.remove("host:" + a.O.host), a.O.La = a.O.host)), a.close()) : b === a.C ? (a.f("Secondary connection lost."), c = a.C, a.C = null, a.Yc !== c && a.Tc !== c || a.close()) : a.f("closing an old connection") } }
    function xe(a, b) {
        return function (c) {
            if (2 != a.Qa) if (b === a.Tc) {
                var d = xb("t", c); c = xb("d", c); if ("c" == d) {
                    if (d = xb("t", c), "d" in c) if (c = c.d, "h" === d) { var d = c.ts, e = c.v, f = c.h; a.Md = c.s; Ca(a.O, f); 0 == a.Qa && (a.I.start(), ze(a, a.I, d), "5" !== e && y("Protocol version mismatch detected"), c = a.Af, (c = 1 < c.Xc.length ? c.Xc[1] : null) && Ae(a, c)) } else if ("n" === d) { a.f("recvd end transmission on primary"); a.Tc = a.C; for (c = 0; c < a.Bd.length; ++c) a.xd(a.Bd[c]); a.Bd = []; Be(a) } else "s" === d ? (a.f("Connection shutdown command received. Shutting down..."),
                    a.Fe && (a.Fe(c), a.Fe = null), a.ga = null, a.close()) : "r" === d ? (a.f("Reset packet received.  New host: " + c), Ca(a.O, c), 1 === a.Qa ? a.close() : (Ce(a), we(a))) : "e" === d ? qb("Server Error: " + c) : "o" === d ? (a.f("got pong on primary."), De(a), Ee(a)) : qb("Unknown control packet command: " + d)
                } else "d" == d && a.xd(c)
            } else if (b === a.C) if (d = xb("t", c), c = xb("d", c), "c" == d) "t" in c && (c = c.t, "a" === c ? Fe(a) : "r" === c ? (a.f("Got a reset on secondary, closing it"), a.C.close(), a.Yc !== a.C && a.Tc !== a.C || a.close()) : "o" === c && (a.f("got pong on secondary."),
            a.xf--, Fe(a))); else if ("d" == d) a.Bd.push(c); else throw Error("Unknown protocol layer: " + d); else a.f("message on old connection")
        }
    } ve.prototype.Ca = function (a) { Ge(this, { t: "d", d: a }) }; function Be(a) { a.Yc === a.C && a.Tc === a.C && (a.f("cleaning up and promoting a connection: " + a.C.ie), a.I = a.C, a.C = null) }
    function Fe(a) { 0 >= a.xf ? (a.f("Secondary connection is healthy."), a.rb = !0, a.C.sd(), a.C.start(), a.f("sending client ack on secondary"), a.C.send({ t: "c", d: { t: "a", d: {} } }), a.f("Ending transmission on primary"), a.I.send({ t: "c", d: { t: "n", d: {} } }), a.Yc = a.C, Be(a)) : (a.f("sending ping on secondary."), a.C.send({ t: "c", d: { t: "p", d: {} } })) } ve.prototype.xd = function (a) { De(this); this.Zb(a) }; function De(a) { a.rb || (a.Je--, 0 >= a.Je && (a.f("Primary connection is healthy."), a.rb = !0, a.I.sd())) }
    function Ae(a, b) { a.C = new b("c:" + a.id + ":" + a.Ue++, a.O, a.Md); a.xf = b.responsesRequiredToBeHealthy || 0; a.C.open(xe(a, a.C), ye(a, a.C)); setTimeout(function () { a.C && (a.f("Timed out trying to upgrade."), a.C.close()) }, Math.floor(6E4)) } function ze(a, b, c) { a.f("Realtime connection established."); a.I = b; a.Qa = 1; a.Jc && (a.Jc(c), a.Jc = null); 0 === a.Je ? (a.f("Primary connection is healthy."), a.rb = !0) : setTimeout(function () { Ee(a) }, Math.floor(5E3)) }
    function Ee(a) { a.rb || 1 !== a.Qa || (a.f("sending ping on primary."), Ge(a, { t: "c", d: { t: "p", d: {} } })) } function Ge(a, b) { if (1 !== a.Qa) throw "Connection is not connected"; a.Yc.send(b) } ve.prototype.close = function () { 2 !== this.Qa && (this.f("Closing realtime connection."), this.Qa = 2, Ce(this), this.ga && (this.ga(), this.ga = null)) }; function Ce(a) { a.f("Shutting down all connections"); a.I && (a.I.close(), a.I = null); a.C && (a.C.close(), a.C = null); a.nd && (clearTimeout(a.nd), a.nd = null) }; function He(a) { var b = {}, c = {}, d = {}, e = ""; try { var f = a.split("."), b = ta(hb(f[0]) || ""), c = ta(hb(f[1]) || ""), e = f[2], d = c.d || {}; delete c.d } catch (g) { } return { Gg: b, fe: c, data: d, xg: e } } function Ie(a) { a = He(a).fe; return "object" === typeof a && a.hasOwnProperty("iat") ? t(a, "iat") : null } function Je(a) { a = He(a); var b = a.fe; return !!a.xg && !!b && "object" === typeof b && b.hasOwnProperty("iat") }; function Ke(a, b, c, d) { this.id = Le++; this.f = pb("p:" + this.id + ":"); this.Bb = !0; this.Aa = {}; this.la = []; this.Mc = 0; this.Ic = []; this.ja = !1; this.Wa = 1E3; this.td = 3E5; this.yd = b; this.wd = c; this.Ge = d; this.O = a; this.Me = null; this.Rc = {}; this.sg = 0; this.Cc = this.ve = null; Me(this, 0); Id.Mb().vb("visible", this.kg, this); -1 === a.host.indexOf("fblocal") && Jd.Mb().vb("online", this.ig, this) } var Le = 0, Ne = 0; h = Ke.prototype;
    h.Ca = function (a, b, c) { var d = ++this.sg; a = { r: d, a: a, b: b }; this.f(r(a)); w(this.ja, "sendRequest call when we're not connected not allowed."); this.Na.Ca(a); c && (this.Rc[d] = c) }; function Oe(a, b, c, d, e) { var f = b.Fa(), g = b.path.toString(); a.f("Listen called for " + g + " " + f); a.Aa[g] = a.Aa[g] || {}; w(!a.Aa[g][f], "listen() called twice for same path/queryId."); b = { H: e, md: c, pg: Qc(b), tag: d }; a.Aa[g][f] = b; a.ja && Pe(a, g, f, b) }
    function Pe(a, b, c, d) { a.f("Listen on " + b + " for " + c); var e = { p: b }; d.tag && (e.q = d.pg, e.t = d.tag); e.h = d.md(); a.Ca("q", e, function (e) { if ((a.Aa[b] && a.Aa[b][c]) === d) { a.f("listen response", e); var g = e.s; "ok" !== g && Qe(a, b, c); e = e.d; d.H && d.H(g, e) } }) } h.Q = function (a, b, c) { this.Hb = { Rf: a, $e: !1, pc: b, ad: c }; this.f("Authenticating using credential: " + a); Re(this); (b = 40 == a.length) || (a = He(a).fe, b = "object" === typeof a && !0 === t(a, "admin")); b && (this.f("Admin auth credential detected.  Reducing max reconnect time."), this.td = 3E4) };
    h.Re = function (a) { delete this.Hb; this.ja && this.Ca("unauth", {}, function (b) { a(b.s, b.d) }) }; function Re(a) { var b = a.Hb; a.ja && b && a.Ca("auth", { cred: b.Rf }, function (c) { var d = c.s; c = c.d || "error"; "ok" !== d && a.Hb === b && delete a.Hb; b.$e ? "ok" !== d && b.ad && b.ad(d, c) : (b.$e = !0, b.pc && b.pc(d, c)) }) } function Se(a, b, c, d) { a.ja ? Te(a, "o", b, c, d) : a.Ic.push({ Oc: b, action: "o", data: c, H: d }) } function Ue(a, b, c, d) { a.ja ? Te(a, "om", b, c, d) : a.Ic.push({ Oc: b, action: "om", data: c, H: d }) }
    h.Ee = function (a, b) { this.ja ? Te(this, "oc", a, null, b) : this.Ic.push({ Oc: a, action: "oc", data: null, H: b }) }; function Te(a, b, c, d, e) { c = { p: c, d: d }; a.f("onDisconnect " + b, c); a.Ca(b, c, function (a) { e && setTimeout(function () { e(a.s, a.d) }, Math.floor(0)) }) } h.put = function (a, b, c, d) { Ve(this, "p", a, b, c, d) }; function We(a, b, c, d) { Ve(a, "m", b, c, d, void 0) } function Ve(a, b, c, d, e, f) { d = { p: c, d: d }; m(f) && (d.h = f); a.la.push({ action: b, sf: d, H: e }); a.Mc++; b = a.la.length - 1; a.ja ? Xe(a, b) : a.f("Buffering put: " + c) }
    function Xe(a, b) { var c = a.la[b].action, d = a.la[b].sf, e = a.la[b].H; a.la[b].qg = a.ja; a.Ca(c, d, function (d) { a.f(c + " response", d); delete a.la[b]; a.Mc--; 0 === a.Mc && (a.la = []); e && e(d.s, d.d) }) }
    h.xd = function (a) {
        if ("r" in a) { this.f("from server: " + r(a)); var b = a.r, c = this.Rc[b]; c && (delete this.Rc[b], c(a.b)) } else {
            if ("error" in a) throw "A server-side error has occurred: " + a.error; "a" in a && (b = a.a, c = a.b, this.f("handleServerMessage", b, c), "d" === b ? this.yd(c.p, c.d, !1, c.t) : "m" === b ? this.yd(c.p, c.d, !0, c.t) : "c" === b ? Ye(this, c.p, c.q) : "ac" === b ? (a = c.s, b = c.d, c = this.Hb, delete this.Hb, c && c.ad && c.ad(a, b)) : "sd" === b ? this.Me ? this.Me(c) : "msg" in c && "undefined" !== typeof console && console.log("FIREBASE: " + c.msg.replace("\n",
            "\nFIREBASE: ")) : qb("Unrecognized action received from server: " + r(b) + "\nAre you using the latest client?"))
        }
    }; h.Jc = function (a) { this.f("connection ready"); this.ja = !0; this.Cc = (new Date).getTime(); this.Ge({ serverTimeOffset: a - (new Date).getTime() }); Ze(this); this.wd(!0) }; function Me(a, b) { w(!a.Na, "Scheduling a connect when we're already connected/ing?"); a.Jb && clearTimeout(a.Jb); a.Jb = setTimeout(function () { a.Jb = null; $e(a) }, Math.floor(b)) }
    h.kg = function (a) { a && !this.lc && this.Wa === this.td && (this.f("Window became visible.  Reducing delay."), this.Wa = 1E3, this.Na || Me(this, 0)); this.lc = a }; h.ig = function (a) { a ? (this.f("Browser went online.  Reconnecting."), this.Wa = 1E3, this.Bb = !0, this.Na || Me(this, 0)) : (this.f("Browser went offline.  Killing connection; don't reconnect."), this.Bb = !1, this.Na && this.Na.close()) };
    h.mf = function () {
        this.f("data client disconnected"); this.ja = !1; this.Na = null; for (var a = 0; a < this.la.length; a++) { var b = this.la[a]; b && "h" in b.sf && b.qg && (b.H && b.H("disconnect"), delete this.la[a], this.Mc--) } 0 === this.Mc && (this.la = []); if (this.Bb) this.lc ? this.Cc && (3E4 < (new Date).getTime() - this.Cc && (this.Wa = 1E3), this.Cc = null) : (this.f("Window isn't visible.  Delaying reconnect."), this.Wa = this.td, this.ve = (new Date).getTime()), a = Math.max(0, this.Wa - ((new Date).getTime() - this.ve)), a *= Math.random(), this.f("Trying to reconnect in " +
        a + "ms"), Me(this, a), this.Wa = Math.min(this.td, 1.3 * this.Wa); else for (var c in this.Rc) delete this.Rc[c]; this.wd(!1)
    }; function $e(a) { if (a.Bb) { a.f("Making a connection attempt"); a.ve = (new Date).getTime(); a.Cc = null; var b = q(a.xd, a), c = q(a.Jc, a), d = q(a.mf, a), e = a.id + ":" + Ne++; a.Na = new ve(e, a.O, b, c, d, function (b) { y(b + " (" + a.O.toString() + ")"); a.Bb = !1 }) } } h.pb = function () { this.Bb = !1; this.Na ? this.Na.close() : (this.Jb && (clearTimeout(this.Jb), this.Jb = null), this.ja && this.mf()) };
    h.gc = function () { this.Bb = !0; this.Wa = 1E3; this.Na || Me(this, 0) }; function Ye(a, b, c) { c = c ? Ka(c, function (a) { return yb(a) }).join("$") : "default"; (a = Qe(a, b, c)) && a.H && a.H("permission_denied") } function Qe(a, b, c) { b = (new R(b)).toString(); var d = a.Aa[b][c]; delete a.Aa[b][c]; 0 === Kb(a.Aa[b]) && delete a.Aa[b]; return d } function Ze(a) { Re(a); z(a.Aa, function (b, d) { z(b, function (b, c) { Pe(a, d, c, b) }) }); for (var b = 0; b < a.la.length; b++) a.la[b] && Xe(a, b); for (; a.Ic.length;) b = a.Ic.shift(), Te(a, b.action, b.Oc, b.data, b.H) }; function af() { this.m = this.A = null } af.prototype.dc = function (a, b) { if (a.e()) this.A = b, this.m = null; else if (null !== this.A) this.A = this.A.D(a, b); else { null == this.m && (this.m = new he); var c = H(a); this.m.contains(c) || this.m.add(c, new af); c = this.m.get(c); a = S(a); c.dc(a, b) } };
    function bf(a, b) { if (b.e()) return a.A = null, a.m = null, !0; if (null !== a.A) { if (a.A.L()) return !1; var c = a.A; a.A = null; c.T(K, function (b, c) { a.dc(new R(b), c) }); return bf(a, b) } return null !== a.m ? (c = H(b), b = S(b), a.m.contains(c) && bf(a.m.get(c), b) && a.m.remove(c), a.m.e() ? (a.m = null, !0) : !1) : !0 } function cf(a, b, c) { null !== a.A ? c(b, a.A) : a.T(function (a, e) { var f = new R(b.toString() + "/" + a); cf(e, f, c) }) } af.prototype.T = function (a) { null !== this.m && ie(this.m, function (b, c) { a(b, c) }) }; function df() { this.Jd = L } df.prototype.j = function (a) { return this.Jd.ra(a) }; df.prototype.toString = function () { return this.Jd.toString() }; function ef() { this.nb = [] } function ff(a, b) { for (var c = null, d = 0; d < b.length; d++) { var e = b[d], f = e.Pb(); null === c || f.ea(c.Pb()) || (a.nb.push(c), c = null); null === c && (c = new gf(f)); c.add(e) } c && a.nb.push(c) } function Pc(a, b, c) { ff(a, c); hf(a, function (a) { return a.ea(b) }) } function jf(a, b, c) { ff(a, c); hf(a, function (a) { return a.contains(b) || b.contains(a) }) }
    function hf(a, b) { for (var c = !0, d = 0; d < a.nb.length; d++) { var e = a.nb[d]; if (e) if (e = e.Pb(), b(e)) { for (var e = a.nb[d], f = 0; f < e.kd.length; f++) { var g = e.kd[f]; if (null !== g) { e.kd[f] = null; var k = g.Kb(); mb && ib("event: " + g.toString()); Db(k) } } a.nb[d] = null } else c = !1 } c && (a.nb = []) } function gf(a) { this.Ea = a; this.kd = [] } gf.prototype.add = function (a) { this.kd.push(a) }; gf.prototype.Pb = function () { return this.Ea }; var kf = "auth.firebase.com"; function lf(a, b, c) { this.cd = a || {}; this.Ud = b || {}; this.Xa = c || {}; this.cd.remember || (this.cd.remember = "default") } var mf = ["remember", "redirectTo"]; function nf(a) { var b = {}, c = {}; ua(a || {}, function (a, e) { 0 <= Ha(mf, a) ? b[a] = e : c[a] = e }); return new lf(b, {}, c) }; var of = { NETWORK_ERROR: "Unable to contact the Firebase server.", SERVER_ERROR: "An unknown server error occurred.", TRANSPORT_UNAVAILABLE: "There are no login transports available for the requested method.", REQUEST_INTERRUPTED: "The browser redirected the page before the login request could complete.", USER_CANCELLED: "The user cancelled authentication." }; function W(a) { var b = Error(t(of, a), a); b.code = a; return b }; function pf() { var a = window.opener.frames, b; for (b = a.length - 1; 0 <= b; b--) try { if (a[b].location.protocol === window.location.protocol && a[b].location.host === window.location.host && "__winchan_relay_frame" === a[b].name) return a[b] } catch (c) { } return null } function qf(a, b, c) { a.attachEvent ? a.attachEvent("on" + b, c) : a.addEventListener && a.addEventListener(b, c, !1) } function rf(a, b, c) { a.detachEvent ? a.detachEvent("on" + b, c) : a.removeEventListener && a.removeEventListener(b, c, !1) }
    function sf(a) { /^https?:\/\//.test(a) || (a = window.location.href); var b = /^(https?:\/\/[\-_a-zA-Z\.0-9:]+)/.exec(a); return b ? b[1] : a } function tf(a) { var b = ""; try { a = a.replace("#", ""); var c = {}, d = a.replace(/^\?/, "").split("&"); for (a = 0; a < d.length; a++) if (d[a]) { var e = d[a].split("="); c[e[0]] = e[1] } c && s(c, "__firebase_request_key") && (b = t(c, "__firebase_request_key")) } catch (f) { } return b }
    function uf(a) { var b = [], c; for (c in a) if (s(a, c)) { var d = t(a, c); if (ea(d)) for (var e = 0; e < d.length; e++) b.push(encodeURIComponent(c) + "=" + encodeURIComponent(d[e])); else b.push(encodeURIComponent(c) + "=" + encodeURIComponent(t(a, c))) } return b ? "&" + b.join("&") : "" } function vf() { var a = sb(kf); return a.scheme + "://" + a.host + "/v2" }; function wf() { return !!(window.cordova || window.phonegap || window.PhoneGap) && /ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(navigator.userAgent) } function xf() { var a = navigator.userAgent; if ("Microsoft Internet Explorer" === navigator.appName) { if ((a = a.match(/MSIE ([0-9]{1,}[\.0-9]{0,})/)) && 1 < a.length) return 8 <= parseFloat(a[1]) } else if (-1 < a.indexOf("Trident") && (a = a.match(/rv:([0-9]{2,2}[\.0-9]{0,})/)) && 1 < a.length) return 8 <= parseFloat(a[1]); return !1 }; function yf(a) { a = a || {}; a.method || (a.method = "GET"); a.headers || (a.headers = {}); a.headers.content_type || (a.headers.content_type = "application/json"); a.headers.content_type = a.headers.content_type.toLowerCase(); this.options = a }
    yf.prototype.open = function (a, b, c) {
        function d() { c && (c(W("REQUEST_INTERRUPTED")), c = null) } var e = new XMLHttpRequest, f = this.options.method.toUpperCase(), g; qf(window, "beforeunload", d); e.onreadystatechange = function () { if (c && 4 === e.readyState) { var a; if (200 <= e.status && 300 > e.status) { try { a = ta(e.responseText) } catch (b) { } c(null, a) } else 500 <= e.status && 600 > e.status ? c(W("SERVER_ERROR")) : c(W("NETWORK_ERROR")); c = null; rf(window, "beforeunload", d) } }; if ("GET" === f) a += (/\?/.test(a) ? "" : "?") + uf(b), g = null; else {
            var k = this.options.headers.content_type;
            "application/json" === k && (g = r(b)); "application/x-www-form-urlencoded" === k && (g = uf(b))
        } e.open(f, a, !0); a = { "X-Requested-With": "XMLHttpRequest", Accept: "application/json;text/plain" }; Rd(a, this.options.headers); for (var l in a) e.setRequestHeader(l, a[l]); e.send(g)
    }; yf.isAvailable = function () { return !!window.XMLHttpRequest && "string" === typeof (new XMLHttpRequest).responseType && (!(navigator.userAgent.match(/MSIE/) || navigator.userAgent.match(/Trident/)) || xf()) }; yf.prototype.rc = function () { return "json" }; function zf(a) { a = a || {}; this.Sc = Ga() + Ga() + Ga(); this.nf = a || {} }
    zf.prototype.open = function (a, b, c) {
        function d() { c && (c(W("USER_CANCELLED")), c = null) } var e = this, f = sb(kf), g; b.requestId = this.Sc; b.redirectTo = f.scheme + "://" + f.host + "/blank/page.html"; a += /\?/.test(a) ? "" : "?"; a += uf(b); (g = window.open(a, "_blank", "location=no")) && ha(g.addEventListener) ? (g.addEventListener("loadstart", function (a) {
            var b; if (b = a && a.url) a: { var n = a.url; try { var u = document.createElement("a"); u.href = n; b = u.host === f.host && "/blank/page.html" === u.pathname; break a } catch (x) { } b = !1 } b && (a = tf(a.url), g.removeEventListener("exit",
            d), g.close(), a = new lf(null, null, { requestId: e.Sc, requestKey: a }), e.nf.requestWithCredential("/auth/session", a, c), c = null)
        }), g.addEventListener("exit", d)) : c(W("TRANSPORT_UNAVAILABLE"))
    }; zf.isAvailable = function () { return wf() }; zf.prototype.rc = function () { return "redirect" }; function Af(a) { a = a || {}; if (!a.window_features || -1 !== navigator.userAgent.indexOf("Fennec/") || -1 !== navigator.userAgent.indexOf("Firefox/") && -1 !== navigator.userAgent.indexOf("Android")) a.window_features = void 0; a.window_name || (a.window_name = "_blank"); a.relay_url || (a.relay_url = vf() + "/auth/channel"); this.options = a }
    Af.prototype.open = function (a, b, c) {
        function d(a) { g && (document.body.removeChild(g), g = void 0); u && (u = clearInterval(u)); rf(window, "message", e); rf(window, "unload", d); if (n && !a) try { n.close() } catch (b) { k.postMessage("die", l) } n = k = void 0 } function e(a) { if (a.origin === l) try { var b = ta(a.data); "ready" === b.a ? k.postMessage(x, l) : "error" === b.a ? (d(!1), c && (c(b.d), c = null)) : "response" === b.a && (d(b.forceKeepWindowOpen), c && (c(null, b.d), c = null)) } catch (e) { } } var f = xf(), g, k, l = sf(a); if (l !== sf(this.options.relay_url)) c && setTimeout(function () { c(Error("invalid arguments: origin of url and relay_url must match")) },
        0); else { f && (g = document.createElement("iframe"), g.setAttribute("src", this.options.relay_url), g.style.display = "none", g.setAttribute("name", "__winchan_relay_frame"), document.body.appendChild(g), k = g.contentWindow); a += (/\?/.test(a) ? "" : "?") + uf(b); var n = window.open(a, this.options.window_name, this.options.window_features); k || (k = n); var u = setInterval(function () { n && n.closed && (d(!1), c && (c(W("USER_CANCELLED")), c = null)) }, 500), x = r({ a: "request", d: b }); qf(window, "unload", d); qf(window, "message", e) }
    };
    Af.isAvailable = function () { return "postMessage" in window && !/^file:\//.test(location.href) && !(wf() || navigator.userAgent.match(/Windows Phone/) || window.Windows && /^ms-appx:/.test(location.href) || navigator.userAgent.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i) || navigator.userAgent.match(/CriOS/) || navigator.userAgent.match(/Twitter for iPhone/) || navigator.userAgent.match(/FBAN\/FBIOS/) || window.navigator.standalone) && !navigator.userAgent.match(/PhantomJS/) }; Af.prototype.rc = function () { return "popup" }; function Bf(a) { a = a || {}; a.callback_parameter || (a.callback_parameter = "callback"); this.options = a; window.__firebase_auth_jsonp = window.__firebase_auth_jsonp || {} }
    Bf.prototype.open = function (a, b, c) {
        function d() { c && (c(W("REQUEST_INTERRUPTED")), c = null) } function e() { setTimeout(function () { window.__firebase_auth_jsonp[f] = void 0; Od(window.__firebase_auth_jsonp) && (window.__firebase_auth_jsonp = void 0); try { var a = document.getElementById(f); a && a.parentNode.removeChild(a) } catch (b) { } }, 1); rf(window, "beforeunload", d) } var f = "fn" + (new Date).getTime() + Math.floor(99999 * Math.random()); b[this.options.callback_parameter] = "__firebase_auth_jsonp." + f; a += (/\?/.test(a) ? "" : "?") + uf(b);
        qf(window, "beforeunload", d); window.__firebase_auth_jsonp[f] = function (a) { c && (c(null, a), c = null); e() }; Cf(f, a, c)
    };
    function Cf(a, b, c) { setTimeout(function () { try { var d = document.createElement("script"); d.type = "text/javascript"; d.id = a; d.async = !0; d.src = b; d.onerror = function () { var b = document.getElementById(a); null !== b && b.parentNode.removeChild(b); c && c(W("NETWORK_ERROR")) }; var e = document.getElementsByTagName("head"); (e && 0 != e.length ? e[0] : document.documentElement).appendChild(d) } catch (f) { c && c(W("NETWORK_ERROR")) } }, 0) } Bf.isAvailable = function () { return !wf() }; Bf.prototype.rc = function () { return "json" }; function Df(a, b) { this.Ie = ["session", a.Dd, a.tb].join(":"); this.Rd = b } Df.prototype.set = function (a, b) { if (!b) if (this.Rd.length) b = this.Rd[0]; else throw Error("fb.login.SessionManager : No storage options available!"); b.set(this.Ie, a) }; Df.prototype.get = function () { var a = Ka(this.Rd, q(this.Zf, this)), a = Ja(a, function (a) { return null !== a }); Ra(a, function (a, c) { return Ie(c.token) - Ie(a.token) }); return 0 < a.length ? a.shift() : null }; Df.prototype.Zf = function (a) { try { var b = a.get(this.Ie); if (b && b.token) return b } catch (c) { } return null };
    Df.prototype.clear = function () { var a = this; Ia(this.Rd, function (b) { b.remove(a.Ie) }) }; function Ef(a) { a = a || {}; this.Sc = Ga() + Ga() + Ga(); this.nf = a || {} } Ef.prototype.open = function (a, b) { Aa.set("redirect_request_id", this.Sc); b.requestId = this.Sc; b.redirectTo = b.redirectTo || window.location.href; a += (/\?/.test(a) ? "" : "?") + uf(b); window.location = a }; Ef.isAvailable = function () { return !/^file:\//.test(location.href) && !wf() }; Ef.prototype.rc = function () { return "redirect" }; function Ff(a, b, c, d) { Gd.call(this, ["auth_status"]); this.O = a; this.Te = b; this.Cg = c; this.De = d; this.hc = new Df(a, [za, Aa]); this.hb = null; Gf(this) } ma(Ff, Gd); h = Ff.prototype; h.me = function () { return this.hb || null }; function Gf(a) { Aa.get("redirect_request_id") && Hf(a); var b = a.hc.get(); b && b.token ? (If(a, b), a.Te(b.token, function (c, d) { Jf(a, c, d, !1, b.token, b) }, function (b, d) { Kf(a, "resumeSession()", b, d) })) : If(a, null) }
    function Lf(a, b, c, d, e, f) { "firebaseio-demo.com" === a.O.domain && y("Firebase authentication is not supported on demo Firebases (*.firebaseio-demo.com). To secure your Firebase, create a production Firebase at https://www.firebase.com."); a.Te(b, function (f, k) { Jf(a, f, k, !0, b, c, d || {}, e) }, function (b, c) { Kf(a, "auth()", b, c, f) }) } function Mf(a, b) { a.hc.clear(); If(a, null); a.Cg(function (a, d) { if ("ok" === a) A(b, null); else { var e = (a || "error").toUpperCase(), f = e; d && (f += ": " + d); f = Error(f); f.code = e; A(b, f) } }) }
    function Jf(a, b, c, d, e, f, g, k) { "ok" === b ? (d && (b = c.auth, f.auth = b, f.expires = c.expires, f.token = Je(e) ? e : "", c = null, b && s(b, "uid") ? c = t(b, "uid") : s(f, "uid") && (c = t(f, "uid")), f.uid = c, c = "custom", b && s(b, "provider") ? c = t(b, "provider") : s(f, "provider") && (c = t(f, "provider")), f.provider = c, a.hc.clear(), Je(e) && (g = g || {}, c = za, "sessionOnly" === g.remember && (c = Aa), "none" !== g.remember && a.hc.set(f, c)), If(a, f)), A(k, null, f)) : (a.hc.clear(), If(a, null), f = a = (b || "error").toUpperCase(), c && (f += ": " + c), f = Error(f), f.code = a, A(k, f)) }
    function Kf(a, b, c, d, e) { y(b + " was canceled: " + d); a.hc.clear(); If(a, null); a = Error(d); a.code = c.toUpperCase(); A(e, a) } function Nf(a, b, c, d, e) { Of(a); c = new lf(d || {}, {}, c || {}); Pf(a, [yf, Bf], "/auth/" + b, c, e) }
    function Qf(a, b, c, d) { Of(a); var e = [Af, zf]; c = nf(c); "anonymous" === b || "password" === b ? setTimeout(function () { A(d, W("TRANSPORT_UNAVAILABLE")) }, 0) : (c.Ud.window_features = "menubar=yes,modal=yes,alwaysRaised=yeslocation=yes,resizable=yes,scrollbars=yes,status=yes,height=625,width=625,top=" + ("object" === typeof screen ? .5 * (screen.height - 625) : 0) + ",left=" + ("object" === typeof screen ? .5 * (screen.width - 625) : 0), c.Ud.relay_url = vf() + "/" + a.O.tb + "/auth/channel", c.Ud.requestWithCredential = q(a.fc, a), Pf(a, e, "/auth/" + b, c, d)) }
    function Hf(a) { var b = Aa.get("redirect_request_id"); if (b) { var c = Aa.get("redirect_client_options"); Aa.remove("redirect_request_id"); Aa.remove("redirect_client_options"); var d = [yf, Bf], b = { requestId: b, requestKey: tf(document.location.hash) }, c = new lf(c, {}, b); try { document.location.hash = document.location.hash.replace(/&__firebase_request_key=([a-zA-z0-9]*)/, "") } catch (e) { } Pf(a, d, "/auth/session", c) } } h.je = function (a, b) { Of(this); var c = nf(a); c.Xa._method = "POST"; this.fc("/users", c, function (a, c) { a ? A(b, a) : A(b, a, c) }) };
    h.Ke = function (a, b) { var c = this; Of(this); var d = "/users/" + encodeURIComponent(a.email), e = nf(a); e.Xa._method = "DELETE"; this.fc(d, e, function (a, d) { !a && d && d.uid && c.hb && c.hb.uid && c.hb.uid === d.uid && Mf(c); A(b, a) }) }; h.ee = function (a, b) { Of(this); var c = "/users/" + encodeURIComponent(a.email) + "/password", d = nf(a); d.Xa._method = "PUT"; d.Xa.password = a.newPassword; this.fc(c, d, function (a) { A(b, a) }) };
    h.de = function (a, b) { Of(this); var c = "/users/" + encodeURIComponent(a.oldEmail) + "/email", d = nf(a); d.Xa._method = "PUT"; d.Xa.email = a.newEmail; d.Xa.password = a.password; this.fc(c, d, function (a) { A(b, a) }) }; h.Le = function (a, b) { Of(this); var c = "/users/" + encodeURIComponent(a.email) + "/password", d = nf(a); d.Xa._method = "POST"; this.fc(c, d, function (a) { A(b, a) }) }; h.fc = function (a, b, c) { Rf(this, [yf, Bf], a, b, c) };
    function Pf(a, b, c, d, e) { Rf(a, b, c, d, function (b, c) { !b && c && c.token && c.uid ? Lf(a, c.token, c, d.cd, function (a, b) { a ? A(e, a) : A(e, null, b) }) : A(e, b || W("UNKNOWN_ERROR")) }) }
    function Rf(a, b, c, d, e) { b = Ja(b, function (a) { return "function" === typeof a.isAvailable && a.isAvailable() }); 0 === b.length ? setTimeout(function () { A(e, W("TRANSPORT_UNAVAILABLE")) }, 0) : (b = new (b.shift())(d.Ud), d = va(d.Xa), d.v = "js-2.1.1", d.transport = b.rc(), d.suppress_status_codes = !0, a = vf() + "/" + a.O.tb + c, b.open(a, d, function (a, b) { if (a) A(e, a); else if (b && b.error) { var c = Error(b.error.message); c.code = b.error.code; c.details = b.error.details; A(e, c) } else A(e, null, b) })) }
    function If(a, b) { var c = null !== a.hb || null !== b; a.hb = b; c && a.Vd("auth_status", b); a.De(null !== b) } h.pe = function (a) { w("auth_status" === a, 'initial event must be of type "auth_status"'); return [this.hb] }; function Of(a) { var b = a.O; if ("firebaseio.com" !== b.domain && "firebaseio-demo.com" !== b.domain && "auth.firebase.com" === kf) throw Error("This custom Firebase server ('" + a.O.domain + "') does not support delegated login."); }; function Sf(a, b) { return a && "object" === typeof a ? (w(".sv" in a, "Unexpected leaf node or priority contents"), b[a[".sv"]]) : a } function Tf(a, b) { var c = new af; cf(a, new R(""), function (a, e) { c.dc(a, Uf(e, b)) }); return c } function Uf(a, b) { var c = a.K().N(), c = Sf(c, b), d; if (a.L()) { var e = Sf(a.za(), b); return e !== a.za() || c !== a.K().N() ? new od(e, N(c)) : a } d = a; c !== a.K().N() && (d = d.Z(new od(c))); a.T(K, function (a, c) { var e = Uf(c, b); e !== c && (d = d.P(a, e)) }); return d }; function xc(a, b, c) { this.B = a; this.aa = b; this.xc = c } function Vf(a) { return a.aa } function wc(a, b) { return a.aa && !a.xc || a.B.Da(b) } xc.prototype.j = function () { return this.B }; function Wf(a, b) { this.F = a; this.Ld = b } function Xf(a, b, c, d) { return new Wf(new xc(b, c, d), a.Ld) } function Yf(a) { return a.F.aa ? a.F.j() : null } Wf.prototype.o = function () { return this.Ld }; function yc(a) { return a.Ld.aa ? a.Ld.j() : null }; function Zf(a, b) { this.Yd = a; this.Of = b } function $f(a) { this.G = a }
    $f.prototype.Ya = function (a, b, c, d) {
        var e = new zc, f; if (b.type === ag) b.source.bf ? c = bg(this, a, b.path, b.Pa, c, d, e) : (w(b.source.af, "Unknown source."), f = b.source.zf, c = cg(this, a, b.path, b.Pa, c, d, f, e)); else if (b.type === dg) b.source.bf ? c = eg(this, a, b.path, b.children, c, d, e) : (w(b.source.af, "Unknown source."), f = b.source.zf, c = fg(this, a, b.path, b.children, c, d, f, e)); else if (b.type === gg) if (b.wf) if (f = b.path, null != c.ic(f)) c = a; else {
            b = new vc(c, a, d); d = a.F.j(); if (f.e() || ".priority" === H(f)) Vf(a.o()) ? b = c.pa(yc(a)) : (b = a.o().j(),
            w(b instanceof V, "serverChildren would be complete if leaf node"), b = c.oc(b)), b = this.G.oa(d, b, e); else { f = H(f); var g = c.Ta(f, a.o()); null == g && wc(a.o(), f) && (g = d.J(f)); b = null != g ? this.G.D(d, f, g, b, e) : a.F.j().Da(f) ? this.G.D(d, f, L, b, e) : d; b.e() && Vf(a.o()) && (d = c.pa(yc(a)), d.L() && (b = this.G.oa(b, d, e))) } d = Vf(a.o()) || null != c.ic(T); c = Xf(a, b, d, this.G.ya())
        } else c = hg(this, a, b.path, c, d, e); else if (b.type === ig) d = b.path, b = a.o(), f = b.j(), g = b.aa || d.e(), c = jg(this, new Wf(a.F, new xc(f, g, b.xc)), d, c, uc, e); else throw gb("Unknown operation type: " +
        b.type); e = Kd(e.Za); d = c; b = d.F; b.aa && (f = b.j().L() || b.j().e(), g = Yf(a), (0 < e.length || !a.F.aa || f && !b.j().ea(g) || !b.j().K().ea(g.K())) && e.push(Gb(Yf(d)))); return new Zf(c, e)
    };
    function jg(a, b, c, d, e, f) {
        var g = b.F; if (null != d.ic(c)) return b; var k; if (c.e()) w(Vf(b.o()), "If change path is empty, we must have complete server data"), a.G.ya() ? (e = yc(b), d = d.oc(e instanceof V ? e : L)) : d = d.pa(yc(b)), f = a.G.oa(b.F.j(), d, f); else {
            var l = H(c); if (".priority" == l) w(1 == Rc(c), "Can't have a priority with additional path components"), f = g.j(), k = b.o().j(), d = d.$c(c, f, k), f = null != d ? a.G.Z(f, d) : g.j(); else {
                var n = S(c); wc(g, l) ? (k = b.o().j(), d = d.$c(c, g.j(), k), d = null != d ? g.j().J(l).D(n, d) : g.j().J(l)) : d = d.Ta(l, b.o());
                f = null != d ? a.G.D(g.j(), l, d, e, f) : g.j()
            }
        } return Xf(b, f, g.aa || c.e(), a.G.ya())
    } function cg(a, b, c, d, e, f, g, k) { var l = b.o(); g = g ? a.G : a.G.Lb(); if (c.e()) d = g.oa(l.j(), d, null); else if (g.ya() && !l.xc) d = l.j().D(c, d), d = g.oa(l.j(), d, null); else { var n = H(c); if ((c.e() ? !l.aa || l.xc : !wc(l, H(c))) && 1 < Rc(c)) return b; d = l.j().J(n).D(S(c), d); d = ".priority" == n ? g.Z(l.j(), d) : g.D(l.j(), n, d, uc, null) } l = l.aa || c.e(); b = new Wf(b.F, new xc(d, l, g.ya())); return jg(a, b, c, e, new vc(e, b, f), k) }
    function bg(a, b, c, d, e, f, g) { var k = b.F; e = new vc(e, b, f); if (c.e()) g = a.G.oa(b.F.j(), d, g), a = Xf(b, g, !0, a.G.ya()); else if (f = H(c), ".priority" === f) g = a.G.Z(b.F.j(), d), a = Xf(b, g, k.aa, k.xc); else { var l = S(c); c = k.j().J(f); if (!l.e()) { var n = e.cf(f); d = null != n ? ".priority" === Sc(l) && n.ra(l.parent()).e() ? n : n.D(l, d) : L } c.ea(d) ? a = b : (g = a.G.D(k.j(), f, d, e, g), a = Xf(b, g, k.aa, a.G.ya())) } return a }
    function eg(a, b, c, d, e, f, g) { var k = b; kg(d, function (d, n) { var u = c.n(d); wc(b.F, H(u)) && (k = bg(a, k, u, n, e, f, g)) }); kg(d, function (d, n) { var u = c.n(d); wc(b.F, H(u)) || (k = bg(a, k, u, n, e, f, g)) }); return k } function lg(a, b) { kg(b, function (b, d) { a = a.D(b, d) }); return a }
    function fg(a, b, c, d, e, f, g, k) { if (b.o().j().e() && !Vf(b.o())) return b; var l = b; c = c.e() ? d : mg(ng, c, d); var n = b.o().j(); c.children.fa(function (c, d) { if (n.Da(c)) { var E = b.o().j().J(c), E = lg(E, d); l = cg(a, l, new R(c), E, e, f, g, k) } }); c.children.fa(function (c, d) { var E = !Vf(b.o()) && null == d.value; n.Da(c) || E || (E = b.o().j().J(c), E = lg(E, d), l = cg(a, l, new R(c), E, e, f, g, k)) }); return l }
    function hg(a, b, c, d, e, f) {
        if (null != d.ic(c)) return b; var g = new vc(d, b, e), k = e = b.F.j(); if (Vf(b.o())) { if (c.e()) e = d.pa(yc(b)), k = a.G.oa(b.F.j(), e, f); else if (".priority" === H(c)) { var l = d.Ta(H(c), b.o()); null == l || e.e() || e.K().ea(l) || (k = a.G.Z(e, l)) } else l = H(c), e = d.Ta(l, b.o()), null != e && (k = a.G.D(b.F.j(), l, e, g, f)); e = !0 } else b.F.aa ? (k = e, e = Yf(b), e.L() || e.T(K, function (c) { var e = d.Ta(c, b.o()); null != e && (k = a.G.D(k, c, e, g, f)) }), e = !0) : (!c.e() && (l = H(c), 1 == Rc(c) || wc(b.F, l)) && (c = d.Ta(l, b.o()), null != c && (k = a.G.D(e, l, c, g, f))),
        e = !1); return Xf(b, k, e, a.G.ya())
    }; function og(a) { this.V = a; this.g = a.w.g } function pg(a, b, c, d) { var e = [], f = []; Ia(b, function (b) { "child_changed" === b.type && a.g.gf(b.Ce, b.Ga) && f.push(new B("child_moved", b.Ga, b.Ua)) }); qg(a, e, "child_removed", b, d, c); qg(a, e, "child_added", b, d, c); qg(a, e, "child_moved", f, d, c); qg(a, e, "child_changed", b, d, c); qg(a, e, Hb, b, d, c); return e } function qg(a, b, c, d, e, f) { d = Ja(d, function (a) { return a.type === c }); Ra(d, q(a.Qf, a)); Ia(d, function (c) { var d = rg(a, c, f); Ia(e, function (e) { e.tf(c.type) && b.push(e.createEvent(d, a.V)) }) }) }
    function rg(a, b, c) { "value" !== b.type && "child_removed" !== b.type && (b.Fd = c.df(b.Ua, b.Ga, a.g)); return b } og.prototype.Qf = function (a, b) { if (null == a.Ua || null == b.Ua) throw gb("Should only compare child_ events."); return this.g.compare(new M(a.Ua, a.Ga), new M(b.Ua, b.Ga)) }; function sg(a, b) { this.V = a; var c = a.w, d = new cc(c.g), c = Jc(c) ? new cc(c.g) : c.ka ? new Bc(c) : new ec(c); this.qf = new $f(c); var e = b.o(), f = b.F, g = d.oa(L, e.j(), null), k = c.oa(L, f.j(), null); this.Ha = new Wf(new xc(k, f.aa, c.ya()), new xc(g, e.aa, d.ya())); this.Va = []; this.Uf = new og(a) } function tg(a) { return a.V } h = sg.prototype; h.o = function () { return this.Ha.o().j() }; h.bb = function (a) { var b = yc(this.Ha); return b && (Jc(this.V.w) || !a.e() && !b.J(H(a)).e()) ? b.ra(a) : null }; h.e = function () { return 0 === this.Va.length }; h.Fb = function (a) { this.Va.push(a) };
    h.gb = function (a, b) { var c = []; if (b) { w(null == a, "A cancel should cancel all event registrations."); var d = this.V.path; Ia(this.Va, function (a) { (a = a.Ve(b, d)) && c.push(a) }) } if (a) { for (var e = [], f = 0; f < this.Va.length; ++f) { var g = this.Va[f]; if (!g.matches(a)) e.push(g); else if (a.ff()) { e = e.concat(this.Va.slice(f + 1)); break } } this.Va = e } else this.Va = []; return c };
    h.Ya = function (a, b, c) { a.type === dg && null !== a.source.ac && (w(yc(this.Ha), "We should always have a full cache before handling merges"), w(Yf(this.Ha), "Missing event cache, even though we have a server cache")); var d = this.Ha; a = this.qf.Ya(d, a, b, c); b = this.qf; c = a.Yd; w(c.F.j().Ac(b.G.g), "Event snap not indexed"); w(c.o().j().Ac(b.G.g), "Server snap not indexed"); w(Vf(a.Yd.o()) || !Vf(d.o()), "Once a server snap is complete, it should never go back"); this.Ha = a.Yd; return ug(this, a.Of, a.Yd.F.j(), null) };
    function vg(a, b) { var c = a.Ha.F, d = []; c.j().L() || c.j().T(K, function (a, b) { d.push(new B("child_added", b, a)) }); c.aa && d.push(Gb(c.j())); return ug(a, d, c.j(), b) } function ug(a, b, c, d) { return pg(a.Uf, b, c, d ? [d] : a.Va) }; function wg(a, b) { this.value = a; this.children = b || xg } var xg = new $c(function (a, b) { return a === b ? 0 : a < b ? -1 : 1 }), ng = new wg(null); function yg(a) { var b = ng; z(a, function (a, d) { b = b.set(new R(d), a) }); return b } h = wg.prototype; h.e = function () { return null === this.value && this.children.e() }; function zg(a, b, c) { if (null != a.value && c(a.value)) return { path: T, value: a.value }; if (b.e()) return null; var d = H(b); a = a.children.get(d); return null !== a ? (b = zg(a, S(b), c), null != b ? { path: (new R(d)).n(b.path), value: b.value } : null) : null }
    function Ag(a, b) { return zg(a, b, function () { return !0 }) } h.subtree = function (a) { if (a.e()) return this; var b = this.children.get(H(a)); return null !== b ? b.subtree(S(a)) : ng }; h.set = function (a, b) { if (a.e()) return new wg(b, this.children); var c = H(a), d = (this.children.get(c) || ng).set(S(a), b), c = this.children.Ka(c, d); return new wg(this.value, c) };
    h.remove = function (a) { if (a.e()) return this.children.e() ? ng : new wg(null, this.children); var b = H(a), c = this.children.get(b); return c ? (a = c.remove(S(a)), b = a.e() ? this.children.remove(b) : this.children.Ka(b, a), null === this.value && b.e() ? ng : new wg(this.value, b)) : this }; h.get = function (a) { if (a.e()) return this.value; var b = this.children.get(H(a)); return b ? b.get(S(a)) : null };
    function mg(a, b, c) { if (b.e()) return c; var d = H(b); b = mg(a.children.get(d) || ng, S(b), c); d = b.e() ? a.children.remove(d) : a.children.Ka(d, b); return new wg(a.value, d) } function Bg(a, b) { return Cg(a, T, b) } function Cg(a, b, c) { var d = {}; a.children.fa(function (a, f) { d[a] = Cg(f, b.n(a), c) }); return c(b, a.value, d) } function Dg(a, b, c) { return Eg(a, b, T, c) } function Eg(a, b, c, d) { var e = a.value ? d(c, a.value) : !1; if (e) return e; if (b.e()) return null; e = H(b); return (a = a.children.get(e)) ? Eg(a, S(b), c.n(e), d) : null }
    function Fg(a, b, c) { if (!b.e()) { var d = !0; a.value && (d = c(T, a.value)); !0 === d && (d = H(b), (a = a.children.get(d)) && Gg(a, S(b), T.n(d), c)) } } function Gg(a, b, c, d) { if (b.e()) return a; a.value && d(c, a.value); var e = H(b); return (a = a.children.get(e)) ? Gg(a, S(b), c.n(e), d) : ng } function kg(a, b) { Hg(a, T, b) } function Hg(a, b, c) { a.children.fa(function (a, e) { Hg(e, b.n(a), c) }); a.value && c(b, a.value) } function Ig(a, b) { a.children.fa(function (a, d) { d.value && b(a, d.value) }) }; function Jg() { this.va = {} } h = Jg.prototype; h.e = function () { return Od(this.va) }; h.Ya = function (a, b, c) { var d = a.source.ac; if (null !== d) return d = t(this.va, d), w(null != d, "SyncTree gave us an op for an invalid query."), d.Ya(a, b, c); var e = []; z(this.va, function (d) { e = e.concat(d.Ya(a, b, c)) }); return e }; h.Fb = function (a, b, c, d, e) { var f = a.Fa(), g = t(this.va, f); if (!g) { var g = c.pa(e ? d : null), k = !1; g ? k = !0 : (g = d instanceof V ? c.oc(d) : L, k = !1); g = new sg(a, new Wf(new xc(g, k, !1), new xc(d, e, !1))); this.va[f] = g } g.Fb(b); return vg(g, b) };
    h.gb = function (a, b, c) { var d = a.Fa(), e = [], f = [], g = null != Kg(this); if ("default" === d) { var k = this; z(this.va, function (a, d) { f = f.concat(a.gb(b, c)); a.e() && (delete k.va[d], Jc(a.V.w) || e.push(a.V)) }) } else { var l = t(this.va, d); l && (f = f.concat(l.gb(b, c)), l.e() && (delete this.va[d], Jc(l.V.w) || e.push(l.V))) } g && null == Kg(this) && e.push(new Q(a.k, a.path)); return { rg: e, Vf: f } }; function Lg(a) { return Ja(Kd(a.va), function (a) { return !Jc(a.V.w) }) } h.bb = function (a) { var b = null; z(this.va, function (c) { b = b || c.bb(a) }); return b };
    function Mg(a, b) { if (Jc(b.w)) return Kg(a); var c = b.Fa(); return t(a.va, c) } function Kg(a) { return Nd(a.va, function (a) { return Jc(a.V.w) }) || null }; function Ng(a) { this.W = a } var Og = new Ng(new wg(null)); function Pg(a, b, c) { if (b.e()) return new Ng(new wg(c)); var d = Ag(a.W, b); if (null != d) { var e = d.path, d = d.value; b = U(e, b); d = d.D(b, c); return new Ng(a.W.set(e, d)) } a = mg(a.W, b, new wg(c)); return new Ng(a) } function Qg(a, b, c) { var d = a; ua(c, function (a, c) { d = Pg(d, b.n(a), c) }); return d } Ng.prototype.Gd = function (a) { if (a.e()) return Og; a = mg(this.W, a, ng); return new Ng(a) }; function Rg(a, b) { var c = Ag(a.W, b); return null != c ? a.W.get(c.path).ra(U(c.path, b)) : null }
    function Sg(a) { var b = [], c = a.W.value; null != c ? c.L() || c.T(K, function (a, c) { b.push(new M(a, c)) }) : a.W.children.fa(function (a, c) { null != c.value && b.push(new M(a, c.value)) }); return b } function Tg(a, b) { if (b.e()) return a; var c = Rg(a, b); return null != c ? new Ng(new wg(c)) : new Ng(a.W.subtree(b)) } Ng.prototype.e = function () { return this.W.e() }; Ng.prototype.apply = function (a) { return Ug(T, this.W, a) };
    function Ug(a, b, c) { if (null != b.value) return c.D(a, b.value); var d = null; b.children.fa(function (b, f) { ".priority" === b ? (w(null !== f.value, "Priority writes must always be leaf nodes"), d = f.value) : c = Ug(a.n(b), f, c) }); c.ra(a).e() || null === d || (c = c.D(a.n(".priority"), d)); return c }; function Vg() { this.U = Og; this.wa = []; this.Dc = -1 } h = Vg.prototype;
    h.Gd = function (a) { var b = Oa(this.wa, function (b) { return b.Zd === a }); w(0 <= b, "removeWrite called with nonexistent writeId."); var c = this.wa[b]; this.wa.splice(b, 1); for (var d = c.visible, e = !1, f = this.wa.length - 1; d && 0 <= f;) { var g = this.wa[f]; g.visible && (f >= b && Wg(g, c.path) ? d = !1 : c.path.contains(g.path) && (e = !0)); f-- } if (d) { if (e) this.U = Xg(this.wa, Yg, T), this.Dc = 0 < this.wa.length ? this.wa[this.wa.length - 1].Zd : -1; else if (c.Pa) this.U = this.U.Gd(c.path); else { var k = this; z(c.children, function (a, b) { k.U = k.U.Gd(c.path.n(b)) }) } return c.path } return null };
    h.pa = function (a, b, c, d) { if (c || d) { var e = Tg(this.U, a); return !d && e.e() ? b : d || null != b || null != Rg(e, T) ? (e = Xg(this.wa, function (b) { return (b.visible || d) && (!c || !(0 <= Ha(c, b.Zd))) && (b.path.contains(a) || a.contains(b.path)) }, a), b = b || L, e.apply(b)) : null } e = Rg(this.U, a); if (null != e) return e; e = Tg(this.U, a); return e.e() ? b : null != b || null != Rg(e, T) ? (b = b || L, e.apply(b)) : null };
    h.oc = function (a, b) { var c = L, d = Rg(this.U, a); if (d) d.L() || d.T(K, function (a, b) { c = c.P(a, b) }); else if (b) { var e = Tg(this.U, a); b.T(K, function (a, b) { var d = Tg(e, new R(a)).apply(b); c = c.P(a, d) }); Ia(Sg(e), function (a) { c = c.P(a.name, a.Y) }) } else e = Tg(this.U, a), Ia(Sg(e), function (a) { c = c.P(a.name, a.Y) }); return c }; h.$c = function (a, b, c, d) { w(c || d, "Either existingEventSnap or existingServerSnap must exist"); a = a.n(b); if (null != Rg(this.U, a)) return null; a = Tg(this.U, a); return a.e() ? d.ra(b) : a.apply(d.ra(b)) };
    h.Ta = function (a, b, c) { a = a.n(b); var d = Rg(this.U, a); return null != d ? d : wc(c, b) ? Tg(this.U, a).apply(c.j().J(b)) : null }; h.ic = function (a) { return Rg(this.U, a) }; h.ce = function (a, b, c, d, e, f) { var g; a = Tg(this.U, a); g = Rg(a, T); if (null == g) if (null != b) g = a.apply(b); else return []; g = g.Eb(f); if (g.e() || g.L()) return []; b = []; a = nc(f); e = e ? g.Qb(c, f) : g.Ob(c, f); for (f = O(e) ; f && b.length < d;) 0 !== a(f, c) && b.push(f), f = O(e); return b };
    function Wg(a, b) { return a.Pa ? a.path.contains(b) : !!Md(a.children, function (c, d) { return a.path.n(d).contains(b) }) } function Yg(a) { return a.visible }
    function Xg(a, b, c) { for (var d = Og, e = 0; e < a.length; ++e) { var f = a[e]; if (b(f)) { var g = f.path; if (f.Pa) c.contains(g) ? (g = U(c, g), d = Pg(d, g, f.Pa)) : g.contains(c) && (g = U(g, c), d = Pg(d, T, f.Pa.ra(g))); else if (f.children) if (c.contains(g)) g = U(c, g), d = Qg(d, g, f.children); else { if (g.contains(c)) if (g = U(g, c), g.e()) d = Qg(d, T, f.children); else if (f = t(f.children, H(g))) f = f.ra(S(g)), d = Pg(d, T, f) } else throw gb("WriteRecord should have .snap or .children"); } } return d } function Zg(a, b) { this.Cb = a; this.W = b } h = Zg.prototype;
    h.pa = function (a, b, c) { return this.W.pa(this.Cb, a, b, c) }; h.oc = function (a) { return this.W.oc(this.Cb, a) }; h.$c = function (a, b, c) { return this.W.$c(this.Cb, a, b, c) }; h.ic = function (a) { return this.W.ic(this.Cb.n(a)) }; h.ce = function (a, b, c, d, e) { return this.W.ce(this.Cb, a, b, c, d, e) }; h.Ta = function (a, b) { return this.W.Ta(this.Cb, a, b) }; h.n = function (a) { return new Zg(this.Cb.n(a), this.W) }; function $g(a, b, c) { this.type = ag; this.source = a; this.path = b; this.Pa = c } $g.prototype.Lc = function (a) { return this.path.e() ? new $g(this.source, T, this.Pa.J(a)) : new $g(this.source, S(this.path), this.Pa) }; function ah(a, b) { this.type = gg; this.source = bh; this.path = a; this.wf = b } ah.prototype.Lc = function () { return this.path.e() ? this : new ah(S(this.path), this.wf) }; function ch(a, b) { this.type = ig; this.source = a; this.path = b } ch.prototype.Lc = function () { return this.path.e() ? new ch(this.source, T) : new ch(this.source, S(this.path)) }; function dh(a, b, c) { this.type = dg; this.source = a; this.path = b; this.children = c } dh.prototype.Lc = function (a) { if (this.path.e()) return a = this.children.subtree(new R(a)), a.e() ? null : a.value ? new $g(this.source, T, a.value) : new dh(this.source, T, a); w(H(this.path) === a, "Can't get a merge for a child not on the path of the operation"); return new dh(this.source, S(this.path), this.children) }; var ag = 0, dg = 1, gg = 2, ig = 3; function eh(a, b, c, d) { this.bf = a; this.af = b; this.ac = c; this.zf = d; w(!d || b, "Tagged queries must be from server.") } var bh = new eh(!0, !1, null, !1), fh = new eh(!1, !0, null, !1); function gh(a) { this.na = ng; this.xb = new Vg; this.Wc = {}; this.bc = {}; this.Ec = a } function hh(a, b, c, d, e) { var f = a.xb, g = e; w(d > f.Dc, "Stacking an older write on top of newer ones"); m(g) || (g = !0); f.wa.push({ path: b, Pa: c, Zd: d, visible: g }); g && (f.U = Pg(f.U, b, c)); f.Dc = d; return e ? ih(a, new $g(bh, b, c)) : [] } function jh(a, b, c, d) { var e = a.xb; w(d > e.Dc, "Stacking an older merge on top of newer ones"); e.wa.push({ path: b, children: c, Zd: d, visible: !0 }); e.U = Qg(e.U, b, c); e.Dc = d; c = yg(c); return ih(a, new dh(bh, b, c)) }
    function kh(a, b, c) { c = c || !1; b = a.xb.Gd(b); return null == b ? [] : ih(a, new ah(b, c)) } function lh(a, b, c) { c = yg(c); return ih(a, new dh(fh, b, c)) } function mh(a, b, c, d) { d = Pd(a.Wc, "_" + d); if (null != d) { var e = nh(d); d = e.path; e = e.ac; b = U(d, b); c = new $g(new eh(!1, !0, e, !0), b, c); return oh(a, d, c) } return [] } function ph(a, b, c, d) { if (d = Pd(a.Wc, "_" + d)) { var e = nh(d); d = e.path; e = e.ac; b = U(d, b); c = yg(c); c = new dh(new eh(!1, !0, e, !0), b, c); return oh(a, d, c) } return [] }
    gh.prototype.Fb = function (a, b) {
        var c = a.path, d = null, e = !1; Fg(this.na, c, function (a, b) { var f = U(a, c); d = b.bb(f); e = e || null != Kg(b); return !d }); var f = this.na.get(c); f ? (e = e || null != Kg(f), d = d || f.bb(T)) : (f = new Jg, this.na = this.na.set(c, f)); var g; null != d ? g = !0 : (g = !1, d = L, Ig(this.na.subtree(c), function (a, b) { var c = b.bb(T); c && (d = d.P(a, c)) })); var k = null != Mg(f, a); if (!k && !Jc(a.w)) { var l = qh(a); w(!(l in this.bc), "View does not exist, but we have a tag"); var n = rh++; this.bc[l] = n; this.Wc["_" + n] = l } g = f.Fb(a, b, new Zg(c, this.xb),
        d, g); k || e || (f = Mg(f, a), g = g.concat(sh(this, a, f))); return g
    };
    gh.prototype.gb = function (a, b, c) {
        var d = a.path, e = this.na.get(d), f = []; if (e && ("default" === a.Fa() || null != Mg(e, a))) {
            f = e.gb(a, b, c); e.e() && (this.na = this.na.remove(d)); e = f.rg; f = f.Vf; b = -1 !== Oa(e, function (a) { return Jc(a.w) }); var g = Dg(this.na, d, function (a, b) { return null != Kg(b) }); if (b && !g && (d = this.na.subtree(d), !d.e())) for (var d = th(d), k = 0; k < d.length; ++k) { var l = d[k], n = l.V, l = uh(this, l); this.Ec.Ne(n, vh(this, n), l.md, l.H) } if (!g && 0 < e.length && !c) if (b) this.Ec.Qd(a, null); else {
                var u = this; Ia(e, function (a) {
                    a.Fa(); var b = u.bc[qh(a)];
                    u.Ec.Qd(a, b)
                })
            } wh(this, e)
        } return f
    }; gh.prototype.pa = function (a, b) { var c = this.xb, d = Dg(this.na, a, function (b, c) { var d = U(b, a); if (d = c.bb(d)) return d }); return c.pa(a, d, b, !0) }; function th(a) { return Bg(a, function (a, c, d) { if (c && null != Kg(c)) return [Kg(c)]; var e = []; c && (e = Lg(c)); z(d, function (a) { e = e.concat(a) }); return e }) } function wh(a, b) { for (var c = 0; c < b.length; ++c) { var d = b[c]; if (!Jc(d.w)) { var d = qh(d), e = a.bc[d]; delete a.bc[d]; delete a.Wc["_" + e] } } }
    function sh(a, b, c) { var d = b.path, e = vh(a, b); c = uh(a, c); b = a.Ec.Ne(b, e, c.md, c.H); d = a.na.subtree(d); if (e) w(null == Kg(d.value), "If we're adding a query, it shouldn't be shadowed"); else for (e = Bg(d, function (a, b, c) { if (!a.e() && b && null != Kg(b)) return [tg(Kg(b))]; var d = []; b && (d = d.concat(Ka(Lg(b), function (a) { return a.V }))); z(c, function (a) { d = d.concat(a) }); return d }), d = 0; d < e.length; ++d) c = e[d], a.Ec.Qd(c, vh(a, c)); return b }
    function uh(a, b) {
        var c = b.V, d = vh(a, c); return {
            md: function () { return (b.o() || L).hash() }, H: function (b, f) {
                if ("ok" === b) {
                    if (f && "object" === typeof f && s(f, "w")) { var g = t(f, "w"); ea(g) && 0 <= Ha(g, "no_index") && y("Using an unspecified index. Consider adding " + ('".indexOn": "' + c.w.g.toString() + '"') + " at " + c.path.toString() + " to your security rules for better performance") } if (d) { var k = c.path; if (g = Pd(a.Wc, "_" + d)) var l = nh(g), g = l.path, l = l.ac, k = U(g, k), k = new ch(new eh(!1, !0, l, !0), k), g = oh(a, g, k); else g = [] } else g = ih(a, new ch(fh,
                    c.path)); return g
                } g = "Unknown Error"; "too_big" === b ? g = "The data requested exceeds the maximum size that can be accessed with a single request." : "permission_denied" == b ? g = "Client doesn't have permission to access the desired data." : "unavailable" == b && (g = "The service is unavailable"); g = Error(b + ": " + g); g.code = b.toUpperCase(); return a.gb(c, null, g)
            }
        }
    } function qh(a) { return a.path.toString() + "$" + a.Fa() }
    function nh(a) { var b = a.indexOf("$"); w(-1 !== b && b < a.length - 1, "Bad queryKey."); return { ac: a.substr(b + 1), path: new R(a.substr(0, b)) } } function vh(a, b) { var c = qh(b); return t(a.bc, c) } var rh = 1; function oh(a, b, c) { var d = a.na.get(b); w(d, "Missing sync point for query tag that we're tracking"); return d.Ya(c, new Zg(b, a.xb), null) } function ih(a, b) { return xh(a, b, a.na, null, new Zg(T, a.xb)) }
    function xh(a, b, c, d, e) { if (b.path.e()) return yh(a, b, c, d, e); var f = c.get(T); null == d && null != f && (d = f.bb(T)); var g = [], k = H(b.path), l = b.Lc(k); if ((c = c.children.get(k)) && l) var n = d ? d.J(k) : null, k = e.n(k), g = g.concat(xh(a, l, c, n, k)); f && (g = g.concat(f.Ya(b, e, d))); return g } function yh(a, b, c, d, e) { var f = c.get(T); null == d && null != f && (d = f.bb(T)); var g = []; c.children.fa(function (c, f) { var n = d ? d.J(c) : null, u = e.n(c), x = b.Lc(c); x && (g = g.concat(yh(a, x, f, n, u))) }); f && (g = g.concat(f.Ya(b, e, d))); return g }; function zh(a) {
        this.O = a; this.Ra = Yd(a); this.$ = new ef; this.vd = 1; this.S = new Ke(this.O, q(this.yd, this), q(this.wd, this), q(this.Ge, this)); this.zg = Zd(a, q(function () { return new Vd(this.Ra, this.S) }, this)); this.kc = new Uc; this.re = new df; var b = this; this.qd = new gh({ Ne: function (a, d, e, f) { d = []; e = b.re.j(a.path); e.e() || (d = ih(b.qd, new $g(fh, a.path, e)), setTimeout(function () { f("ok") }, 0)); return d }, Qd: ba }); Ah(this, "connected", !1); this.ga = new af; this.Q = new Ff(a, q(this.S.Q, this.S), q(this.S.Re, this.S), q(this.De, this)); this.gd =
        0; this.se = null; this.M = new gh({ Ne: function (a, d, e, f) { Oe(b.S, a, e, d, function (d, e) { var l = f(d, e); jf(b.$, a.path, l) }); return [] }, Qd: function (a, d) { var e = b.S, f = a.path.toString(), g = a.Fa(); e.f("Unlisten called for " + f + " " + g); if (Qe(e, f, g) && e.ja) { var k = Qc(a); e.f("Unlisten on " + f + " for " + g); f = { p: f }; d && (f.q = k, f.t = d); e.Ca("n", f) } } })
    } h = zh.prototype; h.toString = function () { return (this.O.zb ? "https://" : "http://") + this.O.host }; h.name = function () { return this.O.tb };
    function Bh(a) { a = a.re.j(new R(".info/serverTimeOffset")).N() || 0; return (new Date).getTime() + a } function Ch(a) { a = a = { timestamp: Bh(a) }; a.timestamp = a.timestamp || (new Date).getTime(); return a } h.yd = function (a, b, c, d) { this.gd++; var e = new R(a); b = this.se ? this.se(a, b) : b; a = []; d ? c ? (b = ud(b, function (a) { return N(a) }), a = ph(this.M, e, b, d)) : (b = N(b), a = mh(this.M, e, b, d)) : c ? (d = ud(b, function (a) { return N(a) }), a = lh(this.M, e, d)) : (d = N(b), a = ih(this.M, new $g(fh, e, d))); d = e; 0 < a.length && (d = Dh(this, e)); jf(this.$, d, a) };
    h.wd = function (a) { Ah(this, "connected", a); !1 === a && Eh(this) }; h.Ge = function (a) { var b = this; Ab(a, function (a, d) { Ah(b, d, a) }) }; h.De = function (a) { Ah(this, "authenticated", a) }; function Ah(a, b, c) { b = new R("/.info/" + b); c = N(c); var d = a.re; d.Jd = d.Jd.D(b, c); c = ih(a.qd, new $g(fh, b, c)); jf(a.$, b, c) }
    h.Ab = function (a, b, c, d) { this.f("set", { path: a.toString(), value: b, Hg: c }); var e = Ch(this); b = N(b, c); var e = Uf(b, e), f = this.vd++, e = hh(this.M, a, e, f, !0); ff(this.$, e); var g = this; this.S.put(a.toString(), b.N(!0), function (b, c) { var e = "ok" === b; e || y("set at " + a + " failed: " + b); e = kh(g.M, f, !e); jf(g.$, a, e); Fh(d, b, c) }); e = Gh(this, a); Dh(this, e); jf(this.$, e, []) };
    h.update = function (a, b, c) {
        this.f("update", { path: a.toString(), value: b }); var d = !0, e = Ch(this), f = {}; z(b, function (a, b) { d = !1; var c = N(a); f[b] = Uf(c, e) }); if (d) ib("update() called with empty data.  Don't do anything."), Fh(c, "ok"); else {
            var g = this.vd++, k = jh(this.M, a, f, g); ff(this.$, k); var l = this; We(this.S, a.toString(), b, function (b, d) { w("ok" === b || "permission_denied" === b, "merge at " + a + " failed."); var e = "ok" === b; e || y("update at " + a + " failed: " + b); var e = kh(l.M, g, !e), f = a; 0 < e.length && (f = Dh(l, a)); jf(l.$, f, e); Fh(c, b, d) });
            b = Gh(this, a); Dh(this, b); jf(this.$, a, [])
        }
    }; function Eh(a) { a.f("onDisconnectEvents"); var b = Ch(a), c = []; cf(Tf(a.ga, b), T, function (b, e) { c = c.concat(ih(a.M, new $g(fh, b, e))); var f = Gh(a, b); Dh(a, f) }); a.ga = new af; jf(a.$, T, c) } h.Ee = function (a, b) { var c = this; this.S.Ee(a.toString(), function (d, e) { "ok" === d && bf(c.ga, a); Fh(b, d, e) }) }; function Hh(a, b, c, d) { var e = N(c); Se(a.S, b.toString(), e.N(!0), function (c, g) { "ok" === c && a.ga.dc(b, e); Fh(d, c, g) }) }
    function Ih(a, b, c, d, e) { var f = N(c, d); Se(a.S, b.toString(), f.N(!0), function (c, d) { "ok" === c && a.ga.dc(b, f); Fh(e, c, d) }) } function Jh(a, b, c, d) { var e = !0, f; for (f in c) e = !1; e ? (ib("onDisconnect().update() called with empty data.  Don't do anything."), Fh(d, "ok")) : Ue(a.S, b.toString(), c, function (e, f) { if ("ok" === e) for (var l in c) { var n = N(c[l]); a.ga.dc(b.n(l), n) } Fh(d, e, f) }) } function Oc(a, b, c) { c = ".info" === H(b.path) ? a.qd.Fb(b, c) : a.M.Fb(b, c); Pc(a.$, b.path, c) } h.pb = function () { this.S.pb() }; h.gc = function () { this.S.gc() };
    h.Oe = function (a) { if ("undefined" !== typeof console) { a ? (this.Pd || (this.Pd = new Ud(this.Ra)), a = this.Pd.get()) : a = this.Ra.get(); var b = La(Ld(a), function (a, b) { return Math.max(b.length, a) }, 0), c; for (c in a) { for (var d = a[c], e = c.length; e < b + 2; e++) c += " "; console.log(c + d) } } }; h.Pe = function (a) { Td(this.Ra, a); this.zg.yf[a] = !0 }; h.f = function (a) { ib("r:" + this.S.id + ":", arguments) }; function Fh(a, b, c) { a && Db(function () { if ("ok" == b) a(null); else { var d = (b || "error").toUpperCase(), e = d; c && (e += ": " + c); e = Error(e); e.code = d; a(e) } }) }; function Kh(a, b, c, d, e) {
        function f() { } a.f("transaction on " + b); var g = new Q(a, b); g.vb("value", f); c = { path: b, update: c, H: d, status: null, of: fb(), Se: e, uf: 0, Xd: function () { g.Yb("value", f) }, $d: null, xa: null, dd: null, ed: null, fd: null }; d = a.M.pa(b, void 0) || L; c.dd = d; d = c.update(d.N()); if (m(d)) {
            Tb("transaction failed: Data returned ", d); c.status = 1; e = Vc(a.kc, b); var k = e.za() || []; k.push(c); Wc(e, k); "object" === typeof d && null !== d && s(d, ".priority") ? (k = t(d, ".priority"), w(Rb(k), "Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")) :
            k = (a.M.pa(b) || L).K().N(); e = Ch(a); d = N(d, k); e = Uf(d, e); c.ed = d; c.fd = e; c.xa = a.vd++; c = hh(a.M, b, e, c.xa, c.Se); jf(a.$, b, c); Lh(a)
        } else c.Xd(), c.ed = null, c.fd = null, c.H && (a = new C(c.dd, new Q(a, c.path), K), c.H(null, !1, a))
    } function Lh(a, b) { var c = b || a.kc; b || Mh(a, c); if (null !== c.za()) { var d = Nh(a, c); w(0 < d.length, "Sending zero length transaction queue"); Ma(d, function (a) { return 1 === a.status }) && Oh(a, c.path(), d) } else c.ld() && c.T(function (b) { Lh(a, b) }) }
    function Oh(a, b, c) {
        for (var d = Ka(c, function (a) { return a.xa }), e = a.M.pa(b, d) || L, d = e, e = e.hash(), f = 0; f < c.length; f++) { var g = c[f]; w(1 === g.status, "tryToSendTransactionQueue_: items in queue should all be run."); g.status = 2; g.uf++; var k = U(b, g.path), d = d.D(k, g.ed) } d = d.N(!0); a.S.put(b.toString(), d, function (d) {
            a.f("transaction put response", { path: b.toString(), status: d }); var e = []; if ("ok" === d) {
                d = []; for (f = 0; f < c.length; f++) {
                    c[f].status = 3; e = e.concat(kh(a.M, c[f].xa)); if (c[f].H) {
                        var g = c[f].fd, k = new Q(a, c[f].path); d.push(q(c[f].H,
                        null, null, !0, new C(g, k, K)))
                    } c[f].Xd()
                } Mh(a, Vc(a.kc, b)); Lh(a); jf(a.$, b, e); for (f = 0; f < d.length; f++) Db(d[f])
            } else { if ("datastale" === d) for (f = 0; f < c.length; f++) c[f].status = 4 === c[f].status ? 5 : 1; else for (y("transaction at " + b.toString() + " failed: " + d), f = 0; f < c.length; f++) c[f].status = 5, c[f].$d = d; Dh(a, b) }
        }, e)
    } function Dh(a, b) { var c = Ph(a, b), d = c.path(), c = Nh(a, c); Qh(a, c, d); return d }
    function Qh(a, b, c) {
        if (0 !== b.length) {
            for (var d = [], e = [], f = Ka(b, function (a) { return a.xa }), g = 0; g < b.length; g++) {
                var k = b[g], l = U(c, k.path), n = !1, u; w(null !== l, "rerunTransactionsUnderNode_: relativePath should not be null."); if (5 === k.status) n = !0, u = k.$d, e = e.concat(kh(a.M, k.xa, !0)); else if (1 === k.status) if (25 <= k.uf) n = !0, u = "maxretry", e = e.concat(kh(a.M, k.xa, !0)); else {
                    var x = a.M.pa(k.path, f) || L; k.dd = x; var E = b[g].update(x.N()); m(E) ? (Tb("transaction failed: Data returned ", E), l = N(E), "object" === typeof E && null != E && s(E,
                    ".priority") || (l = l.Z(x.K())), x = k.xa, E = Ch(a), E = Uf(l, E), k.ed = l, k.fd = E, k.xa = a.vd++, Pa(f, x), e = e.concat(hh(a.M, k.path, E, k.xa, k.Se)), e = e.concat(kh(a.M, x, !0))) : (n = !0, u = "nodata", e = e.concat(kh(a.M, k.xa, !0)))
                } jf(a.$, c, e); e = []; n && (b[g].status = 3, setTimeout(b[g].Xd, Math.floor(0)), b[g].H && ("nodata" === u ? (k = new Q(a, b[g].path), d.push(q(b[g].H, null, null, !1, new C(b[g].dd, k, K)))) : d.push(q(b[g].H, null, Error(u), !1, null))))
            } Mh(a, a.kc); for (g = 0; g < d.length; g++) Db(d[g]); Lh(a)
        }
    }
    function Ph(a, b) { for (var c, d = a.kc; null !== (c = H(b)) && null === d.za() ;) d = Vc(d, c), b = S(b); return d } function Nh(a, b) { var c = []; Rh(a, b, c); c.sort(function (a, b) { return a.of - b.of }); return c } function Rh(a, b, c) { var d = b.za(); if (null !== d) for (var e = 0; e < d.length; e++) c.push(d[e]); b.T(function (b) { Rh(a, b, c) }) } function Mh(a, b) { var c = b.za(); if (c) { for (var d = 0, e = 0; e < c.length; e++) 3 !== c[e].status && (c[d] = c[e], d++); c.length = d; Wc(b, 0 < c.length ? c : null) } b.T(function (b) { Mh(a, b) }) }
    function Gh(a, b) { var c = Ph(a, b).path(), d = Vc(a.kc, b); Zc(d, function (b) { Sh(a, b) }); Sh(a, d); Yc(d, function (b) { Sh(a, b) }); return c }
    function Sh(a, b) { var c = b.za(); if (null !== c) { for (var d = [], e = [], f = -1, g = 0; g < c.length; g++) 4 !== c[g].status && (2 === c[g].status ? (w(f === g - 1, "All SENT items should be at beginning of queue."), f = g, c[g].status = 4, c[g].$d = "set") : (w(1 === c[g].status, "Unexpected transaction status in abort"), c[g].Xd(), e = e.concat(kh(a.M, c[g].xa, !0)), c[g].H && d.push(q(c[g].H, null, Error("set"), !1, null)))); -1 === f ? Wc(b, null) : c.length = f + 1; jf(a.$, b.path(), e); for (g = 0; g < d.length; g++) Db(d[g]) } }; function X() { this.ec = {} } ca(X); X.prototype.pb = function () { for (var a in this.ec) this.ec[a].pb() }; X.prototype.interrupt = X.prototype.pb; X.prototype.gc = function () { for (var a in this.ec) this.ec[a].gc() }; X.prototype.resume = X.prototype.gc; function Th(a) { var b = this; this.qc = a; this.Sd = "*"; xf() ? this.Gc = this.od = pf() : (this.Gc = window.opener, this.od = window); if (!b.Gc) throw "Unable to find relay frame"; qf(this.od, "message", q(this.Zb, this)); qf(this.od, "message", q(this.lf, this)); try { Uh(this, { a: "ready" }) } catch (c) { qf(this.Gc, "load", function () { Uh(b, { a: "ready" }) }) } qf(window, "unload", q(this.jg, this)) } function Uh(a, b) { b = r(b); xf() ? a.Gc.doPost(b, a.Sd) : a.Gc.postMessage(b, a.Sd) }
    Th.prototype.Zb = function (a) { var b = this, c; try { c = ta(a.data) } catch (d) { } c && "request" === c.a && (rf(window, "message", this.Zb), this.Sd = a.origin, this.qc && setTimeout(function () { b.qc(b.Sd, c.d, function (a, c) { b.Mf = !c; b.qc = void 0; Uh(b, { a: "response", d: a, forceKeepWindowOpen: c }) }) }, 0)) }; Th.prototype.jg = function () { try { rf(this.od, "message", this.lf) } catch (a) { } this.qc && (Uh(this, { a: "error", d: "unknown closed window" }), this.qc = void 0); try { window.close() } catch (b) { } }; Th.prototype.lf = function (a) { if (this.Mf && "die" === a.data) try { window.close() } catch (b) { } }; var Y = { Xf: function () { ke = be = !0 } }; Y.forceLongPolling = Y.Xf; Y.Yf = function () { le = !0 }; Y.forceWebSockets = Y.Yf; Y.wg = function (a, b) { a.k.S.Me = b }; Y.setSecurityDebugCallback = Y.wg; Y.Oe = function (a, b) { a.k.Oe(b) }; Y.stats = Y.Oe; Y.Pe = function (a, b) { a.k.Pe(b) }; Y.statsIncrementCounter = Y.Pe; Y.gd = function (a) { return a.k.gd }; Y.dataUpdateCount = Y.gd; Y.ag = function (a, b) { a.k.se = b }; Y.interceptServerData = Y.ag; Y.gg = function (a) { new Th(a) }; Y.onPopupOpen = Y.gg; Y.ug = function (a) { kf = a }; Y.setAuthenticationServer = Y.ug; function Z(a, b) { this.Qc = a; this.Ea = b } Z.prototype.cancel = function (a) { D("Firebase.onDisconnect().cancel", 0, 1, arguments.length); G("Firebase.onDisconnect().cancel", 1, a, !0); this.Qc.Ee(this.Ea, a || null) }; Z.prototype.cancel = Z.prototype.cancel; Z.prototype.remove = function (a) { D("Firebase.onDisconnect().remove", 0, 1, arguments.length); $b("Firebase.onDisconnect().remove", this.Ea); G("Firebase.onDisconnect().remove", 1, a, !0); Hh(this.Qc, this.Ea, null, a) }; Z.prototype.remove = Z.prototype.remove;
    Z.prototype.set = function (a, b) { D("Firebase.onDisconnect().set", 1, 2, arguments.length); $b("Firebase.onDisconnect().set", this.Ea); Sb("Firebase.onDisconnect().set", a, !1); G("Firebase.onDisconnect().set", 2, b, !0); Hh(this.Qc, this.Ea, a, b) }; Z.prototype.set = Z.prototype.set;
    Z.prototype.Ab = function (a, b, c) { D("Firebase.onDisconnect().setWithPriority", 2, 3, arguments.length); $b("Firebase.onDisconnect().setWithPriority", this.Ea); Sb("Firebase.onDisconnect().setWithPriority", a, !1); Wb("Firebase.onDisconnect().setWithPriority", 2, b); G("Firebase.onDisconnect().setWithPriority", 3, c, !0); Ih(this.Qc, this.Ea, a, b, c) }; Z.prototype.setWithPriority = Z.prototype.Ab;
    Z.prototype.update = function (a, b) {
        D("Firebase.onDisconnect().update", 1, 2, arguments.length); $b("Firebase.onDisconnect().update", this.Ea); if (ea(a)) { for (var c = {}, d = 0; d < a.length; ++d) c["" + d] = a[d]; a = c; y("Passing an Array to Firebase.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.") } Vb("Firebase.onDisconnect().update", a); G("Firebase.onDisconnect().update", 2, b, !0); Jh(this.Qc,
        this.Ea, a, b)
    }; Z.prototype.update = Z.prototype.update; var $ = {}; $.mc = Ke; $.DataConnection = $.mc; Ke.prototype.yg = function (a, b) { this.Ca("q", { p: a }, b) }; $.mc.prototype.simpleListen = $.mc.prototype.yg; Ke.prototype.Sf = function (a, b) { this.Ca("echo", { d: a }, b) }; $.mc.prototype.echo = $.mc.prototype.Sf; Ke.prototype.interrupt = Ke.prototype.pb; $.Df = ve; $.RealTimeConnection = $.Df; ve.prototype.sendRequest = ve.prototype.Ca; ve.prototype.close = ve.prototype.close;
    $.$f = function (a) { var b = Ke.prototype.put; Ke.prototype.put = function (c, d, e, f) { m(f) && (f = a()); b.call(this, c, d, e, f) }; return function () { Ke.prototype.put = b } }; $.hijackHash = $.$f; $.Cf = Ba; $.ConnectionTarget = $.Cf; $.Fa = function (a) { return a.Fa() }; $.queryIdentifier = $.Fa; $.bg = function (a) { return a.k.S.Aa }; $.listens = $.bg; var Vh = function () {
        var a = 0, b = []; return function (c) {
            var d = c === a; a = c; for (var e = Array(8), f = 7; 0 <= f; f--) e[f] = "-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(c % 64), c = Math.floor(c / 64); w(0 === c, "Cannot push at time == 0"); c = e.join(""); if (d) { for (f = 11; 0 <= f && 63 === b[f]; f--) b[f] = 0; b[f]++ } else for (f = 0; 12 > f; f++) b[f] = Math.floor(64 * Math.random()); for (f = 0; 12 > f; f++) c += "-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(b[f]); w(20 === c.length, "NextPushId: Length should be 20.");
            return c
        }
    }(); function Q(a, b) {
        var c, d, e; if (a instanceof zh) c = a, d = b; else {
            D("new Firebase", 1, 2, arguments.length); d = sb(arguments[0]); c = d.Ag; "firebase" === d.domain && rb(d.host + " is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"); c || rb("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"); d.zb || "undefined" !== typeof window && window.location && window.location.protocol && -1 !== window.location.protocol.indexOf("https:") && y("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");
            c = new Ba(d.host, d.zb, c, "ws" === d.scheme || "wss" === d.scheme); d = new R(d.Oc); e = d.toString(); var f; !(f = !p(c.host) || 0 === c.host.length || !Qb(c.tb)) && (f = 0 !== e.length) && (e && (e = e.replace(/^\/*\.info(\/|$)/, "/")), f = !(p(e) && 0 !== e.length && !Pb.test(e))); if (f) throw Error(F("new Firebase", 1, !1) + 'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".'); if (b) if (b instanceof X) e = b; else if (p(b)) e = X.Mb(), c.Dd = b; else throw Error("Expected a valid Firebase.Context for second argument to new Firebase()");
            else e = X.Mb(); f = c.toString(); var g = t(e.ec, f); g || (g = new zh(c), e.ec[f] = g); c = g
        } P.call(this, c, d, Gc, !1)
    } ma(Q, P); var Wh = Q, Xh = ["Firebase"], Yh = aa; Xh[0] in Yh || !Yh.execScript || Yh.execScript("var " + Xh[0]); for (var Zh; Xh.length && (Zh = Xh.shift()) ;) !Xh.length && m(Wh) ? Yh[Zh] = Wh : Yh = Yh[Zh] ? Yh[Zh] : Yh[Zh] = {}; Q.prototype.name = function () { y("Firebase.name() being deprecated. Please use Firebase.key() instead."); D("Firebase.name", 0, 0, arguments.length); return this.key() }; Q.prototype.name = Q.prototype.name;
    Q.prototype.key = function () { D("Firebase.key", 0, 0, arguments.length); return this.path.e() ? null : Sc(this.path) }; Q.prototype.key = Q.prototype.key; Q.prototype.n = function (a) { D("Firebase.child", 1, 1, arguments.length); if (ga(a)) a = String(a); else if (!(a instanceof R)) if (null === H(this.path)) { var b = a; b && (b = b.replace(/^\/*\.info(\/|$)/, "/")); Zb("Firebase.child", b) } else Zb("Firebase.child", a); return new Q(this.k, this.path.n(a)) }; Q.prototype.child = Q.prototype.n;
    Q.prototype.parent = function () { D("Firebase.parent", 0, 0, arguments.length); var a = this.path.parent(); return null === a ? null : new Q(this.k, a) }; Q.prototype.parent = Q.prototype.parent; Q.prototype.root = function () { D("Firebase.ref", 0, 0, arguments.length); for (var a = this; null !== a.parent() ;) a = a.parent(); return a }; Q.prototype.root = Q.prototype.root;
    Q.prototype.toString = function () { D("Firebase.toString", 0, 0, arguments.length); var a; if (null === this.parent()) a = this.k.toString(); else { a = this.parent().toString() + "/"; var b = this.key(); a += encodeURIComponent(String(b)) } return a }; Q.prototype.toString = Q.prototype.toString; Q.prototype.set = function (a, b) { D("Firebase.set", 1, 2, arguments.length); $b("Firebase.set", this.path); Sb("Firebase.set", a, !1); G("Firebase.set", 2, b, !0); this.k.Ab(this.path, a, null, b || null) }; Q.prototype.set = Q.prototype.set;
    Q.prototype.update = function (a, b) {
        D("Firebase.update", 1, 2, arguments.length); $b("Firebase.update", this.path); if (ea(a)) { for (var c = {}, d = 0; d < a.length; ++d) c["" + d] = a[d]; a = c; y("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.") } Vb("Firebase.update", a); G("Firebase.update", 2, b, !0); if (s(a, ".priority")) throw Error("update() does not currently support updating .priority.");
        this.k.update(this.path, a, b || null)
    }; Q.prototype.update = Q.prototype.update; Q.prototype.Ab = function (a, b, c) { D("Firebase.setWithPriority", 2, 3, arguments.length); $b("Firebase.setWithPriority", this.path); Sb("Firebase.setWithPriority", a, !1); Wb("Firebase.setWithPriority", 2, b); G("Firebase.setWithPriority", 3, c, !0); if (".length" === this.key() || ".keys" === this.key()) throw "Firebase.setWithPriority failed: " + this.key() + " is a read-only object."; this.k.Ab(this.path, a, b, c || null) }; Q.prototype.setWithPriority = Q.prototype.Ab;
    Q.prototype.remove = function (a) { D("Firebase.remove", 0, 1, arguments.length); $b("Firebase.remove", this.path); G("Firebase.remove", 1, a, !0); this.set(null, a) }; Q.prototype.remove = Q.prototype.remove;
    Q.prototype.transaction = function (a, b, c) { D("Firebase.transaction", 1, 3, arguments.length); $b("Firebase.transaction", this.path); G("Firebase.transaction", 1, a, !1); G("Firebase.transaction", 2, b, !0); if (m(c) && "boolean" != typeof c) throw Error(F("Firebase.transaction", 3, !0) + "must be a boolean."); if (".length" === this.key() || ".keys" === this.key()) throw "Firebase.transaction failed: " + this.key() + " is a read-only object."; "undefined" === typeof c && (c = !0); Kh(this.k, this.path, a, b || null, c) }; Q.prototype.transaction = Q.prototype.transaction;
    Q.prototype.vg = function (a, b) { D("Firebase.setPriority", 1, 2, arguments.length); $b("Firebase.setPriority", this.path); Wb("Firebase.setPriority", 1, a); G("Firebase.setPriority", 2, b, !0); this.k.Ab(this.path.n(".priority"), a, null, b) }; Q.prototype.setPriority = Q.prototype.vg; Q.prototype.push = function (a, b) { D("Firebase.push", 0, 2, arguments.length); $b("Firebase.push", this.path); Sb("Firebase.push", a, !0); G("Firebase.push", 2, b, !0); var c = Bh(this.k), c = Vh(c), c = this.n(c); "undefined" !== typeof a && null !== a && c.set(a, b); return c };
    Q.prototype.push = Q.prototype.push; Q.prototype.fb = function () { $b("Firebase.onDisconnect", this.path); return new Z(this.k, this.path) }; Q.prototype.onDisconnect = Q.prototype.fb; Q.prototype.Q = function (a, b, c) { y("FirebaseRef.auth() being deprecated. Please use FirebaseRef.authWithCustomToken() instead."); D("Firebase.auth", 1, 3, arguments.length); ac("Firebase.auth", a); G("Firebase.auth", 2, b, !0); G("Firebase.auth", 3, b, !0); Lf(this.k.Q, a, {}, { remember: "none" }, b, c) }; Q.prototype.auth = Q.prototype.Q;
    Q.prototype.Re = function (a) { D("Firebase.unauth", 0, 1, arguments.length); G("Firebase.unauth", 1, a, !0); Mf(this.k.Q, a) }; Q.prototype.unauth = Q.prototype.Re; Q.prototype.me = function () { D("Firebase.getAuth", 0, 0, arguments.length); return this.k.Q.me() }; Q.prototype.getAuth = Q.prototype.me; Q.prototype.fg = function (a, b) { D("Firebase.onAuth", 1, 2, arguments.length); G("Firebase.onAuth", 1, a, !1); Nb("Firebase.onAuth", 2, b); this.k.Q.vb("auth_status", a, b) }; Q.prototype.onAuth = Q.prototype.fg;
    Q.prototype.eg = function (a, b) { D("Firebase.offAuth", 1, 2, arguments.length); G("Firebase.offAuth", 1, a, !1); Nb("Firebase.offAuth", 2, b); this.k.Q.Yb("auth_status", a, b) }; Q.prototype.offAuth = Q.prototype.eg; Q.prototype.Hf = function (a, b, c) { D("Firebase.authWithCustomToken", 2, 3, arguments.length); ac("Firebase.authWithCustomToken", a); G("Firebase.authWithCustomToken", 2, b, !1); I("Firebase.authWithCustomToken", 3, c, !0); Lf(this.k.Q, a, {}, c || {}, b) }; Q.prototype.authWithCustomToken = Q.prototype.Hf;
    Q.prototype.If = function (a, b, c) { D("Firebase.authWithOAuthPopup", 2, 3, arguments.length); bc("Firebase.authWithOAuthPopup", 1, a); G("Firebase.authWithOAuthPopup", 2, b, !1); I("Firebase.authWithOAuthPopup", 3, c, !0); Qf(this.k.Q, a, c, b) }; Q.prototype.authWithOAuthPopup = Q.prototype.If;
    Q.prototype.Jf = function (a, b, c) { D("Firebase.authWithOAuthRedirect", 2, 3, arguments.length); bc("Firebase.authWithOAuthRedirect", 1, a); G("Firebase.authWithOAuthRedirect", 2, b, !1); I("Firebase.authWithOAuthRedirect", 3, c, !0); var d = this.k.Q; Of(d); var e = [Ef], f = nf(c); "anonymous" === a || "firebase" === a ? A(b, W("TRANSPORT_UNAVAILABLE")) : (Aa.set("redirect_client_options", f.cd), Pf(d, e, "/auth/" + a, f, b)) }; Q.prototype.authWithOAuthRedirect = Q.prototype.Jf;
    Q.prototype.Kf = function (a, b, c, d) { D("Firebase.authWithOAuthToken", 3, 4, arguments.length); bc("Firebase.authWithOAuthToken", 1, a); G("Firebase.authWithOAuthToken", 3, c, !1); I("Firebase.authWithOAuthToken", 4, d, !0); p(b) ? (bc("Firebase.authWithOAuthToken", 2, b), Nf(this.k.Q, a + "/token", { access_token: b }, d, c)) : (I("Firebase.authWithOAuthToken", 2, b, !1), Nf(this.k.Q, a + "/token", b, d, c)) }; Q.prototype.authWithOAuthToken = Q.prototype.Kf;
    Q.prototype.Gf = function (a, b) { D("Firebase.authAnonymously", 1, 2, arguments.length); G("Firebase.authAnonymously", 1, a, !1); I("Firebase.authAnonymously", 2, b, !0); Nf(this.k.Q, "anonymous", {}, b, a) }; Q.prototype.authAnonymously = Q.prototype.Gf;
    Q.prototype.Lf = function (a, b, c) { D("Firebase.authWithPassword", 2, 3, arguments.length); I("Firebase.authWithPassword", 1, a, !1); J("Firebase.authWithPassword", a, "email"); J("Firebase.authWithPassword", a, "password"); G("Firebase.authAnonymously", 2, b, !1); I("Firebase.authAnonymously", 3, c, !0); Nf(this.k.Q, "password", a, c, b) }; Q.prototype.authWithPassword = Q.prototype.Lf;
    Q.prototype.je = function (a, b) { D("Firebase.createUser", 2, 2, arguments.length); I("Firebase.createUser", 1, a, !1); J("Firebase.createUser", a, "email"); J("Firebase.createUser", a, "password"); G("Firebase.createUser", 2, b, !1); this.k.Q.je(a, b) }; Q.prototype.createUser = Q.prototype.je; Q.prototype.Ke = function (a, b) { D("Firebase.removeUser", 2, 2, arguments.length); I("Firebase.removeUser", 1, a, !1); J("Firebase.removeUser", a, "email"); J("Firebase.removeUser", a, "password"); G("Firebase.removeUser", 2, b, !1); this.k.Q.Ke(a, b) };
    Q.prototype.removeUser = Q.prototype.Ke; Q.prototype.ee = function (a, b) { D("Firebase.changePassword", 2, 2, arguments.length); I("Firebase.changePassword", 1, a, !1); J("Firebase.changePassword", a, "email"); J("Firebase.changePassword", a, "oldPassword"); J("Firebase.changePassword", a, "newPassword"); G("Firebase.changePassword", 2, b, !1); this.k.Q.ee(a, b) }; Q.prototype.changePassword = Q.prototype.ee;
    Q.prototype.de = function (a, b) { D("Firebase.changeEmail", 2, 2, arguments.length); I("Firebase.changeEmail", 1, a, !1); J("Firebase.changeEmail", a, "oldEmail"); J("Firebase.changeEmail", a, "newEmail"); J("Firebase.changeEmail", a, "password"); G("Firebase.changeEmail", 2, b, !1); this.k.Q.de(a, b) }; Q.prototype.changeEmail = Q.prototype.de;
    Q.prototype.Le = function (a, b) { D("Firebase.resetPassword", 2, 2, arguments.length); I("Firebase.resetPassword", 1, a, !1); J("Firebase.resetPassword", a, "email"); G("Firebase.resetPassword", 2, b, !1); this.k.Q.Le(a, b) }; Q.prototype.resetPassword = Q.prototype.Le; Q.goOffline = function () { D("Firebase.goOffline", 0, 0, arguments.length); X.Mb().pb() }; Q.goOnline = function () { D("Firebase.goOnline", 0, 0, arguments.length); X.Mb().gc() };
    function ob(a, b) { w(!b || !0 === a || !1 === a, "Can't turn on custom loggers persistently."); !0 === a ? ("undefined" !== typeof console && ("function" === typeof console.log ? mb = q(console.log, console) : "object" === typeof console.log && (mb = function (a) { console.log(a) })), b && Aa.set("logging_enabled", !0)) : a ? mb = a : (mb = null, Aa.remove("logging_enabled")) } Q.enableLogging = ob; Q.ServerValue = { TIMESTAMP: { ".sv": "timestamp" } }; Q.SDK_VERSION = "2.1.1"; Q.INTERNAL = Y; Q.Context = X; Q.TEST_ACCESS = $;
})();
/** END OF firebase **/
 
/** START OF almond **/
/**
 * @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */












var requirejs,require,define;(function(e){function h(e,t){return f.call(e,t)}function p(e,t){var n,r,i,s,o,a,f,l,h,p,d,v=t&&t.split("/"),m=u.map,g=m&&m["*"]||{};if(e&&e.charAt(0)===".")if(t){v=v.slice(0,v.length-1),e=e.split("/"),o=e.length-1,u.nodeIdCompat&&c.test(e[o])&&(e[o]=e[o].replace(c,"")),e=v.concat(e);for(h=0;h<e.length;h+=1){d=e[h];if(d===".")e.splice(h,1),h-=1;else if(d===".."){if(h===1&&(e[2]===".."||e[0]===".."))break;h>0&&(e.splice(h-1,2),h-=2)}}e=e.join("/")}else e.indexOf("./")===0&&(e=e.substring(2));if((v||g)&&m){n=e.split("/");for(h=n.length;h>0;h-=1){r=n.slice(0,h).join("/");if(v)for(p=v.length;p>0;p-=1){i=m[v.slice(0,p).join("/")];if(i){i=i[r];if(i){s=i,a=h;break}}}if(s)break;!f&&g&&g[r]&&(f=g[r],l=h)}!s&&f&&(s=f,a=l),s&&(n.splice(0,a,s),e=n.join("/"))}return e}function d(t,r){return function(){return n.apply(e,l.call(arguments,0).concat([t,r]))}}function v(e){return function(t){return p(t,e)}}function m(e){return function(t){s[e]=t}}function g(n){if(h(o,n)){var r=o[n];delete o[n],a[n]=!0,t.apply(e,r)}if(!h(s,n)&&!h(a,n))throw new Error("No "+n);return s[n]}function y(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function b(e){return function(){return u&&u.config&&u.config[e]||{}}}var t,n,r,i,s={},o={},u={},a={},f=Object.prototype.hasOwnProperty,l=[].slice,c=/\.js$/;r=function(e,t){var n,r=y(e),i=r[0];return e=r[1],i&&(i=p(i,t),n=g(i)),i?n&&n.normalize?e=n.normalize(e,v(t)):e=p(e,t):(e=p(e,t),r=y(e),i=r[0],e=r[1],i&&(n=g(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},i={require:function(e){return d(e)},exports:function(e){var t=s[e];return typeof t!="undefined"?t:s[e]={}},module:function(e){return{id:e,uri:"",exports:s[e],config:b(e)}}},t=function(t,n,u,f){var l,c,p,v,y,b=[],w=typeof u,E;f=f||t;if(w==="undefined"||w==="function"){n=!n.length&&u.length?["require","exports","module"]:n;for(y=0;y<n.length;y+=1){v=r(n[y],f),c=v.f;if(c==="require")b[y]=i.require(t);else if(c==="exports")b[y]=i.exports(t),E=!0;else if(c==="module")l=b[y]=i.module(t);else if(h(s,c)||h(o,c)||h(a,c))b[y]=g(c);else{if(!v.p)throw new Error(t+" missing "+c);v.p.load(v.n,d(f,!0),m(c),{}),b[y]=s[c]}}p=u?u.apply(s[t],b):undefined;if(t)if(l&&l.exports!==e&&l.exports!==s[t])s[t]=l.exports;else if(p!==e||!E)s[t]=p}else t&&(s[t]=u)},requirejs=require=n=function(s,o,a,f,l){if(typeof s=="string")return i[s]?i[s](o):g(r(s,o).f);if(!s.splice){u=s,u.deps&&n(u.deps,u.callback);if(!o)return;o.splice?(s=o,o=a,a=null):s=e}return o=o||function(){},typeof a=="function"&&(a=f,f=l),f?t(e,s,o,a):setTimeout(function(){t(e,s,o,a)},4),n},n.config=function(e){return n(e)},requirejs._defined=s,define=function(e,t,n){t.splice||(n=t,t=[]),!h(s,e)&&!h(o,e)&&(o[e]=[e,t,n])},define.amd={jQuery:!0}})(),define("almond",function(){})
/** END OF almond **/
,define("es5_shim",["require","exports","module"],function(e,t,n){var r=Function.prototype.call,i=r.bind(Object.prototype.toString);String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s*(\S*(?:\s+\S+)*)\s*$/,"$1")}),String.prototype.supplant||(String.prototype.supplant=function(e){return this.replace(/\{([^{}]*)\}/g,function(t,n){var r=e[n];return typeof r=="string"||typeof r=="number"?r:t})}),typeof Array.isArray!="function"&&(Array.isArray=function(e){return Array.prototype.toString.apply(e)==="[object Array]"}),typeof Object.create!="function"&&(Object.create=function(e){function t(){}return t.prototype=e,new t});var s=Object("a"),o=s[0]!="a"||!(0 in s);Array.prototype.forEach||(Array.prototype.forEach=function(t){var n=u(this),r=o&&i(this)=="[object String]"?this.split(""):n,s=arguments[1],a=-1,f=r.length>>>0;if(i(t)!="[object Function]")throw new TypeError;while(++a<f)a in r&&t.call(s,r[a],a,n)});var u=function(e){if(e==null)throw new TypeError("can't convert "+e+" to object");return Object(e)}}),define("global",["require","exports","module"],function(e,t,n){function i(){var e=window.location.hash,e=e.split("&"),t="",n="";for(var r=0;r<e.length;r++)n=e[r].split("="),n[0]=n[0].replace("#",""),n[0].toLowerCase()=="name"?n[1]&&(GLOBAL.currentSampleName=n[1]):n[0].toLowerCase()=="line"?n[1]&&(GLOBAL.lineFromURL=n[1]):n[0].toLowerCase()=="c"?n[1]&&(GLOBAL.sharedSampleFirebase=n[1]):n[0].toLowerCase()=="reset"?n[1]&&(GLOBAL.resetPassRequest=n[1]):n[0].toLowerCase()=="passtemp"&&n[1]&&(GLOBAL.resetPassTemp=n[1])}GLOBAL={},GLOBAL.expandAllNodes=!0,GLOBAL.currentSampleName="",GLOBAL.lineFromURL="",GLOBAL.updateFromTreeUI=!1,GLOBAL.sharedSampleFirebase=null;var r=window.location.hash;r&&i()}),define("events",["require","exports","module"],function(e,t,n){t.addListener=function(e,t,n){if(e.addEventListener)return e.addEventListener(t,n,!1);if(e.attachEvent){var r=function(){n.call(e,window.event)};n._wrapper=r,e.attachEvent("on"+t,r)}},t.removeListener=function(e,t,n){if(e.removeEventListener)return e.removeEventListener(t,n,!1);e.detachEvent&&e.detachEvent("on"+t,n._wrapper||n)},t.stopEvent=function(e){return t.stopPropagation(e),t.preventDefault(e),!1},t.stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},t.preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},t.fixEvent=function(e){function t(){return!0}function n(){return!1}if(!e||!e.stopPropagation){var r=e||window.event;e={};for(var i in r)e[i]=r[i];e.target||(e.target=e.srcElement||document),e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement,e.preventDefault=function(){e.returnValue=!1,e.isDefaultPrevented=t},e.isDefaultPrevented=n,e.stopPropagation=function(){e.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=n,e.stopImmediatePropagation=function(){this.isImmediatePropagationStopped=t,this.stopPropagation()},e.isImmediatePropagationStopped=n;if(e.clientX!=null){var s=document.documentElement,o=document.body;e.pageX=e.clientX+(s&&s.scrollLeft||o&&o.scrollLeft||0)-(s&&s.clientLeft||o&&o.clientLeft||0),e.pageY=e.clientY+(s&&s.scrollTop||o&&o.scrollTop||0)-(s&&s.clientTop||o&&o.clientTop||0)}e.which=e.charCode||e.keyCode,e.button!=null&&(e.button=e.button&1?0:e.button&4?1:e.button&2?2:0)}return e}}),
/** START OF dom **/
/* ***** BEGIN LICENSE BLOCK *****
 * Distributed under the BSD license:
 *
 * Copyright (c) 2010, Ajax.org B.V.
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *     * Redistributions of source code must retain the above copyright
 *       notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above copyright
 *       notice, this list of conditions and the following disclaimer in the
 *       documentation and/or other materials provided with the distribution.
 *     * Neither the name of Ajax.org B.V. nor the
 *       names of its contributors may be used to endorse or promote products
 *       derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * ***** END LICENSE BLOCK ***** */
define("dom",["require","exports","module"],function(e,t,n){if(typeof document=="undefined")return;var r="http://www.w3.org/1999/xhtml";t.getDocumentHead=function(e){return e||(e=document),e.head||e.getElementsByTagName("head")[0]||e.documentElement},t.createElement=function(e,t){return document.createElementNS?document.createElementNS(t||r,e):document.createElement(e)},t.hasCssClass=function(e,t){var n=e.className.split(/\s+/g);return n.indexOf(t)!==-1},t.addCssClass=function(e,n){t.hasCssClass(e,n)||(e.className+=" "+n)},t.removeCssClass=function(e,t){var n=e.className.split(/\s+/g);for(;;){var r=n.indexOf(t);if(r==-1)break;n.splice(r,1)}e.className=n.join(" ")},t.toggleCssClass=function(e,t){var n=e.className.split(/\s+/g),r=!0;for(;;){var i=n.indexOf(t);if(i==-1)break;r=!1,n.splice(i,1)}return r&&n.push(t),e.className=n.join(" "),r},t.setCssClass=function(e,n,r){r?t.addCssClass(e,n):t.removeCssClass(e,n)},t.hasCssString=function(e,t){var n=0,r;t=t||document;if(t.createStyleSheet&&(r=t.styleSheets)){while(n<r.length)if(r[n++].owningElement.id===e)return!0}else if(r=t.getElementsByTagName("style"))while(n<r.length)if(r[n++].id===e)return!0;return!1},t.importCssString=function(n,i,s){s=s||document;if(i&&t.hasCssString(i,s))return null;var o;s.createStyleSheet?(o=s.createStyleSheet(),o.cssText=n,i&&(o.owningElement.id=i)):(o=s.createElementNS?s.createElementNS(r,"style"):s.createElement("style"),o.appendChild(s.createTextNode(n)),i&&(o.id=i),t.getDocumentHead(s).appendChild(o))},t.importCssStylsheet=function(e,n){if(n.createStyleSheet)n.createStyleSheet(e);else{var r=t.createElement("link");r.rel="stylesheet",r.href=e,t.getDocumentHead(n).appendChild(r)}},t.getInnerWidth=function(e){return parseInt(t.computedStyle(e,"paddingLeft"),10)+parseInt(t.computedStyle(e,"paddingRight"),10)+e.clientWidth},t.getInnerHeight=function(e){return parseInt(t.computedStyle(e,"paddingTop"),10)+parseInt(t.computedStyle(e,"paddingBottom"),10)+e.clientHeight},window.pageYOffset!==undefined?(t.getPageScrollTop=function(){return window.pageYOffset},t.getPageScrollLeft=function(){return window.pageXOffset}):(t.getPageScrollTop=function(){return document.body.scrollTop},t.getPageScrollLeft=function(){return document.body.scrollLeft}),window.getComputedStyle?t.computedStyle=function(e,t){return t?(window.getComputedStyle(e,"")||{})[t]||"":window.getComputedStyle(e,"")||{}}:t.computedStyle=function(e,t){return t?e.currentStyle[t]:e.currentStyle},t.scrollbarWidth=function(e){var n=t.createElement("ace_inner");n.style.width="100%",n.style.minWidth="0px",n.style.height="200px",n.style.display="block";var r=t.createElement("ace_outer"),i=r.style;i.position="absolute",i.left="-10000px",i.overflow="hidden",i.width="200px",i.minWidth="0px",i.height="150px",i.display="block",r.appendChild(n);var s=e.documentElement;s.appendChild(r);var o=n.offsetWidth;i.overflow="scroll";var u=n.offsetWidth;return o==u&&(u=r.clientWidth),s.removeChild(r),o-u},t.setInnerHtml=function(e,t){var n=e.cloneNode(!1);return n.innerHTML=t,e.parentNode.replaceChild(n,e),n},"textContent"in document.documentElement?(t.setInnerText=function(e,t){e.textContent=t},t.getInnerText=function(e){return e.textContent}):(t.setInnerText=function(e,t){e.innerText=t},t.getInnerText=function(e){return e.innerText}),t.getParentWindow=function(e){return e.defaultView||e.parentWindow},t.getByClassName=function(e,t){t=t||document;var n=t.getElementsByTagName("*"),r=[],i=0,s;while(s=n[i++])s.className==e?r[r.length]=s:null;return r},t.getByAttributeName=function(e,t){t=t||document;var n=t.getElementsByTagName("*"),r=[],i=0,s;while(s=n[i++])s.getAttribute(e)?r[r.length]=s:null;return r},t.callEventOn=function(e,t){if(t[e])t[e]();else if(document.createEvent){var n=document.createEvent("MouseEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}},t.callClickOn=function(e){if(e.click)e.click();else if(document.createEvent){var t=document.createEvent("MouseEvents");t.initEvent("click",!0,!0),e.dispatchEvent(t)}},t.removeToInsertLater=function(e){var t=e.parentNode,n=e.nextSibling;return t.removeChild(e),function(){n?t.insertBefore(e,n):t.appendChild(e)}}})
/** END OF dom **/
,define("ajax",["require","exports","module"],function(require,exports,module){(function(){exports.Ajax=function(options,inputOptions){function httpSuccess(e){try{return!e.status&&location.protocol=="file:"||e.status>=200&&e.status<300||e.status==304||navigator.userAgent.indexOf("Safari")>=0&&typeof e.status=="undefined"}catch(t){}return!1}function httpData(r,type){var ct=r.getResponseHeader("content-type"),data=!type&&ct&&ct.indexOf("xml")>=0;return data=type=="xml"||data?r.responseXML:r.responseText,type=="script"&&eval.call(window,data),data}options={type:options.type||"GET",url:options.url,timeout:options.timeout||5e3,onComplete:options.onComplete||function(){},onError:options.onError||function(){},onSuccess:options.onSuccess||function(){},data:options.data||"",inputOptions:inputOptions};var xml=new XMLHttpRequest;xml.open(options.type,options.url,!0);var timeoutLength=5e3,requestDone=!1;setTimeout(function(){requestDone=!0},timeoutLength),xml.onreadystatechange=function(){xml&&xml.readyState==4&&!requestDone?(httpSuccess(xml)?options.onSuccess(httpData(xml,options.type)):options.onError(options.url),options.onComplete(),xml=null):xml&&xml.readyState==404&&!requestDone&&options.onError(xml.statusText)};try{xml.send()}catch(e1){var p1=document.getElementById("nodePageContent");p1&&(p1.innerHTML="Invalid Deployment Detected: Please ensure you access the bundle directly from your web server (for example through http://localhost if doing local development and testing).  All features of the bundle will not work as expected when opened directly through the local file system.  Please copy all files to a directory within your web root such as JSCharting and load http://localhost/JSCharting")}}})()}),
/** START OF esprima **/
/** @preserve
Copyright (C) 2013 Ariya Hidayat <ariya.hidayat@gmail.com>
Copyright (C) 2013 Thaddee Tyl <thaddee.tyl@gmail.com>
Copyright (C) 2013 Mathias Bynens <mathias@qiwi.be>
Copyright (C) 2012 Ariya Hidayat <ariya.hidayat@gmail.com>
Copyright (C) 2012 Mathias Bynens <mathias@qiwi.be>
Copyright (C) 2012 Joost-Wim Boekesteijn <joost-wim@boekesteijn.nl>
Copyright (C) 2012 Kris Kowal <kris.kowal@cixar.com>
Copyright (C) 2012 Yusuke Suzuki <utatane.tea@gmail.com>
Copyright (C) 2012 Arpad Borsos <arpad.borsos@googlemail.com>
Copyright (C) 2011 Ariya Hidayat <ariya.hidayat@gmail.com>

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

* Redistributions of source code must retain the above copyright
notice, this list of conditions and the following disclaimer.
* Redistributions in binary form must reproduce the above copyright
notice, this list of conditions and the following disclaimer in the
documentation and/or other materials provided with the distribution.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/
function(e,t){typeof define=="function"&&define.amd?define("../esprima",["exports"],t):typeof exports!="undefined"?t(exports):t(e.esprima={})}(this,function(e){function b(e,t){if(!e)throw new Error("ASSERT: "+t)}function w(e){return e>=48&&e<=57}function E(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function S(e){return"01234567".indexOf(e)>=0}function x(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function T(e){return e===10||e===13||e===8232||e===8233}function N(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&u.NonAsciiIdentifierStart.test(String.fromCharCode(e))}function C(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&u.NonAsciiIdentifierPart.test(String.fromCharCode(e))}function k(e){switch(e){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function L(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function A(e){return e==="eval"||e==="arguments"}function O(e){if(l&&L(e))return!0;switch(e.length){case 2:return e==="if"||e==="in"||e==="do";case 3:return e==="var"||e==="for"||e==="new"||e==="try"||e==="let";case 4:return e==="this"||e==="else"||e==="case"||e==="void"||e==="with"||e==="enum";case 5:return e==="while"||e==="break"||e==="catch"||e==="throw"||e==="const"||e==="yield"||e==="class"||e==="super";case 6:return e==="return"||e==="typeof"||e==="delete"||e==="switch"||e==="export"||e==="import";case 7:return e==="default"||e==="finally"||e==="extends";case 8:return e==="function"||e==="continue"||e==="debugger";case 10:return e==="instanceof";default:return!1}}function M(e,t,n,r,i){var s,o;b(typeof n=="number","Comment must have valid position");if(g.lastCommentStart>=n)return;g.lastCommentStart=n,s={type:e,value:t},y.range&&(s.range=[n,r]),y.loc&&(s.loc=i),y.comments.push(s),y.attachComment&&(o={comment:s,leading:null,trailing:null,range:[n,r]},y.pendingComments.push(o))}function _(){var e,t,n,r;e=c-2,t={start:{line:h,column:c-p-2}};while(c<d){n=f.charCodeAt(c),++c;if(T(n)){y.comments&&(r=f.slice(e+2,c-1),t.end={line:h,column:c-p-1},M("Line",r,e,c-1,t)),n===13&&f.charCodeAt(c)===10&&++c,++h,p=c;return}}y.comments&&(r=f.slice(e+2,c),t.end={line:h,column:c-p},M("Line",r,e,c,t))}function D(){var e,t,n,r;y.comments&&(e=c-2,t={start:{line:h,column:c-p-2}});while(c<d){n=f.charCodeAt(c);if(T(n))n===13&&f.charCodeAt(c+1)===10&&++c,++h,++c,p=c,c>=d&&Z({},o.UnexpectedToken,"ILLEGAL");else if(n===42){if(f.charCodeAt(c+1)===47){++c,++c,y.comments&&(r=f.slice(e+2,c-2),t.end={line:h,column:c-p},M("Block",r,e,c,t));return}++c}else++c}Z({},o.UnexpectedToken,"ILLEGAL")}function P(){var e,t;t=c===0;while(c<d){e=f.charCodeAt(c);if(x(e))++c;else if(T(e))++c,e===13&&f.charCodeAt(c)===10&&++c,++h,p=c,t=!0;else if(e===47){e=f.charCodeAt(c+1);if(e===47)++c,++c,_(),t=!0;else{if(e!==42)break;++c,++c,D()}}else if(t&&e===45){if(f.charCodeAt(c+1)!==45||f.charCodeAt(c+2)!==62)break;c+=3,_()}else{if(e!==60)break;if(f.slice(c+1,c+4)!=="!--")break;++c,++c,++c,++c,_()}}}function H(e){var t,n,r,i=0;n=e==="u"?4:2;for(t=0;t<n;++t){if(!(c<d&&E(f[c])))return"";r=f[c++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())}return String.fromCharCode(i)}function B(){var e,t;e=f.charCodeAt(c++),t=String.fromCharCode(e),e===92&&(f.charCodeAt(c)!==117&&Z({},o.UnexpectedToken,"ILLEGAL"),++c,e=H("u"),(!e||e==="\\"||!N(e.charCodeAt(0)))&&Z({},o.UnexpectedToken,"ILLEGAL"),t=e);while(c<d){e=f.charCodeAt(c);if(!C(e))break;++c,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),f.charCodeAt(c)!==117&&Z({},o.UnexpectedToken,"ILLEGAL"),++c,e=H("u"),(!e||e==="\\"||!C(e.charCodeAt(0)))&&Z({},o.UnexpectedToken,"ILLEGAL"),t+=e)}return t}function j(){var e,t;e=c++;while(c<d){t=f.charCodeAt(c);if(t===92)return c=e,B();if(!C(t))break;++c}return f.slice(e,c)}function F(){var e,n,r;return e=c,n=f.charCodeAt(c)===92?B():j(),n.length===1?r=t.Identifier:O(n)?r=t.Keyword:n==="null"?r=t.NullLiteral:n==="true"||n==="false"?r=t.BooleanLiteral:r=t.Identifier,{type:r,value:n,lineNumber:h,lineStart:p,range:[e,c]}}function I(){var e=c,n=f.charCodeAt(c),r,i=f[c],s,u,a;switch(n){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++c,y.tokenize&&(n===40?y.openParenToken=y.tokens.length:n===123&&(y.openCurlyToken=y.tokens.length)),{type:t.Punctuator,value:String.fromCharCode(n),lineNumber:h,lineStart:p,range:[e,c]};default:r=f.charCodeAt(c+1);if(r===61)switch(n){case 37:case 38:case 42:case 43:case 45:case 47:case 60:case 62:case 94:case 124:return c+=2,{type:t.Punctuator,value:String.fromCharCode(n)+String.fromCharCode(r),lineNumber:h,lineStart:p,range:[e,c]};case 33:case 61:return c+=2,f.charCodeAt(c)===61&&++c,{type:t.Punctuator,value:f.slice(e,c),lineNumber:h,lineStart:p,range:[e,c]};default:}}s=f[c+1],u=f[c+2],a=f[c+3];if(i===">"&&s===">"&&u===">"&&a==="=")return c+=4,{type:t.Punctuator,value:">>>=",lineNumber:h,lineStart:p,range:[e,c]};if(i===">"&&s===">"&&u===">")return c+=3,{type:t.Punctuator,value:">>>",lineNumber:h,lineStart:p,range:[e,c]};if(i==="<"&&s==="<"&&u==="=")return c+=3,{type:t.Punctuator,value:"<<=",lineNumber:h,lineStart:p,range:[e,c]};if(i===">"&&s===">"&&u==="=")return c+=3,{type:t.Punctuator,value:">>=",lineNumber:h,lineStart:p,range:[e,c]};if(i===s&&"+-<>&|".indexOf(i)>=0)return c+=2,{type:t.Punctuator,value:i+s,lineNumber:h,lineStart:p,range:[e,c]};if("<>=!+-*%&|^/".indexOf(i)>=0)return++c,{type:t.Punctuator,value:i,lineNumber:h,lineStart:p,range:[e,c]};Z({},o.UnexpectedToken,"ILLEGAL")}function q(e){var n="";while(c<d){if(!E(f[c]))break;n+=f[c++]}return n.length===0&&Z({},o.UnexpectedToken,"ILLEGAL"),N(f.charCodeAt(c))&&Z({},o.UnexpectedToken,"ILLEGAL"),{type:t.NumericLiteral,value:parseInt("0x"+n,16),lineNumber:h,lineStart:p,range:[e,c]}}function R(e){var n="0"+f[c++];while(c<d){if(!S(f[c]))break;n+=f[c++]}return(N(f.charCodeAt(c))||w(f.charCodeAt(c)))&&Z({},o.UnexpectedToken,"ILLEGAL"),{type:t.NumericLiteral,value:parseInt(n,8),octal:!0,lineNumber:h,lineStart:p,range:[e,c]}}function U(){var e,n,r;r=f[c],b(w(r.charCodeAt(0))||r===".","Numeric literal must start with a decimal digit or a decimal point"),n=c,e="";if(r!=="."){e=f[c++],r=f[c];if(e==="0"){if(r==="x"||r==="X")return++c,q(n);if(S(r))return R(n);r&&w(r.charCodeAt(0))&&Z({},o.UnexpectedToken,"ILLEGAL")}while(w(f.charCodeAt(c)))e+=f[c++];r=f[c]}if(r==="."){e+=f[c++];while(w(f.charCodeAt(c)))e+=f[c++];r=f[c]}if(r==="e"||r==="E"){e+=f[c++],r=f[c];if(r==="+"||r==="-")e+=f[c++];if(w(f.charCodeAt(c)))while(w(f.charCodeAt(c)))e+=f[c++];else Z({},o.UnexpectedToken,"ILLEGAL")}return N(f.charCodeAt(c))&&Z({},o.UnexpectedToken,"ILLEGAL"),{type:t.NumericLiteral,value:parseFloat(e),lineNumber:h,lineStart:p,range:[n,c]}}function z(){var e="",n,r,i,s,u,a,l=!1;n=f[c],b(n==="'"||n==='"',"String literal must starts with a quote"),r=c,++c;while(c<d){i=f[c++];if(i===n){n="";break}if(i==="\\"){i=f[c++];if(!i||!T(i.charCodeAt(0)))switch(i){case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="	";break;case"u":case"x":a=c,u=H(i),u?e+=u:(c=a,e+=i);break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="";break;default:S(i)?(s="01234567".indexOf(i),s!==0&&(l=!0),c<d&&S(f[c])&&(l=!0,s=s*8+"01234567".indexOf(f[c++]),"0123".indexOf(i)>=0&&c<d&&S(f[c])&&(s=s*8+"01234567".indexOf(f[c++]))),e+=String.fromCharCode(s)):e+=i}else++h,i==="\r"&&f[c]==="\n"&&++c}else{if(T(i.charCodeAt(0)))break;e+=i}}return n!==""&&Z({},o.UnexpectedToken,"ILLEGAL"),{type:t.StringLiteral,value:e,octal:l,lineNumber:h,lineStart:p,range:[r,c]}}function W(){var e,n,r,i,s,u,a=!1,l,v=!1;m=null,P(),r=c,n=f[c],b(n==="/","Regular expression literal must start with a slash"),e=f[c++];while(c<d){n=f[c++],e+=n;if(n==="\\")n=f[c++],T(n.charCodeAt(0))&&Z({},o.UnterminatedRegExp),e+=n;else if(T(n.charCodeAt(0)))Z({},o.UnterminatedRegExp);else if(a)n==="]"&&(a=!1);else{if(n==="/"){v=!0;break}n==="["&&(a=!0)}}v||Z({},o.UnterminatedRegExp),i=e.substr(1,e.length-2),s="";while(c<d){n=f[c];if(!C(n.charCodeAt(0)))break;++c;if(n==="\\"&&c<d){n=f[c];if(n==="u"){++c,l=c,n=H("u");if(n){s+=n;for(e+="\\u";l<c;++l)e+=f[l]}else c=l,s+="u",e+="\\u"}else e+="\\"}else s+=n,e+=n}try{u=new RegExp(i,s)}catch(g){Z({},o.InvalidRegExp)}return G(),y.tokenize?{type:t.RegularExpression,value:u,lineNumber:h,lineStart:p,range:[r,c]}:{literal:e,value:u,range:[r,c]}}function X(){var e,t,n,r;return P(),e=c,t={start:{line:h,column:c-p}},n=W(),t.end={line:h,column:c-p},y.tokenize||(y.tokens.length>0&&(r=y.tokens[y.tokens.length-1],r.range[0]===e&&r.type==="Punctuator"&&(r.value==="/"||r.value==="/=")&&y.tokens.pop()),y.tokens.push({type:"RegularExpression",value:n.literal,range:[e,c],loc:t})),n}function V(e){return e.type===t.Identifier||e.type===t.Keyword||e.type===t.BooleanLiteral||e.type===t.NullLiteral}function $(){var e,t;e=y.tokens[y.tokens.length-1];if(!e)return X();if(e.type==="Punctuator"){if(e.value===")")return t=y.tokens[y.openParenToken-1],!t||t.type!=="Keyword"||t.value!=="if"&&t.value!=="while"&&t.value!=="for"&&t.value!=="with"?I():X();if(e.value==="}"){if(y.tokens[y.openCurlyToken-3]&&y.tokens[y.openCurlyToken-3].type==="Keyword"){t=y.tokens[y.openCurlyToken-4];if(!t)return I()}else{if(!y.tokens[y.openCurlyToken-4]||y.tokens[y.openCurlyToken-4].type!=="Keyword")return I();t=y.tokens[y.openCurlyToken-5];if(!t)return X()}return r.indexOf(t.value)>=0?I():X()}return X()}return e.type==="Keyword"?X():I()}function J(){var e;return P(),c>=d?{type:t.EOF,lineNumber:h,lineStart:p,range:[c,c]}:(e=f.charCodeAt(c),e===40||e===41||e===58?I():e===39||e===34?z():N(e)?F():e===46?w(f.charCodeAt(c+1))?U():I():w(e)?U():y.tokenize&&e===47?$():I())}function K(){var e,r,i,s,o;return P(),e=c,r={start:{line:h,column:c-p}},i=J(),r.end={line:h,column:c-p},i.type!==t.EOF&&(s=[i.range[0],i.range[1]],o=f.slice(i.range[0],i.range[1]),y.tokens.push({type:n[i.type],value:o,range:s,loc:r})),i}function Q(){var e;return e=m,c=e.range[1],h=e.lineNumber,p=e.lineStart,m=typeof y.tokens!="undefined"?K():J(),c=e.range[1],h=e.lineNumber,p=e.lineStart,e}function G(){var e,t,n;e=c,t=h,n=p,m=typeof y.tokens!="undefined"?K():J(),c=e,h=t,p=n}function Y(){var e,t,n,r;return e=c,t=h,n=p,P(),r=h!==t,c=e,h=t,p=n,r}function Z(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,function(e,t){return b(t<r.length,"Message reference must be in range"),r[t]});throw typeof e.lineNumber=="number"?(n=new Error("Line "+e.lineNumber+": "+i),n.index=e.range[0],n.lineNumber=e.lineNumber,n.column=e.range[0]-p+1):(n=new Error("Line "+h+": "+i),n.index=c,n.lineNumber=h,n.column=c-p+1),n.description=i,n}function et(){try{Z.apply(null,arguments)}catch(e){if(!y.errors)throw e;y.errors.push(e)}}function tt(e){e.type===t.EOF&&Z(e,o.UnexpectedEOS),e.type===t.NumericLiteral&&Z(e,o.UnexpectedNumber),e.type===t.StringLiteral&&Z(e,o.UnexpectedString),e.type===t.Identifier&&Z(e,o.UnexpectedIdentifier);if(e.type===t.Keyword){if(k(e.value))Z(e,o.UnexpectedReserved);else if(l&&L(e.value)){et(e,o.StrictReservedWord);return}Z(e,o.UnexpectedToken,e.value)}Z(e,o.UnexpectedToken,e.value)}function nt(e){var n=Q();(n.type!==t.Punctuator||n.value!==e)&&tt(n)}function rt(e){var n=Q();(n.type!==t.Keyword||n.value!==e)&&tt(n)}function it(e){return m.type===t.Punctuator&&m.value===e}function st(e){return m.type===t.Keyword&&m.value===e}function ot(){var e;return m.type!==t.Punctuator?!1:(e=m.value,e==="="||e==="*="||e==="/="||e==="%="||e==="+="||e==="-="||e==="<<="||e===">>="||e===">>>="||e==="&="||e==="^="||e==="|=")}function ut(){var e;if(f.charCodeAt(c)===59){Q();return}e=h,P();if(h!==e)return;if(it(";")){Q();return}m.type!==t.EOF&&!it("}")&&tt(m)}function at(e){return e.type===i.Identifier||e.type===i.MemberExpression}function ft(){var e=[];nt("[");while(!it("]"))it(",")?(Q(),e.push(null)):(e.push(Lt()),it("]")||nt(","));return nt("]"),v.createArrayExpression(e)}function lt(e,t){var n,r;return n=l,P(),v.markStart(),r=tn(),t&&l&&A(e[0].name)&&et(t,o.StrictParamName),l=n,v.markEnd(v.createFunctionExpression(null,e,[],r))}function ct(){var e;return P(),v.markStart(),e=Q(),e.type===t.StringLiteral||e.type===t.NumericLiteral?(l&&e.octal&&et(e,o.StrictOctalLiteral),v.markEnd(v.createLiteral(e))):v.markEnd(v.createIdentifier(e.value))}function ht(){var e,n,r,i,s;e=m,P(),v.markStart();if(e.type===t.Identifier)return r=ct(),e.value==="get"&&!it(":")?(n=ct(),nt("("),nt(")"),i=lt([]),v.markEnd(v.createProperty("get",n,i))):e.value==="set"&&!it(":")?(n=ct(),nt("("),e=m,e.type!==t.Identifier?(nt(")"),et(e,o.UnexpectedToken,e.value),i=lt([])):(s=[_t()],nt(")"),i=lt(s,e)),v.markEnd(v.createProperty("set",n,i))):(nt(":"),i=Lt(),v.markEnd(v.createProperty("init",r,i)));if(e.type!==t.EOF&&e.type!==t.Punctuator)return n=ct(),nt(":"),i=Lt(),v.markEnd(v.createProperty("init",n,i));tt(e)}function pt(){var e=[],t,n,r,u,a={},f=String;nt("{");while(!it("}"))t=ht(),t.key.type===i.Identifier?n=t.key.name:n=f(t.key.value),u=t.kind==="init"?s.Data:t.kind==="get"?s.Get:s.Set,r="$"+n,Object.prototype.hasOwnProperty.call(a,r)?(a[r]===s.Data?l&&u===s.Data?et({},o.StrictDuplicateProperty):u!==s.Data&&et({},o.AccessorDataProperty):u===s.Data?et({},o.AccessorDataProperty):a[r]&u&&et({},o.AccessorGetSet),a[r]|=u):a[r]=u,e.push(t),it("}")||nt(",");return nt("}"),GLOBAL.properties.push.apply(GLOBAL.properties,e),v.createObjectExpression(e)}function dt(){var e;return nt("("),e=At(),nt(")"),e}function vt(){var e,n,r;if(it("("))return dt();e=m.type,v.markStart();if(e===t.Identifier)r=v.createIdentifier(Q().value);else if(e===t.StringLiteral||e===t.NumericLiteral)l&&m.octal&&et(m,o.StrictOctalLiteral),r=v.createLiteral(Q());else if(e===t.Keyword)st("this")?(Q(),r=v.createThisExpression()):st("function")&&(r=sn());else if(e===t.BooleanLiteral)n=Q(),n.value=n.value==="true",r=v.createLiteral(n);else if(e===t.NullLiteral)n=Q(),n.value=null,r=v.createLiteral(n);else if(it("["))r=ft();else if(it("{"))r=pt();else if(it("/")||it("/="))typeof y.tokens!="undefined"?r=v.createLiteral(X()):r=v.createLiteral(W());if(r)return v.markEnd(r);tt(Q())}function mt(){var e=[];nt("(");if(!it(")"))while(c<d){e.push(Lt());if(it(")"))break;nt(",")}return nt(")"),e}function gt(){var e;return v.markStart(),e=Q(),V(e)||tt(e),v.markEnd(v.createIdentifier(e.value))}function yt(){return nt("."),gt()}function bt(){var e;return nt("["),e=At(),nt("]"),e}function wt(){var e,t;return v.markStart(),rt("new"),e=St(),t=it("(")?mt():[],v.markEnd(v.createNewExpression(e,t))}function Et(){var e,t,n,r,i;e=hn(),t=g.allowIn,g.allowIn=!0,n=st("new")?wt():vt(),g.allowIn=t;while(it(".")||it("[")||it("("))it("(")?(r=mt(),n=v.createCallExpression(n,r)):it("[")?(i=bt(),n=v.createMemberExpression("[",n,i)):(i=yt(),n=v.createMemberExpression(".",n,i)),e&&(e.end(),e.apply(n));return n}function St(){var e,t,n,r;e=hn(),t=g.allowIn,n=st("new")?wt():vt(),g.allowIn=t;while(it(".")||it("["))it("[")?(r=bt(),n=v.createMemberExpression("[",n,r)):(r=yt(),n=v.createMemberExpression(".",n,r)),e&&(e.end(),e.apply(n));return n}function xt(){var e,n;return v.markStart(),e=Et(),m.type===t.Punctuator&&(it("++")||it("--"))&&!Y()&&(l&&e.type===i.Identifier&&A(e.name)&&et({},o.StrictLHSPostfix),at(e)||et({},o.InvalidLHSInAssignment),n=Q(),e=v.createPostfixExpression(n.value,e)),v.markEndIf(e)}function Tt(){var e,n;return v.markStart(),m.type!==t.Punctuator&&m.type!==t.Keyword?n=xt():it("++")||it("--")?(e=Q(),n=Tt(),l&&n.type===i.Identifier&&A(n.name)&&et({},o.StrictLHSPrefix),at(n)||et({},o.InvalidLHSInAssignment),n=v.createUnaryExpression(e.value,n)):it("+")||it("-")||it("~")||it("!")?(e=Q(),n=Tt(),n=v.createUnaryExpression(e.value,n)):st("delete")||st("void")||st("typeof")?(e=Q(),n=Tt(),n=v.createUnaryExpression(e.value,n),l&&n.operator==="delete"&&n.argument.type===i.Identifier&&et({},o.StrictDelete)):n=xt(),v.markEndIf(n)}function Nt(e,n){var r=0;if(e.type!==t.Punctuator&&e.type!==t.Keyword)return 0;switch(e.value){case"||":r=1;break;case"&&":r=2;break;case"|":r=3;break;case"^":r=4;break;case"&":r=5;break;case"==":case"!=":case"===":case"!==":r=6;break;case"<":case">":case"<=":case">=":case"instanceof":r=7;break;case"in":r=n?7:0;break;case"<<":case">>":case">>>":r=8;break;case"+":case"-":r=9;break;case"*":case"/":case"%":r=11;break;default:}return r}function Ct(){var e,t,n,r,i,s,o,u,a,f;e=hn(),a=Tt(),r=m,i=Nt(r,g.allowIn);if(i===0)return a;r.prec=i,Q(),t=[e,hn()],o=Tt(),s=[a,r,o];while((i=Nt(m,g.allowIn))>0){while(s.length>2&&i<=s[s.length-2].prec)o=s.pop(),u=s.pop().value,a=s.pop(),n=v.createBinaryExpression(u,a,o),t.pop(),e=t.pop(),e&&(e.end(),e.apply(n)),s.push(n),t.push(e);r=Q(),r.prec=i,s.push(r),t.push(hn()),n=Tt(),s.push(n)}f=s.length-1,n=s[f],t.pop();while(f>1)n=v.createBinaryExpression(s[f-1].value,s[f-2],n),f-=2,e=t.pop(),e&&(e.end(),e.apply(n));return n}function kt(){var e,t,n,r;return v.markStart(),e=Ct(),it("?")?(Q(),t=g.allowIn,g.allowIn=!0,n=Lt(),g.allowIn=t,nt(":"),r=Lt(),e=v.markEnd(v.createConditionalExpression(e,n,r))):v.markEnd({}),e}function Lt(){var e,t,n,r;return e=m,v.markStart(),r=t=kt(),ot()&&(at(t)||et({},o.InvalidLHSInAssignment),l&&t.type===i.Identifier&&A(t.name)&&et(e,o.StrictLHSAssignment),e=Q(),n=Lt(),r=v.createAssignmentExpression(e.value,t,n)),v.markEndIf(r)}function At(){var e;v.markStart(),e=Lt();if(it(",")){e=v.createSequenceExpression([e]);while(c<d){if(!it(","))break;Q(),e.expressions.push(Lt())}}return v.markEndIf(e)}function Ot(){var e=[],t;while(c<d){if(it("}"))break;t=on();if(typeof t=="undefined")break;e.push(t)}return e}function Mt(){var e;return P(),v.markStart(),nt("{"),e=Ot(),nt("}"),v.markEnd(v.createBlockStatement(e))}function _t(){var e;return P(),v.markStart(),e=Q(),e.type!==t.Identifier&&tt(e),v.markEnd(v.createIdentifier(e.value))}function Dt(e){var t=null,n;return P(),v.markStart(),n=_t(),l&&A(n.name)&&et({},o.StrictVarName),e==="const"?(nt("="),t=Lt()):it("=")&&(Q(),t=Lt()),v.markEnd(v.createVariableDeclarator(n,t))}function Pt(e){var t=[];do{t.push(Dt(e));if(!it(","))break;Q()}while(c<d);return GLOBAL.varDeclarations=GLOBAL.varDeclarations.concat(t),t}function Ht(){var e;return rt("var"),e=Pt(),ut(),v.createVariableDeclaration(e,"var")}function Bt(e){var t;return P(),v.markStart(),rt(e),t=Pt(e),ut(),v.markEnd(v.createVariableDeclaration(t,e))}function jt(){return nt(";"),v.createEmptyStatement()}function Ft(){var e=At();return ut(),v.createExpressionStatement(e)}function It(){var e,t,n;return rt("if"),nt("("),e=At(),nt(")"),t=en(),st("else")?(Q(),n=en()):n=null,v.createIfStatement(e,t,n)}function qt(){var e,t,n;return rt("do"),n=g.inIteration,g.inIteration=!0,e=en(),g.inIteration=n,rt("while"),nt("("),t=At(),nt(")"),it(";")&&Q(),v.createDoWhileStatement(e,t)}function Rt(){var e,t,n;return rt("while"),nt("("),e=At(),nt(")"),n=g.inIteration,g.inIteration=!0,t=en(),g.inIteration=n,v.createWhileStatement(e,t)}function Ut(){var e,t;return v.markStart(),e=Q(),t=Pt(),v.markEnd(v.createVariableDeclaration(t,e.value))}function zt(){var e,t,n,r,i,s,u;return e=t=n=null,rt("for"),nt("("),it(";")?Q():(st("var")||st("let")?(g.allowIn=!1,e=Ut(),g.allowIn=!0,e.declarations.length===1&&st("in")&&(Q(),r=e,i=At(),e=null)):(g.allowIn=!1,e=At(),g.allowIn=!0,st("in")&&(at(e)||et({},o.InvalidLHSInForIn),Q(),r=e,i=At(),e=null)),typeof r=="undefined"&&nt(";")),typeof r=="undefined"&&(it(";")||(t=At()),nt(";"),it(")")||(n=At())),nt(")"),u=g.inIteration,g.inIteration=!0,s=en(),g.inIteration=u,typeof r=="undefined"?v.createForStatement(e,t,n,s):v.createForInStatement(r,i,s)}function Wt(){var e=null,n;return rt("continue"),f.charCodeAt(c)===59?(Q(),g.inIteration||Z({},o.IllegalContinue),v.createContinueStatement(null)):Y()?(g.inIteration||Z({},o.IllegalContinue),v.createContinueStatement(null)):(m.type===t.Identifier&&(e=_t(),n="$"+e.name,Object.prototype.hasOwnProperty.call(g.labelSet,n)||Z({},o.UnknownLabel,e.name)),ut(),e===null&&!g.inIteration&&Z({},o.IllegalContinue),v.createContinueStatement(e))}function Xt(){var e=null,n;return rt("break"),f.charCodeAt(c)===59?(Q(),!g.inIteration&&!g.inSwitch&&Z({},o.IllegalBreak),v.createBreakStatement(null)):Y()?(!g.inIteration&&!g.inSwitch&&Z({},o.IllegalBreak),v.createBreakStatement(null)):(m.type===t.Identifier&&(e=_t(),n="$"+e.name,Object.prototype.hasOwnProperty.call(g.labelSet,n)||Z({},o.UnknownLabel,e.name)),ut(),e===null&&!g.inIteration&&!g.inSwitch&&Z({},o.IllegalBreak),v.createBreakStatement(e))}function Vt(){var e=null;return rt("return"),g.inFunctionBody||et({},o.IllegalReturn),f.charCodeAt(c)===32&&N(f.charCodeAt(c+1))?(e=At(),ut(),v.createReturnStatement(e)):Y()?v.createReturnStatement(null):(it(";")||!it("}")&&m.type!==t.EOF&&(e=At()),ut(),v.createReturnStatement(e))}function $t(){var e,t;return l&&et({},o.StrictModeWith),rt("with"),nt("("),e=At(),nt(")"),t=en(),v.createWithStatement(e,t)}function Jt(){var e,t=[],n;P(),v.markStart(),st("default")?(Q(),e=null):(rt("case"),e=At()),nt(":");while(c<d){if(it("}")||st("default")||st("case"))break;n=en(),t.push(n)}return v.markEnd(v.createSwitchCase(e,t))}function Kt(){var e,t,n,r,i;rt("switch"),nt("("),e=At(),nt(")"),nt("{"),t=[];if(it("}"))return Q(),v.createSwitchStatement(e,t);r=g.inSwitch,g.inSwitch=!0,i=!1;while(c<d){if(it("}"))break;n=Jt(),n.test===null&&(i&&Z({},o.MultipleDefaultsInSwitch),i=!0),t.push(n)}return g.inSwitch=r,nt("}"),v.createSwitchStatement(e,t)}function Qt(){var e;return rt("throw"),Y()&&Z({},o.NewlineAfterThrow),e=At(),ut(),v.createThrowStatement(e)}function Gt(){var e,t;return P(),v.markStart(),rt("catch"),nt("("),it(")")&&tt(m),e=_t(),l&&A(e.name)&&et({},o.StrictCatchVariable),nt(")"),t=Mt(),v.markEnd(v.createCatchClause(e,t))}function Yt(){var e,t=[],n=null;return rt("try"),e=Mt(),st("catch")&&t.push(Gt()),st("finally")&&(Q(),n=Mt()),t.length===0&&!n&&Z({},o.NoCatchOrFinally),v.createTryStatement(e,[],t,n)}function Zt(){return rt("debugger"),ut(),v.createDebuggerStatement()}function en(){var e=m.type,n,r,s;e===t.EOF&&tt(m),P(),v.markStart();if(e===t.Punctuator)switch(m.value){case";":return v.markEnd(jt());case"{":return v.markEnd(Mt());case"(":return v.markEnd(Ft());default:}if(e===t.Keyword)switch(m.value){case"break":return v.markEnd(Xt());case"continue":return v.markEnd(Wt());case"debugger":return v.markEnd(Zt());case"do":return v.markEnd(qt());case"for":return v.markEnd(zt());case"function":return v.markEnd(rn());case"if":return v.markEnd(It());case"return":return v.markEnd(Vt());case"switch":return v.markEnd(Kt());case"throw":return v.markEnd(Qt());case"try":return v.markEnd(Yt());case"var":return v.markEnd(Ht());case"while":return v.markEnd(Rt());case"with":return v.markEnd($t());default:}return n=At(),n.type===i.Identifier&&it(":")?(Q(),s="$"+n.name,Object.prototype.hasOwnProperty.call(g.labelSet,s)&&Z({},o.Redeclaration,"Label",n.name),g.labelSet[s]=!0,r=en(),delete g.labelSet[s],v.markEnd(v.createLabeledStatement(n,r))):(ut(),v.markEnd(v.createExpressionStatement(n)))}function tn(){var e,n=[],r,s,u,a,h,p,y;P(),v.markStart(),nt("{");while(c<d){if(m.type!==t.StringLiteral)break;r=m,e=on(),n.push(e);if(e.expression.type!==i.Literal)break;s=f.slice(r.range[0]+1,r.range[1]-1),s==="use strict"?(l=!0,u&&et(u,o.StrictOctalLiteral)):!u&&r.octal&&(u=r)}a=g.labelSet,h=g.inIteration,p=g.inSwitch,y=g.inFunctionBody,g.labelSet={},g.inIteration=!1,g.inSwitch=!1,g.inFunctionBody=!0;while(c<d){if(it("}"))break;e=on();if(typeof e=="undefined")break;n.push(e)}return nt("}"),g.labelSet=a,g.inIteration=h,g.inSwitch=p,g.inFunctionBody=y,v.markEnd(v.createBlockStatement(n))}function nn(e){var t,n=[],r,i,s,u,a;nt("(");if(!it(")")){s={};while(c<d){r=m,t=_t(),u="$"+r.value,l?(A(r.value)&&(i=r,a=o.StrictParamName),Object.prototype.hasOwnProperty.call(s,u)&&(i=r,a=o.StrictParamDupe)):e||(A(r.value)?(e=r,a=o.StrictParamName):L(r.value)?(e=r,a=o.StrictReservedWord):Object.prototype.hasOwnProperty.call(s,u)&&(e=r,a=o.StrictParamDupe)),n.push(t),s[u]=!0;if(it(")"))break;nt(",")}}return nt(")"),{params:n,stricted:i,firstRestricted:e,message:a}}function rn(){var e,t=[],n,r,i,s,u,a,f;return P(),v.markStart(),rt("function"),r=m,e=_t(),l?A(r.value)&&et(r,o.StrictFunctionName):A(r.value)?(u=r,a=o.StrictFunctionName):L(r.value)&&(u=r,a=o.StrictReservedWord),s=nn(u),t=s.params,i=s.stricted,u=s.firstRestricted,s.message&&(a=s.message),f=l,n=tn(),l&&u&&Z(u,a),l&&i&&et(i,a),l=f,v.markEnd(v.createFunctionDeclaration(e,t,[],n))}function sn(){var e,t=null,n,r,i,s,u=[],a,f;return v.markStart(),rt("function"),it("(")||(e=m,t=_t(),l?A(e.value)&&et(e,o.StrictFunctionName):A(e.value)?(r=e,i=o.StrictFunctionName):L(e.value)&&(r=e,i=o.StrictReservedWord)),s=nn(r),u=s.params,n=s.stricted,r=s.firstRestricted,s.message&&(i=s.message),f=l,a=tn(),l&&r&&Z(r,i),l&&n&&et(n,i),l=f,v.markEnd(v.createFunctionExpression(t,u,[],a))}function on(){if(m.type===t.Keyword)switch(m.value){case"const":case"let":return Bt(m.value);case"function":return rn();default:return en()}if(m.type!==t.EOF)return en()}function un(){var e,n=[],r,s,u;while(c<d){r=m;if(r.type!==t.StringLiteral)break;e=on(),n.push(e);if(e.expression.type!==i.Literal)break;s=f.slice(r.range[0]+1,r.range[1]-1),s==="use strict"?(l=!0,u&&et(u,o.StrictOctalLiteral)):!u&&r.octal&&(u=r)}while(c<d){e=on();if(typeof e=="undefined")break;n.push(e)}return n}function an(){var e;return P(),v.markStart(),l=!1,G(),e=un(),v.markEnd(v.createProgram(e))}function fn(){var e,t,n,r,i;for(e=0;e<y.pendingComments.length;++e)t=y.pendingComments[e],n=t.comment,r=t.leading,r&&(typeof r.leadingComments=="undefined"&&(r.leadingComments=[]),r.leadingComments.push(t.comment)),i=t.trailing,i&&(typeof i.trailingComments=="undefined"&&(i.trailingComments=[]),i.trailingComments.push(t.comment));y.pendingComments=[]}function ln(){var e,t,n,r=[];for(e=0;e<y.tokens.length;++e)t=y.tokens[e],n={type:t.type,value:t.value},y.range&&(n.range=t.range),y.loc&&(n.loc=t.loc),r.push(n);y.tokens=r}function cn(){this.marker=[c,h,c-p,0,0,0]}function hn(){return!y.loc&&!y.range?null:(P(),new cn)}function pn(e,n){var r,i,s;r=String,typeof e!="string"&&!(e instanceof String)&&(e=r(e)),v=a,f=e,c=0,h=f.length>0?1:0,p=0,d=f.length,m=null,g={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},y={},n=n||{},n.tokens=!0,y.tokens=[],y.tokenize=!0,y.openParenToken=-1,y.openCurlyToken=-1,y.range=typeof n.range=="boolean"&&n.range,y.loc=typeof n.loc=="boolean"&&n.loc,typeof n.comment=="boolean"&&n.comment&&(y.comments=[]),typeof n.tolerant=="boolean"&&n.tolerant&&(y.errors=[]),d>0&&typeof f[0]=="undefined"&&e instanceof String&&(f=e.valueOf());try{G();if(m.type===t.EOF)return y.tokens;i=Q();while(m.type!==t.EOF)try{i=Q()}catch(o){i=m;if(y.errors){y.errors.push(o);break}throw o}ln(),s=y.tokens,typeof y.comments!="undefined"&&(s.comments=y.comments),typeof y.errors!="undefined"&&(s.errors=y.errors)}catch(u){throw u}finally{y={}}return s}function dn(e,t){var n,r;r=String,typeof e!="string"&&!(e instanceof String)&&(e=r(e)),v=a,f=e,c=0,h=f.length>0?1:0,p=0,d=f.length,m=null,g={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1,markerStack:[]},y={},typeof t!="undefined"&&(y.range=typeof t.range=="boolean"&&t.range,y.loc=typeof t.loc=="boolean"&&t.loc,y.attachComment=typeof t.attachComment=="boolean"&&t.attachComment,y.loc&&t.source!==null&&t.source!==undefined&&(y.source=r(t.source)),typeof t.tokens=="boolean"&&t.tokens&&(y.tokens=[]),typeof t.comment=="boolean"&&t.comment&&(y.comments=[]),typeof t.tolerant=="boolean"&&t.tolerant&&(y.errors=[]),y.attachComment&&(y.range=!0,y.pendingComments=[],y.comments=[])),d>0&&typeof f[0]=="undefined"&&e instanceof String&&(f=e.valueOf());try{n=an(),typeof y.comments!="undefined"&&(n.comments=y.comments),typeof y.tokens!="undefined"&&(ln(),n.tokens=y.tokens),typeof y.errors!="undefined"&&(n.errors=y.errors),y.attachComment&&fn()}catch(i){throw i}finally{y={}}return n}var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y;t={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9},n={},n[t.BooleanLiteral]="Boolean",n[t.EOF]="<end>",n[t.Identifier]="Identifier",n[t.Keyword]="Keyword",n[t.NullLiteral]="Null",n[t.NumericLiteral]="Numeric",n[t.Punctuator]="Punctuator",n[t.StringLiteral]="String",n[t.RegularExpression]="RegularExpression",r=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],i={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},s={Data:1,Get:2,Set:4},o={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},u={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")},a={name:"SyntaxTree",markStart:function(){y.loc&&(g.markerStack.push(c-p),g.markerStack.push(h)),y.range&&g.markerStack.push(c)},processComment:function(e){var t,n,r,s,o;if(typeof e.type=="undefined"||e.type===i.Program)return;G();for(t=0;t<y.pendingComments.length;++t)n=y.pendingComments[t],e.range[0]>=n.comment.range[1]&&(o=n.leading,o?(r=o.range[0],s=o.range[1]-r,e.range[0]<=r&&e.range[1]-e.range[0]>=s&&(n.leading=e)):n.leading=e),e.range[1]<=n.comment.range[0]&&(o=n.trailing,o?(r=o.range[0],s=o.range[1]-r,e.range[0]<=r&&e.range[1]-e.range[0]>=s&&(n.trailing=e)):n.trailing=e)},markEnd:function(e){return y.range&&(e.range=[g.markerStack.pop(),c]),y.loc&&(e.loc={start:{line:g.markerStack.pop(),column:g.markerStack.pop()},end:{line:h,column:c-p}},this.postProcess(e)),y.attachComment&&this.processComment(e),e},markEndIf:function(e){return e.range||e.loc?(y.loc&&(g.markerStack.pop(),g.markerStack.pop()),y.range&&g.markerStack.pop()):this.markEnd(e),e},postProcess:function(e){return y.source&&(e.loc.source=y.source),e},createArrayExpression:function(e){return{type:i.ArrayExpression,elements:e}},createAssignmentExpression:function(e,t,n){return{type:i.AssignmentExpression,operator:e,left:t,right:n}},createBinaryExpression:function(e,t,n){var r=e==="||"||e==="&&"?i.LogicalExpression:i.BinaryExpression;return{type:r,operator:e,left:t,right:n}},createBlockStatement:function(e){return{type:i.BlockStatement,body:e}},createBreakStatement:function(e){return{type:i.BreakStatement,label:e}},createCallExpression:function(e,t){return{type:i.CallExpression,callee:e,arguments:t}},createCatchClause:function(e,t){return{type:i.CatchClause,param:e,body:t}},createConditionalExpression:function(e,t,n){return{type:i.ConditionalExpression,test:e,consequent:t,alternate:n}},createContinueStatement:function(e){return{type:i.ContinueStatement,label:e}},createDebuggerStatement:function(){return{type:i.DebuggerStatement}},createDoWhileStatement:function(e,t){return{type:i.DoWhileStatement,body:e,test:t}},createEmptyStatement:function(){return{type:i.EmptyStatement}},createExpressionStatement:function(e){return{type:i.ExpressionStatement,expression:e}},createForStatement:function(e,t,n,r){return{type:i.ForStatement,init:e,test:t,update:n,body:r}},createForInStatement:function(e,t,n){return{type:i.ForInStatement,left:e,right:t,body:n,each:!1}},createFunctionDeclaration:function(e,t,n,r){return{type:i.FunctionDeclaration,id:e,params:t,defaults:n,body:r,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(e,t,n,r){return{type:i.FunctionExpression,id:e,params:t,defaults:n,body:r,rest:null,generator:!1,expression:!1}},createIdentifier:function(e){return{type:i.Identifier,name:e}},createIfStatement:function(e,t,n){return{type:i.IfStatement,test:e,consequent:t,alternate:n}},createLabeledStatement:function(e,t){return{type:i.LabeledStatement,label:e,body:t}},createLiteral:function(e){return{type:i.Literal,value:e.value,raw:f.slice(e.range[0],e.range[1])}},createMemberExpression:function(e,t,n){return{type:i.MemberExpression,computed:e==="[",object:t,property:n}},createNewExpression:function(e,t){return{type:i.NewExpression,callee:e,arguments:t}},createObjectExpression:function(e){return{type:i.ObjectExpression,properties:e}},createPostfixExpression:function(e,t){return{type:i.UpdateExpression,operator:e,argument:t,prefix:!1}},createProgram:function(e){return{type:i.Program,body:e}},createProperty:function(e,t,n){var r={type:i.Property,key:t,value:n,kind:e};return r},createReturnStatement:function(e){return{type:i.ReturnStatement,argument:e}},createSequenceExpression:function(e){return{type:i.SequenceExpression,expressions:e}},createSwitchCase:function(e,t){return{type:i.SwitchCase,test:e,consequent:t}},createSwitchStatement:function(e,t){return{type:i.SwitchStatement,discriminant:e,cases:t}},createThisExpression:function(){return{type:i.ThisExpression}},createThrowStatement:function(e){return{type:i.ThrowStatement,argument:e}},createTryStatement:function(e,t,n,r){return{type:i.TryStatement,block:e,guardedHandlers:t,handlers:n,finalizer:r}},createUnaryExpression:function(e,t){return e==="++"||e==="--"?{type:i.UpdateExpression,operator:e,argument:t,prefix:!0}:{type:i.UnaryExpression,operator:e,argument:t,prefix:!0}},createVariableDeclaration:function(e,t){return{type:i.VariableDeclaration,declarations:e,kind:t}},createVariableDeclarator:function(e,t){return{type:i.VariableDeclarator,id:e,init:t}},createWhileStatement:function(e,t){return{type:i.WhileStatement,test:e,body:t}},createWithStatement:function(e,t){return{type:i.WithStatement,object:e,body:t}}},cn.prototype={constructor:cn,end:function(){this.marker[3]=c,this.marker[4]=h,this.marker[5]=c-p},apply:function(e){y.range&&(e.range=[this.marker[0],this.marker[3]]),y.loc&&(e.loc={start:{line:this.marker[1],column:this.marker[2]},end:{line:this.marker[4],column:this.marker[5]}},e=v.postProcess(e)),y.attachComment&&v.processComment(e)}},e.version="1.1.0-dev",e.tokenize=pn,e.parse=dn,e.Syntax=function(){var e,t={};typeof Object.create=="function"&&(t=Object.create(null));for(e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);return typeof Object.freeze=="function"&&Object.freeze(t),t}()})
/** END OF esprima **/
,define("jsonLib",["require","exports","module"],function(e,t,n){function i(e,t,n){if(e&&t&&typeof n!="undefined"){var r=t.split("."),i=e,s=r.length-1,o,u;for(o=0;o<s;o++)u=r[o],i[u]===undefined&&(i[u]=isNaN(r[o+1])?{}:[]),i=i[u];return i[r[s]]=n}}function s(e,t){var n=e,r;if(t){r=t.split(".");for(var i=0;n!==undefined&&i<r.length;i++)n=n[r[i]]}return n}function o(e,t){if(t){var n=t.toUpperCase();for(var r in e){var i=r.toUpperCase();if(n===i)return e[r]}}}function u(e){var t=[],n=0;for(t[n++]in e);return t}function a(e){return e.replace(/\[([0-9]+)\]/g,".$1")}function f(e){return typeof e===r?!1:!0}function l(){var e=arguments,t,n,i=e.length;for(t=0;t<i;t++){n=e[t];if(typeof n!==r&&n!==null)return n}}function c(){function d(e){return m(e)==="object"?!0:!1}function v(e){if(e.pop)return!0}function m(e){var t=typeof e;if(t!==r){if(t==="boolean")return"boolean";if(t==="number")return"number";if(t==="function")return"function";if(e&&e.pop)return"array";if(t==="string")return"string";if(t==="object")return e&&e.getUTCMilliseconds?"date":"object"}return r}var e,t,n,i,s,o,u=arguments[0]||{},a=1,l=arguments.length,h=!1,p;typeof u=="boolean"&&(h=u,u=arguments[1]||{},a=2),typeof u!="object"&&!jQuery.isFunction(u)&&(u={}),l===a&&(u=this,--a);for(;a<l;a++)if((s=arguments[a])!=null)for(i in s){e=u[i],n=s[i],p=d(n);if(!f(e)&&!u.hasOwnProperty[i]&&p&&i!=="array"){u[i]=Object.create(n);continue}if(u===n)continue;h&&n&&(p||(t=v(n)))?(t?(t=!1,o=e&&v(e)?e:[]):o=e&&d(e)?e:{},i==="array"?u[i]=jQuery.extend(h,o,n):u[i]=c(h,o,n)):n!==undefined&&(u[i]=n)}return u}function h(e){return e?typeof e=="string"?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):e:e}function p(e){return e.replace(/^\s+|\s+$/g,"")}var r="undefined";t.evalPath=s,t.setPathVal=i,t.getPropNames=u,t.defined=f,t.jsToPath=a,t.findCaseInsensitiveProperty=o,t.fasterExtend=c,t.pick=l,t.trim=p,t.escapeHtml=h}),define("token_tooltip",["require","exports","module"],function(e,t,n){var r=ace.require("ace/lib/dom"),i=ace.require("ace/lib/event"),s=ace.require("ace/range").Range,o,u=function(e){e=GLOBAL.aceEditor;if(e.tokenTooltip)return;e.tokenTooltip=this,this.editor=e,e.tooltip=o||this.$init(),this.update=this.update.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseOut=this.onMouseOut.bind(this),i.addListener(e.renderer.scroller,"mousemove",this.onMouseMove),i.addListener(e.renderer.content,"mouseout",this.onMouseOut)};(function(){this.token={},this.range=new s,this.update=function(){this.$timer=null;var e=this.editor.renderer;this.lastT-(e.timeStamp||0)>1e3&&(e.rect=null,e.timeStamp=this.lastT,this.maxHeight=innerHeight,this.maxWidth=innerWidth);var t=e.rect||(e.rect=e.scroller.getBoundingClientRect()),n=(this.x+e.scrollLeft-t.left-e.$padding)/e.characterWidth,r=Math.floor((this.y+e.scrollTop-t.top)/e.lineHeight),i=Math.round(n),u={row:r,column:i,side:n-i>0?1:-1},a=this.editor.session,f=a.screenToDocumentPosition(u.row,u.column),l=a.getTokenAt(f.row,f.column);!l&&!a.getLine(f.row)&&(l={type:"",value:"",state:a.bgTokenizer.getState(0)});if(!l){a.removeMarker(this.marker),o.style.display="none",this.isOpen=!1;return}this.isOpen||(o.style.display="",this.isOpen=!0);var c=l.type;l.state&&(c+="|"+l.state),l.merge&&(c+="\n  merge"),l.stateTransitions&&(c+="\n  "+l.stateTransitions.join("\n  ")),this.tokenText!=c&&(o.textContent=c,this.tooltipWidth=o.offsetWidth,this.tooltipHeight=o.offsetHeight,this.tokenText=c),this.updateTooltipPosition(this.x,this.y),this.token=l,a.removeMarker(this.marker),this.range=new s(f.row,l.start,f.row,l.start+l.value.length),this.marker=a.addMarker(this.range,"ace_bracket","text")},this.onMouseMove=function(e){this.x=e.clientX,this.y=e.clientY,this.isOpen&&(this.lastT=e.timeStamp,this.updateTooltipPosition(this.x,this.y)),this.$timer||(this.$timer=setTimeout(this.update,100))},this.onMouseOut=function(e){var t=e&&e.relatedTarget,n=e&&e.currentTarget;while(t&&(t=t.parentNode))if(t==n)return;o.style.display="none",this.editor.session.removeMarker(this.marker),this.$timer=clearTimeout(this.$timer),this.isOpen=!1},this.updateTooltipPosition=function(e,t){var n=o.style;e+10+this.tooltipWidth>this.maxWidth&&(e=innerWidth-this.tooltipWidth-10);if(t>innerHeight*.75||t+20+this.tooltipHeight>this.maxHeight)t=t-this.tooltipHeight-30;n.left=e+10+"px",n.top=t+20+"px"},this.$init=function(){o=document.documentElement.appendChild(r.createElement("div"));var e=o.style;return e.position="fixed",e.display="none",e.background="lightyellow",e.borderRadius="",e.border="1px solid gray",e.padding="1px",e.zIndex=1e3,e.fontFamily="monospace",e.whiteSpace="pre-line",o},this.destroy=function(){this.onMouseOut(),i.removeListener(this.editor.renderer.scroller,"mousemove",this.onMouseMove),i.removeListener(this.editor.renderer.content,"mouseout",this.onMouseOut),delete this.editor.tokenTooltip}}).call(u.prototype),t.TokenTooltip=u}),define("idleDefer",["require","exports","module"],function(e,t,n){function i(e,t,n,i){clearTimeout(r[e]),r[e]=setTimeout(function(){n.call(i),delete r[e]},t)}function s(e){clearTimeout(r[e])}t.defer=i,t.clear=s;var r={}}),define("strings",["require","exports","module"],function(e,t,n){t.presets={debug:!1,defaultStrings:{defaultDocText:"Please click the UI or code editor for relevant documentation."},hover:{textboxCode:"This input for the {label} property represents code. Click to focus cursor into the code editor.",textboxString:"Click to edit this string value of the {label} property.",textboxNumber:"Click to edit the numeric value of the {label} property.",checkbox:"Click to toggle the value of the {label} property.",label:"Click to edit the value of {label} in code.",subfolder:"Click to toggle expansion of [{path}]",hoverUIDropdown:"Click to view {label} dropdown options.",hoverUIDropdownChain:"Click to view {subID} dropdown options of the {label} property.",tokenName:"Clicking this token will insert it into the string at the current cursor position.",toggleChildrenExpansion:"Expand/Collapse all child nodes.","login-reset-password":"Click to reset your password"},click:{textboxNumber:"Use the up and down arrows to increment/decrement value",textboxString:"Edit string value of the {label} property."},other:{textboxNumberInvalid:"The current value is not a valid number. Please correct it.",UIDisabled:"Loading UI...",UIDisabledError:"UI cannot render. Please see the Warnings tab for more information.",tokenInsertInvalid:"Token cannot be inserted here."},tooltips:{UIToggleButton:"Click to toggle UI visibility.",UIToggleDocs:"Click to toggle Documentation visibility.",SampleDropdown:"",JavascriptTab:"",AllCodeTab:"",DocumentationTab:"",WarningsTab:"",FullUITab:"",DocsSliderButton:"",UISliderButton:""},errors:{"JSC#17":"The specified series type is not supported in this mode. Please chose a different value.","JSC#13":"The chart does not have a valid or any data. Please ensure the value passed to new JSC.Chart() is valid.",chartInternal:"The chart has encountered an error.",chartInternalTitle:"Internal Chart Error",jsSyntaxTitle:"JavaScript Error",jsSyntaxDescription:"Please see the code editor to resolve this error and re-enable the UI code view"},deferTiming:{warningHover:200,chartUpdate:550,lateUIRedraw:1500,fullUpdate:600,fullUpdateFast:100,statusBarClear:3e3,undoButtons:550,cursorDocUpdate:100,UiHover:400}}}),define("smoothScrolling",["require","exports","module","jsonLib"],function(e,t,n){function s(e,t){function b(e,t){var n,r,i,o,u=$(e),a;return t?(a=$(t).height(),n=$(t).scrollTop(),r=n+a,i=$(t).scrollTop()-($(t).offset().top-u.offset().top),o=i+u.height(),s&&(n+=s*a,r-=s*a)):(n=$(window).scrollTop(),r=n+$(window).height(),n+=80,r-=50,i=u.offset().top,o=i+u.height()),o<=r&&i>=n}t=t||{},i=i||{};if(!e)return;var n=r.pick(t.percentInfoView,i.percentInfoView,.2),s=r.pick(t.percentIntoViewCheck,i.percentIntoViewCheck,.2),o=r.pick(t.animationDuration,i.animationDuration,230),u=$(e),a=$(e).closest("[class*=scrollable]").find(".drop-list");a.length===0&&$(e).closest("[class*=scrollable]"),a.length===0&&(a=$(e).closest(".sidebar-holder")),a.length===0&&(a=$(e).closest(".block-in-holder"));var f=a.scrollTop()-(a.offset().top-u.offset().top),l=f+u.height(),c=a.scrollTop(),h=a.height(),p=c+h,d=Math.abs(f-c),v=Math.abs(f-(h+c));if(!b(e,a)){var m=r.evalPath(a[0],"jcf.vScrollBar"),g=h*n,y=0;d<v?y=f-g:y=l-h+g,y>f&&(y=f),u.height()>h&&(y=f),a.stop(),o?a.animate({scrollTop:y},o,function(){m&&m.scrollTo(y)}):a.scrollTop(y)}}t.focusElement=s;var r=e("jsonLib"),i={percentInfoView:.2,percentIntoViewCheck:.2,animationDuration:230}}),define("cache",["require","exports","module"],function(e,t,n){t.cache=function(){var e=0,t={};return{count:function(){return e},add:function(n){return e++,t[e]=n,n.cacheID=e,e},get:function(e){return t[e]?t[e]:null}}}()}),define("samples",["require","exports","module"],function(e,t,n){t.samples=["AnnotationCALabel.htm","AnnotationFooter.htm","AnnotationLink.htm","AnnotationStyling.htm","ArbitraryAnnotations.htm","AxisFormatting.htm","AxisIntervals.htm","AxisMarkersInFront.htm","AxisMarkerWiz.htm","AxisOrientation.htm","AxisScales.htm","AxisShadowing.htm","AxisShadowingTime.htm","AxisStyling.htm","AxisTickAngles.htm","AxisTickLabelStyling.htm","Bar3DInteractive.htm","BarColors.htm","BarHoverState.htm","CallbackFormatting.htm","ChartArea.htm","ChartAreaImage.htm","ChartBox.htm","DataClickEvents.htm","DataPointClick.htm","DataUrl.htm","DynamicSizing.htm","LabelCallbacks.htm","LabelCallbackTokens.htm","LabelDataAttributes.htm","LabelFormatting.htm","LabelInlineFormatting.htm","LabelRotation.htm","LabelStyling.htm","LabelUnicode.htm","LabelUrls.htm","LegendBoxGrid.htm","LegendEntryOrder.htm","LegendEvents.htm","LegendFloating.htm","LegendInCA.htm","LegendStyling.htm","LegendTokens.htm","MapBaseFilter.htm","MapBubbleDynamic.htm","MapCapitals.htm","MapClickPlot.htm","MapContext.htm","MapCustomFiles.htm","MapFiltered.htm","MapFipsBinding.htm","MapLinePoints.htm","MapMomentaryZoom.htm","MapPointFeatures.htm","MapProvinceAttributes.htm","MapSeriesFilter.htm","MapThematicMarkers.htm","MapThematicPopulation.htm","MapThematicSales.htm","MapUSElectionBasic.htm","Markers3DInteractive.htm","MultiChart.htm","MultiYAxes.htm","MultiYStackMixing.htm","Navigator.htm","NavigatorAnnotations.htm","NavigatorAnnotations2.htm","NavigatorAnnotationTitle.htm","NavigatorAxis.htm","NavigatorAxisMarkers.htm","NavigatorCompare.htm","NavigatorInteractivity.htm","NavigatorLargeData.htm","NavigatorLegendBox.htm","NavigatorNaked.htm","NavigatorScrollPreview.htm","NavigatorToolbar.htm","PieLayout.htm","PointLabels.htm","RadarAxisMarkers.htm","ResetZoomBtn.htm","ScaleBreaks.htm","ScaleBreaksAuto.htm","SeriesLegendEntry.htm","SmartPaletteBubble.htm","SmartPaletteRange.htm","SmartPaletteWeather.htm","SmartPaletteWeatherNoClip.htm","TimeSpanExpressions.htm","TimeSpanExpressions2.htm","TitleBox.htm","ToolbarStyling.htm","ToolbarStyling2.htm","Tooltips.htm","Tooltips2.htm","TooltipTokens.htm","TreemapLabels.htm","WorldPopulation.htm","ZoomingTime.htm","ZoomingX.htm","ZoomingXY.htm","Area.htm","AreaH.htm","AreaHSt.htm","AreaMarkerN.htm","AreaNeg.htm","AreaPointM.htm","AreaRange.htm","AreaSpline.htm","AreaSplineSt.htm","AreaSplineStF.htm","AreaSt.htm","AreaStep.htm","AreaStepSt.htm","AreaStF.htm","Bar3D.htm","Bars.htm","BarsH.htm","BarsHStFShR.htm","BarsHStHsA.htm","BarsHStShANeg.htm","BarsShA.htm","BarsShANeg.htm","BarsShR.htm","BarsSt.htm","BarsStF.htm","BarsStFShA.htm","BarsStFShR.htm","BarsStM.htm","BarsStShA.htm","BarsStShR.htm","BarsStShRNeg.htm","Bubble.htm","Bubble2.htm","ColumnError.htm","ComboBLMS.htm","ComboBM.htm","ComboBP.htm","ComboBS.htm","ComboPareto.htm","Cone.htm","ConeInverted.htm","Donut.htm","DonutArc.htm","DonutMulti.htm","FinanceCandle.htm","FinanceCandleShA.htm","FinanceCandleShR.htm","FinanceLine.htm","FinanceOhlc.htm","FinanceOhlcAnn.htm","FinanceSupportResistance.htm","Funnel.htm","FunnelInverted.htm","FunnelSquare.htm","FunnelSquareInverted.htm","Gauge.htm","GaugeArcs.htm","GaugeAxes.htm","GaugeAxisMarker.htm","Gauges.htm","GaugeShapes.htm","GaugeStyling.htm","HeatMap.htm","LineErrorOffset.htm","LineErrorStyling.htm","Lines.htm","LinesH.htm","LinesMarkerDyn.htm","LinesMarkerL.htm","LinesMarkerM.htm","LinesMarkerN.htm","LinesPointM.htm","LinesStyled.htm","MapAfrica.htm","MapAmericas.htm","MapRegionsSimple.htm","MapThematicRandom.htm","MapUSEastCoast.htm","MapUSElection.htm","MapUSRegions.htm","MapWeather.htm","MapWeatherAU.htm","Marker.htm","MarkerImg.htm","MarkerLarge.htm","MarkerTypes.htm","Pie.htm","Pie3D.htm","PieAngled.htm","PieArc.htm","PieDonutZVal.htm","PieExploded.htm","PieMulti.htm","PieNested.htm","PieOutlined.htm","PieZVal.htm","PieZValAllNeg.htm","PieZValNeg.htm","PieZValNegSegmented.htm","PieZValNegVariations.htm","PieZValVariations.htm","Pyramid.htm","PyramidInverted.htm","Pyramids.htm","Radar.htm","RadarAreaSt.htm","RadarAreaStF.htm","RadarRangeColumns.htm","Radars.htm","RangeColumns.htm","Scatter.htm","ScatterLine.htm","ScatterLineSt.htm","ScatterSpline.htm","SegmentedPie.htm","SinglePie.htm","Splines.htm","SplinesH.htm","Stepline.htm","StepLineH.htm","TimeLineError.htm","TreemapAqua.htm","TreemapPopulation.htm","TreemapRounded.htm","TreemapSmartPalette.htm","TreemapSubtle.htm","WindRose.htm"]}),define("../server/update_menu",["require","exports","module"],function(e,t,n){function r(){var e=GLOBAL.firepadObj.getAuth();if(!e)return;var t="users/"+e.uid+"/menu/",n=GLOBAL.firepadObj.child(t).once("value",function(e){i(e)})}function i(e){GLOBAL.firebaseFileNames=[];var t=e.val();if(!t)return;s();var n=document.getElementById("sampleList"),r=0,i=document.createElement("li"),o=document.createElement("a");o.innerHTML="Saved Files --------",o.disabled=!0,i.setAttribute("firebase",!0),o.setAttribute("class","dropdownSamples"),i.appendChild(o),n.insertBefore(i,n.childNodes[r]);var u=0,a=0;for(var f in t)a++;for(var f in t){r++;var i=document.createElement("li"),o=document.createElement("a");o.innerHTML=f,o.setAttribute("title",f),o.setAttribute("class","dropdownSamples"),u++,i.setAttribute("firebase",u-a),GLOBAL.firebaseFileNames.unshift(f),i.appendChild(o),n.insertBefore(i,n.childNodes[r])}var i=document.createElement("li"),o=document.createElement("a");o.innerHTML="-----------------",o.disabled=!0,i.setAttribute("firebase",!0),o.setAttribute("class","dropdownSamples"),i.appendChild(o),r++,n.insertBefore(i,n.childNodes[r])}function s(){var e=document.getElementById("sampleList");for(var t=0;t<e.childNodes.length;t++)e.childNodes[t].getAttribute&&e.childNodes[t].getAttribute("firebase")&&(e.childNodes[t].parentNode.removeChild(e.childNodes[t]),t--)}t.update=r,t.remove=s}),define("../server/update_ace",["require","exports","module"],function(require,exports,module){function getHistory(){var e=[],t="",n=GLOBAL.aceEditor.session.getUndoManager();for(var r=0;r<n.$undoStack.length;r++){sleep(5);if(n.$undoStack[r].timeStamp)e.push(n.$undoStack[r]);else{var i=new Date,s=i.getTime();n.$undoStack[r].timeStamp=s,e.push(n.$undoStack[r])}}for(var r=0;r<n.$redoStack.length;r++){sleep(5);if(n.$redoStack[r].timeStamp)t.length==0?t=n.$redoStack[r].timeStamp:t+=","+n.$redoStack[r].timeStamp,e.push(n.$redoStack[r]);else{var i=new Date,s=i.getTime();n.$redoStack[r].timeStamp=s,t.length==0?t=s:t+=","+s,e.push(n.$redoStack[r])}}return{undo:e,redo:t}}function sleep(e){var t=(new Date).getTime();for(var n=0;n<1e7;n++)if((new Date).getTime()-t>e)break}function ensureUniqueTimesamp(e){for(var t=1;t<e.length;t++)e[t].timeStamp&&e[t-1].timeStamp&&e[t-1].timeStamp===e[t].timeStamp&&e[t].timeStamp++}function setHistory(data){function isRedo(e,t){var n;e.redo=e.redo+"";var r=e.redo.split(",");for(n in r)if(t==r[n])return!0;return!1}setGutterComment();if(!data)return;if(!data.val)return;var unM=GLOBAL.aceEditor.session.getUndoManager();unM.$doc||(unM.$doc=GLOBAL.aceEditor.session);var d1=data.val();if(!d1)return;fireBaseData.undo=d1.undo,fireBaseData.redo=d1.redo,d1.session;var s1,myProp,myProp1,myRedo=[],myUndo=[];for(myProp in d1.undo)d1.undo.hasOwnProperty(myProp)&&(s1=eval(d1.undo[myProp]),isRedo(d1,myProp)?(s1.timeStamp=+myProp,myRedo.push(s1)):(s1.timeStamp=+myProp,myUndo.push(s1)));unM.$undoStack=myUndo,unM.$redoStack=myRedo,unM.dirtyCounter=unM.$undoStack.length}function saveSession(){var e=GLOBAL.aceEditor.session;return state={},state.value=e.getValue(),state.selection=e.selection.toJSON(),state.options=e.getOptions(),state.mode=e.getMode().$id,state.folds=e.getAllFolds().map(function(e){return{start:e.start,end:e.end,placeholder:e.placeholder}}),state.scrollTop=e.getScrollTop(),state.scrollLeft=e.getScrollLeft(),JSON.stringify(state)}function setGutterComment(){if(!GLOBAL.comments)return;for(var e=0;e<GLOBAL.comments.length;e++)GLOBAL.aceEditor.getSession().setBreakpoint(+GLOBAL.comments[e][0])}function setSession(e){if(!e)return;var t=GLOBAL.aceEditor.session;t.setValue(e.value),t.selection.fromJSON(e.selection),t.setOptions(e.options),t.setMode(e.mode);try{e.folds.forEach(function(e){t.addFold(e.placeholder,Range.fromPoints(e.start,e.end))})}catch(n){}t.setScrollTop(e.scrollTop),t.setScrollTop(e.scrollLeft)}var fireBaseData={};exports.setHistory=setHistory,exports.getHistory=getHistory}),define("../server/message_box",["require","exports","module","events"],function(e,t,n){function o(e,t){e=e||{},e.msg=e.msg||"Please select OK or Cancel.";var n=i,o=document.getElementById("login-content");if(!o)throw Error("Could not find login-content tag");e.cancelHide&&(n=s,n=n.replace("{{displayCancel}}","display:none;")),e.width&&(n=n.replace("{{widthBox}}","width:"+e.width+"px;")),o.innerHTML=n;var u=document.getElementById("message-box-msg");u.innerHTML=e.msg;var a=document.getElementById("message-box");r.addListener(a,"click",function(){var e=this;return function(e){e=r.fixEvent(e),e.preventDefault(),e.srcElement||(e.srcElement=e.target),e.srcElement.id==="message-box-ok"?(o.innerHTML="",t("ok")):e.srcElement.id==="message-box-cancel"?(o.innerHTML="",t("cancel")):(o.innerHTML="",t("none"))}}.call(this))}var r=e("events"),i='<div><div id="message-box" style="{{widthBox}}" title=""><div id="message-box-msg"></div><input type="button" id="message-box-load"  value="Load previous sample" /><input type="button" id="message-box-ok"  value="save and overwrite previous sample" /><input type="button" id="message-box-cancel"  value="Cancel"  /></div></div>',s='<div><div id="message-box" style="{{widthBox}}" title=""><div id="message-box-msg"></div><input type="button" id="message-box-ok"  value="Ok" class="" /><input type="button" id="message-box-cancel" style="{{displayCancel}}" value="Cancel" class="" /></div></div>';t.show=o}),define("../server/load_sample",["require","exports","module","../server/update_ace","load_editor"],function(e,t,n){function s(){var e=GLOBAL.firepadObj.getAuth();if(!e)return;var t="users/"+e.uid+"/samples/"+GLOBAL.currentSampleName.replace(/[.]/g,"_"),n=GLOBAL.firepadObj.child(t).once("value",function(e){i.loadSample(e.val().page),GLOBAL.comments=e.val().comments,r.setHistory(e)})}var r=e("../server/update_ace"),i=e("load_editor");t.load=s}),define("../server/save",["require","exports","module","events","samples","../server/update_menu","../server/update_ace","../server/message_box","../server/load_sample"],function(e,t,n){function p(){if(c)return;$(document).bind("loggedout",E),GLOBAL.aceEditor.on("change",function(e){GLOBAL.isSavedInServer=!1,o.disabled=!1,o.value="save"});var e=document.getElementById("currentSample");r.addListener(e,"click",function(t){var n=GLOBAL.firepadObj.getAuth();t=r.fixEvent(t),t.srcElement||(t.srcElement=t.target);if(!n){var i=document.getElementById("login");i.click();return;var s}else{r.stopEvent(t);var o=t.target;if(o.value==="Cancel"){d();return}if(o.value==="OK"){e.innerHTML=e.childNodes[0].value,GLOBAL.currentSampleName=e.innerHTML,b(function(e){e&&e.message&&alert(e.message)});return}if(e.childNodes[0].tagName==="INPUT")return;var u=document.createElement("input");u.value=e.innerHTML,r.addListener(u,"keyup",function(t){t.keyCode==13?(e.innerHTML=u.value,GLOBAL.currentSampleName=e.innerHTML,b(function(e){e&&e.message&&alert(e.message)})):t.keyCode==27&&(e.innerHTML=GLOBAL.currentSampleName)});var a=document.createElement("input");a.type="button",a.setAttribute("class","ncOk"),a.value="OK";var l=document.createElement("input");l.type="button",l.value="Cancel",l.setAttribute("class","ncCancel"),e.innerHTML="",e.appendChild(u),e.appendChild(a),e.appendChild(l)}}),g(),o=document.getElementById("saveButton"),r.addListener(o,"click",function(e){var t=GLOBAL.firepadObj.getAuth();if(!t){var n=document.getElementById("login");GLOBAL.loginHeader="Please login in order to save.",n.click();return}b(function(e){e&&e.message&&alert(e.message)})}),c=!0}function d(){currentSample.innerHTML=GLOBAL.currentSampleName}function v(e){var t=new Firebase("https://jscharting.firebaseio.com/users");t.child(e).once("value",function(e){var t=e.val()!==null;t&&alert("yes")})}function m(){var e=GLOBAL.firepadObj.getAuth();if(!e)return;var t="users/"+e.uid+"/menu/",n=GLOBAL.firepadObj.child(t).once("value",function(e){u.update(e)});t="users/"+e.uid+"/samples/"+GLOBAL.currentSampleName.replace(/[.]/g,"_");var n=GLOBAL.firepadObj.child(t).once("value",function(e){h=e.val,a.setHistory(e)})}function g(){if(!GLOBAL.firepadObj)return;var e=GLOBAL.firepadObj.getAuth();if(!e)return;var t=(new Firebase("https://jscharting.firebaseio.com/users/"+e.uid)).once("value",function(e){a.setHistory(e.val())})}function y(){var e=document.getElementById("currentSample"),t=document.getElementById("menuFilename"),n=!1;for(var r=0;r<i.length;r++)if(GLOBAL.currentSampleName===i[r]){n=!0;break}var s="",o="";n?(s=GLOBAL.currentSampleName.split(".")[0]+"_Edited.htm",o=GLOBAL.currentSampleName.split(".")[0]+"_Edited_htm"):(s=GLOBAL.currentSampleName.split(".")[0],o=GLOBAL.currentSampleName.split(".")[0]);for(var u in GLOBAL.firebaseFileNames)if(GLOBAL.firebaseFileNames[u]===o)return n?{result:!0,name:s}:{result:!1,name:s};return t.innerHTML=e.innerHTML=s,{result:!1,name:s}}function b(e){var t=new Firebase("https://jscharting.firebaseio.com/users/"),n=new Firebase("https://jscharting.firebaseio.com/"),r=GLOBAL.firepadObj.getAuth();if(!r){var i="Please login to able to save it.";f.show({msg:i,cancel:!1},function(e){});return}var i="An edited version of this sample has already been created, please load and modify {{sampleName}} to work on this.  If you wish to continue, the current page will be saved instead.",s=y();if(s.result){i=i.replace("{{sampleName}}",s.name);var o=f.show({msg:i},function(e){if(e=="ok")menuFilename.innerHTML=currentSample.innerHTML=GLOBAL.currentSampleName=s.name,w();else{if(e=="cancel")return;menuFilename.innerHTML=currentSample.innerHTML=GLOBAL.currentSampleName=s.name,l.load()}})}else menuFilename.innerHTML=currentSample.innerHTML=GLOBAL.currentSampleName=s.name,w();return}function w(){if(!e)var e=GLOBAL.firepadObj.getAuth();if(!e){var t="Please login to able to save it.";f.show({msg:t,cancel:!1},function(e){});return}var n={SampleName:GLOBAL.currentSampleName,user_id:e.uid,history:[]},r=a.getHistory(),i="users/"+e.uid+"/samples/"+GLOBAL.currentSampleName.replace(/[.]/g,"_"),s,l=new Firebase("https://jscharting.firebaseio.com/"+i+"/undo");l.remove(function(){for(var e=0;e<r.undo.length;e++)s=GLOBAL.firepadObj.child(i+"/undo/"+r.undo[e].timeStamp).set(JSON.stringify(r.undo[e]))});var c=new Firebase("https://jscharting.firebaseio.com/"+i+"/comments");c.remove(function(){if(GLOBAL.comments)for(var e=0;e<GLOBAL.comments.length;e++)s=GLOBAL.firepadObj.child(i+"/comments/"+GLOBAL.comments[e][0]).set(JSON.stringify(GLOBAL.comments[e][1]))}),s=GLOBAL.firepadObj.child(i+"/redo/").set(r.redo),s=GLOBAL.firepadObj.child(i+"/page/").set(GLOBAL.aceEditor.session.getValue());var h="users/"+e.uid+"/menu/";s=GLOBAL.firepadObj.child(h+GLOBAL.currentSampleName.replace(/[.]/g,"_")).set(""),GLOBAL.isSavedInServer=!0,o.disabled=!0,o.value="saved",o.setAttribute("class","save disabled"),o.setAttribute("title","Saved"),u.update()}function E(){d()}var r=e("events"),i=e("samples").samples,s=[],o,u=e("../server/update_menu"),a=e("../server/update_ace"),f=e("../server/message_box"),l=e("../server/load_sample"),c=!1,h={};t.init=p,t.saveServer=w,t.loadUndoManager=m}),define("MIInterface",["require","exports","module","jsonLib"],function(e,t,n){(function(){function a(e,t,n){function N(e){for(var t=0,n=u.length;t<n;t++){var r=u[t];if(e.indexOf(r)===0)return!0}return!1}function C(t,n,r){function s(e,t,n){var o;t=t||"",i.push(t),r[t]=n||"object";for(var u in e)o=H(e[u]),o==="object"||o==="array"?s(e[u],t+"."+u,o):(i.push(t+"."+u),r[t+"."+u]=o)}var i=[];return s(e,"chart"),i}n=n||"chart";var r=n+".",i={},s=t?["chart."+t.replace(r,"")]:C(e,"chart",i);t&&(i["chart."+t.replace(r,"")]=H(b(e,t.replace(r,""))));var o={agMismatch:{},typeLookup:i},u=[],a={},c={},h={},p=t,d,v,m,g;for(var y=0,E=s.length;y<E;y++){var t=s[y],S=t.replace("chart.",r),x=l(t,e,o,p);if(g=b(x,"invalid.message"))a[S]=g,x.type=i[t];(d=x.ui)?(v=d.element,m=d.type,v&&m?N(t)||f(S,x,e,c,a):h[S]=x):h[S]=x}for(var T in o.agMismatch)a["chart."+T]=k.describeAgMismatch(o.agMismatch[T]);return{data:{warnings:a,skeleton:c,otherPaths:h},getMiData:function(e){var t=this.data;return e=w(e),t.skeleton[e]},getWarnings:function(){return this.data.warnings}}}function f(e,t,n,r,i){function E(e,t){var n={description:e.description,members:{}},r=n.members,i,s={navigator:",column,line,area,marker,ohlc,candlestick,empty,",other:",column,line,area,marker,bubble,empty,"},o;t.sequence.indexOf("chartType,seriesType")===0&&e.members.bubble&&(t.chartType==="navigator"?o=s.navigator:o=s.other);for(var u in e.members){i=e.members[u];if(!o||o.indexOf(","+u+",")>-1)i.description?r[u]=i:r[u]={description:i}}return n}function S(e){var t={};for(var n in e)n!=="invalid"&&n!=="setting"&&n!=="sequence"&&(t[n]=e[n]);return t}var s={},o,u,a,f,l,c={},h,p=!1;u=s.value=b(n,e.replace("chart.",""));if(o=t.ui){s.template=(o.element||"")+"-"+(o.type||""),s.type=o.type||"";if(a=o.dropDownMembers){var d=s.dropDownInfo={eChain:o.eChain};if(!o.eChain.sequence)return;var v=o.eChain.sequence.split(",");d.name=v[0];for(var m=0,g=v.length;m<g;m++){var y=v[m],w=N(y);d[y]=E(w,o.eChain)}s.value=S(o.eChain)}}s.tokenSet=t.tokenSet,s.description=t.description,s.valDescription=t.valDescription,t.label&&(s.label=t.label);if(h=i[e])s.warning=h;r[e]=s}function l(e,t,n,r){function d(){l.cache={findMember:{},hasArrayGroups:{},evalPath:{},json:t}}var i,s,o,a={},f;r||!l.cache?d():l.cache.json!==t&&d(),f={json:t,fullPath:e,cache:l.cache,cycleCache:n};var c;e=w(e);var h=e.replace("chart.","");h==="chart"&&(h=h.replace("chart",""));if(m(t)){c=h.length?y(t,h,l.cache.evalPath):t,o=n.typeLookup[e],s=C(e,!1,c,f),o!=="object"&&o!=="array";if(s){a.description=s.description,a.valDescription=b(s,o+".description"),o==="string"&&(i=s.tokenSet||u.evalPath(s,"string.tokenSet"))&&(a.tokenSet=i),f.agMismatch&&(n||(n={agMismatch:{}}),n.agMismatch[f.agMismatch.path]=f.agMismatch,delete f.agMismatch),p(s,c,e,f,o),a.ui=f.ui,a.raw=s,s.name&&(a.label=s.name);if(s.docsPath||f.docsPath)a.docsPath=s.docsPath||f.docsPath}else f.invalid;f.invalid&&(a.invalid=f.invalid)}else a=O(e);return a}function c(e){function l(e){if(e.split(",").length===1&&e.indexOf("obj_")>-1)return"Types."+e.replace("obj_","")}var t=e.split("."),n="",r,i="";for(var s=0,o=t.length;s<o;s++){var a=t[s];s&&(i+="."),i+=a;if(o===1){JSCL.getApiObj(i)?n="Types."+i:JSCL.getApiEnum(i)&&(n="Enums."+i);if(n)return n}if(s===o-1&&o>1&&n.indexOf("Types.")===0)return n+="."+a,n;var f=N(i);(r=f.type)&&r.split(",").length===1&&(r.indexOf("obj_")>-1?(n="Types."+r.replace("obj_",""),i=r.replace("obj_","")):r==="array"?u.evalPath(f,"array.types").length===1&&(f=u.evalPath(f,"array.types.0"),n=l(f.type)):JSCL.getApiObj(i)?n="Types."+i:JSCL.getApiEnum(i)&&(n="Enums."+i))}return n}function h(e,t,n,r,s){r=r||{};var o,a,f,l;l=T(e.type);var c=[],h=[],p,m,g,y,w,E,x;x=s||H(t);if(l)if(e["obj_"+l])e=u.fasterExtend(!0,null,JSCL.getApiObj(l),e[e.type]);else if(!e.object||e.type.indexOf("obj_")>-1)e=_(e);if(e){y=e.type;if(y){var N=y.split(","),O=0,M=!1;for(var P=0,B=N.length;P<B;P++){var o=N[P];if(o==="number"){if(x==="number")return n&&(r.ui={element:e.ui||"TextBox",type:"number"}),!0;if(e.allowNull||e.number&&e.number.allowNull)if(t===null)return n&&(r.ui={element:e.ui||"TextBox",type:"number"}),!0;O++}else if(o==="date"){if(x==="date")return n&&(r.ui={element:e.ui||"TextBox",type:"date"}),!0;h.push("date"),O++}else if(o==="string"){if(x==="string"){if(!(a=JSCL.jL.evalPath(e,"string.validator")))return r.ui={element:e.ui||"TextBox",type:"string"},!0;if(typeof a=="function"){var j=a(t,n,null,JSCL.getJSONapi());if(!j)return r.ui={element:e.ui||"TextBox",type:"string"},!0;p="Value "+t+" is not a valid string setting"}}h.push("string"),O++}else if(o==="bool"){if(x==="bool")return r.ui={element:e.ui||"CheckBox",type:"bool"},!0;h.push("bool"),O++}else if(o==="method"){if(x==="method")return r.ui={element:e.ui||"TextBox",type:"function"},!0;h.push("function"),O++}else if(o==="array"){if(x==="array"){var F=e[o],I,q;n?q=A(e,n,b(r,"cache.hasArrayGroups")):q=L(e),q&&(I=C.matchArrayGroup(e,t,r))&&(e=I);var R=e?e.ui:null;return r.ui={element:R,type:"array"},!0}O++}else if(o.indexOf("enum_")>-1){if(x==="string"){var U=D(o);m=S(t,U);if(typeof m.invalid===i)return d(m,r),!0;g=U,p='Value "'+t+'" setting is not defined by the ('+U+") enum options.",c.push(o)}else h.push(o);O++}}x!=="object"&&(p?(k(r.fullPath,p,r),f=!0):k(r.fullPath,"Property does not support a ("+x+") data type.",r));var z;r.ui={element:e.ui||z,type:x};if(r.invalid){c=c.concat(h),z=c.length>0?c[0]:"",r.ui.expectedType=z,z.length>0&&z.indexOf("enum_")===-1&&(z=v(e,z)),r.ui.element=e.ui||z;if(r.ui.element.indexOf("enum_")===0){var W={};W[g]="",d(W,r)}}return O!==N.length}if(e.pop)return!0}}function p(e,t,n,r,s){function Y(e){e.sort(function(e,t){function i(e){return e.indexOf("obj_")>-1?5:e.indexOf("iobj_")>-1?5:e.indexOf("object")>-1?4:e.indexOf("enum_")>-1?1:e.indexOf("flag_")>-1?3:2}var n=i(e),r=i(t);return n>r?1:n<r?-1:0})}r=r||{};var o,u,a,f;f=T(e.type);var l=[],c=[],h,m,g,y,w,E,x;x=s||H(t);if(e){y=e.type;if(y){var O=y.split(",");Y(O);var M=0,_=!1;for(var P in O){o=O[P];if(o==="number"){if(x==="number")return n&&(r.ui={element:e.ui||"TextBox",type:"number"}),!0;if(e.allowNull||e.number&&e.number.allowNull)if(t===null)return n&&(r.ui={element:e.ui||"TextBox",type:"number"}),!0;M++}else if(o==="date"){if(x==="date")return n&&(r.ui={element:e.ui||"TextBox",type:"date"}),!0;c.push("date"),M++}else if(o==="string"){if(x==="string"){if(!(u=JSCL.jL.evalPath(e,"string.validator")))return r.ui={element:e.ui||"TextBox",type:"string"},!0;if(typeof u=="function"){var B=u(t,n,null,JSCL.getJSONapi());if(!B)return r.ui={element:e.ui||"TextBox",type:"string"},!0}}c.push("string"),M++}else if(o==="bool"){if(x==="bool")return r.ui={element:e.ui||"CheckBox",type:"bool"},!0;c.push("bool"),M++}else if(o==="method"){if(x==="method")return r.ui={element:e.ui||"TextBox",type:"function"},!0;c.push("function"),M++}else if(o==="array"){if(x==="array"){var j=e[o],F,I;n?I=A(e,n,b(r,"cache.hasArrayGroups")):I=L(e),I&&(F=C.matchArrayGroup(e,t,r))&&(e=F);var q=e?e.ui:null;return r.ui={element:q,type:"array"},!0}M++}else if(o.indexOf("enum_")>-1){if(x==="string"){var R=D(o);m=S(t,R);if(typeof m.invalid===i)return d(m,r),!0;g=R,h='Value "'+t+'" setting is not defined by the ('+R+") enum options.",l.push(o)}else c.push(o);M++}else if(o.indexOf("flag_")>-1){if(x==="string"){var R=D(o.replace("flag_","enum_")),U=JSCL.getApiEnum(o.replace("flag_","")),z=t.split(",");h="";for(var W=0,X=z.length;W<X;W++){var V=z[W];U.members[V]||(h='Value "'+t+'" setting is not defined by the ('+R+") enum options.")}r.ui={element:e.ui||"none",type:"string"};if(!h)return!0;l.push(o)}else c.push(o);M++}else if(o.indexOf("obj_")>-1){r.docsPath=o.replace("obj_","");var $;if($=p(N(o.replace("obj_","")),t,n,r,s))return!0;M++}}x!=="object"&&(h?(k(r.fullPath,h,r),a=!0):k(r.fullPath,"Property does not support a ("+x+") data type.",r));var J;r.ui={element:e.ui||J,type:x};if(r.invalid){l=l.concat(c),J=l.length>0?l[0]:"",r.ui.expectedType=J,J.length>0&&J.indexOf("enum_")===-1&&(J=v(e,J)),r.ui.element=e.ui||J;if(r.ui.element&&r.ui.element.indexOf("enum_")===0){var K={};K[g]="",d(K,r)}}return M!==O.length}if(e.pop){for(var P=0,Q=e.length;P<Q;P++){var G=e[P];if(p(G,t,n,r,s))return!0}return!0}}}function d(e,t){var n=E(e),r;for(var i=0,s=n.length;i<s;i++){r=n[i];if(r!=="setting"&&r!=="sequence"&&r!=="invalid")break}if(!e.sequence)return;r=e.sequence.split(",")[0];var o=JSCL.getApiEnum(r);t.ui||(t.ui={});var u=t.ui;u.element=o.ui||"DropDown",u.dropDownMembers=o.members,u.type="string",u.eChain=e}function v(e,t){switch(t){case"number":case"string":return"TextBox";case"bool":return"CheckBox";case"date":return"TextBox"}}function m(e){return typeof e===i&&e!==null?!1:!0}function g(){var e=arguments,t,n,r=e.length;for(t=0;t<r;t++){n=e[t];if(typeof n!==i&&n!==null)return n}}function y(e,t,n){n=n||{};var r,i;return r=n[t],r?r:(i=b(e,t),i&&(n[t]=i),i)}function b(e,t){var n=e,r;if(t){r=t.split(".");for(var i=0;n!==undefined&&i<r.length;i++)n=n[r[i]]}return n}function w(e){return e.replace(/\[([0-9]+)\]/g,".$1")}function S(e,t,n){function a(e,t){function a(e,t){var n=r(t),i=E(n.members),s,o,u,a,f={},l,c,h;e=x(e);for(u=0,a=i.length;u<a;u++){if(!(e.indexOf(i[u].toLowerCase())!==0||e.length!==i[u].length&&!n.members[i[u]].chain)){o=i[u];break}e.indexOf(i[u].toLowerCase())===0&&e.length!==i[u].length&&!n.members[i[u]].chain?h=i[u]:n.members[i[u]].isDefault&&(s=i[u])}return!o&&h&&(o=h),o||(o=s,c=!0),o?(e.indexOf(o.toLowerCase())===0?l=e.replace(o.toLowerCase(),""):l=e,{match:o,isDefault:c,chain:n.members[o].chain,value:l}):{invalid:e}}var r=JSCL.getApiEnum,s=!1,o={sequence:[]},u;o.setting=e,e=e.toLowerCase();while(!s){u=a(e,t);if(m(u[i]))u.value=u[i],s=!0;else{if(!u.isDefault||!n)o[t]=u.match,o.sequence.push(t);t=u.chain,e=u.value,!t&&e.length===0?s=!0:t?t=t.replace("enum_",""):t||(s=!0)}}return o.sequence=o.sequence.join(","),u.value.length>0&&(o.invalid=u.value),o}var r=t.split(","),i="invalid",s,o,u;for(o=0,u=r.length;o<u;o++){s=a(e,x(r[o]).replace("enum_",""));if(!s[i])break}return s}function x(e){return e.replace(/^\s+|\s+$/g,"")}function T(e){if(e&&e.indexOf("obj_")>-1){var t=e.split(",");for(var n in t){var r=t[n];if(r.indexOf("obj_")>-1)return r.substring(4)}}}function N(e,t,n,r){function a(e){return String.fromCharCode(e.charCodeAt(0)+32).concat(e.substr(1))}function f(e){var t,n=JSCL.getApiObj(e);if(typeof n!==i)return r.docsPath=e,n;n=JSCL.getApiEnum(e);if(typeof n!==i)return r.docsPath=e,n}function l(e,t,n,s){var o,f=!1,c,h=parseInt(t),p;if(typeof e===i)return;c=T(e.type);if(c)if(e["obj_"+c])e=u.fasterExtend(!0,null,JSCL.getApiObj(c),e[e.type]);else if(!e.object||!e.object[t])e=JSCL.getApiObj(c);if(e.type.indexOf("array")>-1)if(e.array.arrayType==="specific")c=T(e.array.types[0].type),c&&(o=JSCL.getApiObj(c).object);else if(e.array[0]&&h>=0){var d=[];for(p in e.array)d.push(e.array[p].types[h]);if(n)return;return d.length===1?d[0]:d}o||(o=typeof e.object!==i?e.object:null);if(o){var v=o[t],m;if(v)return r.docsPath+="."+t,v;for(p in o){if(p===t)return o[p];if(t.indexOf&&t.indexOf(p)===0){if(n)return t.substring(0,p.length);var g=a(t.substring(p.length));return l(o[p],g)}p==="*"&&(m=o[p]),f=!0}return m}}function c(e,t,n,r){var i,u;return n?(i=o[r],i?i:(u=l(e,t,n,r),u&&(o[r]=u),u)):(i=s[r],i?i:(u=l(e,t,n,r),u&&(s[r]=u),u))}function p(e,t){if(e.array&&e.array[0])for(var n in e.array){var r=e.array[n].types,i=!1;for(var s=0;s<r.length;s++)h(r[s],t[s],"",{light:!0})||(i=!0);if(!i)return e.array[n]}}N.findMember=l,N.matchArrayGroup=p,e=e.replace(/\.[0-9]+\./g,"."),e=e.replace(/\.[0-9]+/g,""),r=r||{};var d=e.split("."),v=f(d[0]),m,g,y,b,w;b=d[0],d.shift();for(var E=0,S=d.length;E<S;E++){g=d[E],b=b+"."+g,v=l(v,g,t,b);if(t&&v&&v.charAt)return v}if(t)return;if(typeof v==i)return;var x=T(v.type);if(typeof n!==i&&n.pop){if(x&&v.type.indexOf(",")===-1)return r.path=x,p(N(x),n);if(w=p(v,n))return w;if(x)if(w=p(N(x),n))return r.path=x,w}else if((x||v.type&&v.type.indexOf("enum_")>-1)&&v.type.indexOf(",")===-1){var C=x?x:v.type.substring(5),k={};k=f(C),v["obj_"+x]&&k.object&&(k.object=u.fasterExtend(!0,null,k.object,v["obj_"+x].object)),k.type=v.type||k.type,k.description=v.description||k.description,v=k}return v}function C(e,t,n,r){function U(e){return!isNaN(parseFloat(e))&&isFinite(e)}function z(e){var t=e.charCodeAt(0);return t>64&&t<91?String.fromCharCode(t+32).concat(e.substr(1)):e}function W(e){var t,n=JSCL.getApiObj(e);if(typeof n!==i)return r.docsPath=e,n;n=JSCL.getApiEnum(e);if(typeof n!==i)return r.docsPath=e,n}function X(e,t,n,s,o){o=o||{};var u,a,f=!1,l,c=parseInt(t),h,p=U(t);if(typeof e===i)return;e=_(e);if(e.arrayType){if(p)return e.types[t]}else if(e.type&&e.type.indexOf("array")>-1)if(m(e.types)){if(p)return e.types[t]}else if(e.array.arrayType){if(p)return o.cachePath=$(s),Object.create(e.array.types[0]);l=T(e.array.types[0].type);if(l){if(p)return a=JSCL.getApiObj(l),a;a=JSCL.getApiObj(l).object}}else{if(e.array.arrayType==="anyType")return e.array.types[0];if(e.array[0]&&c>=0){var d=[];for(h in e.array)(u=e.array[h].types[c])&&d.push(Object.create(u));if(n)return;return d.length===1?d[0]:d}}a||(a=typeof e.object!==i?e.object:null);if(a){var v=a[t],g;if(v)return r.docsPath+="."+t,Object.create(v);for(h in a){if(h===t)return Object.create(a[h]);if(t.indexOf&&t.indexOf(h)===0){if(n)return t.substring(0,h.length);var y=z(t.substring(h.length));return X(a[h],y,!1,s)}h==="*"&&(g=a[h]),f=!0}g||(r.propertyMismatch={properties:a,search:t},k(s,"Property "+t+" is not defined.",r));if(g)return Object.create(g)}else p||k(s,"Property "+t+" is not defined.",r)}function V(e,t,n,i,s){var u,a,f=r.cache.findMember;return n?(u=o[i],u?u:(a=X(e,t,n,i),a&&(o[i]=a),a)):(u=f[i]||f[$(i)],u?(r.docsPath=u.docsPath,u):(a=X(e,t,n,i,s),a&&(a.docsPath=r.docsPath,s.cachePath?f[s.cachePath]=a:f[i]=a),a))}function $(e){return e.replace(/\.([0-9]+)$/,".[]")}function J(e,t,n){n=n||{};var r=0,i={},s,o,u;n.cycleCache?o=n.cycleCache.typeLookup:o={},e=_(e);if(e.array&&e.array[0]){for(var a in e.array){var f=e.array[a].types,l=!1;u=!1;var c=-1;for(var p=0;p<f.length;p++)f[p].multi&&(u=!0,c=p);if(u&&f.length<t.length)while(f.length<t.length)f.splice(c,0,f[c]);if(f.length!==t.length)l=!0;else{s={index:a,path:n.fullPath,rawReference:e.array[a],length:f.length,matching:0,matchMap:[],types:[]},r++;for(var p=0;p<f.length;p++)s.types[p]=f[p].type,h(f[p],t[p],n.fullPath,n,o[n.fullPath+"."+p]||H(t[p]))?(s.matchMap[p]=!0,s.matching++):(l=!0,s.matchMap[p]=!1);if(!m(i.index)||i.matching<s.matching)i=s}if(!l)return delete n.invalid,e.array[a]}m(i.index)||(i={path:n.fullPath,rawReference:e}),n.invalid=i}}C.findMember=X,C.matchArrayGroup=J,e=x(e),r=r||{};var s=e.split("."),a=W(s[0]),f,l,c,p,d,v="",g,b,w={},E,S=r.cache.evalPath,L=r.cycleCache.typeLookup;p=s[0],s.shift();for(var O=0,D=s.length;O<D;O++){l=s[O],p=p+"."+l,v=p.replace("chart.",""),w={},a=V(a,l,t,p,w);var P=y(r.json,v,S),B=L[p];B==="array"&&a&&(g=A(a,w.cachePath||p,r.cache.hasArrayGroups))&&(E={fullPath:v,cycleCache:{typeLookup:L},cache:r.cache},b=J(g,P,E),b&&O<D+1&&U(s[O+1])?a=b:E.invalid&&(r.agMismatch=E.invalid,O<D+1&&U(s[O+1])&&(a=E.invalid.rawReference)));if(t&&a&&a.charAt)return a}if(t)return;if(typeof a==i)return;var j=T(a.type);if(typeof n!==i&&n!==null&&n.pop){if(j&&a.type.indexOf(",")===-1){r.docsPath=j;var F=N(j,!1,P,r);return F?F:(F=M(j),F=_(F),J(F,n))}if(d=J(a,n,{cycleCache:{typeLookup:L}}))return d;if(j)if(d=J(M(j),n))return r.path=j,d}else if((j||a.type&&a.type.indexOf("enum_")>-1)&&a.type.indexOf(",")===-1){var I=j?j:a.type.substring(5),q={};q=W(I),a["obj_"+j]&&q.object&&(q.object=u.fasterExtend(!0,null,q.object,a["obj_"+j].object)),q=Object.create(q),q.type=a.type||q.type,q.description=a.description||q.description;var R;R=a.name,a=q,m(R)&&(a.name=R)}return a}function k(e,t,n){function s(e){var t="";t+="The specified array does not match the length of any defined array groups.",t+="";if(e.matching>0){t="The specified array does not match the types of any defined array groups.",t+=" <br/>",t+="The closest match pattern for this arrayGroup is:<br/> ",t+=e.rawReference.description+"<br/>";var n=[];for(var r=0,i=e.matchMap.length;r<i;r++){var s=e.matchMap[r];s?n.push("("+e.types[r]+")"):n.push('<span class="invalid">('+e.types[r]+")</span>")}t+="Pattern: ["+n.join(", ")+"]"}return t}function o(e){function c(e,t){var n=0;for(var r=0,i=e.length;r<i;r++){var s=e[r],o=t[r];if(s!==o)break;n++}return n}var t="";t+="";var n=[],r,i;if(i=e.properties){for(var s in i){var o=c(e.search,s);o>1&&n.push([s,o])}n.length>0&&(n.sort(function(e,t){function i(e){return 50-e[1]}var n=i(e),r=i(t);return n>r?1:n<r?-1:0}),r=n[0][0],t+=" Did you mean ("+r+")?")}if(e.matching>0){t+="The closest match pattern for this arrayGroup is:<br/> ",t+=e.rawReference.description+"<br/>";var u=[];for(var a=0,f=e.matchMap.length;a<f;a++){var l=e.matchMap[a];l?u.push("("+e.types[a]+")"):u.push('<span class="invalid">('+e.types[a]+")</span>")}t+="Pattern: ["+u.join(", ")+"]"}return t}var r,i;k.describeAgMismatch=s;if(r=n.agMismatch)t+=s(r),delete n.agMismatch;else if(i=n.propertyMismatch)t+=o(i),delete n.propMismatch;n.invalid={path:e,message:t}}function L(e){if(e.type.indexOf("obj_")===-1&&e.type.indexOf("array")===-1)return;e=_(e);if(e.type&&e.type.indexOf("array")>-1){var t=e.array||e;if(t.arrayType!=="specific"&&t[0])return e}}function A(e,t,n){function o(e){return e.replace(/\.([0-9]+)$/,".[]")}n=n||{};var r,i,s={};return r=n[t]||n[t.replace(/\.([0-9]+)$/,".[]")],r?r:(i=L(e),i&&(n[t]=i),i)}function O(e,t){e=e.replace(/\.[0-9]+\./g,"."),e=e.replace(/\.[0-9]+/g,"");var n=s[e];if(n)return n;var r=N(e);return r&&(s[e]=r),r}function M(e,t){e=e.replace(/\.[0-9]+\./g,"."),e=e.replace(/\.[0-9]+/g,"");var n=s[e];if(n)return n;var r=N(e);return r&&(s[e]=r),r}function _(e){function s(e,t){for(var n=t.length-1;n>=0;n--)t[n]===e&&t.splice(n,1)}function o(e,t){var n={},r=0;for(var i in e)n[r]=e[i],r++;for(var s in t)n[r]=t[s],r++;return n}function a(e,t){l(e,t)||e.push(t)}function f(e,t){for(var n=0,r=t.length;n<r;n++)l(e,t[n])||e.push(t[n])}function l(e,t){for(var n=e.length-1;n>=0;n--)if(e[n]===t)return!0}var t=T(e.type),n;if(t){e=Object.create(e);var r=e.type.split(",");if(e["obj_"+t])e=u.fasterExtend(!0,null,JSCL.getApiObj(t),e[e.type]);else if(e.object){var i=JSCL.getApiObj(t);s("obj_"+t,r),e.type=r.join(","),e.array&&i.array&&(e.array=o(e.array,i.array),a(r,"array")),e=u.fasterExtend(!0,null,i,e),f(r,i.type.split(",")),e.type=r.join(",");if(n=T(i.type))e=_(e)}else{var i=JSCL.getApiObj(t);s("obj_"+t,r),f(r,i.type.split(",")),e.type=r.join(","),e=u.fasterExtend(!0,null,i,e)}}return Object.create(e)}function D(e){if(e&&e.indexOf("enum_")>-1){var t=e.split(",");for(var n in t){var r=t[n];if(r.indexOf("enum_")>-1)return r.substring(5)}}}function P(e){var t=B(e);return t==="boolean"?"bool":t==="function"?"method":t}function H(e){var t=typeof e;if(t!==i){if(t==="boolean")return"bool";if(t==="number")return"number";if(t==="function")return"method";if(e&&e.pop)return"array";if(t==="string")return"string";if(t==="object")return e&&e.getUTCMilliseconds?"date":"object"}return i}function B(e){var t=typeof e;if(t!==i){if(t==="boolean")return"boolean";if(t==="number")return"number";if(t==="function")return"function";if(e&&e.pop)return"array";if(t==="string")return"string";if(t==="object")return e&&e.getUTCMilliseconds?"date":"object"}return i}var n=" ",r="",i="undefined",s={},o={};typeof Object.create!="function"&&(Object.create=function(e){function t(){}return t.prototype=e,new t});var u=e("jsonLib");t.getMiData=l,t.processJson=a,t.evalPath=b,t.getMiValType=H,t.evalDocsPath=c;var E=function(e){var t=[],n=0;for(t[n++]in e);return t}})()}),
/** START OF rsvp **/
/*!
 * @overview RSVP - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/tildeio/rsvp.js/master/LICENSE
 * @version   3.0.11
 */
function(){function e(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function t(e){var t=e._promiseCallbacks;return t||(t=e._promiseCallbacks={}),t}function i(e,t){if(e==="onerror"){r.on("error",t);return}if(arguments.length!==2)return r[e];r[e]=t}function s(e){return typeof e=="function"||typeof e=="object"&&e!==null}function o(e){return typeof e=="function"}function u(e){return typeof e=="object"&&e!==null}function d(){}function b(e){try{return e.then}catch(t){return y.error=t,y}}function w(e,t,n,r){try{e.call(t,n,r)}catch(i){return i}}function E(e,t,n){r.async(function(e){var r=!1,i=w(n,t,function(n){if(r)return;r=!0,t!==n?T(e,n):C(e,n)},function(t){if(r)return;r=!0,k(e,t)},"Settle: "+(e._label||" unknown promise"));!r&&i&&(r=!0,k(e,i))},e)}function S(e,t){t._state===m?C(e,t._result):e._state===g?k(e,t._result):L(t,undefined,function(n){t!==n?T(e,n):C(e,n)},function(t){k(e,t)})}function x(e,t){if(t.constructor===e.constructor)S(e,t);else{var n=b(t);n===y?k(e,y.error):n===undefined?C(e,t):o(n)?E(e,t,n):C(e,t)}}function T(e,t){e===t?C(e,t):s(t)?x(e,t):C(e,t)}function N(e){e._onerror&&e._onerror(e._result),A(e)}function C(e,t){if(e._state!==v)return;e._result=t,e._state=m,e._subscribers.length===0?r.instrument&&p("fulfilled",e):r.async(A,e)}function k(e,t){if(e._state!==v)return;e._state=g,e._result=t,r.async(N,e)}function L(e,t,n,i){var s=e._subscribers,o=s.length;e._onerror=null,s[o]=t,s[o+m]=n,s[o+g]=i,o===0&&e._state&&r.async(A,e)}function A(e){var t=e._subscribers,n=e._state;r.instrument&&p(n===m?"fulfilled":"rejected",e);if(t.length===0)return;var i,s,o=e._result;for(var u=0;u<t.length;u+=3)i=t[u],s=t[u+n],i?D(n,i,s,o):s(o);e._subscribers.length=0}function O(){this.error=null}function _(e,t){try{return e(t)}catch(n){return M.error=n,M}}function D(e,t,n,r){var i=o(n),s,u,a,f;if(i){s=_(n,r),s===M?(f=!0,u=s.error,s=null):a=!0;if(t===s){k(t,new TypeError("A promises callback cannot return that same promise."));return}}else s=r,a=!0;t._state===v&&(i&&a?T(t,s):f?k(t,u):e===m?C(t,s):e===g&&k(t,s))}function P(e,t){try{t(function(n){T(e,n)},function(n){k(e,n)})}catch(n){k(e,n)}}function H(e,t,n){return e===m?{state:"fulfilled",value:n}:{state:"rejected",reason:n}}function B(e,t,n,r){this._instanceConstructor=e,this.promise=new e(d,r),this._abortOnReject=n,this._validateInput(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._init(),this.length===0?C(this.promise,this._result):(this.length=this.length||0,this._enumerate(),this._remaining===0&&C(this.promise,this._result))):k(this.promise,this._validationError())}function W(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function X(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function $(e,t){this._id=z++,this._label=t,this._state=undefined,this._result=undefined,this._subscribers=[],r.instrument&&p("created",this),d!==e&&(o(e)||W(),this instanceof $||X(),P(this,e))}function J(){this.value=undefined}function G(e){try{return e.then}catch(t){return K.value=t,K}}function Y(e,t,n){try{e.apply(t,n)}catch(r){return K.value=r,K}}function Z(e,t){var n={},r,i,s=e.length,o=new Array(s);for(var u=0;u<s;u++)o[u]=e[u];for(i=0;i<t.length;i++)r=t[i],n[r]=o[i+1];return n}function et(e){var t=e.length,n=new Array(t-1);for(var r=1;r<t;r++)n[r-1]=e[r];return n}function tt(e,t){return{then:function(n,r){return e.call(t,n,r)}}}function rt(e,t,n,r){var i=Y(n,r,t);return i===K&&k(e,i.value),e}function it(e,t,n,r){return V.all(t).then(function(t){var i=Y(n,r,t);return i===K&&k(e,i.value),e})}function st(e){return e&&typeof e=="object"?e.constructor===V?!0:G(e):!1}function ut(e,t,n){this._superConstructor(e,t,!1,n)}function lt(e,t,n){this._superConstructor(e,t,!0,n)}function pt(e,t,n){this._superConstructor(e,t,!1,n)}function Ct(){return function(){process.nextTick(Mt)}}function kt(){var e=0,t=new Tt(Mt),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function Lt(){var e=new MessageChannel;return e.port1.onmessage=Mt,function(){e.port2.postMessage(0)}}function At(){return function(){setTimeout(Mt,1)}}function Mt(){for(var e=0;e<Et;e+=2){var t=Ot[e],n=Ot[e+1];t(n),Ot[e]=undefined,Ot[e+1]=undefined}Et=0}function Pt(e,t){r.async(e,t)}function Ht(){r.on.apply(r,arguments)}function Bt(){r.off.apply(r,arguments)}var n={mixin:function(e){return e.on=this.on,e.off=this.off,e.trigger=this.trigger,e._promiseCallbacks=undefined,e},on:function(n,r){var i=t(this),s;s=i[n],s||(s=i[n]=[]),e(s,r)===-1&&s.push(r)},off:function(n,r){var i=t(this),s,o;if(!r){i[n]=[];return}s=i[n],o=e(s,r),o!==-1&&s.splice(o,1)},trigger:function(e,n){var r=t(this),i,s;if(i=r[e])for(var o=0;o<i.length;o++)s=i[o],s(n)}},r={instrument:!1};n.mixin(r);var a;Array.isArray?a=Array.isArray:a=function(e){return Object.prototype.toString.call(e)==="[object Array]"};var f=a,l=Date.now||function(){return(new Date).getTime()},c=Object.create||function(e){var t=function(){};return t.prototype=e,t},h=[],p=function(t,n,i){1===h.push({name:t,payload:{guid:n._guidKey+n._id,eventName:t,detail:n._result,childGuid:i&&n._guidKey+i._id,label:n._label,timeStamp:l(),stack:(new Error(n._label)).stack}})&&setTimeout(function(){var e;for(var t=0;t<h.length;t++)e=h[t],r.trigger(e.name,e.payload);h.length=0},50)},v=void 0,m=1,g=2,y=new O,M=new O;B.prototype._validateInput=function(e){return f(e)},B.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},B.prototype._init=function(){this._result=new Array(this.length)};var j=B;B.prototype._enumerate=function(){var e=this.length,t=this.promise,n=this._input;for(var r=0;t._state===v&&r<e;r++)this._eachEntry(n[r],r)},B.prototype._eachEntry=function(e,t){var n=this._instanceConstructor;u(e)?e.constructor===n&&e._state!==v?(e._onerror=null,this._settledAt(e._state,t,e._result)):this._willSettleAt(n.resolve(e),t):(this._remaining--,this._result[t]=this._makeResult(m,t,e))},B.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===v&&(this._remaining--,this._abortOnReject&&e===g?k(r,n):this._result[t]=this._makeResult(e,t,n)),this._remaining===0&&C(r,this._result)},B.prototype._makeResult=function(e,t,n){return n},B.prototype._willSettleAt=function(e,t){var n=this;L(e,undefined,function(e){n._settledAt(m,t,e)},function(e){n._settledAt(g,t,e)})};var F=function(t,n){return(new j(this,t,!0,n)).promise},I=function(t,n){function o(e){T(i,e)}function u(e){k(i,e)}var r=this,i=new r(d,n);if(!f(t))return k(i,new TypeError("You must pass an array to race.")),i;var s=t.length;for(var a=0;i._state===v&&a<s;a++)L(r.resolve(t[a]),undefined,o,u);return i},q=function(t,n){var r=this;if(t&&typeof t=="object"&&t.constructor===r)return t;var i=new r(d,n);return T(i,t),i},R=function(t,n){var r=this,i=new r(d,n);return k(i,t),i},U="rsvp_"+l()+"-",z=0,V=$;$.cast=q,$.all=F,$.race=I,$.resolve=q,$.reject=R,$.prototype={constructor:$,_guidKey:U,_onerror:function(e){r.trigger("error",e)},then:function(e,t,n){var i=this,s=i._state;if(s===m&&!e||s===g&&!t)return r.instrument&&p("chained",this,this),this;i._onerror=null;var o=new this.constructor(d,n),u=i._result;r.instrument&&p("chained",i,o);if(s){var a=arguments[s-1];r.async(function(){D(s,o,a,u)})}else L(i,o,e,t);return o},"catch":function(e,t){return this.then(null,e,t)},"finally":function(e,t){var n=this.constructor;return this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})},t)}};var K=new J,Q=new J,nt=function(t,n){var r=function(){var e=this,r=arguments.length,i=new Array(r+1),s,o=!1;for(var u=0;u<r;++u){s=arguments[u];if(!o){o=st(s);if(o===Q){var a=new V(d);return k(a,Q.value),a}o&&o!==!0&&(s=tt(o,s))}i[u]=s}var l=new V(d);return i[r]=function(e,t){e?k(l,e):n===undefined?T(l,t):n===!0?T(l,et(arguments)):f(n)?T(l,Z(arguments,n)):T(l,t)},o?it(l,i,t,e):rt(l,i,t,e)};return r.__proto__=t,r},ot=function(t,n){return V.all(t,n)};ut.prototype=c(j.prototype),ut.prototype._superConstructor=j,ut.prototype._makeResult=H,ut.prototype._validationError=function(){return new Error("allSettled must be called with an array")};var at=function(t,n){return(new ut(V,t,n)).promise},ft=function(t,n){return V.race(t,n)},ct=lt;lt.prototype=c(j.prototype),lt.prototype._superConstructor=j,lt.prototype._init=function(){this._result={}},lt.prototype._validateInput=function(e){return e&&typeof e=="object"},lt.prototype._validationError=function(){return new Error("Promise.hash must be called with an object")},lt.prototype._enumerate=function(){var e=this.promise,t=this._input,n=[];for(var r in t)e._state===v&&t.hasOwnProperty(r)&&n.push({position:r,entry:t[r]});var i=n.length;this._remaining=i;var s;for(var o=0;e._state===v&&o<i;o++)s=n[o],this._eachEntry(s.entry,s.position)};var ht=function(t,n){return(new ct(V,t,n)).promise};pt.prototype=c(ct.prototype),pt.prototype._superConstructor=j,pt.prototype._makeResult=H,pt.prototype._validationError=function(){return new Error("hashSettled must be called with an object")};var dt=function(t,n){return(new pt(V,t,n)).promise},vt=function(t){throw setTimeout(function(){throw t}),t},mt=function(t){var n={};return n.promise=new V(function(e,t){n.resolve=e,n.reject=t},t),n},gt=function(t,n,r){return V.all(t,r).then(function(e){if(!o(n))throw new TypeError("You must pass a function as map's second argument.");var t=e.length,i=new Array(t);for(var s=0;s<t;s++)i[s]=n(e[s]);return V.all(i,r)})},yt=function(t,n){return V.resolve(t,n)},bt=function(t,n){return V.reject(t,n)},wt=function(t,n,r){return V.all(t,r).then(function(e){if(!o(n))throw new TypeError("You must pass a function as filter's second argument.");var t=e.length,i=new Array(t);for(var s=0;s<t;s++)i[s]=n(e[s]);return V.all(i,r).then(function(n){var r=new Array(t),i=0;for(var s=0;s<t;s++)n[s]&&(r[i]=e[s],i++);return r.length=i,r})})},Et=0,St=function(t,n){Ot[Et]=t,Ot[Et+1]=n,Et+=2,Et===2&&_t()},xt=typeof window!="undefined"?window:{},Tt=xt.MutationObserver||xt.WebKitMutationObserver,Nt=typeof Uint8ClampedArray!="undefined"&&typeof importScripts!="undefined"&&typeof MessageChannel!="undefined",Ot=new Array(1e3),_t;typeof process!="undefined"&&{}.toString.call(process)==="[object process]"?_t=Ct():Tt?_t=kt():Nt?_t=Lt():_t=At(),r.async=St;var Dt=yt;if(typeof window!="undefined"&&typeof window.__PROMISE_INSTRUMENTATION__=="object"){var jt=window.__PROMISE_INSTRUMENTATION__;i("instrument",!0);for(var Ft in jt)jt.hasOwnProperty(Ft)&&Ht(Ft,jt[Ft])}var It={race:ft,Promise:V,allSettled:at,hash:ht,hashSettled:dt,denodeify:nt,on:Ht,off:Bt,map:gt,filter:wt,resolve:yt,reject:bt,all:ot,rethrow:vt,defer:mt,EventTarget:n,configure:i,async:Pt};typeof define=="function"&&define.amd?define("rsvp",[],function(){return It}):typeof module!="undefined"&&module.exports?module.exports=It:typeof this!="undefined"&&(this.RSVP=It)}.call(this)
/** END OF rsvp **/
,define("tree_data_source2",["require","exports","module","jsonLib","get_metadata","strings","ast_layer"],function(require,exports,module){function init(){GLOBAL.astComments=[];var e=(new Date).getTime();GLOBAL.fullnameProps={},GLOBAL.props=[],GLOBAL.chartNames=chartNames=getChartNames(),refreshAstComments(),sortProp("properties"),makeFlatProperties(GLOBAL.properties),indexPropertiesByFn(GLOBAL.props),sortProp(undefined,"UseCompare2"),markLastNodes(GLOBAL.props),prepareProps();var t=(new Date).getTime();debug&&console.log("Sort/properties time: "+(t-e))}function refreshAstComments(){GLOBAL.astComments=GLOBAL.syntax.comments}function prepareProps(){var e=[];for(var t=0;t<GLOBAL.props.length;t++)GLOBAL.props[t].fullname===GLOBAL.props[t].shortname&&e.push(GLOBAL.props[t].shortname);for(var t=0;t<e.length;t++)GLOBAL.chartNames[t].divID=GLOBAL.fullnames[e[t]+".targetElement"]||"container_Chart"||e[t]}function sortProp(e,t){function i(e,t){if(e.loc.start.line===t.loc.start.line){if(e.loc.start.column<t.loc.start.column)return-1;if(e.loc.start.column>t.loc.start.column)return 1}if(e.loc.start.line<t.loc.start.line)return-1;if(e.loc.start.line>t.loc.end.line)return 1;if(e.loc.start.line>t.loc.start.line&&e.loc.end.line<t.loc.end.line)return 1;if(e.loc.start.line==t.loc.start.line&&e.loc.end.line==t.loc.end.line){if(e.loc.start.column>t.loc.end.column)return 1;if(e.loc.start.column>t.loc.start.column&&e.loc.end.column<t.loc.end.column)return 1}return e.loc.start.line==t.loc.start.line&&e.loc.start.column<t.loc.start.column?-1:e.loc.start.line>t.loc.start.line?1:0}function s(e,t){var n=e.path,r=t.path,o=e.parentPath||(e.parentPath=n.substring(0,n.length-e.shortname.length-1)),u=t.parentPath||(t.parentPath=r.substring(0,r.length-t.shortname.length-1));if(o===u){var a,f;if(e.value&&t.value){if(e.value.type==="ObjectExpression"||e.value.type==="ArrayExpression")a=!0;if(t.value.type==="ObjectExpression"||t.value.type==="ArrayExpression")f=!0;if(a!==f)return a?1:-1}}else{var l=n.split("."),c=r.split("."),h=Math.min(l.length,c.length),p="",d="",v="";for(var m=0;m<h;m++){var g=c[m];if(l[m]!==c[m]){d=p+"."+l[m],v=p+"."+c[m];break}p+=m===0?"":".",p+=l[m]}if(d&&v&&GLOBAL.fullnameProps[d]&&GLOBAL.fullnameProps[v])return s(GLOBAL.fullnameProps[d],GLOBAL.fullnameProps[v])}return i(e,t)}var n=t?s:i;e&&GLOBAL.properties.sort(n);var r=GLOBAL.props.sort(n)}function lastPartInPath(e){var t=e.split(".");return t[t.length-1]}function getChartNames(){GLOBAL.chartSyntaxRoots={};var e=[],t=GLOBAL.varDeclarations,n=GLOBAL.syntax.body;for(var r=0;r<t.length;r++)if(t[r].type==="VariableDeclarator"&&t[r].init&&t[r].init.callee&&t[r].init.callee.object&&t[r].init.callee.object.name=="JSC"&&t[r].init.callee.property.name=="Chart")if(t[r].init.arguments&&t[r].init.arguments[0].type==="Identifier"){var i=t[r].init.arguments[0].name;for(var s=0;s<n.length;s++)n[s].type==="Identifier"&&n[s].declarations[0].id.name===i?(e.push({name:i,isChart:!0,type:n[s].type,loc:n[s].declarations[0].init.loc}),GLOBAL.properties.push(e[e.length-1]),GLOBAL.chartSyntaxRoots[i]=n[s]):n[s].type==="VariableDeclaration"&&n[s].declarations[0].id.name===i?(e.push({name:i,isChart:!0,type:n[s].type,loc:n[s].loc}),GLOBAL.properties.push(e[e.length-1]),GLOBAL.chartSyntaxRoots[i]=n[s]):n[s].type==="ExpressionStatement"&&n[s].expression.left&&n[s].expression.left.name===i&&(e.push({name:i,isChart:!0,type:n[s].type,loc:n[s].loc}),GLOBAL.properties.push(e[e.length-1]),GLOBAL.chartSyntaxRoots[i]=n[s])}else if(t[r].init.arguments&&t[r].init.arguments[0].type==="ObjectExpression"){var i=t[r].id.name;e.push({name:i,isChart:!0,type:t[r].init.arguments[0].type,loc:t[r].init.arguments[0].loc}),GLOBAL.properties.push(e[e.length-1]),GLOBAL.chartSyntaxRoots[i]=t[r]}else e.push({name:t[r].id.name,isChart:!0,type:t[r].type,loc:t[r].loc}),GLOBAL.properties.push(e[e.length-1]),GLOBAL.chartSyntaxRoots[i]=t[r];return e}function isInFunctionDeclaration(e){var t=GLOBAL.syntax.body;for(var n=0;n<t.length;n++)if(t[n].type==="FunctionDeclaration"&&e.loc.start.line>=t[n].loc.start.line&&e.loc.end.line<=t[n].loc.end.line)return!0;return!1}function makeFlatProperties(props,parentFullName,parentPath,isArray,parentIndex,parentObj){parentFullName=parentFullName||"",parentPath=parentPath||"";var closestProp=props[0],msg="";for(var i=0;i<props.length;i++){if(props[i]===null){var closestProp=props[i+1]||props[i-1];if(isArray)var msg="Unspecified array item.";var error=new Error("Line "+closestProp.loc.start.line+": "+msg);throw error.lineNumber=closestProp.loc.start.line,error.description=msg,error}props[i].isChart&&(parentFullName=props[i].name,parentPath=props[i].name);if(!props[i].isDone)if(isArray)props[i].fullname=parentFullName+"["+i+"]",props[i].path=parentPath+"."+i,props[i].parentPath=parentPath,props[i].shortname=i;else if(props[i].key){var keyName=props[i].key.name||props[i].key.value;props[i].fullname=parentFullName+"."+keyName,props[i].path=parentPath+"."+keyName,props[i].parentPath=parentPath,props[i].shortname=keyName}else props[i].isChart?(props[i].fullname=parentFullName,props[i].path=parentPath,props[i].parentPath="",props[i].shortname=props[i].name):(props[i].fullname=parentFullName+"."+i,props[i].path=parentPath+"."+i,props[i].parentPath=parentPath,props[i].shortname=i);props[i].type==="NewExpression";if(props[i].isDone)continue;parentObj&&(props[i].parent=parentObj),parentIndex&&(props[i].parentIndex=parentIndex),props[i].isChart||(i>0&&(props[i].prevSibling=props[i-1]),i+1<props.length&&(props[i].nextSibling=props[i+1])),props[i].isDone||GLOBAL.props.push(props[i]),props[i].isDone=!0,props[i].nodeIndex=GLOBAL.props.length-1;if(isInFunctionDeclaration(props[i])){props[i].isInFunctionDeclaration=!0;continue}var fnVal;if(props[i].type==="Property")if(props[i].value.type==="Identifier")setFullname(props[i].fullname,ast_layer.getValueFromAST(null,props[i]));else if(props[i].value.type==="CallExpression"){var loc=props[i].value.loc,range={start:{row:loc.start.line+GLOBAL.offsetLineJSPage-1,column:loc.start.column},end:{row:loc.end.line+GLOBAL.offsetLineJSPage-1,column:loc.end.column}};try{fnVal=eval("("+GLOBAL.aceEditor.getSession().getTextRange(range)+")")}catch(e){fnVal=unresolved}setFullname(props[i].fullname,fnVal)}else if(props[i].value.type==="FunctionExpression"){var loc=props[i].value.loc,range={start:{row:loc.start.line+GLOBAL.offsetLineJSPage-1,column:loc.start.column},end:{row:loc.end.line+GLOBAL.offsetLineJSPage-1,column:loc.end.column}};try{fnVal=eval("("+GLOBAL.aceEditor.getSession().getTextRange(range)+")")}catch(e){fnVal=unresolved}setFullname(props[i].fullname,fnVal)}else if(props[i].value.type==="BinaryExpression"){var loc=props[i].value.loc,range=ast_layer.getAceRange(loc);try{fnVal=eval("("+GLOBAL.aceEditor.getSession().getTextRange(range)+")")}catch(e){fnVal=unresolved}setFullname(props[i].fullname,fnVal)}else if(props[i].value.type==="ExpressionStatement"){var loc=props[i].value.expression.loc,range=ast_layer.getAceRange(loc);try{fnVal=eval("("+GLOBAL.aceEditor.getSession().getTextRange(range)+")")}catch(e){fnVal=unresolved}setFullname(props[i].fullname,fnVal)}else props[i].value.type==="UnaryExpression"&&props[i].value.argument?fnVal=+(props[i].value.operator+props[i].value.argument.raw):fnVal=props[i].value.value,setFullname(props[i].fullname,fnVal);else if(props[i].type==="Identifier")setFullname(props[i].fullname,ast_layer.getValueFromAST(null,props[i]));else if(props[i].type==="UnaryExpression"&&props[i].argument)fnVal=+(props[i].operator+props[i].argument.raw),setFullname(props[i].fullname,fnVal);else if(props[i].type==="BinaryExpression"){var loc=props[i].loc,range=ast_layer.getAceRange(loc);try{fnVal=eval("("+GLOBAL.aceEditor.getSession().getTextRange(range)+")")}catch(e){fnVal=unresolved}setFullname(props[i].fullname,fnVal)}else if(props[i].type==="ExpressionStatement"&&!props[i].isChart){var loc=props[i].expression.loc,range=ast_layer.getAceRange(loc);try{fnVal=eval("("+GLOBAL.aceEditor.getSession().getTextRange(range)+")")}catch(e){fnVal=unresolved}setFullname(props[i].fullname,fnVal)}else if(props[i].type==="Literal")fnVal=props[i].value,setFullname(props[i].fullname,fnVal);else if(props[i].type==="NewExpression"){var loc=props[i].loc,range={start:{row:loc.start.line+GLOBAL.offsetLineJSPage-1,column:loc.start.column},end:{row:loc.end.line+GLOBAL.offsetLineJSPage-1,column:loc.end.column}};try{fnVal=eval("("+GLOBAL.aceEditor.getSession().getTextRange(range)+")")}catch(e){fnVal=unresolved}setFullname(props[i].fullname,fnVal)}else if(props[i].type==="MemberExpression")setFullname(props[i].fullname,ast_layer.getValueFromAST(null,props[i].object)),props[i].property.type==="SequenceExpression"&&throwAstError(props[i],"Unexpected sequence expression.");else if(props[i].type==="LogicalExpression"||props[i].type==="AssignmentExpression"||props[i].type==="UpdateExpression"||props[i].type==="ConditionalExpression"){var astMeta=ast_layer.getAstMeta(props[i]);setFullname(props[i].fullname,astMeta.value)}if(props[i].type==="ObjectExpression"&&!props[i].isChart){props[i].childrenNo=props[i].properties.length,makeFlatProperties(props[i].properties,props[i].fullname,props[i].path,null,GLOBAL.props.length-1,props[i]);continue}if(props[i].type==="ArrayExpression"){props[i].childrenNo=props[i].elements.length,makeFlatProperties(props[i].elements,props[i].fullname,props[i].path,"isArray",GLOBAL.props.length-1,props[i]);continue}if(!props[i].value)continue;if(props[i].value.type==="Literal")continue;if(props[i].value.type==="ArrayExpression"){props[i].childrenNo=props[i].value.elements.length,makeFlatProperties(props[i].value.elements,props[i].fullname,props[i].path,"isArray",GLOBAL.props.length-1,props[i]);continue}props[i].value.type==="ObjectExpression"&&(props[i].childrenNo=props[i].value.properties.length,makeFlatProperties(props[i].value.properties,props[i].fullname,props[i].path,null,GLOBAL.props.length-1,props[i]))}}function throwAstError(e,t){var n=new Error("Line "+e.loc.start.line+": "+t);throw n.lineNumber=e.loc.start.line,n.description=t,n}function setFullname(e,t){t!==undefined?GLOBAL.fullnames[e]!==t&&(GLOBAL.fullnames[e]=t,GLOBAL.jsonIsDirty=!0,GLOBAL.chartIsDirty=!0):GLOBAL.fullnames[e]&&(delete GLOBAL.fullnames[e],GLOBAL.jsonIsDirty=!0,GLOBAL.chartIsDirty=!0)}function resetFullnames(){GLOBAL.fullnames={}}function markLastNodes(e){var t={},n;e[0].nodeIndex=0;for(var r=1;r<e.length;r++){e[r].nodeIndex=r,e[r].textboxValue=jL.escapeHtml(ast_layer.getValueFromAST({ast_node_dec:e[r]},e[r],"getRaw"))+"";var i=jL.jsToPath(e[r].fullname);n=e[r].parentPath||i.substring(0,i.length-lastPartInPath(i).length-1),n&&(t[n]=e[r])}for(var s in t)t[s].isLast=!0}function indexPropertiesByFn(e){function n(e){var t=e.path;GLOBAL.fullnameProps[t]=e}for(var t=0;t<e.length;t++)n(e[t])}var jL=require("jsonLib"),metaData=require("get_metadata"),strings=require("strings").presets,debug=strings.debug,ast_layer=require("ast_layer"),unresolved=undefined,chartNames;exports.init=init,exports.setFullname=setFullname,exports.resetFullnames=resetFullnames}),define("statusBar",["require","exports","module","idleDefer","strings"],function(e,t,n){function d(){f=$("div.holder dl"),u=$("#statusTitle"),a=$("#statusMessage")}function v(e,t){t=t||{};if(l)return;if(c&&c!==t.claimID)return;var n=t.title,i=t.type||"info",o=t.time||s.statusBarClear,d=t.data,v;t.claimID&&(c=t.claimID),f.removeClass("statusWarning");switch(i){case"status":n=n||"STATUS";break;case"warning":f.addClass("statusWarning"),n=n||"WARNING";break;case"info":n=n||"";break;default:n=n||""}d&&(e=e.replace(/\{/g,'<span class="statusData">{').replace(/\}/g,"}</span>"),d.cacheID&&(v=GLOBAL.props[d.cacheID])&&(d.path=v.path,d.subID||(d.subID=v.shortname),d.label=v.shortname),e=e.supplant(d)),n?u.html(n+":"):u.html(""),a.html(e),h=t.id,r.clear("statusClear"),t.lock?l=!0:t.claimID?t.claimDuration&&(p=setTimeout(function(){g(t.claimID)},t.claimDuration)):r.defer("statusClear",o,function(){m()})}function m(e){if(l)return;if(e&&e!==h)return;if(c&&e!==c)return;f.removeClass("statusWarning"),r.clear("statusClear"),u.html(""),a.html("")}function g(e){c===e&&(clearTimeout(p),c=""),m()}function y(){l=!1,m()}t.show=v,t.clear=m,t.unclaim=g,t.unlock=y,t.init=d;var r=e("idleDefer"),i=e("strings").presets,s=i.deferTiming,o=i.debug,u,a,f,l,c,h,p}),define("codeUiInterface",["require","exports","module","get_metadata","ast_layer","jsonLib","rsvp","strings","get_metadata","get_metadata","controller","dom","ast_layer","ast_layer"],function(e,t,n){function l(e){}function c(e){if(e.indexOf("'")===0||e.indexOf('"')===0)e=e.substring(1,e.length-1);return e}function h(e,t,n,r){function l(e,t){return e.val(t),!0}function h(e,t){return t==="true"?(e.removeClass("off"),!0):t==="false"?(e.addClass("off"),!0):!1}var a=new u.Promise(function(u,a){GLOBAL.jsonIsDirty=!0,f&&console.log("setUIValue: "+t);if(!isNaN(e)&&parseInt(e)>-1){var p=GLOBAL.props[e],d,v,m;if(p){var g=s.getAstMeta(p);n=n||i.getMetaData(p.fullname,"dropdownchange");if(!r||r.length===0)(d=o.evalPath(n,"meta.template"))?d.indexOf("TextBox")===0?(r=$("input[cacheid="+e+"]"),v=l):d.indexOf("CheckBox")===0&&(r=$("div[cacheid="+e+"]"),v=h):(r=$("input[cacheid="+e+"]"),v=l);r&&r.length>0&&v&&(t=c(t),m=v(r,t))}}m?u():a()});return a}function p(e,t,n){}function d(t,n,i){f&&console.log("++setCodeValue "+n),GLOBAL.jsonIsDirty=!0;if(!isNaN(t)&&parseInt(t)>-1){var u=GLOBAL.props[t];if(u){var a=s.getAstMeta(u),l=n,c=s.astLocToAceRange(a.valueLoc);i=i||e("get_metadata").getMetaData(u.fullname);var h=o.evalPath(i,"meta.template");h==="ColorPicker-number"?l="'"+n+"'":a.valueType==="string"&&a.quoteChar&&(l=a.quoteChar+n+a.quoteChar),GLOBAL.aceEditor.getSession().replace(c,l);return!0;var p,c,d,v,m,g,y,h,b,w,E}}return!1}function v(t){function v(e){return $("input[cacheid="+e+"]")[0]}var n=e("controller").getCursorState();if(n.focus==="textbox"){var r,i;if(r=v(n.cacheID)){i=r.value;var s=r.selectionEnd-r.selectionStart;i=i.slice(0,r.selectionStart)+t+i.slice(r.selectionEnd);var o=r.selectionStart+t.length,u=r.scrollLeft;return r.value=i,e("dom").callEventOn("keyup",r),r.selectionEnd=r.selectionStart=o,r.focus(),!0}}else if(n.focus==="codeText"){var a,f,l={},c={},h=GLOBAL.aceEditor.selection.getRange(),p,l=e("ast_layer").findAstFromPos2(h.start),c=e("ast_layer").findAstFromPos2(h.end);l.value&&c.value&&l.value.path===c.value.path&&(p=!0);if(p){var d=GLOBAL.aceEditor.getSession().replace(h,t);return GLOBAL.aceEditor.focus(),!0}}}t.getUiValue=c,t.getCodeValue=l,t.setUiValue=h,t.setCodeValue=p,t.tokenClicked=v;var r=ace.require("ace/range"),i=e("get_metadata"),s=e("ast_layer"),o=e("jsonLib"),u=e("rsvp"),a=e("strings").presets,f=a.debug}),define("tree_node_handler2",["require","exports","module","events","cache","get_metadata","highlight","codeUiInterface","dom","eventHandlers","jsonLib","docTab_update","ast_layer","controller","eventHandlers"],function(e,t,n){function p(){}function d(e,t){var n=document.createElement("li"),r=document.createElement("a");r.innerHTML=e.text,r.title=l.evalPath(e.description,"description")||e.description,r.setAttribute("class","dropDownColorLink"),l.evalPath(e.description,"isDefault")&&(r.title="[Default] "+r.title,a.addCssClass(r,"isDefault")),n.appendChild(r);try{t.appendChild(n,null)}catch(i){t.appendChild(n)}}function m(){for(var e=0;e<v.length;e++)v[e].holder.style.display="none",v[e].dataUL.innerHTML="";v=[]}function g(e,t){for(var n in t[dropdownName].members)d({text:n,description:t[dropDown1[0]].members[n]},e)}function y(e,t,n,r){m(),$("div.treeContainer").css("padding-bottom","200px");var i=t.parentNode.nextSibling.childNodes[1].childNodes[0].childNodes[0].childNodes[0];if(!i)throw new Error("Exptected UL holder");var s=i.getAttribute("seq"),o=n.enumData;if(!o.eChain.sequence)throw new Error("eChain.sequence is null.");var u=o.eChain.sequence.split(",");t.parentNode.nextSibling.style.display="block",v.push({holder:t.parentNode.nextSibling,dataUL:i});var a=t.parentNode.nextSibling.cloneNode(!0);i.innerHTML="",i.setAttribute("cacheID",r),s=s||u[0];for(var f in o[s].members)d({text:f,description:o[s].members[f]},i)}function b(e,t){var n=e.parentNode.parentNode,r=n.getAttribute("cacheID"),i=n.getAttribute("seq");r=parseInt(r,10);var o=GLOBAL.props[r],u=t[o.fullname],a=u.enumData.eChain.sequence.split(",");i=n.getAttribute("seq")||a[0];var c=e.innerHTML,h=[],p="";for(var d=0,v=a.length;d<v;d++){var m=a[d],g;m===i?g=c:g=u.enumData.eChain[m];var y=u.enumData[m],b=l.findCaseInsensitiveProperty(y.members,g);b.isDefault||(p+=g,h.push(g));if(m===i){if(!b.chain)break;if(!(d+1<v&&b.chain.replace("enum_","")===a[d+1]))break}}h.length>1&&(p=E(h)),GLOBAL.forceUpdateFromTreeUI=!0;var w=n.parentNode.parentNode.parentNode.parentNode.previousSibling;w.childNodes[0].innerHTML=e.innerHTML,GLOBAL.fullnames[o.fullname]=p,t[o.fullname]=s.getMetaData(o.fullname,"dropdownchange"),GLOBAL.skipUIRedraw=!1,f.UIValueChanged(o.nodeIndex,p,a.length>1);return}function w(e){return e.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/\b([A-Z]+)([A-Z])([a-z])/,"$1 $2$3").replace(/^./,function(e){return e.toUpperCase()})}function E(e){var t=e.length;if(t){e[0]=e[0].toLowerCase();for(var n=1;n<t;n++)e[n]=r(e[n]);return e.join("");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}return""}function S(t,n){var r=t.getAttribute("class");if(r){var i=!0;if(r==="switch-area off")t.className="switch-area",i=!0;else{if(r!=="switch-area")throw new Error("on_off_ui_handler wrong tag.");t.className="switch-area off",i=!1}e("controller").omitLateRedraw(n.fullname),f.UIValueChanged(n.nodeIndex,i)}}function x(e){var t=e.getAttribute("cacheid");t=parseInt(t,10);var n=GLOBAL.props[t];return}function T(e,t){return;var n,r,i}function N(t){t=r.fixEvent(t),r.stopEvent(t);var n=t.target,i=n.parentElement.parentElement.parentElement.getAttribute("cacheid");e("eventHandlers").reportAction(n,"click")}var r=e("events"),i=e("cache").cache,s=e("get_metadata"),o=e("highlight"),u=e("codeUiInterface"),a=e("dom"),f=e("eventHandlers"),l=e("jsonLib"),c=e("docTab_update"),h=e("ast_layer"),v=[];t.dropDown_update_handler=b,t.input_tag_update_handler=x,t.dropDown_ui_handler=y,t.init=p,t.on_off_ui_handler=S,t.input_tag_handler=T,t.colorPickerOpen_handler=N,GLOBAL.clearDropDown_UI_IfOpened=m}),define("picker_ui2",["require","exports","module","events","ast_layer","cache","editor_work","dom","controller","eventHandlers","controller","eventHandlers","tree_node_handler2","eventHandlers","get_metadata","jsonLib","jsonLib"],function(e,t,n){function u(t,n,i){var s=$("<div style='overflow:hidden;'></div>"),o=t;$(t).append(s),window.setTimeout(function(){var t=new Jsc.PalettePicker(s,{optionsPopupZIndex:100}),o=t.searchBox[0];o.setAttribute("cacheID",i),r.addListener(o,"click",function(t){this.parentNode.nextSibling.nextSibling.focus(),e("dom").callClickOn(this.parentNode.nextSibling.nextSibling)}),t.setPalette(n);var u=t.getPalette(),a;t.setOnChange(function(){a&&clearTimeout(a),a=window.setTimeout(function(){if(t.getPalette()==u)return;var n=t.searchBox[0],r=n.getAttribute("cacheID");r=parseInt(r,10);var i=GLOBAL.props[r];e("controller").omitLateRedraw(i.fullname);var s=n.value;e("eventHandlers").UIValueChanged(r,s)},50)})},0)}function a(t,n,r,i){var s=document.createElement("div"),u=document.createElement("div"),a=document.createElement("div"),f=document.createElement("div"),l=new Jsc.ColorPicker(f);l.fromString(n),l.jsColor.cacheID=i,l.jsColor.data=r,l.jsColor.onOpen=function(){o.suspendHistory(!0)},l.jsColor.onImmediateChange=function(){var t=this.cacheID;t=parseInt(t,10);var n=GLOBAL.props[t],r=this.toString();r.indexOf("'")===-1,e("controller").omitLateRedraw(n.fullname),e("eventHandlers").UIValueChanged(t,r)},l.jsColor.onClose=function(){o.suspendHistory(!1)},a.addEventListener("click",e("tree_node_handler2").colorPickerOpen_handler),a.setAttribute("cacheID",i),f.childNodes[0].style.width="10px",f.childNodes[1].style.margin="0px 0px 0px 10px ",f.childNodes[1].style.cssFloat="none",s.appendChild(u),u.appendChild(a),a.appendChild(f),t.appendChild(s)}function f(t,n,r,i){var s=document.createElement("div"),o=document.createElement("div"),u=document.createElement("div"),a=document.createElement("div");s.appendChild(o),o.appendChild(u),u.appendChild(a);var f=new Jsc.ColorPicker(a);f.fromString(n),f.jsColor.cacheID=i,f.jsColor.data=r,f.jsColor.onImmediateChange=function(){var t=this.cacheID;t=parseInt(t,10),node=GLOBAL.props[t];var n=this.toString();n.indexOf("'")===-1,e("eventHandlers").UIValueChanged(t,n)},a.childNodes[0].style.width="10px",a.childNodes[1].style.margin="0px 0px 0px 10px ",a.childNodes[1].style.cssFloat="none",t.appendChild(s)}function l(t,n,r,i,s,o){var u=e("get_metadata"),a,f=document.createElement("div"),l=document.createElement("div"),c=document.createElement("div");f.setAttribute("class","drop-holder"),l.setAttribute("class","scrollable-area-wrapper"),c.setAttribute("class","drop-list");var h=document.createElement("div");h.setAttribute("class","select-options options-overflow");var p=document.createElement("div");p.setAttribute("class","select-top");var d=document.createElement("div");d.setAttribute("class","select-right"),p.appendChild(d),h.appendChild(p),c.appendChild(n),l.appendChild(c),f.appendChild(l),h.appendChild(f);var v=document.createElement("div");v.setAttribute("class","select-bottom");var m=document.createElement("div");m.setAttribute("class","select-right"),v.appendChild(m),h.appendChild(v);var g=document.createElement("div");g.setAttribute("class","row");if(i){n.setAttribute("seq",i);var y=document.createElement("label");t.fullname.split(".").length>2&&y.setAttribute("class","width");var b=document.createElement("span");b.innerHTML=i;if(a=u.formatTooltip(e("jsonLib").evalPath(o,"enumData."+i+".description")))b.title=a;b.setAttribute("class","lightTreeLabel"),y.appendChild(b),g.appendChild(y)}var w=document.createElement("div");w.setAttribute("class","select-holder"),a?w.title=a:w.title=o.inputTooltip;var E=document.createElement("div");E.setAttribute("class","select-area select-focus");var S=document.createElement("span"),x=document.createElement("span");S.setAttribute("cacheID",s),S.innerHTML=r,e("jsonLib").evalPath(o,"enumData."+i+".members."+r+".isDefault")?S.setAttribute("class","center isDefault"):S.setAttribute("class","center"),x.setAttribute("class","left");var T=document.createElement("a");return T.setAttribute("class","select-opener"),E.appendChild(S),E.appendChild(x),E.appendChild(T),w.appendChild(E),w.appendChild(h),g.appendChild(w),g}var r=e("events"),i=e("ast_layer"),s=e("cache").cache,o=e("editor_work");t.makeDropDown=l,t.addColorPicker=a,t.addPalettePicker=u}),define("tree2",["require","exports","module","events","tree_data_source2","dom","statusBar","strings","jsonLib","editor_work","eventHandlers","docTab_update","jsonLib","tree_node_handler2","ast_layer","picker_ui2","get_metadata"],function(e,t,n){function tt(e){var t,n=e.getAttribute("cacheid"),r;for(;;){t=e.getAttribute("class");if(t&&t.indexOf("collapsable")>=0)return s.removeCssClass(e,"collapsable"),!0;r=e.getAttribute("cacheid");if(n!=r)return!1;e=e.parentNode;if(!e)return!1}return!1}function nt(){var e,t,n,r,i;for(var i in O){r=document.getElementById(O[i]);if(!r){a&&console.log("div for "+O[i]+" is empty");continue}if(r.getAttribute("done"))continue;n=r.getAttribute("nodeUI"),t=r.getAttribute("cacheID"),t=parseInt(t,10),e=GLOBAL.props[t];var o=v.getValueFromAST({},e),u=s.removeToInsertLater(r);n==="color"?(m.addColorPicker(r,o,"",t),r.setAttribute("done","yes"),u()):n==="palette"?(m.addPalettePicker(r,o,t),r.setAttribute("done","yes"),u()):n==="dropdown"&&(u(),st(r,e,r.parentNode,t),r.setAttribute("done","yes"))}r=document.getElementById(F);if(r){r.style.backgroundColor="yellow";var f=document.createElement("input");f.style.width="1px",f.style.backgroundColor="yellow",r.appendChild(f),f.focus(),r.focus(),setTimeout(function(){var e=document.getElementById(F);e&&(e.style.backgroundColor=""),f&&f.parentNode.removeChild(f)},2e3)}F="",r=document.getElementById(I),r&&r.focus(),I="",O={},c.init()}function rt(){}function it(){return}function st(e,t,n,r){var i=document.createElement("ul"),s=D[t.fullname],o=s.enumData,u=o.eChain.sequence.split(",");i.setAttribute("cacheID",r);if(u.length==1){e.appendChild(m.makeDropDown(t,i,v.getValueFromAST(t,t),null,r,s));return}var a=e;for(var f=0;f<u.length;f++){var i=document.createElement("ul"),l=m.makeDropDown(t,i,s.enumData.eChain[u[f]],u[f],r,s);a.parentNode.insertBefore(l,a.nextSibling),a=l}}function ot(e,t,n,r,i,s){var o=p.evalPath(i,"meta.template"),u=v.getValueTypeOfAst(s);if(o==="TextBox-number"||p.evalPath(i,"meta.type")==="number"||u==="number"){var a=v.getAstMeta(s);r.inputPattern=' pattern="-?[0-9]?.?[0-9]+" ',r.type=' type="text" ',r.inputStyle=' class="inputNum" ',a.valueType==="code"||r.value==="noValue"||!p.defined(r.value)&&r.value!==null?(s.valType="code",r.value=a.valueText,r.inputPattern="",r.inputStyle="",r.type=' class="inputLink" '):r.value===null?(s.valType="code",r.value="null",r.inputPattern="",r.inputStyle=""):s.valType="number"}else{var f=p.evalPath(s,"value.type")||s.type;f==="CallExpression"||f==="Identifier"||f==="NewExpression"||f==="FunctionExpression"?r.type=' class="inputLink" ':o==="CheckBox-bool"?(s.valType="bool",r.type=" "):(r.type=' class="inputStr" ',s.valType="string"),r.inputPattern=""}t===M.chartNode?e.push(W.supplant(r)):t===M.leafLiteral?(o==="CheckBox-bool"?r.value?e.push(et.supplant(r)):e.push(Z.supplant(r)):r.nodeUI.length>0?e.push(Q.supplant(r)):e.push(K.supplant(r)),n===_.lastNode):t===M.leafProperty?(o==="CheckBox-bool"?r.value==="true"?e.push(et.supplant(r)):e.push(Z.supplant(r)):r.nodeUI.length>0?e.push(G.supplant(r)):e.push(Y.supplant(r)),n===_.lastNode):t===M.node&&e.push(W.supplant(r))}function ut(e,t,n){function A(e){if(!e)return!1;for(var t=0;t<GLOBAL.props.length;t++)if(GLOBAL.props[t].nodeIndex===e&&GLOBAL.props[t].childrenNo===1)return!0;return!1}function _(){var e=(new Date).getTime();d=null,d=g.getMetaData(GLOBAL.props[S].path);var t=(new Date).getTime();GLOBAL.timeData.MetaTime=GLOBAL.timeData.MetaTime+(t-e),GLOBAL.timeData.MetaCalls=GLOBAL.timeData.MetaCalls+1}function P(){function e(e){return GLOBAL.props[S].fullname.indexOf(e.fullname)>=0?!0:!1}for(;;){if(!!e(L[L.length-1]))return;L.pop(),r.push(X)}}function H(){function e(e){return GLOBAL.props[S].fullname.indexOf(e.fullname)>=0?!0:!1}function e(e){return GLOBAL.props[S].fullname.indexOf(e.fullname)>=0?!0:!1}m&&(r.push(J),m=!1);for(;;){if(!!e(L[L.length-1]))return;L.pop(),r.push(X)}return;var t,n,i,s,o,u,f}function B(e,t){return t.loc.start.line>e.loc.end.line?!1:t.loc.start.line===e.loc.end.line&&t.loc.start.column>e.loc.end.column?!1:t.loc.start.line>=e.loc.start.line&&t.loc.end.line<e.loc.end.line?!0:t.loc.end.line===e.loc.end.line&&t.loc.end.column>e.loc.end.column?!1:t.loc.start.line==e.loc.start.line&&t.loc.end.line==e.loc.end.line&&t.loc.start.column>e.loc.start.column&&t.loc.end.column<e.loc.end.column?!0:!1}function j(e){return e.value&&e.value.value?e.value.value:e.value&&e.value.raw?e.value:""}function F(e,t){if(x.hasOwnProperty(e))return x[e];var n=t.path.split(".").length;return e[e.length-1]==="]"&&t.childrenNo>3?!0:t.parent&&t.parent.shortname==="series"&&t.parent.childrenNo===1?!1:n>2?!0:!1}var r=[];L=[];var i="",s="",o="",u="",a=M.leafProperty,f=0,l={},c=0,h=GLOBAL.props.length;GLOBAL.timeData.MetaTime=0,GLOBAL.timeData.MetaCalls=0;var d=null,m=!1,y=!1,b,w;for(var S=c;S<h;S++){b=GLOBAL.props[S],w=v.getAstMeta(b);if(b.isInFunctionDeclaration)continue;if(b.fullname[0]===".")continue;_();var T=p.defined(p.evalPath(d,"warning"));T,p.defined(b.textboxValue)?l.value=b.textboxValue:l.value=ft(v.getValueFromAST({ast_node_dec:b},b,"getRaw"))+"",l.label=at(b)+":",l.last="",l.cacheid=S,l.toolTip=b.fullname,l.toolTip2=b.fullname,l.inputStyle="",l.nodeUI="",l.nodeUI_id="",l.hitarea="",l.lastNode="",l.toggleChidren="",l.label=p.evalPath(d,"label")||l.label;var N;if(N=p.evalPath(d,"meta.template"))N.indexOf("TextBox")===0&&(b.textboxValue=l.value+"");else{if(!l.value&&!b.childrenNo&&!b.divID)continue;w.valueType==="code"}d&&d.meta&&d.meta.dropDownInfo?(l.toolTip=p.evalPath(d,"labelTooltip")||l.toolTip,l.toolTip2=p.evalPath(d,"inputTooltip")||l.toolTip):(l.toolTip=p.evalPath(d,"labelTooltip")||l.toolTip,l.toolTip2=p.evalPath(d,"inputTooltip")||l.toolTip),N&&(N&&N==="DropDown-string"?(l.nodeUI='nodeUI="dropdown"',l.nodeUI_id=b.fullname,O[S]=l.nodeUI_id,D[b.fullname]=d):N&&N.indexOf("PalettePicker")>=0?(D[b.fullname]=d,l.nodeUI_id=b.fullname,O[S]=l.nodeUI_id,l.nodeUI='nodeUI="palette"'):N&&N.indexOf("ColorPicker")>=0&&(l.nodeUI='nodeUI="color"',l.nodeUI_id=b.fullname,O[S]=l.nodeUI_id,D[b.fullname]=d));if(b.divID){l.hitarea="hitarea",a=M.chartNode,l.label=l.value=b.name,l.ccsNodeType="nodeType1",l.last="",l.collapsable="collapsable";if(y||S>1){m&&r.push(J),m=!1;for(var C=0;C<L.length;C++)r.push(X);L=[]}y=!0,L.push(b)}else if(b.childrenNo)b.lastNode?l.hitarea="hitarea":l.hitarea="hitarea",a=M.node,l.value=b.shortname+"",l.ccsNodeType="nodeType2",F(b.fullname,b)?l.collapsable=" ":l.collapsable="collapsable",b.isLast&&(l.last="last"),b.type==="Property"?(b.properties||(l.last="last"),!b.nextSibling&&b.lastNode&&(l.lastNode="lastNode"),!b.nextSibling||!b.prevSibling?!b.nextSibling&&!!b.prevSibling&&b.fullname.split(".").length>2&&b.lastNode&&(l.hitarea=""):b.fullname.split(".").length>2&&(l.hitarea="")):b.type==="ArrayExpression"?(!!b.nextSibling&&!!b.prevSibling&&b.fullname.split(".").length>2&&(l.hitarea=""),b.properties||(l.last="last"),L[L.length-1].parentIndex===b.parentIndex&&(l.last=""),b.nextSibling&&!b.prevSibling&&l.last==="last"&&(l.last=""),!b.nextSibling&&!!b.prevSibling&&(l.last="last")):b.type==="ObjectExpression"&&!!b.nextSibling&&!!b.prevSibling&&b.fullname.split(".").length>2&&(l.hitarea=""),L.length>1?H():m&&(r.push(J),m=!1),L.push(b);else if(b.type==="Property")a=M.leafProperty,p.defined(b.textboxValue)||(b.textboxValue=l.value),m||r.push(V),m=!0,P();else if(b.type==="UnaryExpression")m||r.push(V),a=M.leafLiteral,l.value=b.operator+""+b.argument.value,N&&N.indexOf("TextBox")===0&&(b.textboxValue=l.value+""),m=!0;else if(b.type==="Literal")m||r.push(V),a=M.leafLiteral,m=!0,P();else if(b.type==="BinaryExpression"||b.type==="ExpressionStatement")m||r.push(V),a=M.leafLiteral,m=!0,P();else if(b.type==="NewExpression")m||r.push(V),a=M.leafLiteral,m=!0;else{if(b.type==="ObjectExpression")continue;b.type==="ArrayExpression"&&(a=M.node,l.ccsNodeType="nodeType2",l.collapsable="collapsable",b.childrenNo===1&&(l.last="last"),H())}if(b.type==="Property"&&b.value.type==="ArrayExpression"){var k=b.value.elements[0].type;(k==="ObjectExpression"||k==="ArrayExpression")&&b.childrenNo>1&&(l.toggleChidren=!0,E[b.fullname]=b)}l.toggleChidren?l.toggleChidren=z:l.toggleChidren=" ",b.isLast?(l.last="last",l.hitarea="hitarea"):(l.last=" ",b.childrenNo&&(l.hitarea="hitarea")),w.valueType!=="string"&&(l.value=w.valueText),ot(r,a,f,l,d,b)}for(var S=0;S<L.length;S++)r.push(X);return L=[],r.join("")}function at(e){return e.shortName?e.shortName:e.key&&e.key.name?e.key.name:""}function ft(e){return e?typeof e=="string"?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):e:e}function lt(e,t,n){(x[e.fullname]=t)?s.removeCssClass(n,"collapsable"):s.addCssClass(n,"collapsable"),vt()}function ct(e,t){var n=GLOBAL.props[e];t||lt(n,!1,pt(e));var r=p.evalPath(n,"value.elements");for(var i=0,s=r.length;i<s;i++){var o=r[i];lt(o,t,pt(o.nodeIndex))}}function ht(e){var t=GLOBAL.props[e],n=S[t.fullname],r;n?S[t.fullname]=!1:S[t.fullname]=!0;var i=p.evalPath(t,"value.elements");for(var s=0,o=i.length;s<o;s++){var u=i[s];lt(u,!S[t.fullname],pt(u.nodeIndex))}}function pt(e){var t=$("strong[cacheid="+e+"]").closest("div.root");return t[0]}function dt(e){if(e!=="noError"){if(dt.lastState==="error")return}else if(dt.lastState!=="error")return;y=y||$("#uiDisabler"),b=b||$("#uiDisablerOverlay"),y.show(),e==="soft"?b.addClass("soft"):b.removeClass("soft"),e=e||dt.lastState,e==="error"?$("span.uiDisabledMessage").html(u.other.UIDisabledError):$("span.uiDisabledMessage").html(u.other.UIDisabled),dt.lastState=e,o.show(u.other.UIDisabled,{claimID:"uiDisabled",claimDuration:3e3})}function vt(){y=y||$("#uiDisabler"),w=w||$("#UIEditor");var e=w.height();y.height(e)}function mt(){dt.lastState=undefined,y=y||$("#uiDisabler"),y.hide(),o.unclaim("uiDisabled")}function gt(){return y=y||$("#uiDisabler"),!y.is(":visible")}function yt(){$("div.select-options").hide(),$("div.treeContainer").css("padding-bottom","")}var r=e("events"),i=e("tree_data_source2"),s=e("dom"),o=e("statusBar"),u=e("strings").presets,a=u.debug,f=e("jsonLib"),l=e("editor_work"),c=e("eventHandlers"),h=e("docTab_update"),p=e("jsonLib"),d=e("tree_node_handler2"),v=e("ast_layer"),m=e("picker_ui2"),g=e("get_metadata"),y,b,w,E={},S={},x={},T="",N=[],C=0,k,L=[],A={},O={},M={leafLiteral:1,leafProperty:2,chartNode:4,node:8},_={firstNode:1,lastNode:2,singleNode:3},D={},P=navigator.userAgent.match(/iPad/i)!=null,H=jQuery(".sidebar-holder"),B,j=ace.require("ace/renderloop").RenderLoop,F="",I="",q,R=!0,U=function(){this.nodeGUID=0,this.metaCache={},this.masterXml={},this.container,this.mainContainer},z='<span class="chldColGrp"><span class="expandChildren" title="Toggle All Expansion"></span></span>',W='<div class="root {ccsNodeType}  {collapsable} {last} {lastNode} " ><a  class="{ccsNodeType}" title="{toolTip}" style="cursor: pointer;"><em class="{hitarea}"></em><span><strong cacheid="{cacheid}">{label}</strong></span></a><div class="nodes"  cacheid="{cacheid}">{toggleChidren}',X="</div></div>",V='<div class="root leaf">',J="</div>",K='<div   class="row"><label title="{toolTip}" cacheid="{cacheid}"  >{label}</label><div {nodeUI} class="input-text" cacheid="{cacheid}"><div class="input-text-holder" cacheid="{cacheid}" title="{toolTip2}"><input {type}{inputPattern} {inputStyle} cacheid="{cacheid}"   value="{value}"></div></div></div>',Q='<div  {nodeUI} id={nodeUI_id} cacheid="{cacheid}" class="row"><label title="{toolTip}" cacheid="{cacheid}  "  ><span cacheid="{cacheid}" >{label}</span></label></div>',G='<div cacheid="{cacheid}"  {nodeUI} id={nodeUI_id} class="row"><label title="{toolTip}" cacheid="{cacheid}" ><span   cacheid="{cacheid}">{label}</span></label></div>',Y='<div class="row"><label cacheid="{cacheid}"><span cacheid="{cacheid}" title="{toolTip}">{label}</span></label><div {nodeUI} class="input-text" cacheid="{cacheid}"><div class="input-text-holder" cacheid="{cacheid}" title="{toolTip2}"><input {type}{inputPattern} {inputStyle} {nodeUI} cacheid="{cacheid}" title="{toolTip2}" value="{value}"></div></div></div>',Z='<div class="row"><label title="{toolTip}" ><span >{label}</span></label><div title="{toolTip2}" cacheid="{cacheid}" class="switch-area off" ><input  class="switch hidden"></div></div>',et='<div class="row"><label title="{toolTip}" ><span >{label}</span></label><div title="{toolTip2}" cacheid="{cacheid}" class="switch-area" ><input  class="switch hidden"></div></div>';(function(){var e=this;this.init=function(t,n){var i,o=0;GLOBAL.currentSampleName!==T?(x={},E={},S={},T=GLOBAL.currentSampleName):(i=$("div.sidebar-holder"),o=i[0].scrollTop);var u=(new Date).getTime();N=[],this.mainContainer=document.getElementById("UIEditor"),this.container=document.createElement("div"),this.container.setAttribute("class","treeContainer");var f=ut(),l=s.removeToInsertLater(this.mainContainer);this.mainContainer.innerHTML="",this.mainContainer.appendChild(this.container),r.addListener(this.container,"click",function(t){e.clickNode(t)}),r.addListener(this.container,"mouseover",function(t){e.mouse_over(t)}),r.addListener(this.container,"mouseout",function(t){e.mouse_out(t)}),r.addListener(this.container,"mousedown",function(t){e.mouse_down(t)}),q=this.container;var c=this;this.container.innerHTML=f,l(),nt(),vt(),o&&(i[0].scrollTop=o),it(),t&&t.call();var h=(new Date).getTime();a&&console.log("UI time: "+(h-u)),GLOBAL.timeData.treeUI=h-u,this.init.notFirstTime=!0},this.mouse_over=function(e){e=r.fixEvent(e),r.stopEvent(e);return;var t,n,i,s},this.mouse_down=function(e){e=r.fixEvent(e);var t=e.target;if(t.tagName==="INPUT"){var n=$(t);n.unbind("select"),n.bind("select",c.inputSelect)}},this.mouse_out=function(e){e=r.fixEvent(e),r.stopEvent(e);return;var t},this.clickNode=function(e,t){e=r.fixEvent(e),r.stopEvent(e);var n=e.target,i=n.getAttribute("cacheid")||"",s=c.reportAction(n,"click");if(s.type==="nothing"||s.type==="toggleChildrenExpansion")return;if(n.getAttribute&&n.getAttribute("class")==="row")return;i===""&&n.getAttribute("class")==="select-opener"&&(i=n.previousSibling.previousSibling.getAttribute("cacheid")||""),i||(i=n.parentNode.parentNode.getAttribute("cacheid")||""),i||(i=n.parentNode.nextSibling.getAttribute("cacheid")||"");if(!i)return;i=+i;var o=GLOBAL.props[i],u=g.getMetaData(GLOBAL.props[i].path),a=p.evalPath(u,"meta.template")||"";if(s.type==="label")return;if(n.tagName==="A"&&n.parentNode&&n.parentNode.tagName==="LI"){d.dropDown_update_handler(n,D);return}if(n.tagName==="INPUT"){if(t){d.input_tag_update_handler(n);return}var f=n.getAttribute("class");f==="search-box";return}if(n.getAttribute("class")&&n.getAttribute("class").indexOf("switch-area")>=0){d.on_off_ui_handler(n,o);return}if(a.indexOf("DropDown")>=0||n.getAttribute("class")==="select-opener"){var l=i;d.dropDown_ui_handler(o,n,u,l);return}n.parentNode.parentNode.parentNode.getAttribute("class").indexOf("collapsable")>=0?lt(o,!0,n.parentNode.parentNode.parentNode):lt(o,!1,n.parentNode.parentNode.parentNode);return}}).call(U.prototype),t.escapeHtml=ft,t.Tree=U,t.setCollapseState=lt,t.adjustUiDisabler=vt,t.enableUI=mt,t.disableUI=dt,t.isUIEnabled=gt,t.setCollapseStateOfChildrenOf=ct,t.toggleCollapseStateOfChildrenOf=ht,t.closeAllDropdowns=yt}),define("controller",["require","exports","module","build_ui","highlight","ast_layer","jsonLib","idleDefer","rsvp","tree2","docTab_update","strings","eventHandlers","tree_data_source2","get_metadata","get_metadata","docTab_update","docTab_update"],function(e,t,n){function E(){v=!0,GLOBAL.props=[],d.setEditorChangeSuspendState(!0)}function S(){v=!1,m={},d.setEditorChangeSuspendState(!1),g={dirtyAst:!0,dirtyUI:!0,dirtyCode:!0,immediate:!0},GLOBAL.disableDelay=!0,H({entry:"esprima",options:{ui:"now"}}),g.immediate=!1,GLOBAL.disableDelay=!1}function x(){return h&&console.log("@@esprimaParse"),e("tree_data_source2").resetFullnames(),i.clearAll(),r.updatedJsonParseStep()}function T(){}function N(){return r.refreshChart()}function C(){return g}function k(){return w}function L(){function e(){r.redrawUI(),f.adjustUiDisabler(),g.dirtyUI=!1}function t(){var n="lateUIRedraw";u.defer(n,p[n],function(){w.focus!=="textbox"?e():t()})}g.dirtyUI?e():y[g.lastPath]||t()}function A(e){function i(){u.defer("UiRedraw",1,function(){r.redrawUI(),f.enableUI(),f.adjustUiDisabler(),g.dirtyUI=!1})}function s(){u.clear("lateUIRedraw")}function o(){var e="lateUIRedraw";u.defer(e,p[e],function(){w.focus!=="textbox"?i():o()})}var t,n={redraw:i,defer:o,stop:s};(t=n[e])&&t();return}function O(e){y[e]=!0}function M(e,t){v||(g=$.extend(g,e),setStates(g,t))}function _(e,t){var n=p[fullUpdate];if(!v){g=e||{dirtyAst:!0,dirtyUI:!0,dirtyCode:!0};var r;(r=GLOBAL.props[t])?g.lastPath=r.path:g.lastPath="",g.dirtyUI&&f.disableUI("soft"),A("stop"),g.dirtyAstPositions&&!g.dirtyAst&&!g.dirtyUI&&(GLOBAL.esprimaDuration>50?n=GLOBAL.esprimaDuration*2:n=GLOBAL.esprimaDuration),g.dirtyAst&&(GLOBAL.jsonIsDirty=!0),u.defer("fullUpdate",n,function(){D(t)})}}function D(e){H(e)}function P(e,t){var n=p.fullUpdate;t=t||{};if(!v){var r={entry:e,options:t},i=P.queuedState;i&&(i.entry==="esprima"&&(r.entry="esprima"),r.options.ui==="skip"&&i.options.ui!=="skip"&&(r.options.ui=i.options.ui)),b==="invalid"?(r.entry="esprima",r.options.expedite="mi",r.options.delayType==="fast"):GLOBAL.jsonIsDirty&&(r.options.expedite="mi"),!f.isUIEnabled()&&r.options.ui==="skip"&&f.enableUI(),r.options.ui==="now"&&f.disableUI("soft"),r.options.delayType==="fast"&&(n=p.fullUpdateFast),A("stop"),P.queuedState=r,u.defer("fullUpdate",n,function(){D(r)});return}}function H(t){function a(){h&&console.log("@@update Chart"),delete t.entry,b==="invalid"&&(GLOBAL.jsonIsDirty=!0),b="valid";if(t.options.expedite==="mi"){var n;(n=GLOBAL.props[GLOBAL.currentCacheIndex])?e("get_metadata").getMetaData(n.fullname,undefined,{updateWarnings:!0}):h&&console.log("@@Cant find last AST"),l.refreshDocsInfo(),delete t.options.expedite}f.disableUI("noError"),g.dirtyAst=!1,s.updateRefByPath(),N().then(p,d)}function p(){var e=t.options.ui;e==="late"?A("defer"):e==="now"&&A("redraw"),delete t.options.ui}function d(t){h&&console.log("@@chatFAIL");var n=y(t);n?(f.enableUI(),e("get_metadata").getMetaData(g.lastPath)):(u.clear("lateUIRedraw"),f.disableUI("error"),b="invalid"),typeof n=="string"?e("docTab_update").setErrorJSC(n,"Chart Error"):w(t)}function v(e){h&&console.log("@@esprimaFAIL"),b="invalid",u.clear("lateUIRedraw"),m(e),f.disableUI("error")}function m(e){i.clear(),i.lineError(e.lineNumber,e.description)}function y(e){var t=/.+JSCharting\.js/g,n;if(typeof e=="string"&&e.indexOf("JSCharting Error:")===0){if(e.indexOf("#17")>-1)return c.errors["JSC#17"];if(e.indexOf("#13")>-1)return c.errors["JSC#13"]}if((n=t.exec(e.stack))!=null)return!0}function w(t){var n=/\<anonymous>:([0-9]+:[0-9]+)\)/g,r=/.+JSCharting\.js/g,s,o;(s=r.exec(t.stack))!=null?e("docTab_update").setErrorJSC(c.errors.chartInternal,"Chart Error"):(s=n.exec(t.stack))!=null&&(s.length>1&&(o=parseInt(s[1].split(":")[0])),o&&(i.clear(),i.lineError(o,t.message)))}t=t||{},t.entry==="esprima"?x().then(a,v):t.entry==="chart"&&a();return;var n,r,o}function B(e){w.focus="?";if(e&&e.action==="click"){if(e.data.type.indexOf("textbox")===0){w.focus="textbox",w.cacheID=e.data.cacheID;return}e.data.type==="codeText"&&(w.focus="codeText")}}function j(e){delete m[e]}function F(e){m[e]=!0}function I(){var e;for(var t in m)if(GLOBAL.props[t].textboxValueInvalid)return!1;return!0}var r=e("build_ui"),i=e("highlight"),s=e("ast_layer"),o=e("jsonLib"),u=e("idleDefer"),a=e("rsvp"),f=e("tree2"),l=e("docTab_update"),c=e("strings").presets,h=c.debug,p=c.deferTiming,d=e("eventHandlers"),v=!1,m={},g={dirtyAst:!0,dirtyAstPositions:!0,dirtyUI:!0,dirtyCode:!0,immediate:!0},y={},b="valid",w={action:"none",focus:"?",section:"",data:"",cacheID:"",element:""};a.on("error",function(e){console.assert(!1,e),console.log(e.stack)}),t.suspend=E,t.resume=S,t.getState=C,t.getCursorState=k,t.reportCursorState=B,t.reportInputInvalid=F,t.reportInputValid=j,t.omitLateRedraw=O,t.update=P}),define("docTab_update",["require","exports","module","events","get_metadata","controller","jsonLib","strings","ast_layer","idleDefer","highlight","eventHandlers","ast_layer","get_metadata"],function(e,t,n){function k(){w=document.getElementById(d),E=document.getElementById(v);var t=document.getElementById("docWarningTab");m=$("#warningTab"),y=$(t).find("li:contains('Documentation')"),g=m.closest("li"),b=$("#codeError"),i.addListener(t,"click",function(t){var n=e("eventHandlers").reportAction(t.target,"click");n.type!=="nothing"&&H(t,n.element)}),j()}function L(e,t){S[e]=t,F()}function A(e){C.offsetAll(e)}function O(e,t,n){n=n||"JavaScript Error",e++,I(1,!0),_("warning");var r='<div class="errorWarnTabHead" >'+n+"</div>";r+="Line: "+e+"<br/>",r+='<div class="docsDesc">'+t+"</div>",r+='<div class="docsDesc">'+h.jsSyntaxDescription+"</div>",b.html(r)}function M(e){var t=h.chartInternalTitle;I(1,!0),_("warning");var n='<div class="errorWarnTabHead" >'+t+"</div>";n+='<div class="docsDesc">'+e+"</div>",$("#chartContentTab").html('<div class="errorWarnTabHead" >'+t+"</div>"),b.html(n)}function _(e){e==="warning"?(E.style.display="block",w.style.display="none",g.addClass("active"),y.removeClass("active")):(E.style.display="none",w.style.display="block",y.addClass("active"),g.removeClass("active"))}function D(e,t){function i(e){return e&&(e=e.replace(/href *= *"Enums\./g,'href="../Documentation/index.htm#node=Enums.').replace(/href *= *"Types\./g,'href="../Documentation/index.htm#node=Types.').replace(/href *= *"Tutorials\./g,'href="../Documentation/index.htm#node=Tutorials.').replace(/href *= *"iObject\./g,'href="../Documentation/index.htm#node=iObject.')),e}var n,r;t=t||{};if(e===D.curPath)return;T===0&&_("docs");var r=s.getDocsHtm(e,t);w.innerHTML=i(r)||f,D.curPath=e}function P(){var t=o.getCursorState();if(t.focus=="codeText"){var n=GLOBAL.aceEditor.selection,r=n.getCursor(),i;(i=e("ast_layer").findAstFromPos2(r))&&(i=i.anyProperty||i.any)&&D(i.fullname)}}function H(e,t){e=i.fixEvent(e),i.stopEvent(e),t=t||e.target,t.nodeType==3&&(t=t.parentNode),t.innerHTML==="Documentation"?_("docs"):(t.innerHTML.indexOf("Warnings")>=0||t.innerHTML.indexOf("Error")>=0)&&_("warning")}function B(e,t){t[e]=t,F()}function j(){S={},C.clearAll()}function F(){function m(e,t){var n=$('<div class="warningEntry"><h3 class="warningPath">'+e.replace("chart.","")+"</h3><em>"+t+"</em><div>");return n.mouseenter(function(){var e=$(this),t="warningHover";c.defer(t,p[t],function(){C.clear();var t=e.parent().parent().children(".warningCID").html(),n="chart."+e.children(".warningPath").html();C.lineRealtime(t,n,e)})}),n.mouseleave(function(){var e=$(this);c.clear("warningHover"),C.clear()}),n}function g(e,t,n){C.line1(e,t,n)}C.clearWarning();var t=0;b.html("");for(var n in S){var i=$("<div></div>"),s=$('<div class="warningCID" >'+n+"</div>"),o=$('<div class="warningCIDCont"></div>');s.appendTo(i),o.appendTo(i);var a=0,f=l.sortPathsByAstPos(u.getPropNames(S[n]));for(var h=0,d=f.length;h<d;h++){var v=f[h];m(v,S[n][v]).appendTo(o),g(n,v,e("get_metadata").formatTooltip(S[n][v])),t++,a++}a>0&&i.appendTo(b)}C.setAnnotation(),I(t),t===0&&b.html(r)}function I(e,t){var n="Warnings";e&&(t?n='<b class="errorWarnTabCount">Warnings</b>':n+=" (<b>"+e+"</b>)"),T=e,m.html(n)}function q(){w=document.getElementById(d),E=document.getElementById(v),w.innerHTML=f,E.innerHTML=r}var r="No Warnings",i=e("events"),s=e("get_metadata"),o=e("controller"),u=e("jsonLib"),a=e("strings").presets,f=a.defaultStrings.defaultDocText,l=e("ast_layer"),c=e("idleDefer"),h=a.errors,p=a.deferTiming,d="API_Doc_Content",v="codeError",m,g,y,b,w,E,S={},x={},T=0,N="",C=e("highlight");t.clear=q,t.updateWarnings=L,t.showDocsForPath=D,t.updateErrors=B,t.setErrorWarning=O,t.setErrorJSC=M,t.resetWarnings=j,t.refreshDocsInfo=P,t.offsetWarnings=A,t.init=k}),define("get_metadata",["require","exports","module","strings","MIInterface","docTab_update","jsonLib"],function(e,t,n){function a(){}function d(e,t,n){function q(e,t){if(u.getPropNames(e.data.skeleton).join(",").indexOf(t+".")>-1)return!0}function R(e,t){function o(e){var t=e.split("."),n=[],r="";for(var i=0,s=t.length;i<s;i++){var o=t[i];r+=(r.length?".":"")+o,n.push(r)}return n}var n=o(t);n.reverse();for(var r=0,i=n.length;r<i;r++){var s=n[r];if(e.data.skeleton[s]&&t.indexOf(s+".")>-1&&e.data.skeleton[s].template)return s}}function U(e,t){for(var n in e.data.warnings)if(t.indexOf(n+".")>-1)return n;for(var n in e.data.skeleton)if(t.indexOf(n+".")>-1&&e.data.skeleton[n].warning)return n}function z(e){var t=e.split(".");return t[t.length-1]}function W(e,t){function r(e,t){n+="<br/><br/>["+e+"]<br/>"+t}var n="----------<br/>";return r("labelTooltip",e.labelTooltip),r("inputTooltip",e.inputTooltip),e.docsPath&&r("docsPath",e.docsPath),e.label&&r("label",e.label),e.warning&&r("warning",e.warning),r("docsWindowText",X(e,t)),n}function X(e,t){function m(e,t){n+="<br/><br/>["+e+"]<br/>"+t}function g(e){return'<div class="docsCID">('+e+") </div>"}function b(e){return'<div class="docsPath"> '+e.replace(y,"")+"</div>"}function w(e){return e.indexOf("obj_")===0?'<div class="docsType">(<a href="'+e.replace("obj_","Types.")+'">'+e.replace("obj_","")+"</a>)</div>":'<div class="docsType">('+e+")</div>"}function E(e){return'<div class="docsDesc">'+e+"</div>"}function S(e){return'<div class="docsDescError">'+e+"</div>"}function x(e){return'<div class="docsLinkBlock">Documentation: <a href="'+e+'"> '+e+"</a><div/>"}function T(e){function o(e,t){return'<li><span class="tokenName" title="Click to insert.">'+e+'</span><span class="tokenDesc">'+t+"</span></li>"}var t=[],n=JSCL.getTokens(e);if(n){t.push('<div class="docsTokenHeader" >Token Set: '+e+" </div>"),t.push(E("Click the token names to add or replace current selection.")),t.push('<ul class="tokenSetList">');for(var r=0,i=n.length;r<i;r++){var s=n[r];t.push(o(s[0],s[1]))}t.push("</ul>")}return t.join("")}var n="",r,i;n+=g(v),n+=b(t);var o=!1;e.description&&(n+=E(e.description),o=!0);if(e.valDescription){var a=e.type||u.evalPath(e,"raw.type")||u.evalPath(e,"ui.type");n+=w(a),n+=E(e.valDescription),o=!0}if(e.dropDownInfo){var f=e.dropDownInfo.eChain.sequence.split(",");for(var c=0,h=f.length;c<h;c++){r="";var p=f[c],d=e.dropDownInfo[p];r+=g(v),r+=b(t),r+=E(d.description),d.docsWindowText=r}o=!0}return e.tokenSet&&(n+=T(e.tokenSet)),e.docsPath&&(i=s.evalDocsPath(e.docsPath))&&(n+=x(i)),e.invalid?(n+=S(e.invalid.message),o=!0):e.warning?(n+=S(e.warning),o=!0):l.data.warnings[t]&&(n+=S(l.data.warnings[t]),o=!0),o||(n+=S("No information is available for this property.")),n}function V(e){return'<div class="invalidProperty">'+e+"</div>"}function $(e){var t=e.data.warnings,n,r=[];for(var s in t)r.push(s+" - "+t[s]),n=!0;if(!n)i&&console.log("--No Warnings--");else{i&&console.log("-- Warnings--");for(var o=0,u=r.length;o<u;o++){var a=r[o];i&&console.log("**"+a)}}}function J(e,t,n,r){function l(e){var t=s.getMiValType(e);if(t==="date")e=JSC.formatString(e,"d");else if(t==="string")return e.length>20&&(e=e.substring(0,18)+"..."),": "+u.escapeHtml(e)+"";return""}var i;if(r.docsPath&&r.docsPath.split(".").length===1){var o,a;i=r.docsPath;var f=z(n)+" ("+i+")";i==="point"&&(o=s.evalPath(t,n),(a=o.name||o.x)?f+=l(a):o.pop&&(f+=l(o[0])));if(i==="annotation"){o=s.evalPath(t,n);if(a=o.labelText||s.evalPath(o,"label.text"))f+=l(a)}if(i==="label"){o=s.evalPath(t,n);if(a=o.text)f+=l(a)}i==="labelStyle";if(i==="series"){o=s.evalPath(t,n);if(a=o.name)f+=l(a)}if(i==="axis"){o=s.evalPath(t,n);if(a=o.labelText||s.evalPath(o,"label.text"))f+=l(a)}if(i==="axisMarker"){o=s.evalPath(t,n);if(a=o.labelText||s.evalPath(o,"label.text"))f+=l(a)}if(i==="axisTick"){o=s.evalPath(t,n);if(a=o.labelText||s.evalPath(o,"label.text"))f+=l(a)}return e.label=f}}function K(e){var t={},n,r;for(var i in e){var s=z(i);n=i.substring(0,i.length-s.length-1),(r=e[n])?r!==e[i]&&(t[i]=e[i]):t[i]=e[i]}return t}function Q(e){return typeof e=="undefined"&&e!==null?!1:!0}n=n||{};if(!e)return;d.getDocsWindowText=X;var r={},a=!1,f=(new Date).getTime(),v=e.split(".")[0],y=v+".",b=u.jsToPath(e.split(".").slice(1).join(".")),w=y+b,E=w.length,S;w[E-1]==="."&&(w=w.substring(0,E-1));if(t&&t.toLowerCase()==="dropdownchange"){l=c[v],S=h[v],u.setPathVal(S,b,GLOBAL.fullnames[e]);var x=s.processJson(S,w,v);l.data.skeleton[w]=x.data.skeleton[w],delete p[v][w]}else{var T=!0;if((GLOBAL.jsonIsDirty||!c[v])&&T){var N=(new Date).getTime();S=m(v);var C=(new Date).getTime();GLOBAL.chartJson=GLOBAL.chartJson||{},i&&console.log("buildJson() Running For "+v+" Time:"+(C-N)+"ms"),GLOBAL.jsonIsDirty=!1,h[v]=S,p[v]={};var k=(new Date).getTime();l=c[v]=s.processJson(S);if(v!=="chart"){var L={},A=l.data.otherPaths;for(var O in A)L[O.replace("chart.",y)]=A[O];l.data.otherPaths=L,A=l.data.skeleton,L={};for(var O in A)L[O.replace("chart.",y)]=A[O];l.data.skeleton=L,A=l.data.warnings,L={};for(var O in A)L[O.replace("chart.",y)]=A[O];l.data.warnings=L}var M=(new Date).getTime();i&&console.log("processJSON() Running For "+v+" Time:"+(M-k)+"ms"),o.updateWarnings(v,K(l.data.warnings)),GLOBAL.DoReport}else l=c[v],S=h[v],n.updateWarnings&&o.updateWarnings(v,K(l.data.warnings))}var _=p[v];if(r=_[w])return r;r={};var D=l.data.skeleton[w],P=l.data.warnings,H,B,j=z(w);if(D){r.meta=D,r.enumData=D.dropDownInfo,r.warning=D.warning,r.labelTooltip=D.labelTooltip=g(D.description),r.inputTooltip=D.inputTooltip=g(D.valDescription||D.description),r.label=D.label||j,r.tokenSet=D.tokenSet;if(P[w])r.labelTooltip+="\nWarnings: "+g(P[w]),r.label=V(r.label);else if(j&&!isNaN(j)){B=w.substring(0,w.length-j.length-1);var F;if(F=l.data.otherPaths[B]&&P[B]){var I=u.evalPath(F,"invalid.matchMap."+j);Q(I)&&!I&&(r.labelTooltip+="\nWarnings: This item of the array is not valid.",r.label=V(r.label))}}}else{i&&(q(l,w)||a&&((H=R(l,w))?console.log("The metadata is null for:"+w+" because the parent "+H+" has UI for it."):(H=U(l,w))?console.log("The metadata is null for:"+w+" because the parent "+H+":"+l.data.warnings[H]):(H=l.data.warnings[w])?console.log("The metadata is null for:"+w+" because: "+H):console.log("***The metadata is null for:"+w+"***")));if(D=l.data.otherPaths[w])r.meta=D,D.description?P[w]?(r.labelTooltip=g(D.description+"\nWarning: "+P[w]),r.label=V(J(r,S,b,D)||j)):(r.labelTooltip=g(D.description),r.label=J(r,S,b,D)||j):D.invalid&&P[w]?(r.inputTooltip=r.labelTooltip=g(D.invalid.message||"Warning: "+P[w]),r.label=V(j),r.warning=D.invalid.message):(r.label=j,(H=U(l,w))?(r.label=V(r.label),r.inputTooltip=r.labelTooltip=g("Warning: This value is invalid because "+l.data.warnings[H])):r.inputTooltip=g(D.description||u.evalPath(D,"raw.array.0.description")||b))}return _[w]=r,r}function v(e,t){var n=e.split(".")[0],r=n+".",i=u.jsToPath(r+e.split(".").slice(1).join(".")),s=i.replace(r,"");i[i.length-1]==="."&&(i=i.substring(0,i.length-1));var o=c[n],a=o.getMiData(i),f=o.getWarnings(),l;if(a)l=d.getDocsWindowText(a,i),t.subID&&a.dropDownInfo&&a.dropDownInfo[t.subID]&&(l=a.dropDownInfo[t.subID].docsWindowText);else if(a=o.data.otherPaths[i])return a.description?d.getDocsWindowText(a,i):a.invalid&&f[i]?d.getDocsWindowText(a,i):d.getDocsWindowText(a,i);return l}function m(e){var t=GLOBAL.fullnames,n,r={},i;for(var s in GLOBAL.fullnames)s.indexOf(e+".")===0&&(n=s.replace(e+".",""),i=t[s],u.defined(i)&&i!=="[]"&&i!=="{}"&&u.setPathVal(r,u.jsToPath(n),i));return r}function g(e){if(e){e=e.replace(/<br>/g,"\n").replace(/<br\/>/g,"\n").replace(/<br \/>/g,"\n"),e=e.replace(/"/g,"'");var t=/(<([^>]+)>)/ig;return e=e.replace(t,""),e}}var r=e("strings").presets,i=r.debug,s=e("MIInterface"),o=e("docTab_update"),u=e("jsonLib"),f="",l,c={},h={},p={};t.init=a,t.getMetaData=d,t.formatTooltip=g,t.getDocsHtm=v}),define("eventHandlers",["require","exports","module","ast_layer","get_metadata","jsonLib","tree_data_source2","codeUiInterface","controller","strings","docTab_update","tree2","highlight","statusBar"],function(e,t,n){function m(){m.initialized||($("div.area").click(function(e){x(e.target,"click")}),$("div.holder").click(function(e){x(e.target,"click")}),$("div.aside-holder").click(function(e){x(e.target,"click")}),$("div#chartContentTab").click(function(e){x(e.target,"click")}),m.initialized=!0)}function g(e,t,n){h=!0,GLOBAL.currentCacheIndex=e;var i=GLOBAL.props[e],s=r.getAstMeta(i),o=r.astLocToAceRange(s.valueLoc),u,f={},c;if(c=r.updateAstValue(i,t,f)){u=c.valueCodeText,GLOBAL.aceEditor.getSession().replace(o,u),r.offsetAllAstLocFromInertData(f),delete i.meta,s=r.getAstMeta(i),l.offsetWarnings(f),r.updateFullnamesValue(i);var p="skip";s.valueType==="string"&&(p="late");var d={ui:p};c.dataTypeChanged&&(d.expedite="mi",d.delayType==="fast"),GLOBAL.chartIsDirty=!0,a.update("chart",d)}else a.update("esprima",{ui:"skip"});h=!1;return}function y(e){function p(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes.length===0?"":t.childNodes[0].nodeValue}function m(e){var t=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}var t,n,r;if(e.which===13)return;var i=this.value,o=this.getAttribute("cacheid");if(t=GLOBAL.props[o])n=p(t.textboxValue);if(this.pattern&&!t.textboxValueInvalid&&!isNaN(i)){var u=m(i);if(e.which===38){i=parseFloat(i)+1,u&&(i=i.toFixed(u)),i+="",this.value=i,g(o,i);return}if(e.which===40){i=parseFloat(i)-1,u&&(i=i.toFixed(u)),i+="",this.value=i,g(o,i);return}}if(i===n)return;var l;if(this.pattern){if(this.value!==s.trim(this.value)&&e.which===32){this.value=s.trim(this.value);return}r=!0;if(this.value.length){var c,h;(c=this.value.match(v.exponential))&&c.length>0&&c[1]===this.value||((c=this.value.match(v.numeric))&&c.length>0?(h=c[1],h!==this.value&&(typeof n!="undefined"?(c=this.value.match(v.incomplete))&&c.length>1?l=!0:l=!0:typeof h!="undefined"?l=!0:l=!0)):l=!0)}else l=!0}l?(t.textboxValueInvalid=!0,t.textboxValue=this.value,a.reportInputInvalid(o),$(this).bind("blur",function(e){if((c=this.value.match(/(-?[0-9]*)\.$/))&&c.length>1&&c[0]===this.value)this.value=this.value.replace(".",""),g(o,this.value);else{var t=parseFloat(this.value);isNaN(t)?this.value="0":this.value=t,g(o,this.value)}a.reportInputValid(o),$(this).unbind("blur"),$(this).removeClass("inputValueInvalid"),$(this).addClass("inputNum"),d.unclaim(o)}),$(this).addClass("inputValueInvalid"),$(this).removeClass("inputNum"),d.show(f.other.textboxNumberInvalid,{data:{cacheID:o},claimID:o,type:"warning"})):(delete t.textboxValueInvalid,t.textboxValue=this.value,a.reportInputValid(o),$(this).unbind("blur"),$(this).bind("blur",function(e){d.unclaim(o)}),r&&(a.omitLateRedraw(t.path),d.unlock(),d.show(f.click.textboxNumber,{data:{cacheID:o},claimID:o})),g(o,i),$(this).removeClass("inputValueInvalid"),$(this).addClass("inputNum"));return}function b(e){x(e.target,"click")}function w(e,t){var n=e.data.action,i,s,f,c,p={},d,v,m={};if(h)return;GLOBAL.skipUIRedraw=!1;var g={dirtyAst:!1,dirtyUI:!1,dirtyCode:!1};if(!h){var y=r.isChangeInert(e,undefined,m);if(y){r.offsetAllAstLocFromInertData(m),l.offsetWarnings(m);return}var b=e.data.range.start.row!==e.data.range.end.row;if(!(p=r.findAstFromPos2(e.data.range.start,!0))){if(r.isWithinChartDeclaration(e.data.range.start))GLOBAL.chartIsDirty=!0;else if(r.isWithinComments(e.data.range))return;a.update("esprima",{ui:"now",delayType:"fast"});return}p.any&&(i=p.any.nodeIndex,GLOBAL.currentCacheIndex=i);if(c=p.value){i=c.nodeIndex;var w=r.getAstMeta(c),E=w.valueText;if(w.valueType==="string")var E=w.value;var S=w.propertyLoc,x=w.valueLoc;if(n==="insertText")v=e.data.range.start.column-x.start.column,w.valueType==="string"&&v--,d=E.substring(0,v)+e.data.text+E.substring(v,E.length);else if(n==="removeText"){v=e.data.range.start.column-x.start.column,w.valueType==="string"&&v--;var T=e.data.range.end.column-e.data.range.start.column;d=E.substring(0,v)+E.substring(v+T,E.length);if(w.valueType==="string"){if(T>0&&d===E){a.update("esprima",{ui:"now",delayType:"fast"});return}}else if(d.length===0){a.update("esprima",{ui:"now",delayType:"fast"});return}}if(w.valueType==="number")if(!d||isNaN(d)){GLOBAL.chartIsDirty=!0,a.update("esprima",{ui:"now",delayType:"fast"});return}l.offsetWarnings(m),r.offsetAllAstLocFromInertData(m,!y),r.updateAstValue(c,d,m)?(r.updateFullnamesValue(c),u.setUiValue(i,d,f,s).then(function(){w.valueType==="number"?a.update("chart",{ui:"skip"}):w.valueType==="string"?a.update("chart",{ui:"late"}):w.valueType==="referenceUnresolved"?a.update("esprima",{ui:"now",delayType:"fast"}):a.update("chart",{ui:"now"});return},function(){a.update("chart",{ui:"now"});return})):a.update("esprima",{ui:"now",delayType:"fast"});return}if(!(c=p.key)){GLOBAL.chartIsDirty=!0,a.update("esprima",{ui:"now",delayType:"fast"});return}if(!y){o.resetFullnames(),a.update("esprima",{ui:"now",delayType:"fast",expedite:"mi"});return}}}function E(e){var t={type:"",cacheID:"",subID:"",itemID:""};if(!e)return t;var n,i;t.cacheID=e.getAttribute("cacheid");var o=$(e);if(!s.defined(t.cacheID)||t.cacheID===null)t.cacheID=o.closest("[cacheid]").attr("cacheid");if(o.hasClass("collapseChildren"))return t.cacheID||(t.cacheID=o.closest("a").find("[cacheid]").attr("cacheid")),t.type="toggleChildrenExpansion",t;if(o.hasClass("expandChildren"))return t.cacheID||(t.cacheID=o.closest("a").find("[cacheid]").attr("cacheid")),t.type="toggleChildrenExpansion",t;if(o.closest("div.sidebar-holder").length===0)return;if(e.tagName==="DIV"&&o.is("[nodeui=dropdown]"))t.type="dropdownEmptyHead";else if(e.tagName==="SPAN"&&o.hasClass("lightTreeLabel"))t.type="dropdownSublabel",t.cacheID=o.closest(".row").find("[cacheid]").attr("cacheid"),t.subID=e.innerText;else if(o.is("label")||o.parent().is("label"))t.type="label",t.cacheID=o.closest(".row").find("[cacheid]").attr("cacheid");else if(o.is("strong"))t.type="subfolder";else if(e.tagName==="A"&&o.hasClass("select-opener")){if(o.parent().find(".center").attr("id")==="menuFilename")return;t.type="dropdownArrow",i=o.closest(".row"),t.cacheID=i.find("[cacheid]").attr("cacheid"),t.subID=i.find("label").text()}else if(e.tagName==="SPAN"&&o.hasClass("center")){if(o.attr("id")==="menuFilename")return;t.type="dropdownBody",t.subID=o.closest(".row").find("label").text()}else if(e.tagName==="A"&&o.hasClass("dropDownColorLink"))t.type="dropdownItem",i=o.closest(".row"),t.itemID=e.innerText,t.cacheID=i.find("[cacheid]").attr("cacheid"),t.subID=i.find("label").text();else if(e.tagName==="INPUT"){t.type="textbox";if(n=GLOBAL.props[parseInt(t.cacheID)]){var u=s.evalPath(n,"value.type")||n.type;if(n.valType==="code"||u==="CallExpression"||u==="Identifier"||u==="NewExpression"||u==="FunctionExpression")t.type="textboxCode";else{u=r.getAstMeta(n).valueType;switch(u){case"string":t.type="textboxString";break;case"number":t.type="textboxNumber";break;case"function":t.type="textboxCode";break;default:t.type="textbox"}}}}else o.is("div.switch-area")?t.type="checkbox":t.type="nothing";return t}function S(e){var t={type:"nothing",section:"",cacheID:"",subID:"",itemID:"",element:undefined};if(!e)return t;var n=e.parentElement,r=$(n),i=$(e),s,o,u=r.attr("id"),a=i.attr("id");if(i.closest("div#codeEditor").length>0)return t.section="code",t.type="codeText",t;if(i.closest("div#header").length>0){t.section="header";if(e.tagName==="SPAN"&&i.hasClass("center")){if(i.attr("id")==="menuFilename")return t.type="dropdownCenter",t.section="header",t}else e.tagName==="A"&&i.hasClass("select-opener")&&(t.type="dropdownArrow",t.section="header")}if(e.tagName==="SPAN"&&i.hasClass("tokenName"))return t.type="tokenName",t.section="docs",t.itemID=i.text(),t;if(a==="API_DocContent")return t.section="docs",t.type="docTabContent",t;if(e.tagName==="A"&&a==="editorRedo")return t.section="code",t;if(e.tagName==="A"&&a==="editorUndo")return t.section="code",t;if(i.is("ul.tabset")||e.tagName==="B")e=n,n=e.parentElement,r=$(n),i=$(e),s,o,u=r.attr("id"),a=i.attr("id"),t.element=e;return e.tagName==="DIV"&&i.hasClass("area")?(t.type="nothing",u==="content"?t.section="chart":r.hasClass("aside-area")?t.section="docs":r.hasClass("block-in")&&(t.section="code"),t):e.tagName==="DIV"&&i.hasClass("block-in")?(t.type="nothing",t.section="code",t):e.tagName==="DIV"&&i.hasClass("aside-area")?(t.type="nothing",t.section="docs",t):e.tagName==="A"&&a==="sideDocButton"?(t.type="sliderToggle",t.section="code",t):e.tagName==="A"&&a==="sideUIButton"?(t.type="sliderToggle",t.section="UI",t):(e.tagName==="A"&&i.hasClass("tab")&&(r=i,n=e,u=a,t.element=i.find("span")[0]),n&&n.tagName==="A"&&r.hasClass("tab")&&(s=r.closest("ul.tabset"),o=s.attr("id"),o==="chartTabs"?(t.type="tab",t.section="chart"):o==="docWarningTab"?(t.type="tab",t.section="docs",a==="warningTab"?(t.itemID="warning",t.type="tabWarnings"):i.text()==="Documentation"&&(t.itemID="warning",t.type="tabDocumentation")):o==="codeTabs"?(t.type="tab",t.section="code",a==="JavaScriptTab"?t.type="tabJavaScript":t.type="tabAllCode"):(t.type="tab",t.section="UI")),a=i.attr("id"),a&&(a.indexOf("login")>-1||a.indexOf("change-")>-1||a.indexOf("dialog")>-1||a.indexOf("signup-")>-1)&&(t.type="login",t.eleID=a,t.section="header"),t)}function x(e,t){var n,i,s,o,l,h,v,m,g,b=a.getCursorState().focus;if((n=E(e))&&n.type!=="nothing"){f.debug&&console.log("Element id: "+n.type),h=GLOBAL.props[parseInt(n.cacheID)],i={action:t,element:e,data:n,section:"UI"};if(t==="click"){if(f.click[n.type]){if(n.type==="textboxNumber"||n.type==="textboxString"){v=$(e),d.show(f.click[n.type],{data:n,claimID:n.cacheID}),v.bind("blur",function(){d.unclaim(n.cacheID)});var w;(w=jQuery._data(e,"events"))?w.keyup||v.keyup(y):v.keyup(y)}else d.show(f.click[n.type],{data:n});m=!0}if(n.type==="dropdownBody"||n.type==="dropdownArrow"){var x;if((x=$(e).closest("div.select-holder").find(".select-options")).length>0){var T=x.css("display")!=="none";s=function(){T&&(n.type="nothing")}}p.focusCodeLineByAst(h,o,n)}else if(n.type==="textboxCode")p.focusCursorIntoCode(h,n,e.selectionStart);else if(n.type==="textboxNumber"||n.type==="textboxString"){v=$(e);var w;(w=jQuery._data(e,"events"))?w.keyup||v.keyup(y):v.keyup(y),p.focusCodeLineByAst(h,undefined,n)}else if(n.type==="label"){var N=0;(h.valType||r.getValueTypeOfAst(h))==="string"&&(N=1),p.focusCursorIntoCode(h,n,N)}else n.type==="toggleChildrenExpansion"?c.toggleCollapseStateOfChildrenOf(n.cacheID):n.type==="expandChildren"?c.toggleCollapseStateOfChildrenOf(n.cacheID):p.focusCodeLineByAst(h,undefined,n)}else t==="hover"&&(f.hover[n.type]?(d.show(f.hover[n.type],{data:n}),m=!0):n.type==="dropdownBody"||n.type==="dropdownArrow"?(d.show(n.subID?f.hover.hoverUIDropdownChain:f.hover.hoverUIDropdown,{data:n}),m=!0):f.debug&&(d.show("hovering "+n.type),m=!0))}else if((n=S(e))&&n.type!=="nothing"){if(t==="click"){if(n.type==="tokenName"){if(u.tokenClicked(n.itemID))return;d.show(f.other.tokenInsertInvalid,{data:n,type:"warning",claimID:"tokenClickIssue",claimDuration:3e3}),m=!0}}else t==="hover"&&(f.hover[n.type]||f.hover[n.eleID]?(d.show(f.hover[n.type]||f.hover[n.eleID],{data:n}),m=!0):f.debug&&(d.show("hovering "+n.type),m=!0));i={action:t,element:n.element||e,data:n,section:n.section}}else n;return t==="click"&&(c.closeAllDropdowns(),s&&s(),a.reportCursorState(i)),m||d.clear(),n}function T(e){h=e}var r=e("ast_layer"),i=e("get_metadata"),s=e("jsonLib"),o=e("tree_data_source2"),u=e("codeUiInterface"),a=e("controller"),f=e("strings").presets,l=e("docTab_update"),c=e("tree2"),h,p=e("highlight"),d=e("statusBar"),v={exponential:/(-?[0-9]*\.?[0-9]+e[-\+][0-9]+)/,numeric:/(-?[0-9]*\.?[0-9]+)/,incomplete:/(-?[0-9]*)\./};t.init=m,t.inputKeyUp=y,t.inputSelect=b,t.editorOnChange=w,t.UIValueChanged=g,t.reportAction=x,t.setEditorChangeSuspendState=T,GLOBAL.reportAction=x}),define("editor_work",["require","exports","module","events","build_ui","strings","cache","highlight","../server/save","eventHandlers","idleDefer","highlight","idleDefer","controller","ast_layer","docTab_update","eventHandlers","controller","eventHandlers","controller","eventHandlers"],function(e,t,n){function h(e){e?GLOBAL.aceEditor.redo():GLOBAL.aceEditor.undo(),x()}function m(e){var t=GLOBAL.aceEditor.getSession().$undoManager.$undoStack;if(e){p=!0,d=[];for(var n=0,r=t.length;n<r;n++)d.push(t[n])}else{p=!1;if(d.length<t.length){var i=t[d.length],s=t[t.length-1],o=[{deltas:[i[0].deltas[0],i[0].deltas[1]],group:s[0].group}];GLOBAL.aceEditor.getSession().$undoManager.$undoStack=d,GLOBAL.aceEditor.getSession().$undoManager.$undoStack.push(o)}v=null}x()}function g(){if(!v){var e=GLOBAL.aceEditor.getSession().$undoManager.$undoStack,t=d[d.length-1];if(!t)v=e[0];else for(var n=0,r=e.length;n<r;n++){var i=e[n];if(e[n]===t&&n+1<r){v=e[n+1];return}}}}function y(t){b=!1,e("eventHandlers").editorOnChange(t,function(){b=!0,GLOBAL.updateFromTreeUI&&(GLOBAL.refreshChart(),b=!1)});if(p)g();else{var n="undoButtons";e("idleDefer").defer(n,a[n],function(){x()})}}function w(){b&&(b=!1,o.init())}function E(e,t){t(e),e=e.firstChild;while(e)E(e,t),e=e.nextSibling}function S(t,n){var r=t.getDocumentPosition().row;e("highlight").focusUIByLine(r)}function x(){var e="",t=document.getElementById("saveButton");i.setAttribute("title","Undo("+GLOBAL.aceEditor.getSession().$undoManager.$undoStack.length+")"),s.setAttribute("title","Redo("+GLOBAL.aceEditor.getSession().$undoManager.$redoStack.length+")");var n=!0;GLOBAL.aceEditor.getSession().$undoManager.hasUndo()?(i.setAttribute("class","back"),n=!0):(i.setAttribute("class","back disabled"),n=!1),GLOBAL.aceEditor.getSession().$undoManager.hasRedo()?(s.setAttribute("class","forward"),n=!0):(n||(n=!1),s.setAttribute("class","forward disabled")),n&&!GLOBAL.isSavedInServer?(t.disabled=!1,t.setAttribute("class","save"),t.setAttribute("title","Save"),t.value="save"):(t.disabled=!0,t.setAttribute("title","Saved"),t.setAttribute("class","save disabled"),t.value="saved"),c.init()}function T(){GLOBAL.aceEditor.getSession().$undoManager.reset(),x()}function N(e){function u(e,t){e={start:{column:e.start.column,line:r(e.start.line)},end:{column:e.end.column,line:r(e.end.line)}};if(e.start.line===t.row&&e.start.column<t.column&&e.end.column>=t.column)return!0}var t,n,r=GLOBAL.astToAceLine,i=[];if(GLOBAL.props){for(var s=0,o=GLOBAL.props.length;s<o;s++){var t=GLOBAL.props[s];u(t.loc,e)?i.push(t):t.key&&u(t.key.loc,e)&&i.push(t)}if(i)return i.length>1&&i[0].fullname.length<i[1].fullname.length?i[1]:i[0]}}function C(){var t=GLOBAL.aceEditor.getSession().setAnnotations,n=GLOBAL.aceEditor.getSession().clearAnnotations;GLOBAL.aceEditor.session.setAnnotations=function(e){l.aceSetAnnotations.call(GLOBAL.aceEditor.session,t,e)},GLOBAL.aceEditor.session.clearAnnotations=function(){l.aceClearAnnotations.call(GLOBAL.aceEditor.session,n)},GLOBAL.aceEditor.renderer.scrollToLine=function(e,t,n,r){var i=this.$cursorLayer.getPixelPosition({row:e,column:0}),s=i.top;t&&(s-=this.$size.scrollerHeight/2);var o=this.scrollTop;this.session.setScrollTop(s),n!==!1&&this.animateScrolling(o,r)},GLOBAL.aceEditor.selection.on("changeCursor",function(t,n){var r=n.getCursor(),i="cursorDocUpdate";e("idleDefer").defer(i,a[i],function(){var t=e("controller").getState();if(!t.dirtyAst&&!t.dirtyMI){var n,i,s;if(s=e("ast_layer").findAstFromPos2(r,!0))if(n=s.location)l.focusUIByCursor(n),e("docTab_update").showDocsForPath(n.fullname)}},this)}),GLOBAL.aceEditor.on("focus",function(t){e("eventHandlers").reportAction(GLOBAL.aceEditor.container,"click")}),r.addListener(i,"click",function(t){t=r.fixEvent(t),r.stopEvent(t);var n=e("controller").getCursorState().focus;e("eventHandlers").reportAction(t.target,"click"),h(),n==="codeText"&&GLOBAL.aceEditor.focus()}),r.addListener(s,"click",function(t){t=r.fixEvent(t),r.stopEvent(t);var n=e("controller").getCursorState().focus;e("eventHandlers").reportAction(t.target,"click"),h("redo"),n==="codeText"&&GLOBAL.aceEditor.focus()})}function k(e){GLOBAL.aceEditor.session.unfold(e.start,!0);return}var r=e("events"),i=document.getElementById("editorUndo"),s=document.getElementById("editorRedo"),o=e("build_ui"),u=e("strings").presets,a=u.deferTiming,f=e("cache").cache,l=e("highlight"),c=e("../server/save"),p,d,v,b=!1;t.gutterClicked=S,t.editor_changed=y,t.init=C,t.resetUndoStack=T,t.suspendHistory=m,t.unfoldRange=k}),define("highlight",["require","exports","module","jsonLib","token_tooltip","idleDefer","ast_layer","strings","smoothScrolling","smoothScrolling","editor_work","get_metadata","docTab_update","editor_work","tree2","docTab_update"],function(e,t,n){function v(){}function m(){p.miAnnotations=[],A(GLOBAL.aceEditor.getSession())}function g(){p.miAnnotations=[],f&&console.log("-=-=clearningWarnings");var e=GLOBAL.aceEditor.getSession().getMarkers();for(var t in e)e[t].clazz==="editorWarningHighlight"&&GLOBAL.aceEditor.getSession().removeMarker(t);c=[]}function y(){p.miAnnotations=[];var e=GLOBAL.aceEditor.getSession().getMarkers(!1);for(var t in e)GLOBAL.aceEditor.getSession().removeMarker(t)}function b(e){function f(e){var s=[];for(var o in e){var a=e[o];if(a.clazz==="ace_selection"||a.clazz.indexOf("ace_")===0)continue;GLOBAL.aceEditor.getSession().removeMarker(o);var f=i.evalPath(a,"range.range")||i.evalPath(a,"range"),l=u.aceToAst(f);l=i.fasterExtend({},l),u.offsetRange(l,t,n,r),a.range=u.getAceRange(l),GLOBAL.aceEditor.getSession().addMarker(a.range,a.clazz,a.type,a.inFront),s.push(a)}return s}function l(e){for(var t=0,n=e.length;t<n;t++){var i=e[t],s=a.row;s<=i.row&&(i.row+=r)}}var t=e.point,n=e.offsetX,r=e.offsetY,s,o;T.stop&&T.stop(),s=GLOBAL.aceEditor.getSession().getMarkers(),f(s);var a=u.astToAce(t);l(p.miAnnotations),l(p.aceAnnotations),l(p.jsAnnotations),F()}function w(t){function i(){clearTimeout(w.sid1),w.fadeIdFinal&&w.fadeIdFinal()}if(w.lastCacheId===t&&w.fadeIdFinal)return;E.stop&&E.stop(),w.stop=i,i();var n,r;if((n=j(t))>-1){(r=$("[cacheid="+n+"][class*=row]")).length===0&&(r=$("[cacheid="+n+"]").parent(".row")).length===0&&(r=$("strong[cacheid="+n+"]")).length===0;if(r.is("strong")||(r=r.children("label").children("span")).length>0)N(r),r.css("background-color","rgb(255,255,0)"),e("smoothScrolling").focusElement(r),w.fadeIdFinal=function(){clearInterval(w.fadeId),r.css("background-color",""),delete w.fadeIdFinal},w.lastCacheId=t,w.sid1=setTimeout(function(){var e=0,t=255,n=255;w.fadeId=setInterval(function(){r.css("background-color","rgb("+t+","+n+","+e+")"),t--,n--,e+=15,e>240&&w.fadeIdFinal()},100)},800)}return}function E(t){function s(){clearTimeout(E.sid1),E.fadeIdFinal&&E.fadeIdFinal()}if(E.postpone)return;if(E.lastCacheId===t.nodeIndex)return;if(w.fadeIdFinal)return;E.stop=s,s();var n=t.nodeIndex,r;(r=$("[cacheid="+n+"][class*=row]")).length===0&&(r=$("[cacheid="+n+"]").parent(".row")).length===0&&(r=$("strong[cacheid="+n+"]")).length===0;var i;r.is("strong")||((i=r.children("label").children("span")).length>0?r=i:(i=r.children("label")).length>0&&(r=i)),r.length>0&&(N(r),r.css("background-color","rgb(240,240,0)"),e("smoothScrolling").focusElement(r,{animationDuration:800}),E.fadeIdFinal=function(){clearInterval(E.fadeId),r.stop(),r.css("background-color",""),r.css("font-weight",""),r.css("margin-left",""),delete E.fadeIdFinal},E.lastCacheId=t.nodeIndex,E.sid1=setTimeout(function(){var e=0,t=255,n=255;E.fadeId=setInterval(function(){r.css("background-color","rgb(240,240,"+e+")"),t--,n--,e+=15,e>240&&E.fadeIdFinal()},100)},200));return}function S(e,t,n){C(150),T(e,undefined,t);var r=e;e.value&&e.value.loc&&(r=e.value),x(r,n)}function x(t,n){function o(){i.focus(),i.moveCursorTo(s,t.loc.start.column+n),i.clearSelection()}var r=!1;n=n||0;var i=GLOBAL.aceEditor,s=GLOBAL.astToAceLine(t.loc.start.line);e("editor_work").unfoldRange({start:{row:s,column:t.loc.start.column},end:{row:s,column:t.loc.end.column}}),i.scrollToLine(s,!0,r,o),r||o()}function T(t,n,i){function h(){clearTimeout(T.sid1),T.fadeIdFinal&&T.fadeIdFinal(),A(GLOBAL.aceEditor.getSession())}function p(){o=GLOBAL.astToAceLine(t.loc.start.line);var e;f?e=new r.Range(o,f.start.column,o,f.end.column):e=new r.Range(o,0,o,Infinity);var n=GLOBAL.aceEditor.getSession().addMarker(e,"markValueInCode");l.push(n),T.fadeIdFinal=function(){clearInterval(T.fadeId),GLOBAL.aceEditor.getSession().removeMarker(n),delete T.fadeIdFinal},T.lastCacheId=t.nodeIndex,T.sid1=setTimeout(function(){var e=0;T.fadeId=setInterval(function(){$(".markValueInCode").css("background-color","rgb(255,255,"+e+")"),e+=20,e>255&&T.fadeIdFinal()},150)},1500)}T.stop=h,T.lastCacheId===t.nodeIndex&&T.fadeIdFinal,clearTimeout(T.sid1),T.fadeIdFinal&&T.fadeIdFinal(),A(GLOBAL.aceEditor.getSession()),t.fullname&&(n=e("get_metadata").getMetaData(t.fullname))&&e("docTab_update").showDocsForPath(t.fullname,i);if(t){var s=GLOBAL.aceEditor.getSession(),o=GLOBAL.astToAceLine(t.loc.start.line);e("editor_work").unfoldRange({start:{row:o,column:t.loc.start.column},end:{row:o,column:t.loc.end.column}});var a=t,f;i.type==="label"?f=t.loc:f=u.getValueLocFromAst(t);var c=GLOBAL.aceEditor.selection.getCursor().row;c>o-10&&c<o+10?(p(),GLOBAL.aceEditor.scrollToLine(o,!0,!1)):(GLOBAL.aceEditor.scrollToLine(o,!0,!0),p())}return}function N(t){var n=t,r;while(!(t=t.parent().closest(".nodeType2")).length==0&&n[0]!==t[0])r=t.next().attr("cacheid")||t.find("[cacheid]").attr("cacheid"),e("tree2").setCollapseState(GLOBAL.props[r],!1,t[0]),n=t}function C(e){E.stop&&E.stop(),E.postpone=!0,C.sid=setTimeout(function(){E.postpone=!1},e||10)}function k(e,t){var n=new r.Range(e,0,t,Infinity);A(GLOBAL.aceEditor.getSession()),GLOBAL.aceEditor.resize(!0);if(t){var i=GLOBAL.aceEditor.getSession().highlightLines(e,t);l.push(i)}else{var n=new r.Range(e,0,e,Infinity),s=GLOBAL.aceEditor.getSession().addMarker(n,"markValueInCode","screenLine");l.push(s),GLOBAL.aceEditor.scrollToLine(e)}GLOBAL.aceEditor.clearSelection(),setTimeout(function(){A(GLOBAL.aceEditor.getSession())},4e3)}function L(e,t){return}function A(e){for(var t in l)e.removeMarker(l[t]);for(var t in h)e.removeMarker(h[t])}function O(t,n){var i=GLOBAL.aceEditor.getSession(),t=GLOBAL.astToAceLine(t),s=new r.Range(t,0,t,Infinity),o=i.addMarker(s,"editorErrorHighlight");l.push(o),GLOBAL.aceEditor.scrollToLine(t,!0,!0),p.miAnnotations.push({row:t,column:0,text:n,type:"error"}),D(),e("docTab_update").setErrorWarning(t,n)}function M(e,t,n){var i=B(e,t);if(i){var s=GLOBAL.aceEditor.getSession(),o=GLOBAL.astToAceLine(i.loc.start.line),u=new r.Range(o,i.loc.start.column,o,i.loc.end.column),a=s.addMarker(u,"editorWarningHighlight");c.push(a),p.miAnnotations.push({row:o,column:i.loc.start.column,text:n,type:"warning"}),D()}}function _(e,t,n){var r=B(e,t),i=ace.require("ace/range");if(r){var s=GLOBAL.aceEditor.getSession(),o=GLOBAL.astToAceLine(r.loc.start.line),u=GLOBAL.aceEditor.getSession().highlightLines(o,o,"editorWarningHighlight");h.push(u.id),GLOBAL.aceEditor.scrollToLine(o,!0,!0)}}function D(){F()}function P(e){var t=0,n=0,r=getLineInPage2(e);return r}function H(e){var t=0,n=0,r,i;if(GLOBAL.aceRangeLocation)for(var s=0,o=GLOBAL.aceRangeLocation.length;s<o;s++){var u=GLOBAL.aceRangeLocation[s];t+=(r=u.end.row)-(i=u.start.row);if(e-t<0)return i+(e-n)-1;n+=r-i+1}return e}function B(e,t){for(var n=0,r=GLOBAL.props.length;n<r;n++){var s=GLOBAL.props[n];if(i.jsToPath(s.fullname)===t)return s}}function j(e){var t=e-GLOBAL.offsetLineJSPage+1;if(t<0)return-1;var n=-1,r=GLOBAL.props.length;for(var i=0;i<r;i++)if(GLOBAL.props[i].loc.start.line==t){n=i;break}return n}function F(){GLOBAL.aceEditor.getSession().setAnnotations(p)}function I(e,t){if(t.pop)p.aceAnnotations=t,F();else{var n=[];n.push.apply(n,t.miAnnotations),n.push.apply(n,t.aceAnnotations),e.call(this,n)}}function q(e){p.aceAnnotations=[],p.miAnnotations=[],F()}var r=ace.require("ace/range"),i=e("jsonLib"),s=e("token_tooltip"),o=e("idleDefer"),u=e("ast_layer"),a=e("strings").presets,f=a.debug,l=[],c=[],h=[],p={miAnnotations:[],aceAnnotations:[],jsAnnotations:[]},d=[];GLOBAL.annotations=p,t.setAnnotation=D,t.clear=m,t.clearAll=y,t.clearWarning=g,t.line=k,t.lineError=O,t.line1=M,t.lineRealtime=_,t.aceSetAnnotations=I,t.aceClearAnnotations=q,t.focusUIByLine=w,t.focusUIByCursor=E,t.focusCursorToCode=x,t.focusCodeLineByAst=T,t.postponeUIHighlight=C,t.offsetAll=b,t.focusCursorIntoCode=S}),define("miinterface",["require","exports","module","jsonLib"],function(e,t,n){(function(){function a(e,t,n){function N(e){for(var t=0,n=u.length;t<n;t++){var r=u[t];if(e.indexOf(r)===0)return!0}return!1}function C(t,n,r){function s(e,t,n){var o;t=t||"",i.push(t),r[t]=n||"object";for(var u in e)o=H(e[u]),o==="object"||o==="array"?s(e[u],t+"."+u,o):(i.push(t+"."+u),r[t+"."+u]=o)}var i=[];return s(e,"chart"),i}n=n||"chart";var r=n+".",i={},s=t?["chart."+t.replace(r,"")]:C(e,"chart",i);t&&(i["chart."+t.replace(r,"")]=H(b(e,t.replace(r,""))));var o={agMismatch:{},typeLookup:i},u=[],a={},c={},h={},p=t,d,v,m,g;for(var y=0,E=s.length;y<E;y++){var t=s[y],S=t.replace("chart.",r),x=l(t,e,o,p);if(g=b(x,"invalid.message"))a[S]=g,x.type=i[t];(d=x.ui)?(v=d.element,m=d.type,v&&m?N(t)||f(S,x,e,c,a):h[S]=x):h[S]=x}for(var T in o.agMismatch)a["chart."+T]=k.describeAgMismatch(o.agMismatch[T]);return{data:{warnings:a,skeleton:c,otherPaths:h},getMiData:function(e){var t=this.data;return e=w(e),t.skeleton[e]},getWarnings:function(){return this.data.warnings}}}function f(e,t,n,r,i){function E(e,t){var n={description:e.description,members:{}},r=n.members,i,s={navigator:",column,line,area,marker,ohlc,candlestick,empty,",other:",column,line,area,marker,bubble,empty,"},o;t.sequence.indexOf("chartType,seriesType")===0&&e.members.bubble&&(t.chartType==="navigator"?o=s.navigator:o=s.other);for(var u in e.members){i=e.members[u];if(!o||o.indexOf(","+u+",")>-1)i.description?r[u]=i:r[u]={description:i}}return n}function S(e){var t={};for(var n in e)n!=="invalid"&&n!=="setting"&&n!=="sequence"&&(t[n]=e[n]);return t}var s={},o,u,a,f,l,c={},h,p=!1;u=s.value=b(n,e.replace("chart.",""));if(o=t.ui){s.template=(o.element||"")+"-"+(o.type||""),s.type=o.type||"";if(a=o.dropDownMembers){var d=s.dropDownInfo={eChain:o.eChain};if(!o.eChain.sequence)return;var v=o.eChain.sequence.split(",");d.name=v[0];for(var m=0,g=v.length;m<g;m++){var y=v[m],w=N(y);d[y]=E(w,o.eChain)}s.value=S(o.eChain)}}s.tokenSet=t.tokenSet,s.description=t.description,s.valDescription=t.valDescription,t.label&&(s.label=t.label);if(h=i[e])s.warning=h;r[e]=s}function l(e,t,n,r){function d(){l.cache={findMember:{},hasArrayGroups:{},evalPath:{},json:t}}var i,s,o,a={},f;r||!l.cache?d():l.cache.json!==t&&d(),f={json:t,fullPath:e,cache:l.cache,cycleCache:n};var c;e=w(e);var h=e.replace("chart.","");h==="chart"&&(h=h.replace("chart",""));if(m(t)){c=h.length?y(t,h,l.cache.evalPath):t,o=n.typeLookup[e],s=C(e,!1,c,f),o!=="object"&&o!=="array";if(s){a.description=s.description,a.valDescription=b(s,o+".description"),o==="string"&&(i=s.tokenSet||u.evalPath(s,"string.tokenSet"))&&(a.tokenSet=i),f.agMismatch&&(n||(n={agMismatch:{}}),n.agMismatch[f.agMismatch.path]=f.agMismatch,delete f.agMismatch),p(s,c,e,f,o),a.ui=f.ui,a.raw=s,s.name&&(a.label=s.name);if(s.docsPath||f.docsPath)a.docsPath=s.docsPath||f.docsPath}else f.invalid;f.invalid&&(a.invalid=f.invalid)}else a=O(e);return a}function c(e){function l(e){if(e.split(",").length===1&&e.indexOf("obj_")>-1)return"Types."+e.replace("obj_","")}var t=e.split("."),n="",r,i="";for(var s=0,o=t.length;s<o;s++){var a=t[s];s&&(i+="."),i+=a;if(o===1){JSCL.getApiObj(i)?n="Types."+i:JSCL.getApiEnum(i)&&(n="Enums."+i);if(n)return n}if(s===o-1&&o>1&&n.indexOf("Types.")===0)return n+="."+a,n;var f=N(i);(r=f.type)&&r.split(",").length===1&&(r.indexOf("obj_")>-1?(n="Types."+r.replace("obj_",""),i=r.replace("obj_","")):r==="array"?u.evalPath(f,"array.types").length===1&&(f=u.evalPath(f,"array.types.0"),n=l(f.type)):JSCL.getApiObj(i)?n="Types."+i:JSCL.getApiEnum(i)&&(n="Enums."+i))}return n}function h(e,t,n,r,s){r=r||{};var o,a,f,l;l=T(e.type);var c=[],h=[],p,m,g,y,w,E,x;x=s||H(t);if(l)if(e["obj_"+l])e=u.fasterExtend(!0,null,JSCL.getApiObj(l),e[e.type]);else if(!e.object||e.type.indexOf("obj_")>-1)e=_(e);if(e){y=e.type;if(y){var N=y.split(","),O=0,M=!1;for(var P=0,B=N.length;P<B;P++){var o=N[P];if(o==="number"){if(x==="number")return n&&(r.ui={element:e.ui||"TextBox",type:"number"}),!0;if(e.allowNull||e.number&&e.number.allowNull)if(t===null)return n&&(r.ui={element:e.ui||"TextBox",type:"number"}),!0;O++}else if(o==="date"){if(x==="date")return n&&(r.ui={element:e.ui||"TextBox",type:"date"}),!0;h.push("date"),O++}else if(o==="string"){if(x==="string"){if(!(a=JSCL.jL.evalPath(e,"string.validator")))return r.ui={element:e.ui||"TextBox",type:"string"},!0;if(typeof a=="function"){var j=a(t,n,null,JSCL.getJSONapi());if(!j)return r.ui={element:e.ui||"TextBox",type:"string"},!0;p="Value "+t+" is not a valid string setting"}}h.push("string"),O++}else if(o==="bool"){if(x==="bool")return r.ui={element:e.ui||"CheckBox",type:"bool"},!0;h.push("bool"),O++}else if(o==="method"){if(x==="method")return r.ui={element:e.ui||"TextBox",type:"function"},!0;h.push("function"),O++}else if(o==="array"){if(x==="array"){var F=e[o],I,q;n?q=A(e,n,b(r,"cache.hasArrayGroups")):q=L(e),q&&(I=C.matchArrayGroup(e,t,r))&&(e=I);var R=e?e.ui:null;return r.ui={element:R,type:"array"},!0}O++}else if(o.indexOf("enum_")>-1){if(x==="string"){var U=D(o);m=S(t,U);if(typeof m.invalid===i)return d(m,r),!0;g=U,p='Value "'+t+'" setting is not defined by the ('+U+") enum options.",c.push(o)}else h.push(o);O++}}x!=="object"&&(p?(k(r.fullPath,p,r),f=!0):k(r.fullPath,"Property does not support a ("+x+") data type.",r));var z;r.ui={element:e.ui||z,type:x};if(r.invalid){c=c.concat(h),z=c.length>0?c[0]:"",r.ui.expectedType=z,z.length>0&&z.indexOf("enum_")===-1&&(z=v(e,z)),r.ui.element=e.ui||z;if(r.ui.element.indexOf("enum_")===0){var W={};W[g]="",d(W,r)}}return O!==N.length}if(e.pop)return!0}}function p(e,t,n,r,s){function Y(e){e.sort(function(e,t){function i(e){return e.indexOf("obj_")>-1?5:e.indexOf("iobj_")>-1?5:e.indexOf("object")>-1?4:e.indexOf("enum_")>-1?1:e.indexOf("flag_")>-1?3:2}var n=i(e),r=i(t);return n>r?1:n<r?-1:0})}r=r||{};var o,u,a,f;f=T(e.type);var l=[],c=[],h,m,g,y,w,E,x;x=s||H(t);if(e){y=e.type;if(y){var O=y.split(",");Y(O);var M=0,_=!1;for(var P in O){o=O[P];if(o==="number"){if(x==="number")return n&&(r.ui={element:e.ui||"TextBox",type:"number"}),!0;if(e.allowNull||e.number&&e.number.allowNull)if(t===null)return n&&(r.ui={element:e.ui||"TextBox",type:"number"}),!0;M++}else if(o==="date"){if(x==="date")return n&&(r.ui={element:e.ui||"TextBox",type:"date"}),!0;c.push("date"),M++}else if(o==="string"){if(x==="string"){if(!(u=JSCL.jL.evalPath(e,"string.validator")))return r.ui={element:e.ui||"TextBox",type:"string"},!0;if(typeof u=="function"){var B=u(t,n,null,JSCL.getJSONapi());if(!B)return r.ui={element:e.ui||"TextBox",type:"string"},!0}}c.push("string"),M++}else if(o==="bool"){if(x==="bool")return r.ui={element:e.ui||"CheckBox",type:"bool"},!0;c.push("bool"),M++}else if(o==="method"){if(x==="method")return r.ui={element:e.ui||"TextBox",type:"function"},!0;c.push("function"),M++}else if(o==="array"){if(x==="array"){var j=e[o],F,I;n?I=A(e,n,b(r,"cache.hasArrayGroups")):I=L(e),I&&(F=C.matchArrayGroup(e,t,r))&&(e=F);var q=e?e.ui:null;return r.ui={element:q,type:"array"},!0}M++}else if(o.indexOf("enum_")>-1){if(x==="string"){var R=D(o);m=S(t,R);if(typeof m.invalid===i)return d(m,r),!0;g=R,h='Value "'+t+'" setting is not defined by the ('+R+") enum options.",l.push(o)}else c.push(o);M++}else if(o.indexOf("flag_")>-1){if(x==="string"){var R=D(o.replace("flag_","enum_")),U=JSCL.getApiEnum(o.replace("flag_","")),z=t.split(",");h="";for(var W=0,X=z.length;W<X;W++){var V=z[W];U.members[V]||(h='Value "'+t+'" setting is not defined by the ('+R+") enum options.")}r.ui={element:e.ui||"none",type:"string"};if(!h)return!0;l.push(o)}else c.push(o);M++}else if(o.indexOf("obj_")>-1){r.docsPath=o.replace("obj_","");var $;if($=p(N(o.replace("obj_","")),t,n,r,s))return!0;M++}}x!=="object"&&(h?(k(r.fullPath,h,r),a=!0):k(r.fullPath,"Property does not support a ("+x+") data type.",r));var J;r.ui={element:e.ui||J,type:x};if(r.invalid){l=l.concat(c),J=l.length>0?l[0]:"",r.ui.expectedType=J,J.length>0&&J.indexOf("enum_")===-1&&(J=v(e,J)),r.ui.element=e.ui||J;if(r.ui.element&&r.ui.element.indexOf("enum_")===0){var K={};K[g]="",d(K,r)}}return M!==O.length}if(e.pop){for(var P=0,Q=e.length;P<Q;P++){var G=e[P];if(p(G,t,n,r,s))return!0}return!0}}}function d(e,t){var n=E(e),r;for(var i=0,s=n.length;i<s;i++){r=n[i];if(r!=="setting"&&r!=="sequence"&&r!=="invalid")break}if(!e.sequence)return;r=e.sequence.split(",")[0];var o=JSCL.getApiEnum(r);t.ui||(t.ui={});var u=t.ui;u.element=o.ui||"DropDown",u.dropDownMembers=o.members,u.type="string",u.eChain=e}function v(e,t){switch(t){case"number":case"string":return"TextBox";case"bool":return"CheckBox";case"date":return"TextBox"}}function m(e){return typeof e===i&&e!==null?!1:!0}function g(){var e=arguments,t,n,r=e.length;for(t=0;t<r;t++){n=e[t];if(typeof n!==i&&n!==null)return n}}function y(e,t,n){n=n||{};var r,i;return r=n[t],r?r:(i=b(e,t),i&&(n[t]=i),i)}function b(e,t){var n=e,r;if(t){r=t.split(".");for(var i=0;n!==undefined&&i<r.length;i++)n=n[r[i]]}return n}function w(e){return e.replace(/\[([0-9]+)\]/g,".$1")}function S(e,t,n){function a(e,t){function a(e,t){var n=r(t),i=E(n.members),s,o,u,a,f={},l,c,h;e=x(e);for(u=0,a=i.length;u<a;u++){if(!(e.indexOf(i[u].toLowerCase())!==0||e.length!==i[u].length&&!n.members[i[u]].chain)){o=i[u];break}e.indexOf(i[u].toLowerCase())===0&&e.length!==i[u].length&&!n.members[i[u]].chain?h=i[u]:n.members[i[u]].isDefault&&(s=i[u])}return!o&&h&&(o=h),o||(o=s,c=!0),o?(e.indexOf(o.toLowerCase())===0?l=e.replace(o.toLowerCase(),""):l=e,{match:o,isDefault:c,chain:n.members[o].chain,value:l}):{invalid:e}}var r=JSCL.getApiEnum,s=!1,o={sequence:[]},u;o.setting=e,e=e.toLowerCase();while(!s){u=a(e,t);if(m(u[i]))u.value=u[i],s=!0;else{if(!u.isDefault||!n)o[t]=u.match,o.sequence.push(t);t=u.chain,e=u.value,!t&&e.length===0?s=!0:t?t=t.replace("enum_",""):t||(s=!0)}}return o.sequence=o.sequence.join(","),u.value.length>0&&(o.invalid=u.value),o}var r=t.split(","),i="invalid",s,o,u;for(o=0,u=r.length;o<u;o++){s=a(e,x(r[o]).replace("enum_",""));if(!s[i])break}return s}function x(e){return e.replace(/^\s+|\s+$/g,"")}function T(e){if(e&&e.indexOf("obj_")>-1){var t=e.split(",");for(var n in t){var r=t[n];if(r.indexOf("obj_")>-1)return r.substring(4)}}}function N(e,t,n,r){function a(e){return String.fromCharCode(e.charCodeAt(0)+32).concat(e.substr(1))}function f(e){var t,n=JSCL.getApiObj(e);if(typeof n!==i)return r.docsPath=e,n;n=JSCL.getApiEnum(e);if(typeof n!==i)return r.docsPath=e,n}function l(e,t,n,s){var o,f=!1,c,h=parseInt(t),p;if(typeof e===i)return;c=T(e.type);if(c)if(e["obj_"+c])e=u.fasterExtend(!0,null,JSCL.getApiObj(c),e[e.type]);else if(!e.object||!e.object[t])e=JSCL.getApiObj(c);if(e.type.indexOf("array")>-1)if(e.array.arrayType==="specific")c=T(e.array.types[0].type),c&&(o=JSCL.getApiObj(c).object);else if(e.array[0]&&h>=0){var d=[];for(p in e.array)d.push(e.array[p].types[h]);if(n)return;return d.length===1?d[0]:d}o||(o=typeof e.object!==i?e.object:null);if(o){var v=o[t],m;if(v)return r.docsPath+="."+t,v;for(p in o){if(p===t)return o[p];if(t.indexOf&&t.indexOf(p)===0){if(n)return t.substring(0,p.length);var g=a(t.substring(p.length));return l(o[p],g)}p==="*"&&(m=o[p]),f=!0}return m}}function c(e,t,n,r){var i,u;return n?(i=o[r],i?i:(u=l(e,t,n,r),u&&(o[r]=u),u)):(i=s[r],i?i:(u=l(e,t,n,r),u&&(s[r]=u),u))}function p(e,t){if(e.array&&e.array[0])for(var n in e.array){var r=e.array[n].types,i=!1;for(var s=0;s<r.length;s++)h(r[s],t[s],"",{light:!0})||(i=!0);if(!i)return e.array[n]}}N.findMember=l,N.matchArrayGroup=p,e=e.replace(/\.[0-9]+\./g,"."),e=e.replace(/\.[0-9]+/g,""),r=r||{};var d=e.split("."),v=f(d[0]),m,g,y,b,w;b=d[0],d.shift();for(var E=0,S=d.length;E<S;E++){g=d[E],b=b+"."+g,v=l(v,g,t,b);if(t&&v&&v.charAt)return v}if(t)return;if(typeof v==i)return;var x=T(v.type);if(typeof n!==i&&n.pop){if(x&&v.type.indexOf(",")===-1)return r.path=x,p(N(x),n);if(w=p(v,n))return w;if(x)if(w=p(N(x),n))return r.path=x,w}else if((x||v.type&&v.type.indexOf("enum_")>-1)&&v.type.indexOf(",")===-1){var C=x?x:v.type.substring(5),k={};k=f(C),v["obj_"+x]&&k.object&&(k.object=u.fasterExtend(!0,null,k.object,v["obj_"+x].object)),k.type=v.type||k.type,k.description=v.description||k.description,v=k}return v}function C(e,t,n,r){function U(e){return!isNaN(parseFloat(e))&&isFinite(e)}function z(e){var t=e.charCodeAt(0);return t>64&&t<91?String.fromCharCode(t+32).concat(e.substr(1)):e}function W(e){var t,n=JSCL.getApiObj(e);if(typeof n!==i)return r.docsPath=e,n;n=JSCL.getApiEnum(e);if(typeof n!==i)return r.docsPath=e,n}function X(e,t,n,s,o){o=o||{};var u,a,f=!1,l,c=parseInt(t),h,p=U(t);if(typeof e===i)return;e=_(e);if(e.arrayType){if(p)return e.types[t]}else if(e.type&&e.type.indexOf("array")>-1)if(m(e.types)){if(p)return e.types[t]}else if(e.array.arrayType){if(p)return o.cachePath=$(s),Object.create(e.array.types[0]);l=T(e.array.types[0].type);if(l){if(p)return a=JSCL.getApiObj(l),a;a=JSCL.getApiObj(l).object}}else{if(e.array.arrayType==="anyType")return e.array.types[0];if(e.array[0]&&c>=0){var d=[];for(h in e.array)(u=e.array[h].types[c])&&d.push(Object.create(u));if(n)return;return d.length===1?d[0]:d}}a||(a=typeof e.object!==i?e.object:null);if(a){var v=a[t],g;if(v)return r.docsPath+="."+t,Object.create(v);for(h in a){if(h===t)return Object.create(a[h]);if(t.indexOf&&t.indexOf(h)===0){if(n)return t.substring(0,h.length);var y=z(t.substring(h.length));return X(a[h],y,!1,s)}h==="*"&&(g=a[h]),f=!0}g||(r.propertyMismatch={properties:a,search:t},k(s,"Property "+t+" is not defined.",r));if(g)return Object.create(g)}else p||k(s,"Property "+t+" is not defined.",r)}function V(e,t,n,i,s){var u,a,f=r.cache.findMember;return n?(u=o[i],u?u:(a=X(e,t,n,i),a&&(o[i]=a),a)):(u=f[i]||f[$(i)],u?(r.docsPath=u.docsPath,u):(a=X(e,t,n,i,s),a&&(a.docsPath=r.docsPath,s.cachePath?f[s.cachePath]=a:f[i]=a),a))}function $(e){return e.replace(/\.([0-9]+)$/,".[]")}function J(e,t,n){n=n||{};var r=0,i={},s,o,u;n.cycleCache?o=n.cycleCache.typeLookup:o={},e=_(e);if(e.array&&e.array[0]){for(var a in e.array){var f=e.array[a].types,l=!1;u=!1;var c=-1;for(var p=0;p<f.length;p++)f[p].multi&&(u=!0,c=p);if(u&&f.length<t.length)while(f.length<t.length)f.splice(c,0,f[c]);if(f.length!==t.length)l=!0;else{s={index:a,path:n.fullPath,rawReference:e.array[a],length:f.length,matching:0,matchMap:[],types:[]},r++;for(var p=0;p<f.length;p++)s.types[p]=f[p].type,h(f[p],t[p],n.fullPath,n,o[n.fullPath+"."+p]||H(t[p]))?(s.matchMap[p]=!0,s.matching++):(l=!0,s.matchMap[p]=!1);if(!m(i.index)||i.matching<s.matching)i=s}if(!l)return delete n.invalid,e.array[a]}m(i.index)||(i={path:n.fullPath,rawReference:e}),n.invalid=i}}C.findMember=X,C.matchArrayGroup=J,e=x(e),r=r||{};var s=e.split("."),a=W(s[0]),f,l,c,p,d,v="",g,b,w={},E,S=r.cache.evalPath,L=r.cycleCache.typeLookup;p=s[0],s.shift();for(var O=0,D=s.length;O<D;O++){l=s[O],p=p+"."+l,v=p.replace("chart.",""),w={},a=V(a,l,t,p,w);var P=y(r.json,v,S),B=L[p];B==="array"&&a&&(g=A(a,w.cachePath||p,r.cache.hasArrayGroups))&&(E={fullPath:v,cycleCache:{typeLookup:L},cache:r.cache},b=J(g,P,E),b&&O<D+1&&U(s[O+1])?a=b:E.invalid&&(r.agMismatch=E.invalid,O<D+1&&U(s[O+1])&&(a=E.invalid.rawReference)));if(t&&a&&a.charAt)return a}if(t)return;if(typeof a==i)return;var j=T(a.type);if(typeof n!==i&&n!==null&&n.pop){if(j&&a.type.indexOf(",")===-1){r.docsPath=j;var F=N(j,!1,P,r);return F?F:(F=M(j),F=_(F),J(F,n))}if(d=J(a,n,{cycleCache:{typeLookup:L}}))return d;if(j)if(d=J(M(j),n))return r.path=j,d}else if((j||a.type&&a.type.indexOf("enum_")>-1)&&a.type.indexOf(",")===-1){var I=j?j:a.type.substring(5),q={};q=W(I),a["obj_"+j]&&q.object&&(q.object=u.fasterExtend(!0,null,q.object,a["obj_"+j].object)),q=Object.create(q),q.type=a.type||q.type,q.description=a.description||q.description;var R;R=a.name,a=q,m(R)&&(a.name=R)}return a}function k(e,t,n){function s(e){var t="";t+="The specified array does not match the length of any defined array groups.",t+="";if(e.matching>0){t="The specified array does not match the types of any defined array groups.",t+=" <br/>",t+="The closest match pattern for this arrayGroup is:<br/> ",t+=e.rawReference.description+"<br/>";var n=[];for(var r=0,i=e.matchMap.length;r<i;r++){var s=e.matchMap[r];s?n.push("("+e.types[r]+")"):n.push('<span class="invalid">('+e.types[r]+")</span>")}t+="Pattern: ["+n.join(", ")+"]"}return t}function o(e){function c(e,t){var n=0;for(var r=0,i=e.length;r<i;r++){var s=e[r],o=t[r];if(s!==o)break;n++}return n}var t="";t+="";var n=[],r,i;if(i=e.properties){for(var s in i){var o=c(e.search,s);o>1&&n.push([s,o])}n.length>0&&(n.sort(function(e,t){function i(e){return 50-e[1]}var n=i(e),r=i(t);return n>r?1:n<r?-1:0}),r=n[0][0],t+=" Did you mean ("+r+")?")}if(e.matching>0){t+="The closest match pattern for this arrayGroup is:<br/> ",t+=e.rawReference.description+"<br/>";var u=[];for(var a=0,f=e.matchMap.length;a<f;a++){var l=e.matchMap[a];l?u.push("("+e.types[a]+")"):u.push('<span class="invalid">('+e.types[a]+")</span>")}t+="Pattern: ["+u.join(", ")+"]"}return t}var r,i;k.describeAgMismatch=s;if(r=n.agMismatch)t+=s(r),delete n.agMismatch;else if(i=n.propertyMismatch)t+=o(i),delete n.propMismatch;n.invalid={path:e,message:t}}function L(e){if(e.type.indexOf("obj_")===-1&&e.type.indexOf("array")===-1)return;e=_(e);if(e.type&&e.type.indexOf("array")>-1){var t=e.array||e;if(t.arrayType!=="specific"&&t[0])return e}}function A(e,t,n){function o(e){return e.replace(/\.([0-9]+)$/,".[]")}n=n||{};var r,i,s={};return r=n[t]||n[t.replace(/\.([0-9]+)$/,".[]")],r?r:(i=L(e),i&&(n[t]=i),i)}function O(e,t){e=e.replace(/\.[0-9]+\./g,"."),e=e.replace(/\.[0-9]+/g,"");var n=s[e];if(n)return n;var r=N(e);return r&&(s[e]=r),r}function M(e,t){e=e.replace(/\.[0-9]+\./g,"."),e=e.replace(/\.[0-9]+/g,"");var n=s[e];if(n)return n;var r=N(e);return r&&(s[e]=r),r}function _(e){function s(e,t){for(var n=t.length-1;n>=0;n--)t[n]===e&&t.splice(n,1)}function o(e,t){var n={},r=0;for(var i in e)n[r]=e[i],r++;for(var s in t)n[r]=t[s],r++;return n}function a(e,t){l(e,t)||e.push(t)}function f(e,t){for(var n=0,r=t.length;n<r;n++)l(e,t[n])||e.push(t[n])}function l(e,t){for(var n=e.length-1;n>=0;n--)if(e[n]===t)return!0}var t=T(e.type),n;if(t){e=Object.create(e);var r=e.type.split(",");if(e["obj_"+t])e=u.fasterExtend(!0,null,JSCL.getApiObj(t),e[e.type]);else if(e.object){var i=JSCL.getApiObj(t);s("obj_"+t,r),e.type=r.join(","),e.array&&i.array&&(e.array=o(e.array,i.array),a(r,"array")),e=u.fasterExtend(!0,null,i,e),f(r,i.type.split(",")),e.type=r.join(",");if(n=T(i.type))e=_(e)}else{var i=JSCL.getApiObj(t);s("obj_"+t,r),f(r,i.type.split(",")),e.type=r.join(","),e=u.fasterExtend(!0,null,i,e)}}return Object.create(e)}function D(e){if(e&&e.indexOf("enum_")>-1){var t=e.split(",");for(var n in t){var r=t[n];if(r.indexOf("enum_")>-1)return r.substring(5)}}}function P(e){var t=B(e);return t==="boolean"?"bool":t==="function"?"method":t}function H(e){var t=typeof e;if(t!==i){if(t==="boolean")return"bool";if(t==="number")return"number";if(t==="function")return"method";if(e&&e.pop)return"array";if(t==="string")return"string";if(t==="object")return e&&e.getUTCMilliseconds?"date":"object"}return i}function B(e){var t=typeof e;if(t!==i){if(t==="boolean")return"boolean";if(t==="number")return"number";if(t==="function")return"function";if(e&&e.pop)return"array";if(t==="string")return"string";if(t==="object")return e&&e.getUTCMilliseconds?"date":"object"}return i}var n=" ",r="",i="undefined",s={},o={};typeof Object.create!="function"&&(Object.create=function(e){function t(){}return t.prototype=e,new t});var u=e("jsonLib");t.getMiData=l,t.processJson=a,t.evalPath=b,t.getMiValType=H,t.evalDocsPath=c;var E=function(e){var t=[],n=0;for(t[n++]in e);return t}})()}),define("ast_layer",["require","exports","module","highlight","jsonLib","../esprima","MIInterface","miinterface","miinterface","tree_data_source2","tree_data_source2","build_ui","tree2"],function(require,exports,module){function getAstMeta(e){function i(e){var t,n;if(t=e.parent)if(n=jL.evalPath(t,"value.type")||t.type)if(n==="ArrayExpression")return!0}if(e.meta)return e.meta;var t={detailedType:"",type:"",keyLoc:undefined,astLoc:undefined,propertyLoc:undefined,value:"",valueType:"",valueText:"",valueLoc:undefined},n,r=getValueInfoFromAST(e,!0);return jL.fasterExtend(t,r),t.astLoc=e.loc,e.type==="Property"?(t.type="property",t.keyLoc=jL.evalPath(e,"key.loc"),t.propertyLoc=e.loc,jL.evalPath(t,"offsetStack.length")&&(t.offsetStack.push(t.keyLoc),t.offsetStack.push(t.propertyLoc))):e.type==="Literal"?(i(e)&&(t.detailedType="arrayItem"),t.type="value"):e.type==="ObjectExpression"?(i(e)&&(t.detailedType="arrayItem"),t.type="object"):e.type==="ArrayExpression"?t.type="array":(i(e)&&(t.detailedType="arrayItem"),t.valueType==="date"&&(t.type="code")),e.meta=t,t}function getValueInfoFromAST(ast,getRaw){function getFromAstLevel(astL,astLProp){function doExpression(){var loc=astL.loc,range=astToAce(loc);resultB.valueType="code",resultB.valueText=GLOBAL.aceEditor.getSession().getTextRange(range);try{resultB.value=eval("("+resultB.valueText+")")}catch(e){resultB.value=undefined}}var resultB={valueType:"",valueText:"",valueLoc:"",otherLoc:"",value:"",quoteChar:"",offsetStack:[],referenceMeta:""};if(astL.type==="ArrayExpression")resultB.valueType="array",resultB.otherLoc=astL.loc,astL.childrenNo=astL.elements.length;else if(astL.type==="ObjectExpression")astL.childrenNo=astL.properties.length,resultB.valueType="object",resultB.otherLoc=astL.loc;else if(astL.type==="Identifier"){var refAst=getAstFromIdentifier(astL)||getAstFromIdentifier(astLProp);refAst?(resultB.value=refAst.value,resultB.valueType="reference",resultB.valueLoc=refAst.loc,resultB.referencedMeta=getAstMeta(refAst),resultB.valueText=resultB.referencedMeta.valueText):(resultB.valueType="referenceUnresolved",resultB.valueLoc=astL.loc,resultB.valueText=astL.name)}else if(astL.type==="FunctionExpression"){var loc=astL.loc,range=astToAce(loc);resultB.valueType="function",resultB.valueText=GLOBAL.aceEditor.getSession().getTextRange(range),resultB.valueLoc=loc}else if(astL.type==="BinaryExpression"){var loc=astL.loc,range=astToAce(loc);resultB.valueType="code",resultB.valueText=GLOBAL.aceEditor.getSession().getTextRange(range),astL.left.loc&&astL.right.loc?(resultB.offsetStack.push(astL.left.loc),resultB.offsetStack.push(astL.right.loc),resultB.valueLoc={start:astL.left.loc.start,end:astL.right.loc.end}):resultB.valueLoc=astL.loc,resultB.offsetStack.push(astL.loc);try{resultB.value=eval("("+resultB.valueText+")")}catch(e){}}else if(astL.type==="ExpressionStatement"&&!astL.isChart){var loc=astL.expression.loc,range=astToAce(loc);resultB.valueType="code",resultB.valueText=GLOBAL.aceEditor.getSession().getTextRange(range),resultB.valueLoc=loc;try{resultB.value=eval("("+resultB.valueText+")")}catch(e){}}else if(astL.type==="UnaryExpression"&&astL.argument){var loc=astL.loc,range=astToAce(loc);resultB.valueText=GLOBAL.aceEditor.getSession().getTextRange(range),resultB.valueType="number";try{resultB.value=eval("("+resultB.valueText+")"),resultB.valueType=require("MIInterface").getMiValType(resultB.value)}catch(e){resultB.value=parseFloat(resultB.valueText)}/[a-zA-Z]+/.test(astL.operator)&&(resultB.valueType="code"),resultB.valueLoc=astL.loc}else if(astL.type==="Literal")resultB.valueType=require("miinterface").getMiValType(astL.value),getRaw&&astL.raw&&typeof astL.value=="number"?resultB.value=+astL.raw:astL.raw?(resultB.valueType==="string"&&(resultB.quoteChar=astL.raw[0]),resultB.value=astL.value):resultB.value=astL.value,resultB.valueText=GLOBAL.aceEditor.getSession().getTextRange(astToAce(astL.loc)),resultB.valueLoc=astL.loc;else if(astL.type==="NewExpression"&&astL.callee&&astL.callee.name==="Date"){var loc=astL.loc,range=astToAce(loc);resultB.valueType="date",resultB.valueText=GLOBAL.aceEditor.getSession().getTextRange(range),resultB.valueLoc=loc;try{resultB.value=eval("("+resultB.valueText+")")}catch(e){}}else if(astL.type==="NewExpression"||astL.type==="CallExpression"){var loc=astL.loc,range=astToAce(loc);resultB.valueText=GLOBAL.aceEditor.getSession().getTextRange(range),resultB.valueType="function",resultB.valueLoc=loc}else astL.type==="LogicalExpression"?doExpression():astL.type==="AssignmentExpression"?doExpression():astL.type==="UpdateExpression"?doExpression():astL.type==="ConditionalExpression"?doExpression():(value=jL.evalPath(astL,"value.value"),resultB.valueText=value+"",resultB.valueType=require("miinterface").getMiValType(value),resultB.value=value,resultB.valueLoc=jL.evalPath(astL,"value.loc"));return resultB}var result={valueType:"",valueText:"",valueLoc:"",value:"",otherLoc:"",quoteChar:""},value;return ast.type==="ArrayExpression"?(result.valueType="array",result.otherLoc=ast.loc):ast.type==="ObjectExpression"?(result.valueType="object",result.otherLoc=ast.loc):ast.type==="Property"?jL.defined(ast.value)&&(result=getFromAstLevel(ast.value,ast)):result=getFromAstLevel(ast,ast.parent),result}function isChangeInert(e,t,n){function v(e){return/^[\s]*$/.test(e)}var r=e.data.action,i=e.data.range,s=e.data.text,o=e.data.lines,u,a;n=n||{point:aceToAst(e.data.range.start),offsetX:0,offsetY:0};var f=/^[\s]*$/.test(s),l=new aceRange.Range(i),a=e.data.text===enterPressTextData;if(r==="insertLines"||r==="removeLines"){var f=!0;for(var c=0,h=o.length;c<h;c++){var p=o[c];if(!v(p)){f=!1;break}}}var d=!0;return r==="insertLines"?(n.offsetY=o.length,n.offsetX=0,n.point=aceToAst(e.data.range.start),f||(d=!1)):r==="removeLines"?(f||(d=!1),n.offsetY=-o.length,n.offsetX=0,n.point=aceToAst(e.data.range.end)):(t=t||findAstFromPos2(i.start),r==="insertText"?(f?t&&(t.key||t.value)&&(d=!1):d=!1,a?(n.offsetY=1,n.offsetX=-i.start.column,n.point=aceToAst(e.data.range.start)):u||(n.point=aceToAst(e.data.range.start),n.offsetX=s.length,n.offsetY=0)):r==="removeText"&&(f?t&&(t.key||t.value)&&(d=!1):d=!1,a?(n.offsetY=-1,n.offsetX=i.start.column,n.point=aceToAst(e.data.range.end)):u||(n.point=aceToAst(e.data.range.end),n.offsetX=-s.length,n.offsetY=0))),isWithinComments(i)&&(d=!0),d}function isWithinChartDeclaration(e){e=astToAce(e);if(GLOBAL.chartSyntaxRoots)for(var t in GLOBAL.chartSyntaxRoots){var n=GLOBAL.chartSyntaxRoots[t].loc,r=astLocToAceRange(n);if(r.inside(e))return!0}}function isWithinComments(e){var e=astToAce(e);for(var t=0,n=GLOBAL.astComments.length;t<n;t++){var r=GLOBAL.astComments[t],i=GLOBAL.astComments[t].loc,s=astLocToAceRange(i);if(r.type==="Block"){if(s.containsRange(e))if(s.start.row===e.start.row){if(s.start.column+2<=e.start.column)return!0}else{if(s.end.row!==e.end.row)return!0;if(s.end.column-2>=e.end.column)return!0}}else if(r.type==="Line"&&s.start.row===e.start.row&&s.start.column+2<=e.start.column)return!0}}function astToAce(e){function r(e){function t(e){if(jL.defined(e.line))return!0}return t(e)?{column:e.column,row:n(e.line)}:e}var t=getLocType(e),n=GLOBAL.astToAceLine;if(t==="range")return{start:r(e.start),end:r(e.end)};if(t==="loc")return r(e);throw"Unrecognizable loc or range in astToAce()"}function aceToAst(e){function n(e){function t(e){if(jL.defined(e.row))return!0}return t(e)?{column:e.column,line:r(e.row)}:e}function r(e){return e-GLOBAL.offsetLineJSPage+1}var t=getLocType(e);if(t==="range")return{start:n(e.start),end:n(e.end)};if(t==="loc")return n(e);throw"Unrecognizable loc or range in astToAce()"}function getLocType(e){var t="";return"start"in e?t="range":"column"in e&&(t="loc"),t}function updateAstValue(e,t,n){function y(e,t){if(e.start.line===t&&e.end.line===t)return!0}var r,i={valueCodeText:"",dataTypeChanged:!1},s,o,u,a,f=e.fullname;t+="",e.textboxValue=t;var l=e.meta;if(e.meta.valueType==="string"&&e.meta.quoteChar)t=e.meta.quoteChar+t+e.meta.quoteChar;else if(e.meta.valueType==="number"&&isNaN(t)){if(t===".")return!1;i.dataTypeChanged=!0,t="'"+t+"'"}o=t.length,u=e.meta.valueText.length,a=o-u;var c=e.meta.valueLoc.start.column+u/2;n&&(n.point={column:c,line:e.meta.valueLoc.start.line},n.offsetX=a,n.offsetY=0),i.valueCodeText=t;try{var h=esprima.parse("("+t+")")}catch(p){return!1}if(r=jL.evalPath(h,"body.0.expression"))if(r.type)if(e.type===r.type)e=jL.fasterExtend(e,r),s=!0;else if(jL.evalPath(e,"value.type")===r.type)e.value=jL.fasterExtend(e.value,r),s=!0;else if(e.type==="Property"){var d=jL.getPropNames(e.value);for(var v=0,m=d.length;v<m;v++){var g=d[v];g!=="loc"&&delete e.value[g]}e.value=jL.fasterExtend(e.value,r),s=!0}else e.type==="Literal"?(e=jL.fasterExtend(e,r),s=!0):(e=jL.fasterExtend(e,r),s=!1);return delete e.meta,s?i:s}function updateFullnamesValue(ast){var astMeta=getAstMeta(ast);require("tree_data_source2").setFullname(ast.fullname,astMeta.value);return;var aceRange,newVal,curVal,valText}function offsetAllAstLocFromInertData(e,t){var n=e.point,r=e.offsetX,i=e.offsetY,s,o,u,a,f="astLoc,keyLoc,valueLoc,otherLoc".split(","),l="astLoc".split(","),c="astLoc".split(","),h="astLoc,keyLoc,valueLoc".split(","),p="astLoc,keyLoc,valueLoc".split(",");if(GLOBAL.props)for(var d=0,v=GLOBAL.props.length;d<v;d++)if(s=GLOBAL.props[d]){o=getAstMeta(s);if(jL.evalPath(o,"offsetStack.length"))for(var m=0,g=o.offsetStack.length;m<g;m++)u=o.offsetStack[m],offsetIfApplicable(u,n,r,i,t);else{o.type==="array"?a=l:o.type==="value"?a=c:o.type==="object"?a=h:o.type==="property"?a=p:o.type==="code"?a=c:a=f;for(var y=0,b=a.length;y<b;y++){var w=a[y];(u=o[w])&&offsetIfApplicable(u,n,r,i,t)}}}if(GLOBAL.astComments.length)for(var d=0,v=GLOBAL.astComments.length;d<v;d++){var E=GLOBAL.astComments[d],S=GLOBAL.astComments[d].loc;offsetIfApplicable(S,n,r,i,t)}require("build_ui").refreshJsRanges()}function offsetIfApplicable(e,t,n,r,i){var s=new aceRange.Range(e.start.line,e.start.column,e.end.line,e.end.column),o;if(r===0){if(s.inside(t.line,t.column))s.isMultiLine()?e.end.line===t.line&&t.column<=e.end.column&&(e.end.column+=n,o=!0):(e.end.column+=n,o=!0);else if(e.start.line===t.line)if(e.start.column>=t.column){e.end.column+=n;if(!i||e.start.column!==t.column)e.start.column+=n;o=!0}else e.end.column===t.column&&i&&(e.end.column+=n)}else r!==0&&(e.start.line>=t.line?e.start.line===t.line?s.inside(t.line,t.column)?(e.end.column+=n,e.end.line+=r,o=!0):e.start.column>=t.column&&(e.end.column+=n,e.end.line+=r,e.start.column+=n,e.start.line+=r,o=!0):(e.end.line+=r,e.start.line+=r,o=!0):e.end.line>=t.line&&(e.end.line===t.line?e.end.column>=t.column&&(e.end.column+=n,e.end.line+=r,o=!0):(e.end.line+=r,o=!0)));return o}function hitTest(e,t){var n={type:""},r=astToAce(e),i=astToAce(t),s=new aceRange.Range(r),o,u=getLocType(i);return u==="range"?(o=new aceRange.Range(i),s.containsRange(o)?n.type="BinA":s.intersects(o)&&(n.type="intersect")):u==="loc"&&s.contains(i.row,i.column),n}function offsetAstByxAt(e,t,n){function f(e,t){function r(e,t){e.start.column+=t,e.end.column+=t}var n;(n=e.loc)&&r(n,t),(n=jL.evalPath(e,"value.loc"))&&r(n,t),(n=jL.evalPath(e,"argument.loc"))&&r(n,t)}var r,i=t.line;if(r=findAstOnLine(i))for(var s=0,o=r.length;s<o;s++){var u=r[s],a=getValueLocFromAst(u);a.start.column>t.column&&f(u,n)}}function getValueTypeOfAst(e){return getAstMeta(e).valueType}function getValueLocFromAst(e){var t;if(e){if(e.type==="UnaryExpression")return e.loc;if(!jL.defined(e.value))return e.loc;t=e.value.loc||e.loc}return t}function findAstFromPos2(e,t){var n={key:undefined,value:undefined,property:undefined,other:undefined,anyProperty:undefined,any:undefined,location:undefined},r=t?"contains":"inside",i,s=[],o,u,a,f=!1;if(GLOBAL.props){for(var l=0,c=GLOBAL.props.length;l<c;l++)o=GLOBAL.props[l],u=getAstMeta(o),f=!0,u.astLoc&&(a=astLocToAceRange(u.astLoc),a[r](e.row,e.column)||(f=!1)),f&&(u.propertyLoc&&(a=astLocToAceRange(u.propertyLoc),a[r](e.row,e.column)&&(n.property=o,i=!0)),u.keyLoc&&(a=astLocToAceRange(u.keyLoc),a[r](e.row,e.column)&&(n.key=o,i=!0)),u.valueLoc&&(a=astLocToAceRange(u.valueLoc),a[r](e.row,e.column)&&(n.value=o,i=!0)),u.otherLoc&&(a=astLocToAceRange(u.otherLoc),a[r](e.row,e.column)&&(n.other=o,i=!0)));n.anyProperty=n.value||n.key||n.property,n.any=n.value||n.key||n.property||n.other;if(!(n.location=n.value||n.key))if(!n.property)n.location=n.other;else if(n.other){var h=astLocToAceRange(n.property.loc),p=astLocToAceRange(n.other.loc);h.containsRange(p)?n.location=n.other:n.location=n.property}}return i?n:undefined}function astLocToAceRange(e){var t=astToAce(e);return new aceRange.Range(t.start.row,t.start.column,t.end.row,t.end.column)}function sortPathsByAstPos(e){function t(e,t){var n=GLOBAL.fullnameProps,r=n[e].loc.start.line,i=n[t].loc.start.line;return r<i?-1:r>i?1:(r=n[e].loc.start.column,i=n[t].loc.start.column,r<r?-1:r>i?1:0)}return e.sort(t),e}function findAstFromPos(e,t){function f(e,t){e={start:{column:e.start.column,line:i(e.start.line)},end:{column:e.end.column,line:i(e.end.line)}};if(e.start.line===t.row){if(e.start.column<t.column){if(e.end.line>t.row)return!0;if(e.end.column>=t.column)return!0}}else if(e.end.line===t.row){if(e.end.column>=t.column){if(e.start.line<t.row)return!0;if(e.start.column<t.column)return!0}}else if(e.start.line<=t.row&&e.end.line>=t.row)return!0}function l(e,t){if(e.key&&f(e.key.loc,t))return"key";var n=getValueTypeOfAst(e.value);return n==="array"?"other":n==="object"?"other":e.value&&e.value.loc&&f(e.value.loc,t)?"value":e.type?e.type==="Literal"?"value":e.type:"other"}var n,r,i=GLOBAL.astToAceLine,s=[];if(GLOBAL.props){for(var o=0,u=GLOBAL.props.length;o<u;o++){var n=GLOBAL.props[o];f(n.loc,e)?s.push(n):n.key&&f(n.key.loc,e)&&s.push(n)}if(s.length){var a=s[s.length-1];return t&&(t.type=l(a,e)),s[s.length-1]}}}function findAstOnLine(e){var t=[];if(GLOBAL.props)for(var n=0,r=GLOBAL.props.length;n<r;n++){var i=GLOBAL.props[n],s=getValueLocFromAst(i);s.start.line===e&&t.push(i)}return t}function findValueFromIdentifier(e){var t;if(t=getAstFromIdentifier(e))return t.value;var n}function getAstFromIdentifier(e){var t,n;if(e)if(n=jL.evalPath(GLOBAL,"syntax.body"))for(var r=0;r<n.length;r++)if(n[r].kind==="var"&&n[r].type==="VariableDeclaration"){var i=n[r].declarations;for(var s=0;s<i.length;s++)if(i[s].id&&i[s].id.name&&i[s].id.name===(jL.evalPath(e,"value.name")||e.name)){t=i[s].init;break}}return t}function getValueFromAST(e,t,n){var r,i=getAstMeta(t);r=i.value;if(i.type==="array"||i.type==="object")r="noValue";return r}function updateEditor(e,t){var n=e,r;n.type==="Literal"?r=new aceRange.Range(GLOBAL.astToAceLine(n.loc.start.line),n.loc.start.column,GLOBAL.astToAceLine(n.loc.end.line),n.loc.end.column):r=new aceRange.Range(GLOBAL.astToAceLine(n.value.loc.start.line),n.value.loc.start.column,GLOBAL.astToAceLine(n.value.loc.end.line),n.value.loc.end.column);var i=t+"";n.value.raw?n.value.raw==="''"?i="'"+t+"'":n.value.raw==='""'?i='"'+t+'"':i=n.value.raw.replace(n.value.value,i):n.raw&&(i=n.raw.replace(n.value,i)),GLOBAL.updateFromTreeUI=!0,GLOBAL.forceUpdateFromTreeUI&&(GLOBAL.updateFromTreeUI=!1,GLOBAL.forceUpdateFromTreeUI=!1);var s=GLOBAL.aceEditor.getSession().replace(r,i);GLOBAL.updateFromTreeUI=!1,n.type==="Literal"?n.loc.end.column=s.column:n.value.loc&&n.value.loc.end&&(n.value.loc.end.column=s.column)}var aceRange=ace.require("ace/range"),highlight=require("highlight"),jL=require("jsonLib"),esprima=require("../esprima"),enterPressTextData=String.fromCharCode(13)+String.fromCharCode(10);exports.findAstFromPos=findAstFromPos,exports.findAstFromPos2=findAstFromPos2,exports.getValueLocFromAst=getValueLocFromAst,exports.offsetAstByxAt=offsetAstByxAt,exports.getValueTypeOfAst=getValueTypeOfAst,exports.getValueInfoFromAST=getValueInfoFromAST,exports.getAstMeta=getAstMeta,exports.isChangeInert=isChangeInert,exports.isWithinChartDeclaration=isWithinChartDeclaration,exports.isWithinComments=isWithinComments,exports.updateAstValue=updateAstValue,exports.astLocToAceRange=astLocToAceRange,exports.updateFullnamesValue=updateFullnamesValue,exports.getAceRange=astLocToAceRange,exports.sortPathsByAstPos=sortPathsByAstPos,exports.offsetAllAstLoc=offsetAllAstLocFromInertData,exports.offsetAllAstLocFromInertData=offsetAllAstLocFromInertData,exports.offsetRange=offsetIfApplicable,exports.astToAce=astToAce,exports.aceToAst=aceToAst,exports.getValueFromAST=getValueFromAST,exports.setValueInAST=function(e,t){var n=e;if(n.type==="Property"){if(n.value.type==="Literal")updateEditor(e,t);else if(n.value.type==="Identifier"){var r=getAstFromIdentifier(n);r&&this.setValueInAST({ast_node_dec:r},t)}}else if(n.type!=="UnaryExpression"||!n.argument)n.type==="Literal"?updateEditor(e,t):n.type==="NewExpression"&&n.callee&&n.callee.name==="Date"},exports.updateGlobalPropTextVals=function(){var e;for(var t=0,n=GLOBAL.props.length;t<n;t++){var e=GLOBAL.props[t];if(e.isInFunctionDeclaration)continue;if(e.type==="UnaryExpression")e.textboxValue=e.operator+""+e.argument.value;else if(e.type==="Property"||e.type==="Literal")e.textboxValue=require("tree2").escapeHtml(getValueFromAST({ast_node_dec:e}))+""}},exports.updateRefByPath=function(){GLOBAL.pathProps={};for(var e=0,t=GLOBAL.props.length;e<t;e++){var n=GLOBAL.props[e];GLOBAL.pathProps[n.fullname]=n}}}),define("tabs",["require","exports","module","events","ast_layer","eventHandlers"],function(e,t,n){function o(){function f(t,n,i){var s=document.createElement("a");s.setAttribute("divID",n),s.setAttribute("class","tab"),r.addListener(s,"click",function(n){e("eventHandlers").reportAction(n.target,"click"),l(this,t)});var o=document.createElement("span");o.innerHTML=t,s.appendChild(o);var u=document.createElement("li");(i||GLOBAL.currentChartObjectName==t)&&u.setAttribute("class","active"),u.appendChild(s),a.appendChild(u)}function l(e,t){var n=e.parentElement.parentElement;for(var r=0;r<n.childNodes.length;r++)n.childNodes[r].setAttribute("class","");e.parentElement.setAttribute("class","active"),GLOBAL.currentChartObjectName=t,u()}function c(e){var t=new RegExp("<div[ ]+id=."+e+".*>"),n=t.exec(GLOBAL.aceEditor.getValue());if(n&&n[0]){var r=jQuery(n[0]);if(r&&r[0]&&r[0].style)return r[0]}}function h(){var e=document.createElement("img");e.id="refreshChart",e.src="images/context/refresh.png",e.setAttribute("title","click to refresh the chart."),e.setAttribute("class","refreshChartIocn"),e.style.marginTop="5px",e.onclick=function(){},a.appendChild(e)}i=[],i=GLOBAL.chartNames;var t=document.getElementById("chartContentTab");t.innerHTML="";for(var n=0;n<i.length;n++){var s=document.createElement("div");s.id=i[n].divID,s.setAttribute("class","chartDivHolder"),t.appendChild(s);var o=c(i[n].divID);o&&(o.getAttribute("style")&&s.setAttribute("style",o.getAttribute("style")),o.getAttribute("class")&&s.setAttribute("class","chartDivHolder "+o.getAttribute("class")))}var a=document.getElementById("chartTabs");a.innerHTML="",i.length>1&&(GLOBAL.currentChartObjectName==""?(f("All","all","selected"),GLOBAL.currentChartObjectName="All"):f("All"));for(var n=0;n<i.length;n++)n==0&&i.length==1?f(i[n].name,i[n].divID,"selected"):f(i[n].name,i[n].divID)}function u(){if(GLOBAL.currentChartObjectName){var e=document.getElementById("chartContentTab");for(var t=0;t<e.childNodes.length;t++)GLOBAL.currentChartObjectName==="All"?e.childNodes[t].style.display="block":e.childNodes[t].style.display="none";if(GLOBAL.currentChartObjectName!="All")for(var t=0;t<i.length;t++)if(GLOBAL.currentChartObjectName===i[t].name){var n=document.getElementById(i[t].divID);n.style.display="block"}}}function a(){o()}var r=e("events"),i=[],s=e("ast_layer");t.init=a,t.updateVisibleChartTab=u}),define("build_ui",["require","exports","module","../esprima","tabs","idleDefer","tree2","strings","tree_data_source2","highlight","rsvp","tabs","tabs","jsonLib"],function(require,exports,module){function init(){parseDocument(),highlight.clearAll(),GLOBAL.currentChartObjectName="",highlightFromURL();var d1=(new Date).getTime();GLOBAL.varDeclarations=[],GLOBAL.properties=[],parseEsprima();var d2=(new Date).getTime();debug&&console.log("Esprima time: "+(d2-d1)),GLOBAL.timeData=[],GLOBAL.timeData.parser=d2-d1,highlight.clear(),tree_data_source.init();if(!GLOBAL.is_UI_hidden){var myTreeObj=new Tree2;myTreeObj.init(null,"newSample")}try{var d5=(new Date).getTime(),deferID="chartUpdate";idleDefer.defer(deferID,deferTiming[deferID],function(){tab.init(),eval(codeText),JSCTools.g.splitter.fixContentHeight()})}catch(e){debug&&console.log("Chart Eval exception: "+e.message)}var d6=(new Date).getTime();debug&&console.log("Chart time: "+(d6-d5))}function parseDocument(){GLOBAL.codeText=codeText=GLOBAL.aceEditor.getSession().getValue(),parseJSPart()}function getCodeText(){return GLOBAL.codeText=codeText=GLOBAL.aceEditor.getSession().getValue(),parseJSPart(),codeText}function parseEsprima(){var e=new rsvp.Promise(function(e,t){delete GLOBAL.syntax,GLOBAL.syntax=esprima.parse(codeText,{loc:!0,range:!1,raw:!0,tokens:!1,comment:!0,tolerant:!0}),e()});return e}function refreshChart(){var promise=new rsvp.Promise(function(resolve,reject){function execute(){if(GLOBAL.chartIsDirty)try{require("tabs").init(),eval(getCodeText()),GLOBAL.chartIsDirty=!1,require("tabs").updateVisibleChartTab()}catch(e){reject(e)}resolve()}var deferID="chartUpdate";GLOBAL.disableDelay?execute():idleDefer.defer(deferID,deferTiming[deferID],function(){execute()})});return promise}function refreshTree(){}function highlightFromURL(){if(GLOBAL.lineFromURL){var e=GLOBAL.lineFromURL.split("-");e.length==1?highlight.line(parseInt(e[0],10)):e.length==2&&highlight.line(parseInt(e[0],10),parseInt(e[1],10)),GLOBAL.lineFromURL=""}}function createUI(){for(var e=0;e<uiDisposables.length;++e){var t=uiDisposables[e];t.dispose&&t.dispose()}uiDisposables=[]}function parseJSPart2(){var e=new RegExp("<script[^>]*>","mg"),t=0,n=0,r=[];codeData=[],GLOBAL.aceRangeLocation=[];var i=0;for(;;){var s=e.exec(codeText);if(!s)break;t=codeText.indexOf("</script>",s.index);if(t>0&&t-(s.index+s[0].length)>2){n==0&&(n=s.index),codeData.push({start:s.index+s[0].length,end:t,data:codeText.substring(s.index+s[0].length,t)}),r.push(codeText.substring(s.index+s[0].length,t));var o=GLOBAL.aceEditor.getSession().doc.indexToPosition(s.index+s[0].length),u=GLOBAL.aceEditor.getSession().doc.indexToPosition(t);i=t;var a=new aceRange(o.row,0,u.row,0);GLOBAL.aceRangeLocation.push(a)}}r.length>0&&(GLOBAL.offsetLineJSPage=codeText.substr(0,n).split("\n").length-1,codeText=r.join("\n"))}function parseJSPart(){var e=new RegExp("<script[^>]*>","mg"),t=0,n=0,r=[];codeData=[],GLOBAL.aceRangeLocation=[];var i=0;for(;;){var s=e.exec(codeText);if(!s)break;t=codeText.indexOf("</script>",s.index);if(t>0&&t-(s.index+s[0].length)>2){n==0&&(n=s.index),codeData.push({start:s.index+s[0].length,end:t,data:codeText.substring(s.index+s[0].length,t)}),r.push(codeText.substring(s.index+s[0].length,t));var o=GLOBAL.aceEditor.getSession().doc.indexToPosition(s.index+s[0].length),u=GLOBAL.aceEditor.getSession().doc.indexToPosition(t);i=t;var a=new aceRange(o.row,0,u.row,0);GLOBAL.aceRangeLocation.push(a)}}r.length>0&&(GLOBAL.offsetLineJSPage=codeText.substr(0,n).split("\n").length-1,codeText=r.join("\n"))}function getLineInPage(e){var t=0,n=0,r,i;if(GLOBAL.aceRangeLocation)for(var s=0,o=GLOBAL.aceRangeLocation.length;s<o;s++){var u=GLOBAL.aceRangeLocation[s];t+=(r=u.end.row)-(i=u.start.row);if(e-t<0)return i+(e-n)-1;n+=r-i+1}return e}function updatedJsonParseStep(){var e=new rsvp.Promise(function(e,t){var n=(new Date).getTime();parseDocument(),GLOBAL.currentChartObjectName="",GLOBAL.varDeclarations=[],GLOBAL.properties=[],parseEsprima().then(function(){tree_data_source.init();var t=(new Date).getTime();require("jsonLib").setPathVal(GLOBAL,"esprimaDuration",t-n),e()}).catch(function(e){t(e)})});return e}var esprima=require("../esprima"),tab=require("tabs"),idleDefer=require("idleDefer"),myTree2=require("tree2"),strings=require("strings").presets,deferTiming=strings.deferTiming,Tree2=myTree2.Tree,codeText="",debug=strings.debug,codeData=[],uiDisposables=[],aceRange=ace.require("ace/range").Range,tree_data_source=require("tree_data_source2"),highlight=require("highlight"),rsvp=require("rsvp");GLOBAL.refreshChart=refreshChart,GLOBAL.refreshTree=refreshTree,exports.init=init,exports.updatedJsonParseStep=updatedJsonParseStep,exports.refreshChart=refreshChart,exports.refreshJsRanges=parseDocument,GLOBAL.astToAceLine=getLineInPage,exports.redrawUI=function(){GLOBAL.timeData={};if(!GLOBAL.is_UI_hidden){var e=new Tree2;e.init(null,"newSample")}}}),define("load_editor",["require","exports","module","ajax","build_ui","editor_work","tree2","samples","events","docTab_update","tree_data_source2","controller","controller","dom","eventHandlers"],function(e,t,n){function v(t){t=t.replace(/url\(images\//gi,"url(../samples/images/"),t=t.replace(/'images\//gi,"'../samples/images/"),d.init(),d.clear(),e("tree_data_source2").resetFullnames(),e("controller").suspend(),a.disableUI(),GLOBAL.aceEditor.getSession().setValue(t),GLOBAL.aceEditor.resize(),u.resetUndoStack(),e("controller").resume();var n=document.getElementById("JavaScriptTab");e("dom").callClickOn(n),GLOBAL.allPageDta=t,GLOBAL.aceEditor.clearSelection(),GLOBAL.loadedFileFirstTime=!1,GLOBAL.aceEditor.renderer.scrollToLine(0,!1,!1),setTimeout(function(){GLOBAL.aceEditor.resize()},500),setTimeout(function(){GLOBAL.aceEditor.session.setFoldStyle("markbeginend"),GLOBAL.aceEditor.session.setFoldStyle("markbegin")},3e3)}function m(){var e=0,t,n=[];for(var r in GLOBAL.aceRangeLocation){var i=new c(e,0,GLOBAL.aceRangeLocation[r].start.row+1,0);GLOBAL.aceEditor.session.addFold("",i),t=e=GLOBAL.aceRangeLocation[r].end.row}i=new c(t,0,1e4,0),GLOBAL.aceEditor.session.addFold("",i),GLOBAL.aceEditor.focus(),GLOBAL.aceEditor.resize()}function g(){GLOBAL.aceEditor=ace.edit("codeEditor"),GLOBAL.aceEditor.getSession().setMode("ace/mode/html"),GLOBAL.aceEditor.setTheme("ace/theme/textmate"),GLOBAL.aceEditor.setAnimatedScroll(!0),u.init();var t=document.getElementById("codeTabs");t&&l.addListener(t,"click",function(t){return t=l.fixEvent(t),l.stopEvent(t),l.preventDefault,e("eventHandlers").reportAction(t.target,"click"),t.target.innerHTML=="All Code"?(document.getElementById("codeTabFull").setAttribute("class",""),document.getElementById("codeTabCode").setAttribute("class","active"),GLOBAL.selectedCodeTab=!1,GLOBAL.aceEditor.session.unfold(),GLOBAL.aceEditor.focus(),p=[]):t.target.innerHTML=="JavaScript"&&(document.getElementById("codeTabFull").setAttribute("class","active"),document.getElementById("codeTabCode").setAttribute("class",""),m(),GLOBAL.selectedCodeTab=!0,GLOBAL.aceEditor.focus()),!1}),GLOBAL.aceEditor.addEventListener("gutterclick",function(e,t){return e.stopPropagation=!0,e.preventDefault(),u.gutterClicked(e,t),!1}),GLOBAL.aceEditor.addEventListener("afterRender",function(e,t){}),GLOBAL.aceEditor.getSession().on("change1",function(e){}),GLOBAL.aceEditor.getSession().on("change",function(e){GLOBAL.currentCursorInEditor=GLOBAL.aceEditor.getCursorPosition(),u.editor_changed(e),GLOBAL.loadedFileFirstTime&&(GLOBAL.aceEditor.resize(),GLOBAL.g.aceEditor.focus(),GLOBAL.g.aceEditor.moveCursorTo({row:0,col:0})),GLOBAL.aceEditor.resize()}),GLOBAL.aceEditor.setPrintMarginColumn(!1)}function y(e){if(e===undefined)throw new Error("Index needed for loadSample");GLOBAL.aceEditor||g();if(GLOBAL.sharedSampleFirebase)return;var t=new Date,n="../Samples/"+f[e];r.Ajax({type:"GET",url:n+"?d1="+t,onSuccess:function(e){v(e)},onError:function(e){alert(e)}})}var r=e("ajax"),i=document.getElementById("sampleList"),s=document.getElementById("codeEditor"),o=e("build_ui"),u=e("editor_work"),a=e("tree2"),f=e("samples").samples,l=e("events"),c=ace.require("ace/range").Range,h=ace.require("ace/search").Search,p=[],d=e("docTab_update");t.init=y,t.loadSample=v}),define("menu",["require","exports","module","dom","events","ajax","load_editor","samples","../server/load_sample","eventHandlers","smoothScrolling"],function(e,t,n){function v(){var t=GLOBAL.currentSampleName.split(".")[0].toLowerCase();for(var n=0;n<p.length;n++){t===p[n].split(".")[0].toLowerCase()&&(l=n),u||(u=document.getElementById("sampleList"));if(u.tagName==="UL"){var r=document.createElement("li"),s=document.createElement("a");s.innerHTML=p[n],s.setAttribute("title",p[n]),s.setAttribute("class","dropdownSamples"),s.setAttribute("sampleNo",n),r.appendChild(s),u.appendChild(r)}else{var r=document.createElement("option");r.text=p[n],r.value=p[n],u.appendChild(r)}}y(l),o.init(l),i.addListener(u,"click",function(){var e=this;return function(e){e=i.fixEvent(e),e.preventDefault(),l=e.target.getAttribute("sampleNo");if(!l){var t=e.target.getAttribute("firebase");if(!t){t=e.target.parentNode.getAttribute("firebase");if(t==="true")return;if(t){l=+t,y(null,e.target.innerHTML),d.load();return}}alert("Could not load the sample")}y(+l),$(".select-options").css("display","none"),o.init(l)}}.call(this)),i.addListener(c,"click",function(){var e=this;return m}.call(this)),i.addListener(h,"click",function(){var e=this;return g}.call(this)),$(".select-area").unbind("click"),$(".select-area").bind("click",function(t){t.stopPropagation();var n=$(this).parent().parent().find(".select-options"),r=n.css("display");e("eventHandlers").reportAction(t.target,"click");if(r!=="block"){n.css("display","block");var i=n.closest(".select-holder").find("span#menuFilename").text(),s=n.closest(".select-holder").find("a:contains('"+i+"')");s.length>0&&e("smoothScrolling").focusElement(s[0],{animationDuration:0,percentInfoView:.43,percentIntoViewCheck:1})}})}function m(e){var t=p.length;--l;if(l<0){if(GLOBAL.firepadObj.getAuth()&&GLOBAL.firebaseFileNames[-l]){y(null,GLOBAL.firebaseFileNames[-l]),d.load();return}l=t-1}y(l),o.init(l)}function g(e){++l;if(l>=p.length||l<=0){if(GLOBAL.firepadObj.getAuth()&&GLOBAL.firebaseFileNames&&GLOBAL.firebaseFileNames.length>0){var t=0;l<0&&(t=-l,t>GLOBAL.firebaseFileNames.length-1&&(t=GLOBAL.firebaseFileNames.length-1,l=-t)),y(null,GLOBAL.firebaseFileNames[t]),d.load();return}l=0}y(l),o.init(l)}function y(e,t){t?a.innerHTML=t:a.innerHTML=p[e],GLOBAL.currentSampleName=f.innerHTML=a.innerHTML,GLOBAL.sharedSampleFirebase||(window.location.hash="name="+GLOBAL.currentSampleName)}function b(e){var t=new Date;v(),e&&e()}var r=e("dom"),i=e("events"),s=e("ajax"),o=e("load_editor"),u=document.getElementById("sampleList"),a=document.getElementById("currentSample"),f=document.getElementById("menuFilename"),l=0,c=document.getElementById("buttonLeft"),h=document.getElementById("buttonRight"),p=e("samples").samples,d=e("../server/load_sample");t.init=b,t.nextSampleClick=g,t.setFileName=y}),function(e,t,n){typeof module!="undefined"&&module.exports?module.exports=t():typeof n["define"]=="function"&&n.define.amd?define("../server/firepad",t):n[e]=t()}("Firepad",function(){var e=e||{};e.utils={},e.utils.makeEventEmitter=function(e,t){e.prototype.allowedEvents_=t,e.prototype.on=function(e,t,n){this.validateEventType_(e),this.eventListeners_=this.eventListeners_||{},this.eventListeners_[e]=this.eventListeners_[e]||[],this.eventListeners_[e].push({callback:t,context:n})},e.prototype.off=function(e,t){this.validateEventType_(e),this.eventListeners_=this.eventListeners_||{};var n=this.eventListeners_[e]||[];for(var r=0;r<n.length;r++)if(n[r].callback===t){n.splice(r,1);return}},e.prototype.trigger=function(e){this.eventListeners_=this.eventListeners_||{};var t=this.eventListeners_[e]||[];for(var n=0;n<t.length;n++)t[n].callback.apply(t[n].context,Array.prototype.slice.call(arguments,1))},e.prototype.validateEventType_=function(e){if(this.allowedEvents_){var t=!1;for(var n=0;n<this.allowedEvents_.length;n++)if(this.allowedEvents_[n]===e){t=!0;break}if(!t)throw new Error('Unknown event "'+e+'"')}}},e.utils.elt=function(t,n,r){var i=document.createElement(t);if(typeof n=="string")e.utils.setTextContent(i,n);else if(n)for(var s=0;s<n.length;++s)i.appendChild(n[s]);for(var o in r||{})i.setAttribute(o,r[o]);return i},e.utils.setTextContent=function(e,t){e.innerHTML="",e.appendChild(document.createTextNode(t))},e.utils.on=function(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent&&e.attachEvent("on"+t,n)},e.utils.off=function(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r||!1):e.detachEvent&&e.detachEvent("on"+t,n)},e.utils.preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},e.utils.stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},e.utils.stopEvent=function(t){e.utils.preventDefault(t),e.utils.stopPropagation(t)},e.utils.stopEventAnd=function(t){return function(n){return t(n),e.utils.stopEvent(n),!1}},e.utils.trim=function(e){return e.replace(/^\s+/g,"").replace(/\s+$/g,"")},e.utils.stringEndsWith=function(e,t){var n=typeof t=="string"?[t]:t;for(var r=0;r<n.length;r++){var t=n[r];if(e.indexOf(t,e.length-t.length)!==-1)return!0}return!1},e.utils.assert=function(t,n){if(!t)throw new Error(n||"assertion error")},e.utils.log=function(){if(typeof console!="undefined"&&typeof console.log!="undefined"){var e=["Firepad:"];for(var t=0;t<arguments.length;t++)e.push(arguments[t]);console.log.apply(console,e)}};var e=e||{};e.Span=function(){function e(e,t){this.pos=e,this.length=t}return e.prototype.end=function(){return this.pos+this.length},e}();var e=e||{};e.TextOp=function(){function n(e){this.type=e,this.chars=null,this.text=null,this.attributes=null,e==="insert"?(this.text=arguments[1],t.assert(typeof this.text=="string"),this.attributes=arguments[2]||{},t.assert(typeof this.attributes=="object")):e==="delete"?(this.chars=arguments[1],t.assert(typeof this.chars=="number")):e==="retain"&&(this.chars=arguments[1],t.assert(typeof this.chars=="number"),this.attributes=arguments[2]||{},t.assert(typeof this.attributes=="object"))}var t=e.utils;return n.prototype.isInsert=function(){return this.type==="insert"},n.prototype.isDelete=function(){return this.type==="delete"},n.prototype.isRetain=function(){return this.type==="retain"},n.prototype.equals=function(e){return this.type===e.type&&this.text===e.text&&this.chars===e.chars&&this.attributesEqual(e.attributes)},n.prototype.attributesEqual=function(e){for(var t in this.attributes)if(this.attributes[t]!==e[t])return!1;for(t in e)if(this.attributes[t]!==e[t])return!1;return!0},n.prototype.hasEmptyAttributes=function(){var e=!0;for(var t in this.attributes){e=!1;break}return e},n}();var e=e||{};e.TextOperation=function(){function r(){if(!this||this.constructor!==r)return new r;this.ops=[],this.baseLength=0,this.targetLength=0}function i(e){var t=e.ops;switch(t.length){case 1:return t[0];case 2:return t[0].isRetain()?t[1]:t[1].isRetain()?t[0]:null;case 3:if(t[0].isRetain()&&t[2].isRetain())return t[1]}return null}function s(e){return e.ops[0].isRetain()?e.ops[0].chars:0}var t=e.TextOp,n=e.utils;return r.prototype.equals=function(e){if(this.baseLength!==e.baseLength)return!1;if(this.targetLength!==e.targetLength)return!1;if(this.ops.length!==e.ops.length)return!1;for(var t=0;t<this.ops.length;t++)if(!this.ops[t].equals(e.ops[t]))return!1;return!0},r.prototype.retain=function(e,n){if(typeof e!="number"||e<0)throw new Error("retain expects a positive integer.");if(e===0)return this;this.baseLength+=e,this.targetLength+=e,n=n||{};var r=this.ops.length>0?this.ops[this.ops.length-1]:null;return r&&r.isRetain()&&r.attributesEqual(n)?r.chars+=e:this.ops.push(new t("retain",e,n)),this},r.prototype.insert=function(e,n){if(typeof e!="string")throw new Error("insert expects a string");if(e==="")return this;n=n||{},this.targetLength+=e.length;var r=this.ops.length>0?this.ops[this.ops.length-1]:null,i=this.ops.length>1?this.ops[this.ops.length-2]:null;return r&&r.isInsert()&&r.attributesEqual(n)?r.text+=e:r&&r.isDelete()?i&&i.isInsert()&&i.attributesEqual(n)?i.text+=e:(this.ops[this.ops.length-1]=new t("insert",e,n),this.ops.push(r)):this.ops.push(new t("insert",e,n)),this},r.prototype["delete"]=function(e){typeof e=="string"&&(e=e.length);if(typeof e!="number"||e<0)throw new Error("delete expects a positive integer or a string");if(e===0)return this;this.baseLength+=e;var n=this.ops.length>0?this.ops[this.ops.length-1]:null;return n&&n.isDelete()?n.chars+=e:this.ops.push(new t("delete",e)),this},r.prototype.isNoop=function(){return this.ops.length===0||this.ops.length===1&&this.ops[0].isRetain()&&this.ops[0].hasEmptyAttributes()},r.prototype.clone=function(){var e=new r;for(var t=0;t<this.ops.length;t++)this.ops[t].isRetain()?e.retain(this.ops[t].chars,this.ops[t].attributes):this.ops[t].isInsert()?e.insert(this.ops[t].text,this.ops[t].attributes):e["delete"](this.ops[t].chars);return e},r.prototype.toString=function(){var e=Array.prototype.map||function(e){var t=this,n=[];for(var r=0,i=t.length;r<i;r++)n[r]=e(t[r]);return n};return e.call(this.ops,function(e){return e.isRetain()?"retain "+e.chars:e.isInsert()?"insert '"+e.text+"'":"delete "+e.chars}).join(", ")},r.prototype.toJSON=function(){var e=[];for(var t=0;t<this.ops.length;t++)this.ops[t].hasEmptyAttributes()||e.push(this.ops[t].attributes),this.ops[t].type==="retain"?e.push(this.ops[t].chars):this.ops[t].type==="insert"?e.push(this.ops[t].text):this.ops[t].type==="delete"&&e.push(-this.ops[t].chars);return e.length===0&&e.push(0),e},r.fromJSON=function(e){var t=new r;for(var i=0,s=e.length;i<s;i++){var o=e[i],u={};typeof o=="object"&&(u=o,i++,o=e[i]),typeof o=="number"?o>0?t.retain(o,u):t["delete"](-o):(n.assert(typeof o=="string"),t.insert(o,u))}return t},r.prototype.apply=function(e,t,r){var i=this;t=t||[],r=r||[];if(e.length!==i.baseLength)throw new Error("The operation's base length must be equal to the string's length.");var s=[],o=0,u,a,f=0,l=this.ops;for(var c=0,h=l.length;c<h;c++){var p=l[c];if(p.isRetain()){if(f+p.chars>e.length)throw new Error("Operation can't retain more characters than are left in the string.");s[o++]=e.slice(f,f+p.chars);for(u=0;u<p.chars;u++){var d=t[f+u]||{},v={};for(a in d)v[a]=d[a],n.assert(v[a]!==!1);for(a in p.attributes)p.attributes[a]===!1?delete v[a]:v[a]=p.attributes[a],n.assert(v[a]!==!1);r.push(v)}f+=p.chars}else if(p.isInsert()){s[o++]=p.text;for(u=0;u<p.text.length;u++){var m={};for(a in p.attributes)m[a]=p.attributes[a],n.assert(m[a]!==!1);r.push(m)}}else f+=p.chars}if(f!==e.length)throw new Error("The operation didn't operate on the whole string.");var g=s.join("");return n.assert(g.length===r.length),g},r.prototype.invert=function(e){var t=0,n=new r,i=this.ops;for(var s=0,o=i.length;s<o;s++){var u=i[s];u.isRetain()?(n.retain(u.chars),t+=u.chars):u.isInsert()?n["delete"](u.text.length):(n.insert(e.slice(t,t+u.chars)),t+=u.chars)}return n},r.prototype.compose=function(e){function n(e,t,n){var r={},i;for(i in e)r[i]=e[i];for(i in t)n&&t[i]===!1?delete r[i]:r[i]=t[i];return r}var t=this;if(t.targetLength!==e.baseLength)throw new Error("The base length of the second operation has to be the target length of the first operation");var i=new r,s=t.clone().ops,o=e.clone().ops,u=0,a=0,f=s[u++],l=o[a++],c;for(;;){if(typeof f=="undefined"&&typeof l=="undefined")break;if(f&&f.isDelete()){i["delete"](f.chars),f=s[u++];continue}if(l&&l.isInsert()){i.insert(l.text,l.attributes),l=o[a++];continue}if(typeof f=="undefined")throw new Error("Cannot compose operations: first operation is too short.");if(typeof l=="undefined")throw new Error("Cannot compose operations: first operation is too long.");if(f.isRetain()&&l.isRetain())c=n(f.attributes,l.attributes),f.chars>l.chars?(i.retain(l.chars,c),f.chars-=l.chars,l=o[a++]):f.chars===l.chars?(i.retain(f.chars,c),f=s[u++],l=o[a++]):(i.retain(f.chars,c),l.chars-=f.chars,f=s[u++]);else if(f.isInsert()&&l.isDelete())f.text.length>l.chars?(f.text=f.text.slice(l.chars),l=o[a++]):f.text.length===l.chars?(f=s[u++],l=o[a++]):(l.chars-=f.text.length,f=s[u++]);else if(f.isInsert()&&l.isRetain())c=n(f.attributes,l.attributes,!0),f.text.length>l.chars?(i.insert(f.text.slice(0,l.chars),c),f.text=f.text.slice(l.chars),l=o[a++]):f.text.length===l.chars?(i.insert(f.text,c),f=s[u++],l=o[a++]):(i.insert(f.text,c),l.chars-=f.text.length,f=s[u++]);else{if(!f.isRetain()||!l.isDelete())throw new Error("This shouldn't happen: op1: "+JSON.stringify(f)+", op2: "+JSON.stringify(l));f.chars>l.chars?(i["delete"](l.chars),f.chars-=l.chars,l=o[a++]):f.chars===l.chars?(i["delete"](l.chars),f=s[u++],l=o[a++]):(i["delete"](f.chars),l.chars-=f.chars,f=s[u++])}}return i},r.prototype.shouldBeComposedWith=function(e){if(this.isNoop()||e.isNoop())return!0;var t=s(this),n=s(e),r=i(this),o=i(e);return!r||!o?!1:r.isInsert()&&o.isInsert()?t+r.text.length===n:r.isDelete()&&o.isDelete()?n+o.chars===t||t===n:!1},r.prototype.shouldBeComposedWithInverted=function(e){if(this.isNoop()||e.isNoop())return!0;var t=s(this),n=s(e),r=i(this),o=i(e);return!r||!o?!1:r.isInsert()&&o.isInsert()?t+r.text.length===n||t===n:r.isDelete()&&o.isDelete()?n+o.chars===t:!1},r.transformAttributes=function(e,t){var r={},i={},s,o={};for(s in e)o[s]=!0;for(s in t)o[s]=!0;for(s in o){var u=e[s],a=t[s];n.assert(u!=null||a!=null),u==null?i[s]=a:a==null?r[s]=u:u!==a&&(r[s]=u)}return[r,i]},r.transform=function(e,t){if(e.baseLength!==t.baseLength)throw new Error("Both operations have to have the same base length");var n=new r,i=new r,s=e.clone().ops,o=t.clone().ops,u=0,a=0,f=s[u++],l=o[a++];for(;;){if(typeof f=="undefined"&&typeof l=="undefined")break;if(f&&f.isInsert()){n.insert(f.text,f.attributes),i.retain(f.text.length),f=s[u++];continue}if(l&&l.isInsert()){n.retain(l.text.length),i.insert(l.text,l.attributes),l=o[a++];continue}if(typeof f=="undefined")throw new Error("Cannot transform operations: first operation is too short.");if(typeof l=="undefined")throw new Error("Cannot transform operations: first operation is too long.");var c;if(f.isRetain()&&l.isRetain()){var h=r.transformAttributes(f.attributes,l.attributes);f.chars>l.chars?(c=l.chars,f.chars-=l.chars,l=o[a++]):f.chars===l.chars?(c=l.chars,f=s[u++],l=o[a++]):(c=f.chars,l.chars-=f.chars,f=s[u++]),n.retain(c,h[0]),i.retain(c,h[1])}else if(f.isDelete()&&l.isDelete())f.chars>l.chars?(f.chars-=l.chars,l=o[a++]):f.chars===l.chars?(f=s[u++],l=o[a++]):(l.chars-=f.chars,f=s[u++]);else if(f.isDelete()&&l.isRetain())f.chars>l.chars?(c=l.chars,f.chars-=l.chars,l=o[a++]):f.chars===l.chars?(c=l.chars,f=s[u++],l=o[a++]):(c=f.chars,l.chars-=f.chars,f=s[u++]),n["delete"](c);else{if(!f.isRetain()||!l.isDelete())throw new Error("The two operations aren't compatible");f.chars>l.chars?(c=l.chars,f.chars-=l.chars,l=o[a++]):f.chars===l.chars?(c=f.chars,f=s[u++],l=o[a++]):(c=f.chars,l.chars-=f.chars,f=s[u++]),i["delete"](c)}}return[n,i]},r}();var e=e||{};e.AnnotationList=function(){function n(e,t){if(!e)throw new Error("AnnotationList assertion failed"+(t?": "+t:""))}function r(e,t){this.pos=e,this.length=t.length,this.annotation=t.annotation,this.attachedObject_=t.attachedObject}function i(e,t){this.pos=e,this.length=t.length,this.annotation=t.annotation,this.node_=t}function o(e){this.head_=new u(0,s),this.changeHandler_=e}function u(e,t){this.length=e,this.annotation=t,this.attachedObject=null,this.next=null}var t=e.Span;r.prototype.getAttachedObject=function(){return this.attachedObject_},i.prototype.attachObject=function(e){this.node_.attachedObject=e};var s={equals:function(){return!1}};return o.prototype.insertAnnotatedSpan=function(e,r){this.wrapOperation_(new t(e.pos,0),function(t,i){n(!i||i.next===null);var o=new u(e.length,r);if(!i)return o;n(e.pos>t&&e.pos<t+i.length);var a=new u(0,s);return a.next=new u(e.pos-t,i.annotation),a.next.next=o,o.next=new u(t+i.length-e.pos,i.annotation),a.next})},o.prototype.removeSpan=function(e){if(e.length===0)return;this.wrapOperation_(e,function(t,r){n(r!==null);var i=new u(0,s),o=i;e.pos>t&&(o.next=new u(e.pos-t,r.annotation),o=o.next);while(e.end()>t+r.length)t+=r.length,r=r.next;var a=t+r.length-e.end();return a>0&&(o.next=new u(a,r.annotation)),i.next})},o.prototype.updateSpan=function(e,t){if(e.length===0)return;this.wrapOperation_(e,function(r,i){n(i!==null);var o=new u(0,s),a=o,f=r,l=e.pos-f;n(l<i.length),l>0&&(a.next=new u(l,i.annotation),a=a.next,f+=a.length);while(i!==null&&e.end()>=r+i.length){var c=r+i.length-f;a.next=new u(c,t(i.annotation,c)),a=a.next,r+=i.length,i=i.next,f=r}var h=e.end()-f;return h>0&&(n(h<i.length),a.next=new u(h,t(i.annotation,h)),a=a.next,f+=a.length,a.next=new u(r+i.length-f,i.annotation)),o.next})},o.prototype.wrapOperation_=function(e,t){if(e.pos<0)throw new Error("Span start cannot be negative.");var n=[],s=[],o=this.getAffectedNodes_(e),a;o.start!==null?(a=o.end.next,o.end.next=null):a=o.succ;var f=t(o.startPos,o.start),l=!1,c=!1;if(f){this.mergeNodesWithSameAnnotations_(f);var h;o.pred&&o.pred.annotation.equals(f.annotation)?(l=!0,f.length+=o.pred.length,o.beforePred.next=f,h=o.predPos):(o.beforeStart.next=f,h=o.startPos);while(f.next)s.push(new i(h,f)),h+=f.length,f=f.next;o.succ&&o.succ.annotation.equals(f.annotation)?(f.length+=o.succ.length,c=!0,f.next=o.succ.next):f.next=a,s.push(new i(h,f))}else o.pred&&o.succ&&o.pred.annotation.equals(o.succ.annotation)?(l=!0,c=!0,f=new u(o.pred.length+o.succ.length,o.pred.annotation),o.beforePred.next=f,f.next=o.succ.next,s.push(new i(o.startPos-o.pred.length,f))):o.beforeStart.next=a;l&&n.push(new r(o.predPos,o.pred));var p=o.startPos,d=o.start;while(d!==null)n.push(new r(p,d)),p+=d.length,d=d.next;c&&n.push(new r(p,o.succ)),this.changeHandler_(n,s)},o.prototype.getAffectedNodes_=function(e){var t={},n=null,r=this.head_,i=r.next,s=0;while(i!==null&&e.pos>=s+i.length)s+=i.length,n=r,r=i,i=i.next;if(i!==null||e.length===0&&e.pos===s){t.startPos=s,e.length===0&&e.pos===s?t.start=null:t.start=i,t.beforeStart=r,s===e.pos&&s>0?(t.pred=r,t.predPos=s-r.length,t.beforePred=n):t.pred=null;while(i!==null&&e.end()>s)s+=i.length,r=i,i=i.next;if(e.end()>s)throw new Error("Span end exceeds the bounds of the AnnotationList.");return e.length===0&&e.end()===s?t.end=null:t.end=r,t.succ=s===e.end()?i:null,t}throw new Error("Span start exceeds the bounds of the AnnotationList.")},o.prototype.mergeNodesWithSameAnnotations_=function(e){if(!e)return;var t=null,n=e;while(n)t&&t.annotation.equals(n.annotation)?(t.length+=n.length,t.next=n.next):t=n,n=n.next},o.prototype.forEach=function(e){var t=this.head_.next;while(t!==null)e(t.length,t.annotation,t.attachedObject),t=t.next},o.prototype.getAnnotatedSpansForPos=function(e){var t=0,n=this.head_.next,i=null;while(n!==null&&t+n.length<=e)t+=n.length,i=n,n=n.next;if(n===null&&t!==e)throw new Error("pos exceeds the bounds of the AnnotationList");var s=[];return t===e&&i&&s.push(new r(t-i.length,i)),n&&s.push(new r(t,n)),s},o.prototype.getAnnotatedSpansForSpan=function(e){if(e.length===0)return[];var n=[],r=this.getAffectedNodes_(e),i=r.startPos,s=r.start;while(s!==null&&i<e.end()){var o=Math.max(i,e.pos),u=Math.min(i+s.length,e.end()),a=new t(o,u-o);a.annotation=s.annotation,n.push(a),i+=s.length,s=s.next}return n},o.prototype.count=function(){var e=0,t=this.head_.next,r=null;while(t!==null)r&&n(!r.annotation.equals(t.annotation)),r=t,t=t.next,e++;return e},u.prototype.clone=function(){var e=new u(this.spanLength,this.annotation);return e.next=this.next,e},o}();var e=e||{};e.Cursor=function(){function e(e,t){this.position=e,this.selectionEnd=t}return e.fromJSON=function(t){return new e(t.position,t.selectionEnd)},e.prototype.equals=function(e){return this.position===e.position&&this.selectionEnd===e.selectionEnd},e.prototype.compose=function(e){return e},e.prototype.transform=function(t){function n(e){var n=e,r=t.ops;for(var i=0,s=t.ops.length;i<s;i++){r[i].isRetain()?e-=r[i].chars:r[i].isInsert()?n+=r[i].text.length:(n-=Math.min(e,r[i].chars),e-=r[i].chars);if(e<0)break}return n}var r=n(this.position);return this.position===this.selectionEnd?new e(r,r):new e(r,n(this.selectionEnd))},e}();var e=e||{};e.FirebaseAdapter=function(t){function s(e,t,r){this.ref_=e,this.ready_=!1,this.firebaseCallbacks_=[],this.zombie_=!1,this.document_=new n,this.revision_=0,this.pendingReceivedRevisions_={};var i=this;t?(this.setUserId(t),this.setColor(r),this.firebaseOn_(e.root().child(".info/connected"),"value",function(e){e.val()===!0&&i.initializeUserData_()},this),this.on("ready",function(){i.monitorCursors_()})):this.userId_=e.push().key(),setTimeout(function(){i.monitorHistory_()},0)}function o(e,t){if(!e)throw new Error(t||"assertion error")}function a(e){if(e===0)return"A0";var t="";while(e>0){var n=e%u.length;t=u[n]+t,e-=n,e/=u.length}var r=u[t.length+9];return r+t}function f(e){o(e.length>0&&e[0]===u[e.length+8]);var t=0;for(var n=1;n<e.length;n++)t*=u.length,t+=u.indexOf(e[n]);return t}typeof require=="function"&&typeof Firebase!="function"&&(Firebase=require("firebase"));var n=e.TextOperation,r=e.utils,i=100;r.makeEventEmitter(s,["ready","cursor","operation","ack","retry"]),s.prototype.dispose=function(){this.removeFirebaseCallbacks_(),this.userRef_.child("cursor").remove(),this.userRef_.child("color").remove(),this.ref_=null,this.document_=null,this.zombie_=!0},s.prototype.setUserId=function(e){this.userRef_&&(this.userRef_.child("cursor").remove(),this.userRef_.child("cursor").onDisconnect().cancel(),this.userRef_.child("color").remove(),this.userRef_.child("color").onDisconnect().cancel()),this.userId_=e,this.userRef_=this.ref_.child("users").child(e),this.initializeUserData_()},s.prototype.isHistoryEmpty=function(){return o(this.ready_,"Not ready yet."),this.revision_===0},s.prototype.sendOperation=function(e,t){function s(e,i){n.ref_.child("history").child(e).transaction(function(e){if(e===null)return i},function(o,u,a){if(o){if(o.message!=="disconnect")throw r.log("Transaction failure!",o),o;n.sent_&&n.sent_.id===e?setTimeout(function(){s(e,i)},0):t&&t(o,!1)}else t&&t(null,u)},!1)}var n=this;if(!this.ready_){this.on("ready",function(){n.trigger("retry")});return}o(this.document_.targetLength===e.baseLength,"sendOperation() called with invalid operation.");var i=a(this.revision_);this.sent_={id:i,op:e},s(i,{a:n.userId_,o:e.toJSON(),t:Firebase.ServerValue.TIMESTAMP})},s.prototype.sendCursor=function(e){this.userRef_.child("cursor").set(e),this.cursor_=e},s.prototype.setColor=function(e){this.userRef_.child("color").set(e),this.color_=e},s.prototype.getDocument=function(){return this.document_},s.prototype.registerCallbacks=function(e){for(var t in e)this.on(t,e[t])},s.prototype.initializeUserData_=function(){this.userRef_.child("cursor").onDisconnect().remove(),this.userRef_.child("color").onDisconnect().remove(),this.sendCursor(this.cursor_||null),this.setColor(this.color_||null)},s.prototype.monitorCursors_=function(){function n(e){var n=e.key(),r=e.val();t.trigger("cursor",n,r.cursor,r.color)}var e=this.ref_.child("users"),t=this;this.firebaseOn_(e,"child_added",n),this.firebaseOn_(e,"child_changed",n),this.firebaseOn_(e,"child_removed",function(e){var n=e.key();t.trigger("cursor",n,null)})},s.prototype.monitorHistory_=function(){var e=this;this.ref_.child("checkpoint").once("value",function(t){if(e.zombie_)return;var n=t.child("id").val(),r=t.child("o").val(),i=t.child("a").val();r!=null&&n!=null&&i!==null?(e.pendingReceivedRevisions_[n]={o:r,a:i},e.checkpointRevision_=f(n),e.monitorHistoryStartingAt_(e.checkpointRevision_+1)):(e.checkpointRevision_=0,e.monitorHistoryStartingAt_(e.checkpointRevision_))})},s.prototype.monitorHistoryStartingAt_=function(e){var t=this.ref_.child("history").startAt(null,a(e)),n=this;setTimeout(function(){n.firebaseOn_(t,"child_added",function(e){var t=e.key();n.pendingReceivedRevisions_[t]=e.val(),n.ready_&&n.handlePendingReceivedRevisions_()}),t.once("value",function(){n.handleInitialRevisions_()})},0)},s.prototype.handleInitialRevisions_=function(){o(!this.ready_,"Should not be called multiple times."),this.revision_=this.checkpointRevision_;var e=a(this.revision_),t=this.pendingReceivedRevisions_;while(t[e]!=null){var n=this.parseRevision_(t[e]);n?this.document_=this.document_.compose(n.operation):r.log("Invalid operation.",this.ref_.toString(),e,t[e]),delete t[e],this.revision_++,e=a(this.revision_)}this.trigger("operation",this.document_),this.ready_=!0;var i=this;setTimeout(function(){i.trigger("ready")},0)},s.prototype.handlePendingReceivedRevisions_=function(){var e=this.pendingReceivedRevisions_,t=a(this.revision_),n=!1;while(e[t]!=null){this.revision_++;var s=this.parseRevision_(e[t]);s?(this.document_=this.document_.compose(s.operation),this.sent_&&t===this.sent_.id?this.sent_.op.equals(s.operation)&&s.author===this.userId_?(this.revision_%i===0&&this.saveCheckpoint_(),this.sent_=null,this.trigger("ack")):(n=!0,this.trigger("operation",s.operation)):this.trigger("operation",s.operation)):r.log("Invalid operation.",this.ref_.toString(),t,e[t]),delete e[t],t=a(this.revision_)}n&&(this.sent_=null,this.trigger("retry"))},s.prototype.parseRevision_=function(e){if(typeof e!="object")return null;if(typeof e.a!="string"||typeof e.o!="object")return null;var t=null;try{t=n.fromJSON(e.o)}catch(r){return null}return t.baseLength!==this.document_.targetLength?null:{author:e.a,operation:t}},s.prototype.saveCheckpoint_=function(){this.ref_.child("checkpoint").set({a:this.userId_,o:this.document_.toJSON(),id:a(this.revision_-1)})},s.prototype.firebaseOn_=function(e,t,n,r){return this.firebaseCallbacks_.push({ref:e,eventType:t,callback:n,context:r}),e.on(t,n,r),n},s.prototype.firebaseOff_=function(e,t,n,r){e.off(t,n,r);for(var i=0;i<this.firebaseCallbacks_.length;i++){var s=this.firebaseCallbacks_[i];if(s.ref===e&&s.eventType===t&&s.callback===n&&s.context===r){this.firebaseCallbacks_.splice(i,1);break}}},s.prototype.removeFirebaseCallbacks_=function(){for(var e=0;e<this.firebaseCallbacks_.length;e++){var t=this.firebaseCallbacks_[e];t.ref.off(t.eventType,t.callback,t.context)}this.firebaseCallbacks_=[]};var u="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";return s}();var e=e||{};e.RichTextToolbar=function(t){function r(e){this.imageInsertionUI=e,this.element_=this.makeElement_()}var n=e.utils;return n.makeEventEmitter(r,["bold","italic","underline","strike","font","font-size","color","left","center","right","unordered-list","ordered-list","todo-list","indent-increase","indent-decrease","undo","redo","insert-image"]),r.prototype.element=function(){return this.element_},r.prototype.makeButton_=function(e,t){var r=this;t=t||e;var i=n.elt("a",[n.elt("span","",{"class":"firepad-tb-"+t})],{"class":"firepad-btn"});return n.on(i,"click",n.stopEventAnd(function(){r.trigger(e)})),i},r.prototype.makeElement_=function(){var e=this,t=this.makeFontDropdown_(),r=this.makeFontSizeDropdown_(),i=this.makeColorDropdown_(),s=[n.elt("div",[t],{"class":"firepad-btn-group"}),n.elt("div",[r],{"class":"firepad-btn-group"}),n.elt("div",[i],{"class":"firepad-btn-group"}),n.elt("div",[e.makeButton_("bold"),e.makeButton_("italic"),e.makeButton_("underline"),e.makeButton_("strike","strikethrough")],{"class":"firepad-btn-group"}),n.elt("div",[e.makeButton_("unordered-list","list-2"),e.makeButton_("ordered-list","numbered-list"),e.makeButton_("todo-list","list")],{"class":"firepad-btn-group"}),n.elt("div",[e.makeButton_("indent-decrease"),e.makeButton_("indent-increase")],{"class":"firepad-btn-group"}),n.elt("div",[e.makeButton_("left","paragraph-left"),e.makeButton_("center","paragraph-center"),e.makeButton_("right","paragraph-right")],{"class":"firepad-btn-group"}),n.elt("div",[e.makeButton_("undo"),e.makeButton_("redo")],{"class":"firepad-btn-group"})];e.imageInsertionUI&&s.push(n.elt("div",[e.makeButton_("insert-image")],{"class":"firepad-btn-group"}));var o=n.elt("div",s,{"class":"firepad-toolbar-wrapper"}),u=n.elt("div",null,{"class":"firepad-toolbar"});return u.appendChild(o),u},r.prototype.makeFontDropdown_=function(){var e=["Arial","Comic Sans MS","Courier New","Impact","Times New Roman","Verdana"],t=[];for(var r=0;r<e.length;r++){var i=n.elt("span",e[r]);i.setAttribute("style","font-family:"+e[r]),t.push({content:i,value:e[r]})}return this.makeDropdown_("Font","font",t)},r.prototype.makeFontSizeDropdown_=function(){var e=[9,10,12,14,18,24,32,42],t=[];for(var r=0;r<e.length;r++){var i=n.elt("span",e[r].toString());i.setAttribute("style","font-size:"+e[r]+"px; line-height:"+(e[r]-6)+"px;"),t.push({content:i,value:e[r]})}return this.makeDropdown_("Size","font-size",t,"px")},r.prototype.makeColorDropdown_=function(){var e=["black","red","green","blue","yellow","cyan","magenta","grey"],t=[];for(var r=0;r<e.length;r++){var i=n.elt("div");i.className="firepad-color-dropdown-item",i.setAttribute("style","background-color:"+e[r]),t.push({content:i,value:e[r]})}return this.makeDropdown_("Color","color",t)},r.prototype.makeDropdown_=function(e,t,r,i){function f(){a||(u.style.display="block",n.on(document,"click",c,!0),a=!0)}function c(){a&&(u.style.display="",n.off(document,"click",c,!0),a=!1),l=!0,setTimeout(function(){l=!1},0)}function h(e,r){typeof e!="object"&&(e=document.createTextNode(String(e)));var o=n.elt("a",[e]);n.on(o,"click",n.stopEventAnd(function(){c(),s.trigger(t,r+i)})),u.appendChild(o)}i=i||"";var s=this,o=n.elt("a",e+" ▾",{"class":"firepad-btn firepad-dropdown"}),u=n.elt("ul",[],{"class":"firepad-dropdown-menu"});o.appendChild(u);var a=!1,l=!1;for(var p=0;p<r.length;p++){var d=r[p].content,v=r[p].value;h(d,v)}return n.on(o,"click",n.stopEventAnd(function(){l||f()})),o},r}();var e=e||{};e.WrappedOperation=function(e){function t(e,t){this.wrapped=e,this.meta=t}function n(e,t){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}function r(e,t){if(e&&typeof e=="object"){if(typeof e.compose=="function")return e.compose(t);var r={};return n(e,r),n(t,r),r}return t}function i(e,t){return e&&typeof e=="object"&&typeof e.transform=="function"?e.transform(t):e}return t.prototype.apply=function(){return this.wrapped.apply.apply(this.wrapped,arguments)},t.prototype.invert=function(){var e=this.meta;return new t(this.wrapped.invert.apply(this.wrapped,arguments),e&&typeof e=="object"&&typeof e.invert=="function"?e.invert.apply(e,arguments):e)},t.prototype.compose=function(e){return new t(this.wrapped.compose(e.wrapped),r(this.meta,e.meta))},t.transform=function(e,n){var r=e.wrapped.constructor.transform,s=r(e.wrapped,n.wrapped);return[new t(s[0],i(e.meta,n.wrapped)),new t(s[1],i(n.meta,e.wrapped))]},t}();var e=e||{};e.UndoManager=function(){function r(t){this.maxItems=t||50,this.state=e,this.dontCompose=!1,this.undoStack=[],this.redoStack=[]}function i(e,t){var n=[],r=t.constructor;for(var i=e.length-1;i>=0;i--){var s=r.transform(e[i],t);(typeof s[0].isNoop!="function"||!s[0].isNoop())&&n.push(s[0]),t=s[1]}return n.reverse()}var e="normal",t="undoing",n="redoing";return r.prototype.add=function(e,r){if(this.state===t)this.redoStack.push(e),this.dontCompose=!0;else if(this.state===n)this.undoStack.push(e),this.dontCompose=!0;else{var i=this.undoStack;!this.dontCompose&&r&&i.length>0?i.push(e.compose(i.pop())):(i.push(e),i.length>this.maxItems&&i.shift()),this.dontCompose=!1,this.redoStack=[]}},r.prototype.transform=function(e){this.undoStack=i(this.undoStack,e),this.redoStack=i(this.redoStack,e)},r.prototype.performUndo=function(n){this.state=t;if(this.undoStack.length===0)throw new Error("undo not possible");n(this.undoStack.pop()),this.state=e},r.prototype.performRedo=function(t){this.state=n;if(this.redoStack.length===0)throw new Error("redo not possible");t(this.redoStack.pop()),this.state=e},r.prototype.canUndo=function(){return this.undoStack.length!==0},r.prototype.canRedo=function(){return this.redoStack.length!==0},r.prototype.isUndoing=function(){return this.state===t},r.prototype.isRedoing=function(){return this.state===n},r}();var e=e||{};e.Client=function(){function e(){this.state=n}function t(){}function r(e){this.outstanding=e}function i(e,t){this.outstanding=e,this.buffer=t}e.prototype.setState=function(e){this.state=e},e.prototype.applyClient=function(e){this.setState(this.state.applyClient(this,e))},e.prototype.applyServer=function(e){this.setState(this.state.applyServer(this,e))},e.prototype.serverAck=function(){this.setState(this.state.serverAck(this))},e.prototype.serverRetry=function(){this.setState(this.state.serverRetry(this))},e.prototype.sendOperation=function(e){throw new Error("sendOperation must be defined in child class")},e.prototype.applyOperation=function(e){throw new Error("applyOperation must be defined in child class")},e.Synchronized=t,t.prototype.applyClient=function(e,t){return e.sendOperation(t),new r(t)},t.prototype.applyServer=function(e,t){return e.applyOperation(t),this},t.prototype.serverAck=function(e){throw new Error("There is no pending operation.")},t.prototype.serverRetry=function(e){throw new Error("There is no pending operation.")};var n=new t;return e.AwaitingConfirm=r,r.prototype.applyClient=function(e,t){return new i(this.outstanding,t)},r.prototype.applyServer=function(e,t){var n=t.constructor.transform(this.outstanding,t);return e.applyOperation(n[1]),new r(n[0])},r.prototype.serverAck=function(e){return n},r.prototype.serverRetry=function(e){return e.sendOperation(this.outstanding),this},e.AwaitingWithBuffer=i,i.prototype.applyClient=function(e,t){var n=this.buffer.compose(t);return new i(this.outstanding,n)},i.prototype.applyServer=function(e,t){var n=t.constructor.transform,r=n(this.outstanding,t),s=n(this.buffer,r[1]);return e.applyOperation(s[1]),new i(r[0],s[0])},i.prototype.serverRetry=function(e){var t=this.outstanding.compose(this.buffer);return e.sendOperation(t),new r(t)},i.prototype.serverAck=function(e){return e.sendOperation(this.buffer),new r(this.buffer)},e}();var e=e||{};e.EditorClient=function(){function s(e,t){this.cursorBefore=e,this.cursorAfter=t}function o(e,t){this.id=e,this.editorAdapter=t,this.li=document.createElement("li")}function u(e,i){t.call(this),this.serverAdapter=e,this.editorAdapter=i,this.undoManager=new r,this.clients={};var s=this;this.editorAdapter.registerCallbacks({change:function(e,t){s.onChange(e,t)},cursorActivity:function(){s.onCursorActivity()},blur:function(){s.onBlur()},focus:function(){s.onFocus()}}),this.editorAdapter.registerUndo(function(){s.undo()}),this.editorAdapter.registerRedo(function(){s.redo()}),this.serverAdapter.registerCallbacks({ack:function(){s.serverAck(),s.focused&&s.state instanceof t.Synchronized&&(s.updateCursor(),s.sendCursor(s.cursor)),s.emitStatus()},retry:function(){s.serverRetry()},operation:function(e){s.applyServer(e)},cursor:function(e,r,i){if(!(s.serverAdapter.userId_!==e&&s.state instanceof t.Synchronized))return;var o=s.getClientObject(e);r?(i&&o.setColor(i),o.updateCursor(n.fromJSON(r))):o.removeCursor()}})}function a(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function f(e){return e[e.length-1]}var t=e.Client,n=e.Cursor,r=e.UndoManager,i=e.WrappedOperation;return s.prototype.invert=function(){return new s(this.cursorAfter,this.cursorBefore)},s.prototype.compose=function(e){return new s(this.cursorBefore,e.cursorAfter)},s.prototype.transform=function(e){return new s(this.cursorBefore?this.cursorBefore.transform(e):null,this.cursorAfter?this.cursorAfter.transform(e):null)},o.prototype.setColor=function(e){this.color=e},o.prototype.updateCursor=function(e){this.removeCursor(),this.cursor=e,this.mark=this.editorAdapter.setOtherCursor(e,this.color,this.id)},o.prototype.removeCursor=function(){this.mark&&this.mark.clear()},a(u,t),u.prototype.getClientObject=function(e){var t=this.clients[e];return t?t:this.clients[e]=new o(e,this.editorAdapter)},u.prototype.applyUnredo=function(e){this.undoManager.add(this.editorAdapter.invertOperation(e)),this.editorAdapter.applyOperation(e.wrapped),this.cursor=e.meta.cursorAfter,this.cursor&&this.editorAdapter.setCursor(this.cursor),this.applyClient(e.wrapped)},u.prototype.undo=function(){var e=this;if(!this.undoManager.canUndo())return;this.undoManager.performUndo(function(t){e.applyUnredo(t)})},u.prototype.redo=function(){var e=this;if(!this.undoManager.canRedo())return;this.undoManager.performRedo(function(t){e.applyUnredo(t)})},u.prototype.onChange=function(e,t){var n=this.cursor;this.updateCursor();var r=this.undoManager.undoStack.length>0&&t.shouldBeComposedWithInverted(f(this.undoManager.undoStack).wrapped),o=new s(this.cursor,n);this.undoManager.add(new i(t,o),r),this.applyClient(e)},u.prototype.updateCursor=function(){this.cursor=this.editorAdapter.getCursor()},u.prototype.onCursorActivity=function(){var e=this.cursor;this.updateCursor();if(!this.focused||e&&this.cursor.equals(e))return;this.sendCursor(this.cursor)},u.prototype.onBlur=function(){this.cursor=null,this.sendCursor(null),this.focused=!1},u.prototype.onFocus=function(){this.focused=!0,this.onCursorActivity()},u.prototype.sendCursor=function(e){if(this.state instanceof t.AwaitingWithBuffer)return;this.serverAdapter.sendCursor(e)},u.prototype.sendOperation=function(e){this.serverAdapter.sendOperation(e),this.emitStatus()},u.prototype.applyOperation=function(e){this.editorAdapter.applyOperation(e),this.updateCursor(),this.undoManager.transform(new i(e,null))},u.prototype.emitStatus=function(){var e=this;setTimeout(function(){e.trigger("synced",e.state instanceof t.Synchronized)},0)},u}(),e.utils.makeEventEmitter(e.EditorClient,["synced"]);var t,e,n=function(e,t){return function(){return e.apply(t,arguments)}},r=[].slice;if(typeof e=="undefined"||e===null)e={};e.ACEAdapter=t=function(){function t(e){this.onCursorActivity=n(this.onCursorActivity,this),this.onFocus=n(this.onFocus,this),this.onBlur=n(this.onBlur,this),this.onChange=n(this.onChange,this);var t;this.ace=e,this.aceSession=this.ace.getSession(),this.aceDoc=this.aceSession.getDocument(),this.aceDoc.setNewLineMode("unix"),this.grabDocumentState(),this.ace.on("change",this.onChange),this.ace.on("blur",this.onBlur),this.ace.on("focus",this.onFocus),this.aceSession.selection.on("changeCursor",this.onCursorActivity),this.aceRange==null&&(this.aceRange=(t=ace.require)!=null?t:require("ace/range").Range)}return t.prototype.ignoreChanges=!1,t.prototype.grabDocumentState=function(){return this.lastDocLines=this.aceDoc.getAllLines(),this.lastCursorRange=this.aceSession.selection.getRange()},t.prototype.detach=function(){return this.ace.removeListener("change",this.onChange),this.ace.removeListener("blur",this.onBlur),this.ace.removeListener("focus",this.onCursorActivity),this.aceSession.selection.removeListener("changeCursor",this.onCursorActivity)},t.prototype.onChange=function(e){var t;if(!this.ignoreChanges)return t=this.operationFromACEChange(e),this.trigger.apply(this,["change"].concat(r.call(t))),this.grabDocumentState()},t.prototype.onBlur=function(){if(this.ace.selection.isEmpty())return this.trigger("blur")},t.prototype.onFocus=function(){return this.trigger("focus")},t.prototype.onCursorActivity=function(){var e=this;return setTimeout(function(){return e.trigger("cursorActivity")},0)},t.prototype.operationFromACEChange=function(t){var n,r,i,s,o,u,a,f,l;return r=t.data,(f=r.action)==="insertLines"||f==="removeLines"?(a=r.lines.join("\n")+"\n",n=r.action.replace("Lines","")):(a=r.text.replace(this.aceDoc.getNewLineCharacter(),"\n"),n=r.action.replace("Text","")),u=this.indexFromPos(r.range.start),o=this.lastDocLines.join("\n").length-u,n==="remove"&&(o-=a.length),s=(new e.TextOperation).retain(u).insert(a).retain(o),i=(new e.TextOperation).retain(u)["delete"](a).retain(o),n==="remove"&&(l=[i,s],s=l[0],i=l[1]),[s,i]},t.prototype.applyOperationToACE=function(e){var t,n,r,i,s,o,u,a;n=0,a=e.ops;for(o=0,u=a.length;o<u;o++)r=a[o],r.isRetain()?n+=r.chars:r.isInsert()?(this.aceDoc.insert(this.posFromIndex(n),r.text),n+=r.text.length):r.isDelete()&&(t=this.posFromIndex(n),s=this.posFromIndex(n+r.chars),i=this.aceRange.fromPoints(t,s),this.aceDoc.remove(i));return this.grabDocumentState()},t.prototype.posFromIndex=function(e){var t,n,r,i,s;s=this.aceDoc.$lines;for(n=r=0,i=s.length;r<i;n=++r){t=s[n];if(e<=t.length)break;e-=t.length+1}return{row:n,column:e}},t.prototype.indexFromPos=function(e,t){var n,r,i,s;t==null&&(t=this.lastDocLines),r=0;for(n=i=0,s=e.row;0<=s?i<s:i>s;n=0<=s?++i:--i)r+=this.lastDocLines[n].length+1;return r+=e.column},t.prototype.getValue=function(){return this.aceDoc.getValue()},t.prototype.getCursor=function(){var t,n,r,i,s,o;try{i=this.indexFromPos(this.aceSession.selection.getRange().start,this.aceDoc.$lines),r=this.indexFromPos(this.aceSession.selection.getRange().end,this.aceDoc.$lines)}catch(u){t=u;try{i=this.indexFromPos(this.lastCursorRange.start),r=this.indexFromPos(this.lastCursorRange.end)}catch(u){n=u,console.log("Couldn't figure out the cursor range:",n,"-- setting it to 0:0."),s=[0,0],i=s[0],r=s[1]}}return i>r&&(o=[r,i],i=o[0],r=o[1]),new e.Cursor(i,r)},t.prototype.setCursor=function(e){var t,n,r;return n=this.posFromIndex(e.position),t=this.posFromIndex(e.selectionEnd),e.position>e.selectionEnd&&(r=[t,n],n=r[0],t=r[1]),this.aceSession.selection.setSelectionRange(new this.aceRange(n.row,n.column,t.row,t.column))},t.prototype.setOtherCursor=function(e,t,n){var r,i,s,o,u,a,f,l,c=this;return this.otherCursors==null&&(this.otherCursors={}),s=this.otherCursors[n],s&&(s.start.detach(),s.end.detach(),this.aceSession.removeMarker(s.id)),f=this.posFromIndex(e.position),o=this.posFromIndex(e.selectionEnd),e.selectionEnd<e.position&&(l=[o,f],f=l[0],o=l[1]),r="other-client-selection-"+t.replace("#",""),u=e.position===e.selectionEnd,u&&(r=r.replace("selection","cursor")),i="."+r+" {\n  position: absolute;\n  background-color: "+(u?"transparent":t)+";\n  border-left: 2px solid "+t+";\n}",this.addStyleRule(i),this.otherCursors[n]=s=new this.aceRange(f.row,f.column,o.row,o.column),a=this,s.clipRows=function(){var e;return e=a.aceRange.prototype.clipRows.apply(this,arguments),e.isEmpty=function(){return!1},e},s.start=this.aceDoc.createAnchor(s.start),s.end=this.aceDoc.createAnchor(s.end),s.id=this.aceSession.addMarker(s,r,"text"),{clear:function(){return s.start.detach(),s.end.detach(),c.aceSession.removeMarker(s.id)}}},t.prototype.addStyleRule=function(e){var t;if(typeof document=="undefined"||document===null)return;this.addedStyleRules||(this.addedStyleRules={},t=document.createElement("style"),document.documentElement.getElementsByTagName("head")[0].appendChild(t),this.addedStyleSheet=t.sheet);if(this.addedStyleRules[e])return;return this.addedStyleRules[e]=!0,this.addedStyleSheet.insertRule(e,0)},t.prototype.registerCallbacks=function(e){this.callbacks=e},t.prototype.trigger=function(){var e,t,n,i;return t=arguments[0],e=2<=arguments.length?r.call(arguments,1):[],(n=this.callbacks)!=null?(i=n[t])!=null?i.apply(this,e):void 0:void 0},t.prototype.applyOperation=function(e){return e.isNoop()||(this.ignoreChanges=!0),this.applyOperationToACE(e),this.ignoreChanges=!1},t.prototype.registerUndo=function(e){return this.ace.undo=e},t.prototype.registerRedo=function(e){return this.ace.redo=e},t.prototype.invertOperation=function(e){return e.invert(this.getValue())},t}();var e=e||{};e.AttributeConstants={BOLD:"b",ITALIC:"i",UNDERLINE:"u",STRIKE:"s",FONT:"f",FONT_SIZE:"fs",COLOR:"c",BACKGROUND_COLOR:"bc",ENTITY_SENTINEL:"ent",LINE_SENTINEL:"l",LINE_INDENT:"li",LINE_ALIGN:"la",LIST_TYPE:"lt"},e.sentinelConstants={LINE_SENTINEL_CHARACTER:"",ENTITY_SENTINEL_CHARACTER:""};var e=e||{};e.EntityManager=function(){function n(){this.entities_={};var e=["src","alt","width","height","style","class"];this.register("img",{render:function(e){t.assert(e.src,"image entity should have 'src'!");var n=["src","alt","width","height","style","class"],r="<img ";for(var i=0;i<n.length;i++){var s=n[i];s in e&&(r+=" "+s+'="'+e[s]+'"')}return r+=">",r},fromElement:function(t){var n={};for(var r=0;r<e.length;r++){var i=e[r];t.hasAttribute(i)&&(n[i]=t.getAttribute(i))}return n}})}var t=e.utils;return n.prototype.register=function(t,n){e.utils.assert(n.render,"Entity options should include a 'render' function!"),e.utils.assert(n.fromElement,"Entity options should include a 'fromElement' function!"),this.entities_[t]=n},n.prototype.renderToElement=function(e,t){return this.tryRenderToElement_(e,"render",t)},n.prototype.exportToElement=function(e){var t=this.tryRenderToElement_(e,"export")||this.tryRenderToElement_(e,"getHtml")||this.tryRenderToElement_(e,"render");return t.setAttribute("data-firepad-entity",e.type),t},n.prototype.updateElement=function(e,t){var n=e.type,r=e.info;this.entities_[n]&&typeof this.entities_[n].update!="undefined"&&this.entities_[n].update(r,t)},n.prototype.fromElement=function(t){var n=t.getAttribute("data-firepad-entity");n||(n=t.nodeName.toLowerCase());if(n&&this.entities_[n]){var r=this.entities_[n].fromElement(t);return new e.Entity(n,r)}},n.prototype.tryRenderToElement_=function(t,n,r){var i=t.type,s=t.info;if(this.entities_[i]&&this.entities_[i][n]){var o=e.document||window&&window.document,u=this.entities_[i][n](s,r,o);if(u){if(typeof u=="string"){var a=(e.document||document).createElement("div");return a.innerHTML=u,a.childNodes[0]}if(typeof u=="object")return e.utils.assert(typeof u.nodeType!="undefined","Error rendering "+i+" entity.  render() function"+" must return an html string or a DOM element."),u}}},n.prototype.entitySupportsUpdate=function(e){return this.entities_[e]&&this.entities_[e].update},n}();var e=e||{};e.Entity=function(){function i(e,t){if(!(this instanceof i))return new i(e,t);this.type=e,this.info=t||{}}var t=e.AttributeConstants,n=t.ENTITY_SENTINEL,r=n+"_";return i.prototype.toAttributes=function(){var e={};e[n]=this.type;for(var t in this.info)e[r+t]=this.info[t];return e},i.fromAttributes=function(e){var t=e[n],s={};for(var o in e)o.indexOf(r)===0&&(s[o.substr(r.length)]=e[o]);return new i(t,s)},i}();var e=e||{};e.RichTextCodeMirror=function(){function f(e,n,r){this.codeMirror=e,this.options_=r||{},this.entityManager_=n,this.currentAttributes_=null;var i=this;this.annotationList_=new t(function(e,t){i.onAnnotationsChanged_(e,t)}),this.initAnnotationList_(),b(this,"onCodeMirrorBeforeChange_"),b(this,"onCodeMirrorChange_"),b(this,"onCursorActivity_"),/^4\./.test(CodeMirror.version)?this.codeMirror.on("changes",this.onCodeMirrorChange_):this.codeMirror.on("change",this.onCodeMirrorChange_),this.codeMirror.on("beforeChange",this.onCodeMirrorBeforeChange_),this.codeMirror.on("cursorActivity",this.onCursorActivity_),this.changeId_=0,this.outstandingChanges_={},this.dirtyLines_=[]}function h(e,t){return e.line-t.line||e.ch-t.ch}function p(e,t){return h(e,t)===0}function d(e,t){return h(e,t)<=0}function v(e){return e[e.length-1]}function m(e){if(e.length===0)return 0;var t=0;for(var n=0;n<e.length;n++)t+=e[n].length;return t+e.length-1}function g(e){this.attributes=e||{}}function y(e){for(var t in e)return!1;return!0}function b(e,t){var n=e[t];e[t]=function(){n.apply(e,arguments)}}var t=e.AnnotationList,n=e.Span,r=e.utils,i=e.AttributeConstants,s="cmrt-",o="cmrt-",u={c:"color",bc:"background-color",fs:"font-size",li:function(e){return"padding-left: "+e*40+"px"}},a={};r.makeEventEmitter(f,["change","attributesChange","newLine"]);var l=e.sentinelConstants.LINE_SENTINEL_CHARACTER,c=e.sentinelConstants.ENTITY_SENTINEL_CHARACTER;return f.prototype.detach=function(){this.codeMirror.off("beforeChange",this.onCodeMirrorBeforeChange_),this.codeMirror.off("change",this.onCodeMirrorChange_),this.codeMirror.off("changes",this.onCodeMirrorChange_),this.codeMirror.off("cursorActivity",this.onCursorActivity_),this.clearAnnotations_()},f.prototype.toggleAttribute=function(e,t){var n=t||!0;if(this.emptySelection_()){var r=this.getCurrentAttributes_();r[e]===n?delete r[e]:r[e]=n,this.currentAttributes_=r}else{var i=this.getCurrentAttributes_(),s=i[e]!==n?n:!1;this.setAttribute(e,s)}},f.prototype.setAttribute=function(e,t){var n=this.codeMirror;if(this.emptySelection_()){var r=this.getCurrentAttributes_();t===!1?delete r[e]:r[e]=t,this.currentAttributes_=r}else this.updateTextAttributes(n.indexFromPos(n.getCursor("start")),n.indexFromPos(n.getCursor("end")),function(n){t===!1?delete n[e]:n[e]=t}),this.updateCurrentAttributes_()},f.prototype.updateTextAttributes=function(e,t,r,s,o){var u=[],a=e,f=this;this.annotationList_.updateSpan(new n(e,t-e),function(e,t){var n={};for(var l in e.attributes)n[l]=e.attributes[l];(!n[i.LINE_SENTINEL]||o)&&r(n);var c={},h={};return f.computeChangedAttributes_(e.attributes,n,c,h),y(c)||u.push({start:a,end:a+t,attributes:c,attributesInverse:h,origin:s}),a+=t,new g(n)}),u.length>0&&this.trigger("attributesChange",this,u)},f.prototype.computeChangedAttributes_=function(e,t,n,r){var i={},s;for(s in e)i[s]=!0;for(s in t)i[s]=!0;for(s in i)s in t?s in e?e[s]!==t[s]&&(n[s]=t[s],r[s]=e[s]):(n[s]=t[s],r[s]=!1):(n[s]=!1,r[s]=e[s])},f.prototype.toggleLineAttribute=function(e,t){var n=this.getCurrentLineAttributes_(),r;e in n&&n[e]===t?r=!1:r=t,this.setLineAttribute(e,r)},f.prototype.setLineAttribute=function(e,t){this.updateLineAttributesForSelection(function(n){t===!1?delete n[e]:n[e]=t})},f.prototype.updateLineAttributesForSelection=function(e){var t=this.codeMirror,n=t.getCursor("start"),r=t.getCursor("end"),i=n.line,s=r.line,o=t.getLine(s),u=this.areLineSentinelCharacters_(o.substr(0,r.ch));s>i&&u&&s--,this.updateLineAttributes(i,s,e)},f.prototype.updateLineAttributes=function(e,t,n){for(var r=e;r<=t;r++){var s=this.codeMirror.getLine(r),o=this.codeMirror.indexFromPos({line:r,ch:0});if(s[0]!==l){var u={};u[i.LINE_SENTINEL]=!0,n(u),this.insertText(o,l,u)}else this.updateTextAttributes(o,o+1,n,null,!0)}},f.prototype.replaceText=function(e,t,n,r,i){this.changeId_++;var s=o+this.changeId_;this.outstandingChanges_[s]={origOrigin:i,attributes:r};var u=this.codeMirror,a=u.posFromIndex(e),f=typeof t=="number"?u.posFromIndex(t):null;u.replaceRange(n,a,f,s)},f.prototype.insertText=function(e,t,n,r){var i=this.codeMirror,s=i.getCursor(),o=r=="RTCMADAPTER"&&!i.somethingSelected()&&e==i.indexFromPos(s);this.replaceText(e,null,t,n,r),o&&i.setCursor(s)},f.prototype.removeText=function(e,t,n){var r=this.codeMirror;r.replaceRange("",r.posFromIndex(e),r.posFromIndex(t),n)},f.prototype.insertEntityAtCursor=function(e,t,n){var r=this.codeMirror,i=r.indexFromPos(r.getCursor("head"));this.insertEntityAt(i,e,t,n)},f.prototype.insertEntityAt=function(t,n,r,i){var s=this.codeMirror;this.insertEntity_(t,new e.Entity(n,r),i)},f.prototype.insertEntity_=function(e,t,n){this.replaceText(e,null,c,t.toAttributes(),n)},f.prototype.getAttributeSpans=function(e,t){var r=[],i=this.annotationList_.getAnnotatedSpansForSpan(new n(e,t-e));for(var s=0;s<i.length;s++)r.push({length:i[s].length,attributes:i[s].annotation.attributes});return r},f.prototype.end=function(){var e=this.codeMirror.lineCount()-1;return this.codeMirror.indexFromPos({line:e,ch:this.codeMirror.getLine(e).length})},f.prototype.getRange=function(e,t){var n=this.codeMirror.posFromIndex(e),r=this.codeMirror.posFromIndex(t);return this.codeMirror.getRange(n,r)},f.prototype.initAnnotationList_=function(){var e=this.end();e!==0&&this.annotationList_.insertAnnotatedSpan(new n(0,e),new g)},f.prototype.onAnnotationsChanged_=function(e,t){var n,r={};this.tryToUpdateEntitiesInPlace(e,t);for(var s=0;s<e.length;s++){var o=e[s].annotation.attributes;i.LINE_SENTINEL in o&&(r[this.codeMirror.posFromIndex(e[s].pos).line]=!0),n=e[s].getAttachedObject(),n&&n.clear()}for(s=0;s<t.length;s++){var u=t[s].annotation,a=i.LINE_SENTINEL in u.attributes,f=i.ENTITY_SENTINEL in u.attributes,l=this.codeMirror.posFromIndex(t[s].pos);if(a)r[l.line]=!0;else if(f)this.markEntity_(t[s]);else{var c=this.getClassNameForAttributes_(u.attributes);if(c!==""){var h=this.codeMirror.posFromIndex(t[s].pos+t[s].length);n=this.codeMirror.markText(l,h,{className:c}),t[s].attachObject(n)}}}for(var p in r)this.dirtyLines_.push(this.codeMirror.getLineHandle(Number(p))),this.queueLineMarking_()},f.prototype.tryToUpdateEntitiesInPlace=function(e,t){var n=e.length;while(n--){var r=e[n],i=t.length;while(i--){var s=t[i];if(r.pos==s.pos&&r.length==s.length&&r.annotation.attributes.ent&&r.annotation.attributes["ent"]==s.annotation.attributes["ent"]){var o=s.annotation.attributes.ent;if(this.entityManager_.entitySupportsUpdate(o)){e.splice(n,1),t.splice(i,1);var u=r.getAttachedObject();u.update(s.annotation.attributes),s.attachObject(u)}}}}},f.prototype.queueLineMarking_=function(){if(this.lineMarkTimeout_!=null)return;var e=this;this.lineMarkTimeout_=setTimeout(function(){e.lineMarkTimeout_=null;var t=[];for(var n=0;n<e.dirtyLines_.length;n++){var r=e.codeMirror.getLineNumber(e.dirtyLines_[n]);t.push(Number(r))}e.dirtyLines_=[],t.sort(function(e,t){return e-t});var i=-1;for(n=0;n<t.length;n++){var s=t[n];s>i&&(i=e.markLineSentinelCharactersForChangedLines_(s,s))}},0)},f.prototype.addStyleWithCSS_=function(e){var t=document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n)},f.prototype.getClassNameForAttributes_=function(t){var n="";for(var r in t){var o=t[r];if(r===i.LINE_SENTINEL)e.utils.assert(o===!0,"LINE_SENTINEL attribute should be true if it exists.");else{var f=(this.options_.cssPrefix||s)+r;if(o!==!0){r===i.FONT_SIZE&&typeof o!="string"&&(o+="px");var l=o.toString().toLowerCase().replace(/[^a-z0-9-_]/g,"-");f+="-"+l;if(u[r]){a[r]||(a[r]={});if(!a[r][l]){a[r][l]=!0;var c=u[r],h=typeof c=="function"?c(o):c+": "+o,p=r==i.LINE_INDENT?"pre."+f:"."+f;this.addStyleWithCSS_(p+" { "+h+" }")}}}n=n+" "+f}}return n},f.prototype.markEntity_=function(t){var n=t.annotation.attributes,r=e.Entity.fromAttributes(n),i=this.codeMirror,s=this,o=[];for(var u=0;u<t.length;u++){var a=i.posFromIndex(t.pos+u),f=i.posFromIndex(t.pos+u+1),l={collapsed:!0,atomic:!0,inclusiveLeft:!1,inclusiveRight:!1},c=this.createEntityHandle_(r,t.pos),h=this.entityManager_.renderToElement(r,c);h&&(l.replacedWith=h);var p=i.markText(a,f,l);o.push(p),c.setMarker(p)}t.attachObject({clear:function(){for(var e=0;e<o.length;e++)o[e].clear()},update:function(t){var n=e.Entity.fromAttributes(t);for(var r=0;r<o.length;r++)s.entityManager_.updateElement(n,o[r].replacedWith)}}),this.queueRefresh_()},f.prototype.queueRefresh_=function(){var e=this;this.refreshTimer_||(this.refreshTimer_=setTimeout(function(){e.codeMirror.refresh(),e.refreshTimer_=null},0))},f.prototype.createEntityHandle_=function(t,n){function s(){if(r){var e=r.find();return e?i.codeMirror.indexFromPos(e.from):null}return n}function o(){var e=s();e!=null&&(i.codeMirror.focus(),i.removeText(e,e+1))}function u(n){var r=e.AttributeConstants,o=r.ENTITY_SENTINEL,u=o+"_",a=s();i.updateTextAttributes(a,a+1,function(e){for(var r in e)delete e[r];e[o]=t.type;for(var i in n)e[u+i]=n[i]})}function a(e){r=e}var r=null,i=this;return{find:s,remove:o,replace:u,setMarker:a}},f.prototype.lineClassRemover_=function(e){var t=this.codeMirror,n=t.getLineHandle(e);return{clear:function(){t.removeLineClass(n,"text",".*")}}},f.prototype.emptySelection_=function(){var e=this.codeMirror.getCursor("start"),t=this.codeMirror.getCursor("end");return e.line===t.line&&e.ch===t.ch},f.prototype.onCodeMirrorBeforeChange_=function(e,t){if(t.origin==="+input"||t.origin==="paste"){var n=[];for(var r=0;r<t.text.length;r++){var i=t.text[r];i=i.replace(new RegExp("["+l+c+"]","g"),""),n.push(i)}t.update(t.from,t.to,n)}},f.prototype.onCodeMirrorChange_=function(e,t){if(typeof t.from=="object"){var r=[];while(t)r.push(t),t=t.next;t=r}var i=this.convertCoordinateSystemForChanges_(t),s=[];for(var o=0;o<i.length;o++){var u=i[o],a=u.start,f=u.end,l=u.text,c=u.removed,h=u.origin;if(c.length>0){var p=this.annotationList_.getAnnotatedSpansForSpan(new n(a,c.length)),d=0;for(var v=0;v<p.length;v++){var m=p[v];s.push({start:a,end:a+m.length,removedAttributes:m.annotation.attributes,removed:c.substr(d,m.length),attributes:{},text:"",origin:u.origin}),d+=m.length}this.annotationList_.removeSpan(new n(a,c.length))}if(l.length>0){var y;u.origin==="+input"||u.origin==="paste"?y=this.currentAttributes_||{}:h in this.outstandingChanges_?(y=this.outstandingChanges_[h].attributes,h=this.outstandingChanges_[h].origOrigin,delete this.outstandingChanges_[h]):y={},this.annotationList_.insertAnnotatedSpan(new n(a,l.length),new g(y)),s.push({start:a,end:a,removedAttributes:{},removed:"",text:l,attributes:y,origin:h})}}this.markLineSentinelCharactersForChanges_(t),s.length>0&&this.trigger("change",this,s)},f.prototype.convertCoordinateSystemForChanges_=function(e){function r(e,t){return function(n){return d(n,t.from)?e(n):d(t.to,n)?e({line:n.line+t.text.length-1-(t.to.line-t.from.line),ch:t.to.line<n.line?n.ch:t.text.length<=1?n.ch-(t.to.ch-t.from.ch)+m(t.text):n.ch-t.to.ch+v(t.text).length})+m(t.removed)-m(t.text):t.from.line===n.line?e(t.from)+n.ch-t.from.ch:e(t.from)+m(t.removed.slice(0,n.line-t.from.line))+1+n.ch}}var t=this,n=function(e){return t.codeMirror.indexFromPos(e)},i=[];for(var s=e.length-1;s>=0;s--){var o=e[s];n=r(n,o);var u=n(o.from),a=o.removed.join("\n"),f=o.text.join("\n");i.unshift({start:u,end:u+a.length,removed:a,text:f,origin:o.origin})}return i},f.prototype.markLineSentinelCharactersForChanges_=function(e){var t=Number.MAX_VALUE,n=-1;for(var r=0;r<e.length;r++){var i=e[r],s=i.from.line,o=i.from.ch;if(i.removed.length>1||i.removed[0].indexOf(l)>=0)t=Math.min(t,s),n=Math.max(n,s);i.text.length>1?(t=Math.min(t,s),n=Math.max(n,s+i.text.length-1)):i.text[0].indexOf(l)>=0&&(t=Math.min(t,s),n=Math.max(n,s))}n=Math.min(n,this.codeMirror.lineCount()-1),this.markLineSentinelCharactersForChangedLines_(t,n)},f.prototype.markLineSentinelCharactersForChangedLines_=function(e,t){if(e<Number.MAX_VALUE)while(e>0&&this.lineIsListItemOrIndented_(e-1))e--;if(t>-1){var n=this.codeMirror.lineCount();while(t+1<n&&this.lineIsListItemOrIndented_(t+1))t++}var r=[],i=this.codeMirror;for(var s=e;s<=t;s++){var o=i.getLine(s),u=i.getLineHandle(s);i.removeLineClass(u,"text",".*");if(o.length>0){var a=o.indexOf(l);while(a>=0){var f=a;while(a<o.length&&o[a]===l){var c=i.findMarksAt({line:s,ch:a});for(var h=0;h<c.length;h++)c[h].isForLineSentinel&&c[h].clear();a++}this.markLineSentinelCharacters_(s,f,a,r),a=o.indexOf(l,a)}}else r=[]}return t},f.prototype.markLineSentinelCharacters_=function(e,t,n,r){var s=this.codeMirror,o=null,u=null,a=function(){var e=u.find();return e?e.from.line:null};if(t===0){var f=this.getLineAttributes_(e),l=f[i.LIST_TYPE],c=f[i.LINE_INDENT]||0;l&&c===0&&(c=1);while(c>=r.length)r.push(1);l==="o"?(o=this.makeOrderedListElement_(r[c]),r[c]++):l==="u"?(o=this.makeUnorderedListElement_(),r[c]=1):l==="t"?(o=this.makeTodoListElement_(!1,a),r[c]=1):l==="tc"&&(o=this.makeTodoListElement_(!0,a),r[c]=1);var h=this.getClassNameForAttributes_(f);h!==""&&this.codeMirror.addLineClass(e,"text",h),r=r.slice(0,c+1)}var p={inclusiveLeft:!0,collapsed:!0};o&&(p.replacedWith=o);var u=s.markText({line:e,ch:t},{line:e,ch:n},p);u.isForLineSentinel=!0},f.prototype.makeOrderedListElement_=function(e){return r.elt("div",e+".",{"class":"firepad-list-left"})},f.prototype.makeUnorderedListElement_=function(){return r.elt("div","•",{"class":"firepad-list-left"})},f.prototype.toggleTodo=function(e){var t=i.LIST_TYPE,n=this.getCurrentLineAttributes_(),r;t in n&&(n[t]==="t"||n[t]==="tc")?n[t]==="t"?r="tc":n[t]==="tc"&&(r=e?"t":!1):r="t",this.setLineAttribute(t,r)},f.prototype.makeTodoListElement_=function(e,t){var n={type:"checkbox","class":"firepad-todo-left"};e&&(n.checked=!0);var i=r.elt("input",!1,n),s=this;return r.on(i,"click",r.stopEventAnd(function(e){s.codeMirror.setCursor({line:t(),ch:1}),s.toggleTodo(!0)})),i},f.prototype.lineIsListItemOrIndented_=function(e){var t=this.getLineAttributes_(e);return(t[i.LIST_TYPE]||!1)!==!1||(t[i.LINE_INDENT]||0)!==0},f.prototype.onCursorActivity_=function(){var e=this;clearTimeout(e.cursorTimeout),e.cursorTimeout=setTimeout(function(){e.updateCurrentAttributes_()},1)},f.prototype.getCurrentAttributes_=function(){return this.currentAttributes_||this.updateCurrentAttributes_(),this.currentAttributes_},f.prototype.updateCurrentAttributes_=function(){var t=this.codeMirror,n=t.indexFromPos(t.getCursor("anchor")),r=t.indexFromPos(t.getCursor("head")),s=r;if(n>r){while(s<this.end()){var o=this.getRange(s,s+1);if(o!=="\n"&&o!==l)break;s++}s<this.end()&&s++}else while(s>0){o=this.getRange(s-1,s);if(o!=="\n"&&o!==l)break;s--}var u=this.annotationList_.getAnnotatedSpansForPos(s);this.currentAttributes_={};var a={};u.length>0&&!(i.LINE_SENTINEL in u[0].annotation.attributes)?a=u[0].annotation.attributes:u.length>1&&(e.utils.assert(!(i.LINE_SENTINEL in u[1].annotation.attributes),"Cursor can't be between two line sentinel characters."),a=u[1].annotation.attributes);for(var f in a)f!=="l"&&f!=="lt"&&f!=="li"&&f.indexOf(i.ENTITY_SENTINEL)!==0&&(this.currentAttributes_[f]=a[f])},f.prototype.getCurrentLineAttributes_=function(){var e=this.codeMirror,t=e.getCursor("anchor"),n=e.getCursor("head"),r=n.line;return n.ch===0&&t.line<n.line&&r--,this.getLineAttributes_(r)},f.prototype.getLineAttributes_=function(t){var r={},i=this.codeMirror.getLine(t);if(i.length>0&&i[0]===l){var s=this.codeMirror.indexFromPos({line:t,ch:0}),o=this.annotationList_.getAnnotatedSpansForSpan(new n(s,1));e.utils.assert(o.length===1);for(var u in o[0].annotation.attributes)r[u]=o[0].annotation.attributes[u]}return r},f.prototype.clearAnnotations_=function(){this.annotationList_.updateSpan(new n(0,this.end()),function(e,t){return new g({})})},f.prototype.newline=function(){var e=this.codeMirror,t=this;if(!this.emptySelection_())e.replaceSelection("\n","end","+input");else{var n=e.getCursor("head").line,r=this.getLineAttributes_(n),s=r[i.LIST_TYPE];s&&e.getLine(n).length===1?this.updateLineAttributes(n,n,function(e){delete e[i.LIST_TYPE],delete e[i.LINE_INDENT]}):(e.replaceSelection("\n","end","+input"),this.updateLineAttributes(n+1,n+1,function(e){for(var o in r)e[o]=r[o];s==="tc"&&(e[i.LIST_TYPE]="t"),t.trigger("newLine",{line:n+1,attr:e})}))}},f.prototype.deleteLeft=function(){var e=this.codeMirror,t=e.getCursor("head"),n=this.getLineAttributes_(t.line),r=n[i.LIST_TYPE],s=n[i.LINE_INDENT],o=this.emptySelection_()&&t.ch===1;o&&r?this.updateLineAttributes(t.line,t.line,function(e){delete e[i.LIST_TYPE],delete e[i.LINE_INDENT]}):o&&s&&s>0?this.unindent():e.deleteH(-1,"char")},f.prototype.deleteRight=function(){var e=this.codeMirror,t=e.getCursor("head"),n=e.getLine(t.line),r=this.areLineSentinelCharacters_(n),i=t.line+1<e.lineCount()?e.getLine(t.line+1):"";this.emptySelection_()&&r&&i[0]===l?e.replaceRange("",{line:t.line,ch:0},{line:t.line+1,ch:0},"+input"):e.deleteH(1,"char")},f.prototype.indent=function(){this.updateLineAttributesForSelection(function(e){var t=e[i.LINE_INDENT],n=e[i.LIST_TYPE];t?e[i.LINE_INDENT]++:n?e[i.LINE_INDENT]=2:e[i.LINE_INDENT]=1})},f.prototype.unindent=function(){this.updateLineAttributesForSelection(function(e){var t=e[i.LINE_INDENT];t&&t>1?e[i.LINE_INDENT]=t-1:(delete e[i.LIST_TYPE],delete e[i.LINE_INDENT])})},f.prototype.getText=function(){return this.codeMirror.getValue().replace(new RegExp(l,"g"),"")},f.prototype.areLineSentinelCharacters_=function(e){for(var t=0;t<e.length;t++)if(e[t]!==l)return!1;return!0},g.prototype.equals=function(e){if(e instanceof g){var t;for(t in this.attributes)if(e.attributes[t]!==this.attributes[t])return!1;for(t in e.attributes)if(e.attributes[t]!==this.attributes[t])return!1;return!0}return!1},f}();var e=e||{};e.RichTextCodeMirrorAdapter=function(){function i(e){this.rtcm=e,this.cm=e.codeMirror,l(this,"onChange"),l(this,"onAttributesChange"),l(this,"onCursorActivity"),l(this,"onFocus"),l(this,"onBlur"),this.rtcm.on("change",this.onChange),this.rtcm.on("attributesChange",this.onAttributesChange),this.cm.on("cursorActivity",this.onCursorActivity),this.cm.on("focus",this.onFocus),this.cm.on("blur",this.onBlur)}function s(e,t){return e.line<t.line?-1:e.line>t.line?1:e.ch<t.ch?-1:e.ch>t.ch?1:0}function o(e,t){return s(e,t)===0}function u(e,t){return s(e,t)<=0}function a(e){var t=e.lineCount()-1;return e.indexFromPos({line:t,ch:e.getLine(t).length})}function f(e,t){if(!e)throw new Error(t||"assertion error")}function l(e,t){var n=e[t];e[t]=function(){n.apply(e,arguments)}}function c(e){for(var t in e)return!1;return!0}var t=e.TextOperation,n=e.WrappedOperation,r=e.Cursor;return i.prototype.detach=function(){this.rtcm.off("change",this.onChange),this.rtcm.off("attributesChange",this.onAttributesChange),this.cm.off("cursorActivity",this.onCursorActivity),this.cm.off("focus",this.onFocus),this.cm.off("blur",this.onBlur)},i.operationFromCodeMirrorChanges=function(e,n){var r=a(n),i=(new t).retain(r),s=(new t).retain(r);for(var o=e.length-1;o>=0;o--){var u=e[o],f=u.start,l=r-f-u.text.length;i=(new t).retain(f)["delete"](u.removed.length).insert(u.text,u.attributes).retain(l).compose(i),s=s.compose((new t).retain(f)["delete"](u.text.length).insert(u.removed,u.removedAttributes).retain(l)),r+=u.removed.length-u.text.length}return[i,s]},i.operationFromAttributesChanges=function(e,n){var r=a(n),i=new t,s=new t,o=0;for(var u=0;u<e.length;u++){var l=e[u],c=l.start-o;f(c>=0),i.retain(c),s.retain(c);var h=l.end-l.start;i.retain(h,l.attributes),s.retain(h,l.attributesInverse),o=l.start+h}return i.retain(r-o),s.retain(r-o),[i,s]},i.applyOperationToCodeMirror=function(e,t){e.ops.length>10&&t.codeMirror.getWrapperElement().setAttribute("style","display: none");var n=e.ops,r=0;for(var i=0,s=n.length;i<s;i++){var o=n[i];o.isRetain()?(c(o.attributes)||t.updateTextAttributes(r,r+o.chars,function(e){for(var t in o.attributes)o.attributes[t]===!1?delete e[t]:e[t]=o.attributes[t]},"RTCMADAPTER",!0),r+=o.chars):o.isInsert()?(t.insertText(r,o.text,o.attributes,"RTCMADAPTER"),r+=o.text.length):o.isDelete()&&t.removeText(r,r+o.chars,"RTCMADAPTER")}e.ops.length>10&&(t.codeMirror.getWrapperElement().setAttribute("style",""),t.codeMirror.refresh())},i.prototype.registerCallbacks=function(e){this.callbacks=e},i.prototype.onChange=function(e,t){if(t[0].origin!=="RTCMADAPTER"){var n=i.operationFromCodeMirrorChanges(t,this.cm);this.trigger("change",n[0],n[1])}},i.prototype.onAttributesChange=function(e,t){if(t[0].origin!=="RTCMADAPTER"){var n=i.operationFromAttributesChanges(t,this.cm);this.trigger("change",n[0],n[1])}},i.prototype.onCursorActivity=function(){this.trigger("cursorActivity")},i.prototype.onFocus=function(){this.trigger("focus")},i.prototype.onBlur=function(){this.cm.somethingSelected()||this.trigger("blur")},i.prototype.getValue=function(){return this.cm.getValue()},i.prototype.getCursor=function(){var e=this.cm,t=e.getCursor(),n=e.indexFromPos(t),i;if(e.somethingSelected()){var s=e.getCursor(!0),u=o(t,s)?e.getCursor(!1):s;i=e.indexFromPos(u)}else i=n;return new r(n,i)},i.prototype.setCursor=function(e){this.cm.setSelection(this.cm.posFromIndex(e.position),this.cm.posFromIndex(e.selectionEnd))},i.prototype.addStyleRule=function(e){if(typeof document=="undefined"||document===null)return;if(!this.addedStyleRules){this.addedStyleRules={};var t=document.createElement("style");document.documentElement.getElementsByTagName("head")[0].appendChild(t),this.addedStyleSheet=t.sheet}if(this.addedStyleRules[e])return;return this.addedStyleRules[e]=!0,this.addedStyleSheet.insertRule(e,0)},i.prototype.setOtherCursor=function(e,t,n){var r=this.cm.posFromIndex(e.position);if(typeof t!="string"||!t.match(/^#[a-fA-F0-9]{3,6}$/))return;var i=this.rtcm.end();if(typeof e!="object"||typeof e.position!="number"||typeof e.selectionEnd!="number")return;if(e.position<0||e.position>i||e.selectionEnd<0||e.selectionEnd>i)return;if(e.position===e.selectionEnd){var s=this.cm.cursorCoords(r),o=document.createElement("span");return o.className="other-client",o.style.borderLeftWidth="2px",o.style.borderLeftStyle="solid",o.style.borderLeftColor=t,o.style.marginLeft=o.style.marginRight="-1px",o.style.height=(s.bottom-s.top)*.9+"px",o.setAttribute("data-clientid",n),o.style.zIndex=0,this.cm.setBookmark(r,{widget:o,insertLeft:!0})}var u="selection-"+t.replace("#",""),a="."+u+" { background: "+t+"; }";this.addStyleRule(a);var f,l;return e.selectionEnd>e.position?(f=r,l=this.cm.posFromIndex(e.selectionEnd)):(f=this.cm.posFromIndex(e.selectionEnd),l=r),this.cm.markText(f,l,{className:u})},i.prototype.trigger=function(e){var t=Array.prototype.slice.call(arguments,1),n=this.callbacks&&this.callbacks[e];n&&n.apply(this,t)},i.prototype.applyOperation=function(e){i.applyOperationToCodeMirror(e,this.rtcm)},i.prototype.registerUndo=function(e){this.cm.undo=e},i.prototype.registerRedo=function(e){this.cm.redo=e},i.prototype.invertOperation=function(e){var r=0,i=this.rtcm.codeMirror,s,o,u=new t;for(var a=0;a<e.wrapped.ops.length;a++){var f=e.wrapped.ops[a];if(f.isRetain())if(c(f.attributes))u.retain(f.chars),r+=f.chars;else{s=this.rtcm.getAttributeSpans(r,r+f.chars);for(o=0;o<s.length;o++){var l={};for(var h in f.attributes){var p=f.attributes[h],d=s[o].attributes[h];p===!1?d&&(l[h]=d):p!==d&&(l[h]=d||!1)}u.retain(s[o].length,l),r+=s[o].length}}else if(f.isInsert())u["delete"](f.text.length);else if(f.isDelete()){var v=i.getRange(i.posFromIndex(r),i.posFromIndex(r+f.chars));s=this.rtcm.getAttributeSpans(r,r+f.chars);var m=0;for(o=0;o<s.length;o++)u.insert(v.substr(m,s[o].length),s[o].attributes),m+=s[o].length;r+=f.chars}}return new n(u,e.meta.invert())},i}();var e=e||{};e.Formatting=function(){function n(e){if(!(this instanceof n))return new n(e);this.attributes=e||{}}var t=e.AttributeConstants;return n.prototype.cloneWithNewAttribute_=function(e,t){var r={};for(var i in this.attributes)r[i]=this.attributes[i];return t===!1?delete r[e]:r[e]=t,new n(r)},n.prototype.bold=function(e){return this.cloneWithNewAttribute_(t.BOLD,e)},n.prototype.italic=function(e){return this.cloneWithNewAttribute_(t.ITALIC,e)},n.prototype.underline=function(e){return this.cloneWithNewAttribute_(t.UNDERLINE,e)},n.prototype.strike=function(e){return this.cloneWithNewAttribute_(t.STRIKE,e)},n.prototype.font=function(e){return this.cloneWithNewAttribute_(t.FONT,e)},n.prototype.fontSize=function(e){return this.cloneWithNewAttribute_(t.FONT_SIZE,e)},n.prototype.color=function(e){return this.cloneWithNewAttribute_(t.COLOR,e)},n.prototype.backgroundColor=function(e){return this.cloneWithNewAttribute_(t.BACKGROUND_COLOR,e)},n}();var e=e||{};e.Text=function(){function t(n,r){if(!(this instanceof t))return new t(n,r);this.text=n,this.formatting=r||e.Formatting()}return t}();var e=e||{};e.LineFormatting=function(){function n(e){if(!(this instanceof n))return new n(e);this.attributes=e||{},this.attributes[t.LINE_SENTINEL]=!0}var t=e.AttributeConstants;return n.LIST_TYPE={NONE:!1,ORDERED:"o",UNORDERED:"u",TODO:"t",TODOCHECKED:"tc"},n.prototype.cloneWithNewAttribute_=function(e,t){var r={};for(var i in this.attributes)r[i]=this.attributes[i];return t===!1?delete r[e]:r[e]=t,new n(r)},n.prototype.indent=function(e){return this.cloneWithNewAttribute_(t.LINE_INDENT,e)},n.prototype.align=function(e){return this.cloneWithNewAttribute_(t.LINE_ALIGN,e)},n.prototype.listItem=function(n){return e.utils.assert(n===!1||n==="u"||n==="o"||n==="t"||n==="tc"),this.cloneWithNewAttribute_(t.LIST_TYPE,n)},n.prototype.getIndent=function(){return this.attributes[t.LINE_INDENT]||0},n.prototype.getAlign=function(){return this.attributes[t.LINE_ALIGN]||0},n.prototype.getListItem=function(){return this.attributes[t.LIST_TYPE]||!1},n}();var e=e||{};e.Line=function(){function t(n,r){if(!(this instanceof t))return new t(n,r);Object.prototype.toString.call(n)!=="[object Array]"&&(typeof n=="undefined"?n=[]:n=[n]),this.textPieces=n,this.formatting=r||e.LineFormatting()}return t}();var e=e||{};e.ParseHtml=function(){function n(n,r,i){this.listType=n||t.UNORDERED,this.lineFormatting=r||e.LineFormatting(),this.textFormatting=i||e.Formatting()}function r(){this.lines=[],this.currentLine=[],this.currentLineListItemType=null}function s(t,s){var o=(e.document||document).createElement("div");o.innerHTML=t,i=s;var a=new r,f=new n;return u(o,f,a),a.lines}function u(n,r,s){if(n.nodeType===o.ELEMENT_NODE){var u=i.fromElement(n);if(u){s.currentLine.push(new e.Text(e.sentinelConstants.ENTITY_SENTINEL_CHARACTER,new e.Formatting(u.toAttributes())));return}}switch(n.nodeType){case o.TEXT_NODE:var c=n.nodeValue.replace(/[ \n\t]+/g," ");s.currentLine.push(e.Text(c,r.textFormatting));break;case o.ELEMENT_NODE:var h=n.getAttribute("style")||"";r=l(r,h);switch(n.nodeName.toLowerCase()){case"div":case"h1":case"h2":case"h3":case"p":s.newlineIfNonEmpty(r),a(n,r,s),s.newlineIfNonEmpty(r);break;case"center":r=r.withAlign("center"),s.newlineIfNonEmpty(r),a(n,r.withAlign("center"),s),s.newlineIfNonEmpty(r);break;case"b":case"strong":a(n,r.withTextFormatting(r.textFormatting.bold(!0)),s);break;case"u":a(n,r.withTextFormatting(r.textFormatting.underline(!0)),s);break;case"i":case"em":a(n,r.withTextFormatting(r.textFormatting.italic(!0)),s);break;case"s":a(n,r.withTextFormatting(r.textFormatting.strike(!0)),s);break;case"font":var p=n.getAttribute("face"),d=n.getAttribute("color"),v=parseInt(n.getAttribute("size"));p&&(r=r.withTextFormatting(r.textFormatting.font(p))),d&&(r=r.withTextFormatting(r.textFormatting.color(d))),v&&(r=r.withTextFormatting(r.textFormatting.fontSize(v))),a(n,r,s);break;case"br":s.newline(r);break;case"ul":s.newlineIfNonEmptyOrListItem(r);var m=n.getAttribute("class")==="firepad-todo"?t.TODO:t.UNORDERED;a(n,r.withListType(m).withIncreasedIndent(),s),s.newlineIfNonEmpty(r);break;case"ol":s.newlineIfNonEmptyOrListItem(r),a(n,r.withListType(t.ORDERED).withIncreasedIndent(),s),s.newlineIfNonEmpty(r);break;case"li":f(n,r,s);break;case"style":break;default:a(n,r,s)}break;default:}}function a(e,t,n){if(e.hasChildNodes())for(var r=0;r<e.childNodes.length;r++)u(e.childNodes[r],t,n)}function f(e,n,r){r.newlineIfNonEmptyOrListItem(n);var i=e.getAttribute("class")==="firepad-checked"?t.TODOCHECKED:n.listType;r.makeListItem(i);var s=r.currentLine;a(e,n,r),(s===r.currentLine||r.currentLine.length>0)&&r.newline(n)}function l(t,n){var r=t.textFormatting,i=t.lineFormatting,s=n.split(";");for(var o=0;o<s.length;o++){var u=s[o].split(":");if(u.length!==2)continue;var a=e.utils.trim(u[0]).toLowerCase(),f=e.utils.trim(u[1]).toLowerCase();switch(a){case"text-decoration":var l=f.indexOf("underline")>=0,c=f.indexOf("line-through")>=0;r=r.underline(l).strike(c);break;case"font-weight":var h=f==="bold"||parseInt(f)>=600;r=r.bold(h);break;case"font-style":var p=f==="italic"||f==="oblique";r=r.italic(p);break;case"color":r=r.color(f);break;case"background-color":r=r.backgroundColor(f);break;case"text-align":i=i.align(f);break;case"font-size":var d=null,v=["px","pt","%","em","xx-small","x-small","small","medium","large","x-large","xx-large","smaller","larger"];e.utils.stringEndsWith(f,v)?d=f:parseInt(f)&&(d=parseInt(f)+"px"),d&&(r=r.fontSize(d));break;case"font-family":var m=e.utils.trim(f.split(",")[0]);m=m.replace(/['"]/g,""),m=m.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}),r=r.font(m)}}return t.withLineFormatting(i).withTextFormatting(r)}var t=e.LineFormatting.LIST_TYPE;n.prototype.withTextFormatting=function(e){return new n(this.listType,this.lineFormatting,e)},n.prototype.withLineFormatting=function(e){return new n(this.listType,e,this.textFormatting)},n.prototype.withListType=function(e){return new n(e,this.lineFormatting,this.textFormatting)},n.prototype.withIncreasedIndent=function(){var e=this.lineFormatting.indent(this.lineFormatting.getIndent()+1);return new n(this.listType,e,this.textFormatting)},n.prototype.withAlign=function(e){var t=this.lineFormatting.align(e);return new n(this.listType,t,this.textFormatting)},r.prototype.newlineIfNonEmpty=function(e){this.cleanLine_(),this.currentLine.length>0&&this.newline(e)},r.prototype.newlineIfNonEmptyOrListItem=function(e){this.cleanLine_(),(this.currentLine.length>0||this.currentLineListItemType!==null)&&this.newline(e)},r.prototype.newline=function(t){this.cleanLine_();var n=t.lineFormatting;this.currentLineListItemType!==null&&(n=n.listItem(this.currentLineListItemType),this.currentLineListItemType=null),this.lines.push(e.Line(this.currentLine,n)),this.currentLine=[]},r.prototype.makeListItem=function(e){this.currentLineListItemType=e},r.prototype.cleanLine_=function(){if(this.currentLine.length>0){var e=this.currentLine.length-1;this.currentLine[0].text=this.currentLine[0].text.replace(/^ +/,""),this.currentLine[e].text=this.currentLine[e].text.replace(/ +$/g,"");for(var t=0;t<this.currentLine.length;t++)this.currentLine[t].text=this.currentLine[t].text.replace(/\u00a0/g," ")}this.currentLine.length===1&&this.currentLine[0].text===""&&(this.currentLine=[])};var i,o=o||{ELEMENT_NODE:1,TEXT_NODE:3};return s}();var e=e||{};e.SerializeHtml=function(){function s(e){return e===r.ORDERED?"<ol>":e===r.UNORDERED?"<ul>":'<ul class="firepad-todo">'}function o(e){return e===r.ORDERED?"</ol>":"</ul>"}function u(e,t){return e===t||e===r.TODO&&t===r.TODOCHECKED||e===r.TODOCHECKED&&t===r.TODO}function a(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\u00a0/g,"&nbsp;")}function f(f,l){var c="",h=!0,p=[],d=!1,v=!0,m=!0,g=0,y=f.ops[g],b=!1;while(y){t.assert(y.isInsert());var w=y.attributes;if(h){h=!1;var E=0,S=null,x="left";n.LINE_SENTINEL in w&&(E=w[n.LINE_INDENT]||0,S=w[n.LIST_TYPE]||null,x=w[n.LINE_ALIGN]||"left"),S&&(E=E||1),d?(c+="</li>",d=!1):v||(m&&(c+="<br/>"),c+="</div>"),v=!1,t.assert(E>=0,"Indent must not be negative.");while(p.length>E||E===p.length&&S!==null&&!u(S,p[p.length-1]))c+=o(p.pop());while(p.length<E){var T=S||r.UNORDERED;b=S==r.TODO||S==r.TODOCHECKED||b,c+=s(T),p.push(T)}var N=x!=="left"?' style="text-align:'+x+'"':"";if(S){var C="";switch(S){case r.TODOCHECKED:C=' class="firepad-checked"';break;case r.TODO:C=' class="firepad-unchecked"'}c+="<li"+C+N+">",d=!0}else c+="<div"+N+">";m=!0}if(n.LINE_SENTINEL in w){y=f.ops[++g];continue}if(n.ENTITY_SENTINEL in w){for(var k=0;k<y.text.length;k++){var L=e.Entity.fromAttributes(w),A=l.exportToElement(L);c+=A.outerHTML}y=f.ops[++g];continue}var O="",M="";for(var _ in w){var D=w[_],P,H;_===n.BOLD||_===n.ITALIC||_===n.UNDERLINE||_===n.STRIKE?(t.assert(D===!0),P=H=_):_===n.FONT_SIZE?(P='span style="font-size: '+D,P+=typeof D!="string"||D.indexOf("px",D.length-2)===-1?'px"':'"',H="span"):_===n.FONT?(P='span style="font-family: '+D+'"',H="span"):_===n.COLOR?(P='span style="color: '+D+'"',H="span"):_===n.BACKGROUND_COLOR?(P='span style="background-color: '+D+'"',H="span"):t.log(!1,"Encountered unknown attribute while rendering html: "+_),P&&(O+="<"+P+">"),H&&(M="</"+H+">"+M)}var B=y.text,j=B.indexOf("\n");j>=0?(h=!0,j<B.length-1?y=new e.TextOp("insert",B.substr(j+1),w):y=f.ops[++g],B=B.substr(0,j)):y=f.ops[++g],B=B.replace(/  +/g,function(e){return(new Array(e.length+1)).join(" ")}).replace(/^ /," ").replace(/ $/," "),B.length>0&&(m=!1),c+=O+a(B)+M}d?c+="</li>":v||(m&&(c+="&nbsp;"),c+="</div>");while(p.length>0)c+=o(p.pop());return b&&(c=i+c),c}var t=e.utils,n=e.AttributeConstants,r=e.LineFormatting.LIST_TYPE,i='<style>ul.firepad-todo { list-style: none; margin-left: 0; padding-left: 0; } ul.firepad-todo > li { padding-left: 1em; text-indent: -1em; } ul.firepad-todo > li:before { content: "\\2610"; padding-right: 5px; } ul.firepad-todo > li.firepad-checked:before { content: "\\2611"; padding-right: 5px; }</style>\n';return f}();var e=e||{};e.textPiecesToInserts=function(t,n){function i(n,i){n instanceof e.Text&&(i=n.formatting.attributes,n=n.text),r.push({string:n,attributes:i}),t=n[n.length-1]==="\n"}function s(n){t&&i(e.sentinelConstants.LINE_SENTINEL_CHARACTER,n.formatting.attributes);for(var r=0;r<n.textPieces.length;r++)i(n.textPieces[r]);i("\n")}var r=[];for(var o=0;o<n.length;o++)n[o]instanceof e.Line?s(n[o]):i(n[o]);return r};var e=e||{};e.Headless=function(){function s(e){if(!(this instanceof s))return new s(e);if(typeof e=="string"){if(typeof Firebase!="function")var t=require("firebase");else var t=Firebase;var i=new t(e)}else var i=e;this.adapter=new n(i),this.ready=!1,this.entityManager=new r}var t=e.TextOperation,n=e.FirebaseAdapter,r=e.EntityManager,i=e.ParseHtml;return s.prototype.getDocument=function(e){var t=this;if(t.ready)return e(t.adapter.getDocument());t.adapter.on("ready",function(){t.ready=!0,e(t.adapter.getDocument())})},s.prototype.getText=function(t){this.getDocument(function(n){var r=n.apply("");for(key in e.sentinelConstants)r=r.replace(new RegExp(e.sentinelConstants[key],"g"),"");t(r)})},s.prototype.setText=function(e,n){var r=t().insert(e);this.sendOperationWithRetry(r,n)},s.prototype.initializeFakeDom=function(t){typeof document=="object"||typeof e.document=="object"?t():require("jsdom").env("<head></head><body></body>",function(n,r){if(e.document)return r.close(),t();e.document=r.document,t()})},s.prototype.getHtml=function(t){var n=this;n.initializeFakeDom(function(){n.getDocument(function(r){t(e.SerializeHtml(r,n.entityManager))})})},s.prototype.setHtml=function(n,r){var s=this;s.initializeFakeDom(function(){var o=i(n,s.entityManager),u=e.textPiecesToInserts(!0,o),a=new t;for(var f=0;f<u.length;f++)a.insert(u[f].string,u[f].attributes);s.sendOperationWithRetry(a,r)})},s.prototype.sendOperationWithRetry=function(e,t){var n=this;n.getDocument(function(r){var i=e.clone()["delete"](r.targetLength);n.adapter.sendOperation(i,function(r,i){i?typeof t!="undefined"&&t(null,i):n.sendOperationWithRetry(e,t)})})},s}();var e=e||{};return e.Firepad=function(t){function d(e,i,f){if(!(this instanceof d))return new d(e,i,f);p=t.ace;if(!h&&!p)throw new Error("Couldn't find CodeMirror or ACE.  Did you forget to include codemirror.js or ace.js?");if(h&&i instanceof h){this.codeMirror_=this.editor_=i;var c=this.codeMirror_.getValue();if(c!=="")throw new Error("Can't initialize Firepad with a CodeMirror instance that already contains text.")}else if(p&&i&&i.session instanceof p.EditSession){this.ace_=this.editor_=i,c=this.ace_.getValue();if(c!=="")throw new Error("Can't initialize Firepad with an ACE instance that already contains text.")}else this.codeMirror_=this.editor_=new h(i);var m=this.codeMirror_?this.codeMirror_.getWrapperElement():this.ace_.container;this.firepadWrapper_=l.elt("div",null,{"class":"firepad"}),m.parentNode.replaceChild(this.firepadWrapper_,m),this.firepadWrapper_.appendChild(m),l.on(m,"dragstart",l.stopEvent),this.editor_.firepad=this,this.options_=f||{},this.getOption("richTextShortcuts",!1)&&(h.keyMap.richtext||this.initializeKeyMap_(),this.codeMirror_.setOption("keyMap","richtext"),this.firepadWrapper_.className+=" firepad-richtext"),this.imageInsertionUI=this.getOption("imageInsertionUI",!0),this.getOption("richTextToolbar",!1)&&(this.addToolbar_(),this.firepadWrapper_.className+=" firepad-richtext firepad-with-toolbar"),this.addPoweredByLogo_(),this.codeMirror_&&this.codeMirror_.refresh();var g=this.getOption("userId",e.push().key()),y=this.getOption("userColor",v(g));this.entityManager_=new a,this.firebaseAdapter_=new o(e,g,y),this.codeMirror_?(this.richTextCodeMirror_=new r(this.codeMirror_,this.entityManager_,{cssPrefix:"firepad-"}),this.editorAdapter_=new n(this.richTextCodeMirror_)):this.editorAdapter_=new s(this.ace_),this.client_=new u(this.firebaseAdapter_,this.editorAdapter_);var b=this;this.firebaseAdapter_.on("cursor",function(){b.trigger.apply(b,["cursor"].concat([].slice.call(arguments)))}),this.codeMirror_&&this.richTextCodeMirror_.on("newLine",function(){b.trigger.apply(b,["newLine"].concat([].slice.call(arguments)))}),this.firebaseAdapter_.on("ready",function(){b.ready_=!0,this.ace_&&this.editorAdapter_.grabDocumentState();var e=b.getOption("defaultText",null);e&&b.isHistoryEmpty()&&b.setText(e),b.trigger("ready")}),this.client_.on("synced",function(e){b.trigger("synced",e)}),navigator.appName=="Microsoft Internet Explorer"&&navigator.userAgent.match(/MSIE 8\./)&&(window.onload=function(){var e=document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",t.styleSheet.cssText=":before,:after{content:none !important;}",e.appendChild(t),setTimeout(function(){e.removeChild(t)},0)})}function v(e){var t=1;for(var n=0;n<e.length;n++)t=17*(t+e.charCodeAt(n))%360;var r=t/360;return g(r,1,.85)}function m(e,t,n){function r(e){var t=Math.round(255*e).toString(16);return t.length===1?"0"+t:t}return"#"+r(e)+r(t)+r(n)}function g(e,t,n){if(t===0)return m(n,n,n);var r=n<.5?n*(1+t):n+t-t*n,i=2*n-r,s=function(e){return e<0&&(e+=1),e>1&&(e-=1),6*e<1?i+(r-i)*6*e:2*e<1?r:3*e<2?i+(r-i)*6*(2/3-e):i};return m(s(e+1/3),s(e),s(e-1/3))}if(!e.RichTextCodeMirrorAdapter)throw new Error("Oops! It looks like you're trying to include lib/firepad.js directly.  This is actually one of many source files that make up firepad.  You want dist/firepad.js instead.");var n=e.RichTextCodeMirrorAdapter,r=e.RichTextCodeMirror,i=e.RichTextToolbar,s=e.ACEAdapter,o=e.FirebaseAdapter,u=e.EditorClient,a=e.EntityManager,f=e.AttributeConstants,l=e.utils,c=e.LineFormatting.LIST_TYPE,h=t.CodeMirror,p=t.ace;return l.makeEventEmitter(d),d.fromCodeMirror=d,d.fromACE=d,d.prototype.dispose=function(){this.zombie_=!0;var e=this.codeMirror_?this.codeMirror_.getWrapperElement():this.ace_.container;this.firepadWrapper_.removeChild(e),this.firepadWrapper_.parentNode.replaceChild(e,this.firepadWrapper_),this.editor_.firepad=null,this.codeMirror_&&this.codeMirror_.getOption("keyMap")==="richtext"&&this.codeMirror_.setOption("keyMap","default"),this.firebaseAdapter_.dispose(),this.editorAdapter_.detach(),this.richTextCodeMirror_&&this.richTextCodeMirror_.detach()},d.prototype.setUserId=function(e){this.firebaseAdapter_.setUserId(e)},d.prototype.setUserColor=function(e){this.firebaseAdapter_.setColor(e)},d.prototype.getText=function(){return this.assertReady_("getText"),this.codeMirror_?this.richTextCodeMirror_.getText():this.ace_.getSession().getDocument().getValue()},d.prototype.setText=function(e){if(this.ace_)return this.ace_.getSession().getDocument().setValue(e);this.codeMirror_.getWrapperElement().setAttribute("style","display: none"),this.codeMirror_.setValue(""),this.insertText(0,e),this.codeMirror_.getWrapperElement().setAttribute("style",""),this.codeMirror_.refresh(),this.editorAdapter_.setCursor({position:0,selectionEnd:0})},d.prototype.insertTextAtCursor=function(e){this.insertText(this.codeMirror_.indexFromPos(this.codeMirror_.getCursor()),e)},d.prototype.insertText=function(t,n){l.assert(!this.ace_,"Not supported for ace yet."),this.assertReady_("insertText"),Object.prototype.toString.call(n)!=="[object Array]"&&(n=[n]);var r=t===0,i=e.textPiecesToInserts(r,n);for(var s=0;s<i.length;s++){var o=i[s].string,u=i[s].attributes;this.richTextCodeMirror_.insertText(t,o,u),t+=o.length}},d.prototype.getOperationForSpan=function(t,n){var r=this.richTextCodeMirror_.getRange(t,n),i=this.richTextCodeMirror_.getAttributeSpans(t,n),s=0,o=new e.TextOperation;for(var u=0;u<i.length;u++)o.insert(r.substr(s,i[u].length),i[u].attributes),s+=i[u].length;return o},d.prototype.getHtml=function(){return this.getHtmlFromRange(null,null)},d.prototype.getHtmlFromSelection=function(){var e=this.codeMirror_.getCursor("start"),t=this.codeMirror_.getCursor("end"),n=this.codeMirror_.indexFromPos(e),r=this.codeMirror_.indexFromPos(t);return this.getHtmlFromRange(n,r)},d.prototype.getHtmlFromRange=function(t,n){var r=t!=null&&n!=null?this.getOperationForSpan(t,n):this.getOperationForSpan(0,this.codeMirror_.getValue().length);return e.SerializeHtml(r,this.entityManager_)},d.prototype.insertHtml=function(t,n){var r=e.ParseHtml(n,this.entityManager_);this.insertText(t,r)},d.prototype.insertHtmlAtCursor=function(e){this.insertHtml(this.codeMirror_.indexFromPos(this.codeMirror_.getCursor()),e)},d.prototype.setHtml=function(t){var n=e.ParseHtml(t,this.entityManager_);this.setText(n)},d.prototype.isHistoryEmpty=function(){return this.assertReady_("isHistoryEmpty"),this.firebaseAdapter_.isHistoryEmpty()},d.prototype.bold=function(){this.richTextCodeMirror_.toggleAttribute(f.BOLD),this.codeMirror_.focus()},d.prototype.italic=function(){this.richTextCodeMirror_.toggleAttribute(f.ITALIC),this.codeMirror_.focus()},d.prototype.underline=function(){this.richTextCodeMirror_.toggleAttribute(f.UNDERLINE),this.codeMirror_.focus()},d.prototype.strike=function(){this.richTextCodeMirror_.toggleAttribute(f.STRIKE),this.codeMirror_.focus()},d.prototype.fontSize=function(e){this.richTextCodeMirror_.setAttribute(f.FONT_SIZE,e),this.codeMirror_.focus()},d.prototype.font=function(e){this.richTextCodeMirror_.setAttribute(f.FONT,e),this.codeMirror_.focus()},d.prototype.color=function(e){this.richTextCodeMirror_.setAttribute(f.COLOR,e),this.codeMirror_.focus()},d.prototype.highlight=function(){this.richTextCodeMirror_.toggleAttribute(f.BACKGROUND_COLOR,"rgba(255,255,0,.65)"),this.codeMirror_.focus()},d.prototype.align=function(e){if(e!=="left"&&e!=="center"&&e!=="right")throw new Error('align() must be passed "left", "center", or "right".');this.richTextCodeMirror_.setLineAttribute(f.LINE_ALIGN,e),this.codeMirror_.focus()},d.prototype.orderedList=function(){this.richTextCodeMirror_.toggleLineAttribute(f.LIST_TYPE,"o"),this.codeMirror_.focus()},d.prototype.unorderedList=function(){this.richTextCodeMirror_.toggleLineAttribute(f.LIST_TYPE,"u"),this.codeMirror_.focus()},d.prototype.todo=function(){this.richTextCodeMirror_.toggleTodo(),this.codeMirror_.focus()},d.prototype.newline=function(){this.richTextCodeMirror_.newline()},d.prototype.deleteLeft=function(){this.richTextCodeMirror_.deleteLeft()},d.prototype.deleteRight=function(){this.richTextCodeMirror_.deleteRight()},d.prototype.indent=function(){this.richTextCodeMirror_.indent(),this.codeMirror_.focus()},d.prototype.unindent=function(){this.richTextCodeMirror_.unindent(),this.codeMirror_.focus()},d.prototype.undo=function(){this.codeMirror_.undo()},d.prototype.redo=function(){this.codeMirror_.redo()},d.prototype.insertEntity=function(e,t,n){this.richTextCodeMirror_.insertEntityAtCursor(e,t,n)},d.prototype.insertEntityAt=function(e,t,n,r){this.richTextCodeMirror_.insertEntityAt(e,t,n,r)},d.prototype.registerEntity=function(e,t){this.entityManager_.register(e,t)},d.prototype.getOption=function(e,t){return e in this.options_?this.options_[e]:t},d.prototype.assertReady_=function(e){if(!this.ready_)throw new Error('You must wait for the "ready" event before calling '+e+".");if(this.zombie_)throw new Error("You can't use a Firepad after calling dispose()!")},d.prototype.makeImageDialog_=function(){this.makeDialog_("img","Insert image url")},d.prototype.makeDialog_=function(e,t){var n=this,r=function(){var e=document.getElementById("overlay");e.style.visibility="hidden",n.firepadWrapper_.removeChild(e)},i=function(){var t=document.getElementById("overlay");t.style.visibility="hidden";var r=document.getElementById(e).value;r!==null&&n.insertEntity(e,{src:r}),n.firepadWrapper_.removeChild(t)},s=l.elt("input",null,{"class":"firepad-dialog-input",id:e,type:"text",placeholder:t,autofocus:"autofocus"}),o=l.elt("a","Submit",{"class":"firepad-btn",id:"submitbtn"});l.on(o,"click",l.stopEventAnd(i));var u=l.elt("a","Cancel",{"class":"firepad-btn"});l.on(u,"click",l.stopEventAnd(r));var a=l.elt("div",[o,u],{"class":"firepad-btn-group"}),f=l.elt("div",[s,a],{"class":"firepad-dialog-div"}),c=l.elt("div",[f],{"class":"firepad-dialog",id:"overlay"});this.firepadWrapper_.appendChild(c)},d.prototype.addToolbar_=function(){this.toolbar=new i(this.imageInsertionUI),this.toolbar.on("undo",this.undo,this),this.toolbar.on("redo",this.redo,this),this.toolbar.on("bold",this.bold,this),this.toolbar.on("italic",this.italic,this),this.toolbar.on("underline",this.underline,this),this.toolbar.on("strike",this.strike,this),this.toolbar.on("font-size",this.fontSize,this),this.toolbar.on("font",this.font,this),this.toolbar.on("color",this.color,this),this.toolbar.on("left",function(){this.align("left")},this),this.toolbar.on("center",function(){this.align("center")},this),this.toolbar.on("right",function(){this.align("right")},this),this.toolbar.on("ordered-list",this.orderedList,this),this.toolbar.on("unordered-list",this.unorderedList,this),this.toolbar.on("todo-list",this.todo,this),this.toolbar.on("indent-increase",this.indent,this),this.toolbar.on("indent-decrease",this.unindent,this),this.toolbar.on("insert-image",this.makeImageDialog_,this),this.firepadWrapper_.insertBefore(this.toolbar.element(),this.firepadWrapper_.firstChild)},d.prototype.addPoweredByLogo_=function(){var e=l.elt("a",null,{"class":"powered-by-firepad"});e.setAttribute("href","http://www.firepad.io/"),e.setAttribute("target","_blank"),this.firepadWrapper_.appendChild(e)},d.prototype.initializeKeyMap_=function(){function e(e){return function(t){setTimeout(function(){e.call(t.firepad)},0)}}h.keyMap.richtext={"Ctrl-B":e(this.bold),"Cmd-B":e(this.bold),"Ctrl-I":e(this.italic),"Cmd-I":e(this.italic),"Ctrl-U":e(this.underline),"Cmd-U":e(this.underline),"Ctrl-H":e(this.highlight),"Cmd-H":e(this.highlight),Enter:e(this.newline),Delete:e(this.deleteRight),Backspace:e(this.deleteLeft),Tab:e(this.indent),"Shift-Tab":e(this.unindent),fallthrough:["default"]}},d}(this),e.Firepad.Formatting=e.Formatting,e.Firepad.Text=e.Text,e.Firepad.Entity=e.Entity,e.Firepad.LineFormatting=e.LineFormatting,e.Firepad.Line=e.Line,e.Firepad.TextOperation=e.TextOperation,e.Firepad.Headless=e.Headless,e.Firepad.RichTextCodeMirrorAdapter=e.RichTextCodeMirrorAdapter,e.Firepad.ACEAdapter=e.ACEAdapter,e.Firepad},this),define("../server/login",["require","exports","module","events","idleDefer","../server/firepad","statusBar","../server/update_menu","../server/message_box"],function(e,t,n){function S(){y=document.getElementById("login-content");if(!y)throw Error("Could not find login-content tag");m=document.getElementById("login");if(!m)throw Error("Could not find login tag");var e=GLOBAL.firepadObj.getAuth();e&&B(e.password.email),g=document.getElementById("signup"),i.addListener(m,"click",function(){var e=this;return function(e){function u(e){var t=e.keyCode||e.which;t==13&&l()}function l(){if(!s.value){A();return}A(!0);if(!o.value){O();return}O(!0),_("Logging in..."),T(E,s.value,o.value,function(e){if(e.result){if(!e.authData){_(e.msg);return}B(s.value)}else _(r.msg)})}if(m.innerHTML.indexOf("@")>=0){j(),f.remove(),GLOBAL.firepadObj.unauth();return}e=i.fixEvent(e),e.preventDefault();var t=c;GLOBAL.loginHeader?t=t.replace("{{LoginHeader}}",GLOBAL.loginHeader):t=t.replace("{{LoginHeader}}","Log in"),GLOBAL.loginHeader="",GLOBAL.isFromSaveButton=!1,y.innerHTML=t,a=y;var n=document.getElementById("dialog-login"),s=document.getElementById("login-email"),o=document.getElementById("login-password");i.addListener(n,"click",function(e){e=i.fixEvent(e),e.preventDefault(),e.srcElement||(e.srcElement=e.target);var t=document.getElementById("login-re-password"),n=document.getElementById("login-new-password");if(e.srcElement.id==="login-cancel")H();else if(e.srcElement.id==="login-ok")l();else if(e.srcElement.id==="login-register")P();else if(e.srcElement.id==="login-change-password"){var r=s.value,u=o.value;F(r,u)}else if(e.srcElement.id==="login-reset-password"){if(!s.value){A(!1);return}A(!0),k(E,s.value)}else if(e.srcElement.id==="login-delete"){if(!s.value){alert("please enter email.");return}if(!o.value){alert("please passsword.");return}L(E,s.value,o.value)}}),$(s).bind("keydown",u),$(o).bind("keydown",u)}}.call(this)),g&&i.addListener(g,"click",function(){var e=this;return function(e){if(m.innerHTML.indexOf("Logout")>=0){m.innerHTML="Login";return}e=i.fixEvent(e),e.preventDefault(),e.srcElement||(e.srcElement=e1.target),y.innerHTML=h,a=y;var t=document.getElementById("dialog-signup");i.addListener(t,"click",function(e){e=i.fixEvent(e),e.preventDefault(),e.srcElement||(e.srcElement=e.target);var t=document.getElementById("login-email"),n=document.getElementById("login-password"),r=document.getElementById("signup-re-password"),s=document.getElementById("signup-new-password");if(e.srcElement.id==="signup-cancel")H();else if(e.srcElement.id==="signup-register"){if(!t.value){A(!1);return}A(!0);if(!n.value){O();return}O(!0);if(!r.value){M(!1,"Please re-type the password.");return}O(!0);if(r.value!==n.value){M(!1,"The passwords do not match.");return}M(!0),x(E,t.value,n.value,function(e){e.result?(D(e.msg),T(E,t.value,n.value,function(e){e.result&&B(t.value)})):_(e.msg)})}else if(e.srcElement.id==="login-change-password"){if(!t.value){alert("please enter email.");return}if(!n.value){alert("please passsword.");return}if(!r.value){alert("please renter passsword.");return}if(n.value!==r.value){alert("Password does not match!");return}C(ref,t.value,t.value,t.value)}else if(e.srcElement.id==="login-reset-password"){if(!t.value){alert("please enter email.");return}k(E,t.value)}else if(e.srcElement.id==="login-delete"){if(!t.value){alert("please enter email.");return}if(!n.value){alert("please passsword.");return}L(E,t.value,n.value)}})}}.call(this)),GLOBAL.resetPassRequest&&(F(),GLOBAL.resetPassRequest=null,GLOBAL.resetPassTemp=null)}function x(e,t,n,r){e.createUser({email:t,password:n},function(e){e===null?r({result:!0,msg:"User created successfully"}):r({result:!1,msg:e.message})})}function T(e,t,n,r){e.authWithPassword({email:t,password:n},function(e,t){e===null?r({result:!0,authData:t}):r({result:!0,msg:e.message})})}function N(e){j(),f.remove(),GLOBAL.firepadObj.unauth(),$(document).trigger("loggedout")}function C(e,t,n,r,i){e.changePassword({email:t,oldPassword:n,newPassword:r},function(e){i&&i(e)})}function k(e,t){e.resetPassword({email:t},function(e){e===null?D("Password reset email sent successfully"):alert("Error sending password reset email:",e.message)})}function L(e,t,n){e.removeUser({email:t,password:n},function(e){e===null?alert("User removed successfully"):alert("Error removing user:",e.message)})}function A(e,t){var n=$("#login-email");n.addClass("required"),e?n.removeClass("required"):(n.addClass("required"),_(t||"Please enter a valid email address."))}function O(e,t){var n=$("#login-password");e?n.removeClass("required"):n.addClass("required");var n=$("#change-password");n.addClass("required"),e?n.removeClass("required"):(n.addClass("required"),_(t||"Please enter a password."))}function M(e,t){var n=$("#change-new-password");e?(n.removeClass("required"),_("")):(n.addClass("required"),_(t||"Please enter a new password."))}function _(e){var t=$("#loginMsg");t.text(e),o.show(e)}function D(e){_(e),o.show(e,{title:"Login"}),$(a).fadeOut(3e3,function(){H(),$(a).show()})}function P(){y.innerHTML=h,a=y;var e=document.getElementById("dialog-signup");i.addListener(e,"click",function(e){e=i.fixEvent(e),e.preventDefault(),e.srcElement||(e.srcElement=e.target);var t=document.getElementById("login-email"),n=document.getElementById("login-password"),r=document.getElementById("signup-re-password"),s=document.getElementById("signup-new-password");if(e.srcElement.id==="signup-cancel")H();else if(e.srcElement.id==="signup-register"){if(!t.value){A(!1);return}A(!0);if(!n.value){O();return}O(!0);if(!r.value){M(!1,"Please re-type the password.");return}O(!0);if(r.value!==n.value){M(!1,"The passwords do not match.");return}M(!0),x(E,t.value,n.value,function(e){e.result?(D(e.msg),T(E,t.value,n.value,function(e){e.result&&B(t.value)})):_(e.msg)})}else if(e.srcElement.id==="login-change-password"){if(!t.value){A(!1);return}if(!n.value){O();return}if(!r.value){M(!1,"Please re-type the password.");return}if(n.value!==r.value){M(!1,"Password does not match!.");return}C(ref,t.value,t.value,t.value,function(e){if(e===null){var t="Password change successful.";D(t)}else _(e.message)})}else if(e.srcElement.id==="login-reset-password"){if(!t.value){alert("please enter email.");return}k(E,t.value)}else if(e.srcElement.id==="login-delete"){if(!t.value){alert("please enter email.");return}if(!n.value){alert("please passsword.");return}L(E,t.value,n.value)}})}function H(){a&&(a.innerHTML="")}function B(e){function t(){function e(t){return F(),t.preventDefault(),$("#login-change-password").unbind("click",e),$(y).unbind("mouseenter",r),$(y).unbind("mouseleave",i),!1}function t(e){return u(),N(),!1}y.innerHTML=d,a=y,s.clear("closeLogoutMenu"),$("#login-change-password").bind("click",e),$("#login-logout").bind("click",t),$(y).bind("mouseenter",r),$(y).bind("mouseleave",i)}function n(){o()}function r(){s.clear("closeLogoutMenu")}function i(){o()}function o(){s.defer("closeLogoutMenu",200,function(){y.innerHTML=""})}function u(){$(y).unbind("mouseenter",r),$(y).unbind("mouseleave",i),$(m).unbind("mouseenter",t),$(m).unbind("mouseleave",n),y.innerHTML=""}v=e,m.innerHTML=""+e+"",m.setAttribute("class","logout"),H(),$(m).bind("mouseenter",t).bind("mouseleave",n),B.unbind=u,f.update()}function j(){m.innerHTML="",m.setAttribute("class","login"),B.unbind&&B.unbind()}function F(e,t){y.innerHTML=p,a=y;var n=document.getElementById("dialog-changePass");GLOBAL.resetPassRequest&&(v=e=GLOBAL.resetPassRequest),GLOBAL.resetPassTemp&&(document.getElementById("change-password").value=GLOBAL.resetPassTemp),i.addListener(n,"click",function(e){e=i.fixEvent(e),e.preventDefault(),e.srcElement||(e.srcElement=e.target);if(e.srcElement.id==="change-cancel")H();else if(e.srcElement.id==="change-send"){var t=document.getElementById("change-email"),n=document.getElementById("change-password"),r=document.getElementById("change-new-password"),s=document.getElementById("change-re-password"),o=v,u=n.value,a=r.value,f=s.value;if(!o){A(!1);return}A(!0);if(!u){O(!1);return}O(!0);if(!a){M(!1);return}M(!0);if(a!==f){M(!1,"New passwords dont match");return}M(!0),C(E,o,u,a,function(e){if(e===null){var t="Password changed successfully.";D(t)}else O(!1,e.message)})}})}function I(e,t,n,r){dataRef.authWithCustomToken(e,function(e,t){e?console.log("Login Failed!",e):console.log("Authenticated successfully with payload:",t)})}function q(e){var t=new Firebase("https://jscharting.firebaseio.com/samples"),n=t.push();n.set({user_id:"fred",sample:"new sample!"})}function R(){var e=new Firebase("https://samplechat.firebaseio-demo.com/users/fred/name");e.update({first:"Fred",last:"Flintstone"});var t=function(e){e?console.log("Synchronization failed"):console.log("Synchronization succeeded")};e.update({first:"Wilma",last:"Flintstone"},t);var n=new Firebase("https://samplechat.firebaseio-demo.com/users/fred");n.update({name:{first:"Fred",last:"Flintstone"}}),n.child("name").set({first:"Fred",last:"Flintstone"})}var i=e("events"),s=e("idleDefer");e("../server/firepad");var o=e("statusBar"),u={},a,f=e("../server/update_menu"),l=e("../server/message_box"),c='<div><div id="dialog-login" ><label id="dialog-header">{{LoginHeader}}</label><label for="name"  id="login-email-label">Email:</label><input type="text" name="email" id="login-email" class="" /><label for="password" id="login-password-label">Password:</label><input type="password" name="password" id="login-password" value="" class="" /><div id="loginMsg"></div><div id="login-cancel" value="Cancel" class="" >X</div><input type="button" id="login-ok" value="Login" class="" /><a href="" id="login-register" title="Signup for a new account.">Register</a><a href="" id="login-reset-password" title="A new password will be generated and emailed.">Reset Password</a></div></div>',h='<div><div id="dialog-signup" ><label id="dialog-header">Register</label><label for="name"  id="login-email-label">Email:</label><input type="text" name="email" id="login-email" class="" /><label for="password" id="login-password-label">Password:</label><input type="password" name="password" id="login-password" value="" class="" /><label for="re-password" id="signup-re-password-label">Confirm Password:</label><input type="password" name="re-password" id="signup-re-password" value="" class="" /><div id="loginMsg" class="register"></div><div id="signup-cancel" value="Cancel" class="" >X</div><input type="button" id="signup-register" value="Register" class="" /></div></div>',p='<div><div id="dialog-changePass" title="Change password"><label id="dialog-header">Update Login</label><label for="password" id="change-password-label">Password:</label><input type="password" name="password" id="change-password" value="" class="" /><label for="new-password" id="change-new-password-label">New-Password:</label><input type="password" name="new-password" id="change-new-password" value="" class="" /><label for="re-password" id="signup-re-password-label">Confirm Password:</label><input type="password" name="re-password" id="change-re-password" value="" class="" /><div id="change-cancel" value="Cancel" class="" >X</div><div id="loginMsg" class="register"></div><input type="button" id="change-send" value="Save" class="" /></div></div>',d='<div><div id="dialog-cpOption" ><a href="" id="login-change-password" title="Change your password." >Change Password </a><a href="" id="login-logout" title="Change your password." >Logout</a></div></div>',v,m,g,y,b,w,E=new Firebase("https://jscharting.firebaseio.com/");GLOBAL.firepadObj=E,t.createUser=x,t.login=T,t.init=S,t.closeDialog=H}),define("../server/share",["require","exports","module","events","menu","load_editor"],function(e,t,n){function l(){c(),u=document.getElementById("share"),r.addListener(u,"click",function(){var e=this;return function(e){e=r.fixEvent(e),e.preventDefault();var t=document.getElementById("login-content");t.innerHTML=o;var n=document.getElementById("share-url"),i=document.getElementById("dialog-share");h(function(e){e?n.value=e.message:(n.value="http://JSCharting.com/editor/index.htm#c="+f.key(),n.setSelectionRange(0,n.value.length))}),r.addListener(i,"click",function(e){e=r.fixEvent(e),e.preventDefault(),e.srcElement||(e.srcElement=e.target),e.srcElement.id==="share-close"?t.innerHTML="":e.srcElement.id==="share-Load"})}}.call(this))}function c(){GLOBAL.sharedSampleFirebase&&((new Firebase("https://jscharting.firebaseio.com/shared/"+GLOBAL.sharedSampleFirebase)).once("value",function(e){var t=e.val();i.setFileName(-1,t.baseSampleName),s.loadSample(t.page),GLOBAL.sharedSampleFirebase=null}),sharedSampleFirebase=null)}function h(e){var t=new Firebase("https://jscharting.firebaseio.com/shared");f=t.push({baseSampleName:GLOBAL.currentSampleName,page:GLOBAL.aceEditor.getSession().getValue()},e)}var r=e("events"),i=e("menu"),s=e("load_editor"),o='<div id="dialog-share" title="Share the sample."><label  id="dialog-header">Share Link</label><input type="input" id="share-url" value="" class="" /><div id="share-close" value="Cancel" class="" >X</div></div>',u,a,f;t.init=l}),define("main",["require","exports","module","es5_shim","global","events","menu","build_ui","strings","../server/login","../server/share","statusBar","statusBar","idleDefer","eventHandlers"],function(e,t,n){function m(){return typeof window.orientation!="undefined"?!0:!1}function g(){return navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1}function y(){var e;if($("html").is(".ie6, .ie7, .ie8"))return!0}function b(){var e=u.tooltips;e.UIToggleButton&&$("#switchUI").attr("title",e.UIToggleButton),e.UIToggleDocs&&$("#switchDocs").attr("title",e.UIToggleDocs),e.SampleDropdown&&$("#menuFilename").attr("title",e.SampleDropdown),e.JavascriptTab&&$("#JavaScriptTab").attr("title",e.JavascriptTab),e.AllCodeTab&&$("li#codeTabCode").find("span").attr("title",e.AllCodeTab),e.DocumentationTab&&$("ul#docWarningTab").find('span:contains("Documentation")').attr("title",e.DocumentationTab),e.WarningsTab&&$("#warningTab").attr("title",e.WarningsTab),e.FullUITab&&$("li#li_fullView").find("span").attr("title",e.FullUITab),e.DocsSliderButton&&$("a#sideDocButton").attr("title",e.DocsSliderButton),e.UISliderButton&&$("a#sideUIButton").attr("title",e.UISliderButton),u.other.UIDisabled&&$("span.uiDisabledMessage").html(u.other.UIDisabled)}var r=g();e("es5_shim"),e("global");var i=e("events"),s=e("menu"),o=e("build_ui"),u=e("strings").presets,a=u.deferTiming,f=e("../server/login"),l=e("../server/share"),c=y();m()&&$("#modalDiag").show().bind("click",function(){$("#modalDiag").hide()});if(c){var h=$("#modalText").html("JSCharting Editor is not supported on this browser; please utilize a modern browser to experience the full power and functionality of the web based Editor.");$(".modalOkButton").html("Open<br/>"+GLOBAL.currentSampleName+"<br/>Directly"),$("#modalDiag").show().bind("click",function(){window.location="../Samples/"+GLOBAL.currentSampleName});return}var p=document.body,d;window.addEventListener("scroll",function(){clearTimeout(d),p.classList.contains("disable-hover")||p.classList.add("disable-hover"),d=setTimeout(function(){p.classList.remove("disable-hover")},500)},!1);var v=function(){e("statusBar").init(),e("statusBar").clear(),window.addEventListener("mousemove",function(t){t=i.fixEvent(t);var n="UiHover";e("idleDefer").defer(n,a[n],function(){e("eventHandlers").reportAction(t.target,"hover")})}),b(),s.init(function(){f.init(),l.init()})};v()}),requirejs.config({baseUrl:"js/lib",waitSeconds:3e4,paths:{app:"../app"}}),requirejs(["main"],function(e){}),define("config",function(){});