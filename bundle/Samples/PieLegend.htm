<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text-html; charset=utf-8"/>
<script type="text/javascript" src="../JSC/jquery-latest.min.js"></script>
<script type="text/javascript" src="../JSC/JSCharting.js"></script>



		<title>JSCharting  Pie Legend Chart</title>
		  <style type="text/css"></style>
	</head>
	<body>
	Click the pie slices to toggle series visibility.
<div id="cc" style="width: 840px; height: 594">
</div>
	
<script type="text/javascript">
/*
Uses a pie series as a legend that lets you toggle series visibility by interacting with the pie summary.
Learn how to:

  - Use an interactive pie as a legend.
*/
// JS
function xAxisFormatter(val){
    return JSC.formatString(new Date(2000,val,1),'MMM');
}
var sumSeries = {
    name:'Summary',type:'pie',
    defaultPoint:{
        tooltip:'%name <b>%yValue</b><br/>{%percentOfSeries:n1}% of Total',
        labelText:'%name <br/>[%yValue | {%percentOfSeries:n1}%]',
        labelLineLength:3,
        labelStyle:{fontSize:12}
    },
cursor:'pointer',
    shape:{center:'200,100',size:110},
    points:[
        {name:'Purchases',y:948.9,color:'#E51E19',id:'purchases'},
        {name:'Taxes',y:909.9,color:'#FC7529'},
        {name:'Supplies',y:818.9,color:'#F9F23D'},
        {name:'Rent',y:598.9,color:'#8DEA55'}

    ]
};

var chart = new JSC.Chart({
  targetElement: 'cc',
  defaultSeries: { type: 'area', transparency: 0.15  },
  palette: 'fiveColor32',
  yAxisScaleType: 'stacked',
  defaultPointLabelOffset: 15,
  height: 594,
  yAxisFormatString: 'c',
  yAxisLabelText: 'Cost (USD)',
  defaultPoint: { markerSize: 7  },
  marginRight: 20,
  legendDefaultEntryStyleFontSize: 13,
  yAxisDefaultTickLabelStyleFontSize: 14,
  xAxisDefaultTickLabelStyleFontSize: 16,
  xAxisDefaultTickLabelOffset: '0,20',
  yAxisLabelStyleFontSize: 17,
  xAxisLabelStyleFontSize: 17,
  titleLabelStyleFontSize: 16,
  defaultPointEventsClick: toggleSer,
  xAxis: {
    labelText: '2014',
    scale: {interval: 1,rangePadding: 0.0001 },
    defaultTickLabelText: xAxisFormatter
  },
  legend: {
    defaultEntryText: ' %name [%sum | {%percentOfTotal:n1}%]',
    defaultEntryWidth: 210,
    width: 420,
    layout: 'horizontal',
    boxVisible: false,
    position: 'CA:1,1',
    visible: false
  },
  defaultPointTooltip: '%seriesName <b>%yValue</b><br/>{%percentOfGroup:n1}% of this month\'s cost<br/>{%percentOfTotal:n1}% of 2014 cost',
  titleLabelText: 'XYZ Inc 2014 Cost Chart. Total Costs (%sum)',
  series: [
    {
      name: 'Purchases',
      id: 'pur',
      points: [
        [ 0, 19.9  ],
        [ 1, 29.9  ],
        [ 2, 71.5  ],
        [ 3, 96.4  ],
        [ 4, 129.2  ],
        [ 5, 144.0  ],
        [ 6, 176.0  ],
        [ 7, 126.0  ],
        [ 8, 156.0  ]
      ]
    },
    {
      name: 'Taxes',
      id: 'tax',
      points: [
        [ 0, 13.9  ],
        [ 1, 86.9  ],
        [ 2, 89.5  ],
        [ 3, 106.4  ],
        [ 4, 97.2  ],
        [ 5, 123.0  ],
        [ 6, 111.0  ],
        [ 7, 126.0  ],
        [ 8, 156.0  ]
      ]
    },
    {
      name: 'Supplies',
      id: 'sup',
      points: [
        [ 0, 39.9  ],
        [ 1, 129.9  ],
        [ 2, 111.5  ],
        [ 3, 66.4  ],
        [ 4, 29.2  ],
        [ 5, 88.0  ],
        [ 6, 102.0  ],
        [ 7, 126.0  ],
        [ 8, 126.0  ]
      ]
    },
    {
      name: 'Rent',
      id: 'ren',
      points: [
        [ 0, 59.9  ],
        [ 1, 56.9  ],
        [ 2, 56.5  ],
        [ 3, 56.4  ],
        [ 4, 56.2  ],
        [ 5, 75.0  ],
        [ 6, 56.0  ],
        [ 7, 56.0  ],
        [ 8, 126.0  ]
      ]
    },
    sumSeries
  ],
  defaultPointLabelStyleFontSize: 12
});

function toggleSer(e){
    if(this.series.name ==='Summary'){
        var id,isVis;
        switch(this.name){
            case 'Purchases':id='pur';break;
            case 'Taxes':id='tax';break;
            case 'Supplies':id='sup';break;
            case 'Rent':id='ren';break;
        }

        var s = chart.get(id);
        if(s){isVis = s.show();this.explode();  }

    }

}


</script>
	</body>
</html>