<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text-html; charset=utf-8"/>
<script type="text/javascript" src="../JSC/jquery-latest.min.js"></script>
<script type="text/javascript" src="../JSC/JSCharting.js"></script>



		<title>JSCharting Interactive Master Detail Chart Chart</title>
		  <style type="text/css">/*CSS*/</style>
	</head>
	<body>
	<div id="masterChart" style="width: 640px; height: 400px;  margin: 0px auto;">
</div>
<div id="detailsChart" style="width: 640px; height: 400px;  margin: 0px auto;">
</div>
	
<script type="text/javascript">
/*
Control a second detail chart by clicking on the master chart.
Learn how to:

  - Use click events to interact with the chart to show details.
*/
// JS
var chart2;

var json = {
  targetElement: 'masterChart',
  type: 'column',
  xAxisScaleType: 'time',
  legendVisible: false,
  titleLabelText: 'Master Chart 2015',
  xAxisFormatString: 'MMM',
  defaultPointEventsClick: pointClick,
  defaultSeriesPointSelection: true,
  series: [ {name: 'All Months',palette: 'default' }  ]
};
json.series[0].points=getSumData();

var chart = new JSC.Chart(json, function(){
    processChart(0,JSC.getPalette('default')[0]);
    /*Select the first point in this chart*/
    this.getSeries()[0].points[0].select(true);
});

function getData(month){
    var data = JSC.pointsFromArray('x,y',[['1/1/2015',175],['1/2/2015',178],['1/3/2015',163],['1/4/2015',151],['1/5/2015',153],['1/6/2015',134],['1/7/2015',119],['1/8/2015',109],['1/9/2015',98],['1/10/2015',116],['1/11/2015',133],['1/12/2015',114],['1/13/2015',102],['1/14/2015',113],['1/15/2015',99],['1/16/2015',101],['1/17/2015',109],['1/18/2015',99],['1/19/2015',108],['1/20/2015',111],['1/21/2015',122],['1/22/2015',111],['1/23/2015',100],['1/24/2015',105],['1/25/2015',98],['1/26/2015',110],['1/27/2015',105],['1/28/2015',108],['1/29/2015',102],['1/30/2015',82],['1/31/2015',89],['2/1/2015',95],['2/2/2015',92],['2/3/2015',95],['2/4/2015',113],['2/5/2015',133],['2/6/2015',149],['2/7/2015',138],['2/8/2015',130],['2/9/2015',134],['2/10/2015',140],['2/11/2015',149],['2/12/2015',150],['2/13/2015',167],['2/14/2015',181],['2/15/2015',196],['2/16/2015',183],['2/17/2015',185],['2/18/2015',181],['2/19/2015',161],['2/20/2015',153],['2/21/2015',168],['2/22/2015',164],['2/23/2015',160],['2/24/2015',158],['2/25/2015',148],['2/26/2015',163],['2/27/2015',146],['2/28/2015',130],['3/1/2015',128],['3/2/2015',138],['3/3/2015',129],['3/4/2015',136],['3/5/2015',118],['3/6/2015',132],['3/7/2015',133],['3/8/2015',124],['3/9/2015',136],['3/10/2015',126],['3/11/2015',131],['3/12/2015',126],['3/13/2015',134],['3/14/2015',143],['3/15/2015',149],['3/16/2015',157],['3/17/2015',169],['3/18/2015',166],['3/19/2015',172],['3/20/2015',188],['3/21/2015',180],['3/22/2015',168],['3/23/2015',160],['3/24/2015',166],['3/25/2015',165],['3/26/2015',159],['3/27/2015',170],['3/28/2015',177],['3/29/2015',193],['3/30/2015',170],['3/31/2015',153],['4/1/2015',142],['4/2/2015',133],['4/3/2015',143],['4/4/2015',149],['4/5/2015',168],['4/6/2015',173],['4/7/2015',190],['4/8/2015',175],['4/9/2015',162],['4/10/2015',174],['4/11/2015',184],['4/12/2015',195],['4/13/2015',165],['4/14/2015',151],['4/15/2015',163],['4/16/2015',165],['4/17/2015',164],['4/18/2015',161],['4/19/2015',141],['4/20/2015',149],['4/21/2015',156],['4/22/2015',141],['4/23/2015',143],['4/24/2015',151],['4/25/2015',163],['4/26/2015',182],['4/27/2015',170],['4/28/2015',162],['4/29/2015',181],['4/30/2015',171],['5/1/2015',155],['5/2/2015',165],['5/3/2015',159],['5/4/2015',140],['5/5/2015',156],['5/6/2015',164],['5/7/2015',144],['5/8/2015',125],['5/9/2015',139],['5/10/2015',151],['5/11/2015',141],['5/12/2015',155],['5/13/2015',159],['5/14/2015',146],['5/15/2015',135],['5/16/2015',130],['5/17/2015',120],['5/18/2015',119],['5/19/2015',134],['5/20/2015',135],['5/21/2015',148],['5/22/2015',133],['5/23/2015',148],['5/24/2015',147],['5/25/2015',142],['5/26/2015',138],['5/27/2015',129],['5/28/2015',121],['5/29/2015',124],['5/30/2015',121],['5/31/2015',121],['6/1/2015',130],['6/2/2015',116],['6/3/2015',114],['6/4/2015',97],['6/5/2015',106],['6/6/2015',96],['6/7/2015',115],['6/8/2015',96],['6/9/2015',108],['6/10/2015',92],['6/11/2015',90],['6/12/2015',109],['6/13/2015',112],['6/14/2015',100],['6/15/2015',119],['6/16/2015',127],['6/17/2015',130],['6/18/2015',113],['6/19/2015',111],['6/20/2015',112],['6/21/2015',110],['6/22/2015',93],['6/23/2015',105],['6/24/2015',123],['6/25/2015',136],['6/26/2015',152],['6/27/2015',140],['6/28/2015',144],['6/29/2015',153],['6/30/2015',152],['7/1/2015',142],['7/2/2015',124],['7/3/2015',118],['7/4/2015',112],['7/5/2015',114],['7/6/2015',115],['7/7/2015',119],['7/8/2015',124],['7/9/2015',109],['7/10/2015',128],['7/11/2015',128],['7/12/2015',119],['7/13/2015',122],['7/14/2015',109],['7/15/2015',107],['7/16/2015',116],['7/17/2015',121],['7/18/2015',114],['7/19/2015',107],['7/20/2015',94],['7/21/2015',76],['7/22/2015',83],['7/23/2015',64],['7/24/2015',47],['7/25/2015',47],['7/26/2015',43],['7/27/2015',24],['7/28/2015',25],['7/29/2015',9],['7/30/2015',38],['7/31/2015',20],['8/1/2015',34],['8/2/2015',34],['8/3/2015',40],['8/4/2015',55],['8/5/2015',64],['8/6/2015',73],['8/7/2015',68],['8/8/2015',51],['8/9/2015',51],['8/10/2015',42],['8/11/2015',51],['8/12/2015',67],['8/13/2015',79],['8/14/2015',63],['8/15/2015',49],['8/16/2015',32],['8/17/2015',40],['8/18/2015',55],['8/19/2015',49],['8/20/2015',33],['8/21/2015',47],['8/22/2015',38],['8/23/2015',53],['8/24/2015',34],['8/25/2015',31],['8/26/2015',46],['8/27/2015',35],['8/28/2015',38],['8/29/2015',29],['8/30/2015',48],['8/31/2015',44],['9/1/2015',51],['9/2/2015',67],['9/3/2015',50],['9/4/2015',35],['9/5/2015',23],['9/6/2015',18],['9/7/2015',28],['9/8/2015',47],['9/9/2015',53],['9/10/2015',59],['9/11/2015',57],['9/12/2015',62],['9/13/2015',77],['9/14/2015',91],['9/15/2015',95],['9/16/2015',98],['9/17/2015',101],['9/18/2015',109],['9/19/2015',95],['9/20/2015',87],['9/21/2015',85],['9/22/2015',84],['9/23/2015',95],['9/24/2015',108],['9/25/2015',125],['9/26/2015',137],['9/27/2015',154],['9/28/2015',150],['9/29/2015',170],['9/30/2015',160],['10/1/2015',151],['10/2/2015',133],['10/3/2015',138],['10/4/2015',156],['10/5/2015',173],['10/6/2015',186],['10/7/2015',166],['10/8/2015',169],['10/9/2015',155],['10/10/2015',145],['10/11/2015',146],['10/12/2015',164],['10/13/2015',168],['10/14/2015',177],['10/15/2015',162],['10/16/2015',169],['10/17/2015',188],['10/18/2015',189],['10/19/2015',191],['10/20/2015',169],['10/21/2015',161],['10/22/2015',180],['10/23/2015',180],['10/24/2015',193],['10/25/2015',173],['10/26/2015',167],['10/27/2015',182],['10/28/2015',164],['10/29/2015',160],['10/30/2015',162],['10/31/2015',180],['11/1/2015',200],['11/2/2015',161],['11/3/2015',177],['11/4/2015',196],['11/5/2015',187],['11/6/2015',173],['11/7/2015',173],['11/8/2015',166],['11/9/2015',168],['11/10/2015',175],['11/11/2015',188],['11/12/2015',170],['11/13/2015',161],['11/14/2015',159],['11/15/2015',166],['11/16/2015',167],['11/17/2015',182],['11/18/2015',162],['11/19/2015',158],['11/20/2015',156],['11/21/2015',144],['11/22/2015',146],['11/23/2015',163],['11/24/2015',145],['11/25/2015',126],['11/26/2015',132],['11/27/2015',133],['11/28/2015',129],['11/29/2015',121],['11/30/2015',115],['12/1/2015',97],['12/2/2015',104],['12/3/2015',94],['12/4/2015',111],['12/5/2015',127],['12/6/2015',122],['12/7/2015',133],['12/8/2015',114],['12/9/2015',99],['12/10/2015',107],['12/11/2015',93],['12/12/2015',75],['12/13/2015',56],['12/14/2015',69],['12/15/2015',74],['12/16/2015',65],['12/17/2015',71],['12/18/2015',68],['12/19/2015',62],['12/20/2015',79],['12/21/2015',83],['12/22/2015',64],['12/23/2015',63],['12/24/2015',79],['12/25/2015',90],['12/26/2015',84],['12/27/2015',84],['12/28/2015',91],['12/29/2015',109],['12/30/2015',104],['12/31/2015',103]]);
var result = [];
    for (var i = 0, iLen = data.length; i < iLen; i++) {
        var point = data[i];
        if(new Date(Date.parse(point.x)).getMonth()===month){result.push(point);  }

    }
    return result;
}

function getSumData(){
    var sum;
    var result = [];
    for (var i = 0; i < 12; i++) {
        var mData = getData(i);
        var newPoint = {};
        newPoint.x=mData[0].x;
        sum=0;
        for (var p = 0, pLen = mData.length; p < pLen; p++) {var point = mData[p];sum+=point.y;  }
        newPoint.y=sum;
        result[i]=newPoint;
    }
    return result;
}

function pointClick(e){ processChart(this.x.getMonth(),this.color);}

function processChart(month,color)
{
    var tmpDate = new Date(2015,month,1);
    var mName = JSC.formatString(tmpDate,'MMMM')
    var series = {
        name:mName,
        id:'months',
        points:getData(month)
    };

    var points = series.points;
    for (var m = 0,mLen=points.length; m < mLen; m++) {
        points[m].color= color;
        points[m].x = new Date(Date.parse(points[m].x));
    }

    if(!chart2){
        chart2 = new JSC.Chart({
            "targetElement": "detailsChart",
            type:'column',
            titleLabelText:'Month of '+mName,
            defaultPointTooltip:'<b>%xValue</b> %yValue',
            legendVisible:false,
            series:[series]
        });
    }else{
        chart2.getSeries()[0].updatePoints(series.points );
        chart2.setTitle({labelText:'Month of '+mName});
    }
}


</script>
	</body>
</html>